/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var IT=Object.create;var Ci=Object.defineProperty;var TT=Object.getOwnPropertyDescriptor;var $T=Object.getOwnPropertyNames;var ET=Object.getPrototypeOf,AT=Object.prototype.hasOwnProperty;var In=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),nn=(e,t)=>{for(var r in t)Ci(e,r,{get:t[r],enumerable:!0})},sg=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of $T(t))!AT.call(e,n)&&n!==r&&Ci(e,n,{get:()=>t[n],enumerable:!(o=TT(t,n))||o.enumerable});return e};var mr=(e,t,r)=>(r=e!=null?IT(ET(e)):{},sg(t||!e||!e.__esModule?Ci(r,"default",{value:e,enumerable:!0}):r,e)),CT=e=>sg(Ci({},"__esModule",{value:!0}),e);var zm=In((Qq,b_)=>{"use strict";var Dm=Object.defineProperty,IP=Object.getOwnPropertyDescriptor,TP=Object.getOwnPropertyNames,$P=Object.prototype.hasOwnProperty,EP=(e,t)=>{for(var r in t)Dm(e,r,{get:t[r],enumerable:!0})},AP=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of TP(t))!$P.call(e,n)&&n!==r&&Dm(e,n,{get:()=>t[n],enumerable:!(o=IP(t,n))||o.enumerable});return e},CP=e=>AP(Dm({},"__esModule",{value:!0}),e),y_={};EP(y_,{SYMBOL_FOR_REQ_CONTEXT:()=>__,getContext:()=>PP});b_.exports=CP(y_);var __=Symbol.for("@vercel/request-context");function PP(){var t,r,o;return(o=(r=(t=globalThis[__])==null?void 0:t.get)==null?void 0:r.call(t))!=null?o:{}}});var Xa=In((eV,w_)=>{"use strict";var Fm=Object.defineProperty,OP=Object.getOwnPropertyDescriptor,NP=Object.getOwnPropertyNames,RP=Object.prototype.hasOwnProperty,jP=(e,t)=>{for(var r in t)Fm(e,r,{get:t[r],enumerable:!0})},MP=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of NP(t))!RP.call(e,n)&&n!==r&&Fm(e,n,{get:()=>t[n],enumerable:!(o=OP(t,n))||o.enumerable});return e},DP=e=>MP(Fm({},"__esModule",{value:!0}),e),x_={};jP(x_,{VercelOidcTokenError:()=>Um});w_.exports=DP(x_);var Um=class extends Error{constructor(t,r){super(t),this.name="VercelOidcTokenError",this.cause=r}toString(){return this.cause?`${this.name}: ${this.message}: ${this.cause}`:`${this.name}: ${this.message}`}}});var $_=In((tV,T_)=>{"use strict";var zP=Object.create,Qs=Object.defineProperty,UP=Object.getOwnPropertyDescriptor,FP=Object.getOwnPropertyNames,LP=Object.getPrototypeOf,ZP=Object.prototype.hasOwnProperty,qP=(e,t)=>{for(var r in t)Qs(e,r,{get:t[r],enumerable:!0})},k_=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of FP(t))!ZP.call(e,n)&&n!==r&&Qs(e,n,{get:()=>t[n],enumerable:!(o=UP(t,n))||o.enumerable});return e},Zm=(e,t,r)=>(r=e!=null?zP(LP(e)):{},k_(t||!e||!e.__esModule?Qs(r,"default",{value:e,enumerable:!0}):r,e)),VP=e=>k_(Qs({},"__esModule",{value:!0}),e),I_={};qP(I_,{findRootDir:()=>JP,getUserDataDir:()=>BP});T_.exports=VP(I_);var Qa=Zm(require("path")),GP=Zm(require("fs")),Lm=Zm(require("os")),S_=Xa();function JP(){try{let e=process.cwd();for(;e!==Qa.default.dirname(e);){let t=Qa.default.join(e,".vercel");if(GP.default.existsSync(t))return e;e=Qa.default.dirname(e)}}catch(e){throw new S_.VercelOidcTokenError("Token refresh only supported in node server environments")}throw new S_.VercelOidcTokenError("Unable to find root directory")}function BP(){if(process.env.XDG_DATA_HOME)return process.env.XDG_DATA_HOME;switch(Lm.default.platform()){case"darwin":return Qa.default.join(Lm.default.homedir(),"Library/Application Support");case"linux":return Qa.default.join(Lm.default.homedir(),".local/share");case"win32":return process.env.LOCALAPPDATA?process.env.LOCALAPPDATA:null;default:return null}}});var Vm=In((rV,O_)=>{"use strict";var HP=Object.create,el=Object.defineProperty,WP=Object.getOwnPropertyDescriptor,KP=Object.getOwnPropertyNames,YP=Object.getPrototypeOf,XP=Object.prototype.hasOwnProperty,QP=(e,t)=>{for(var r in t)el(e,r,{get:t[r],enumerable:!0})},E_=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of KP(t))!XP.call(e,n)&&n!==r&&el(e,n,{get:()=>t[n],enumerable:!(o=WP(t,n))||o.enumerable});return e},A_=(e,t,r)=>(r=e!=null?HP(YP(e)):{},E_(t||!e||!e.__esModule?el(r,"default",{value:e,enumerable:!0}):r,e)),eO=e=>E_(el({},"__esModule",{value:!0}),e),C_={};QP(C_,{assertVercelOidcTokenResponse:()=>qm,findProjectInfo:()=>nO,getTokenPayload:()=>iO,getVercelCliToken:()=>tO,getVercelDataDir:()=>P_,getVercelOidcToken:()=>rO,isExpired:()=>sO,loadToken:()=>aO,saveToken:()=>oO});O_.exports=eO(C_);var $o=A_(require("path")),Kr=A_(require("fs")),Yr=Xa(),tl=$_();function P_(){let e="com.vercel.cli",t=(0,tl.getUserDataDir)();return t?$o.join(t,e):null}function tO(){let e=P_();if(!e)return null;let t=$o.join(e,"auth.json");if(!Kr.existsSync(t))return null;let r=Kr.readFileSync(t,"utf8");return r?JSON.parse(r).token:null}async function rO(e,t,r){try{let o=`https://api.vercel.com/v1/projects/${t}/token?source=vercel-oidc-refresh${r?`&teamId=${r}`:""}`,n=await fetch(o,{method:"POST",headers:{Authorization:`Bearer ${e}`}});if(!n.ok)throw new Yr.VercelOidcTokenError(`Failed to refresh OIDC token: ${n.statusText}`);let i=await n.json();return qm(i),i}catch(o){throw new Yr.VercelOidcTokenError("Failed to refresh OIDC token",o)}}function qm(e){if(!e||typeof e!="object")throw new TypeError("Expected an object");if(!("token"in e)||typeof e.token!="string")throw new TypeError("Expected a string-valued token property")}function nO(){let e=(0,tl.findRootDir)();if(!e)throw new Yr.VercelOidcTokenError("Unable to find root directory");try{let t=$o.join(e,".vercel","project.json");if(!Kr.existsSync(t))throw new Yr.VercelOidcTokenError("project.json not found");let r=JSON.parse(Kr.readFileSync(t,"utf8"));if(typeof r.projectId!="string"&&typeof r.orgId!="string")throw new TypeError("Expected a string-valued projectId property");return{projectId:r.projectId,teamId:r.orgId}}catch(t){throw new Yr.VercelOidcTokenError("Unable to find project ID",t)}}function oO(e,t){try{let r=(0,tl.getUserDataDir)();if(!r)throw new Yr.VercelOidcTokenError("Unable to find user data directory");let o=$o.join(r,"com.vercel.token",`${t}.json`),n=JSON.stringify(e);Kr.mkdirSync($o.dirname(o),{mode:504,recursive:!0}),Kr.writeFileSync(o,n),Kr.chmodSync(o,432);return}catch(r){throw new Yr.VercelOidcTokenError("Failed to save token",r)}}function aO(e){try{let t=(0,tl.getUserDataDir)();if(!t)return null;let r=$o.join(t,"com.vercel.token",`${e}.json`);if(!Kr.existsSync(r))return null;let o=JSON.parse(Kr.readFileSync(r,"utf8"));return qm(o),o}catch(t){throw new Yr.VercelOidcTokenError("Failed to load token",t)}}function iO(e){let t=e.split(".");if(t.length!==3)throw new Yr.VercelOidcTokenError("Invalid token");let r=t[1].replace(/-/g,"+").replace(/_/g,"/"),o=r.padEnd(r.length+(4-r.length%4)%4,"=");return JSON.parse(Buffer.from(o,"base64").toString("utf8"))}function sO(e){return e.exp*1e3<Date.now()}});var j_=In((nV,R_)=>{"use strict";var Jm=Object.defineProperty,lO=Object.getOwnPropertyDescriptor,uO=Object.getOwnPropertyNames,cO=Object.prototype.hasOwnProperty,dO=(e,t)=>{for(var r in t)Jm(e,r,{get:t[r],enumerable:!0})},pO=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of uO(t))!cO.call(e,n)&&n!==r&&Jm(e,n,{get:()=>t[n],enumerable:!(o=lO(t,n))||o.enumerable});return e},mO=e=>pO(Jm({},"__esModule",{value:!0}),e),N_={};dO(N_,{refreshToken:()=>fO});R_.exports=mO(N_);var Gm=Xa(),zn=Vm();async function fO(){let{projectId:e,teamId:t}=(0,zn.findProjectInfo)(),r=(0,zn.loadToken)(e);if(!r||(0,zn.isExpired)((0,zn.getTokenPayload)(r.token))){let o=(0,zn.getVercelCliToken)();if(!o)throw new Gm.VercelOidcTokenError("Failed to refresh OIDC token: login to vercel cli");if(!e)throw new Gm.VercelOidcTokenError("Failed to refresh OIDC token: project id not found");if(r=await(0,zn.getVercelOidcToken)(o,e,t),!r)throw new Gm.VercelOidcTokenError("Failed to refresh OIDC token");(0,zn.saveToken)(r,e)}process.env.VERCEL_OIDC_TOKEN=r.token}});var z_=In((oV,D_)=>{"use strict";var Hm=Object.defineProperty,gO=Object.getOwnPropertyDescriptor,hO=Object.getOwnPropertyNames,vO=Object.prototype.hasOwnProperty,yO=(e,t)=>{for(var r in t)Hm(e,r,{get:t[r],enumerable:!0})},_O=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of hO(t))!vO.call(e,n)&&n!==r&&Hm(e,n,{get:()=>t[n],enumerable:!(o=gO(t,n))||o.enumerable});return e},bO=e=>_O(Hm({},"__esModule",{value:!0}),e),M_={};yO(M_,{getVercelOidcToken:()=>SO,getVercelOidcTokenSync:()=>Bm});D_.exports=bO(M_);var xO=zm(),wO=Xa();async function SO(){let e="",t;try{e=Bm()}catch(r){t=r}try{let[{getTokenPayload:r,isExpired:o},{refreshToken:n}]=await Promise.all([await Promise.resolve().then(()=>mr(Vm())),await Promise.resolve().then(()=>mr(j_()))]);(!e||o(r(e)))&&(await n(),e=Bm())}catch(r){throw t!=null&&t.message&&r instanceof Error&&(r.message=`${t.message}
${r.message}`),new wO.VercelOidcTokenError("Failed to refresh OIDC token",r)}return e}function Bm(){var t,r;let e=(r=(t=(0,xO.getContext)().headers)==null?void 0:t["x-vercel-oidc-token"])!=null?r:process.env.VERCEL_OIDC_TOKEN;if(!e)throw new Error("The 'x-vercel-oidc-token' header is missing from the request. Do you have the OIDC option enabled in the Vercel project settings?");return e}});var Km=In((aV,L_)=>{"use strict";var Wm=Object.defineProperty,kO=Object.getOwnPropertyDescriptor,IO=Object.getOwnPropertyNames,TO=Object.prototype.hasOwnProperty,$O=(e,t)=>{for(var r in t)Wm(e,r,{get:t[r],enumerable:!0})},EO=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of IO(t))!TO.call(e,n)&&n!==r&&Wm(e,n,{get:()=>t[n],enumerable:!(o=kO(t,n))||o.enumerable});return e},AO=e=>EO(Wm({},"__esModule",{value:!0}),e),F_={};$O(F_,{getContext:()=>CO.getContext,getVercelOidcToken:()=>U_.getVercelOidcToken,getVercelOidcTokenSync:()=>U_.getVercelOidcTokenSync});L_.exports=AO(F_);var U_=z_(),CO=zm()});var O2={};nn(O2,{default:()=>au});module.exports=CT(O2);var kT=require("obsidian");var du=require("obsidian");var Ho=require("obsidian"),Pi=class extends Ho.Modal{constructor(t,r,o){super(t),this.folderName=r,this.folderPath=o,this.result=!1,this.modalPromise=new Promise(n=>{this.resolveModalPromise=n})}onOpen(){let{contentEl:t}=this;t.createEl("h2",{text:`[ChatGPT MD] No ${this.folderName} folder found.`}),t.createEl("p",{text:`If you choose "Yes, Create", the plugin will automatically create a folder at: ${this.folderPath}. You can change this path in the plugin settings.`}),new Ho.Setting(t).addButton(r=>r.setButtonText("Yes, Create Folder").setTooltip("Create folder").setCta().onClick(()=>{this.result=!0,this.resolveModalPromise(this.result),this.close()})),new Ho.Setting(t).addButton(r=>r.setButtonText("No, I'll create it myself").setTooltip("Cancel").setCta().onClick(()=>{this.result=!1,this.resolveModalPromise(this.result),this.close()}))}waitForModalValue(){return this.modalPromise}onClose(){let{contentEl:t}=this;t.empty()}};var lg=async(e,t,r)=>{let o=new Pi(e,t,r);o.open();let n=await o.waitForModalValue();return n&&await e.vault.createFolder(r),n};var Vn=class{constructor(t){this.app=t}async writeInferredTitle(t,r){var u,c;let o=t.file;if(!o)throw new Error("No file is currently open");let n=this.sanitizeFileName(r),i=(c=(u=o.parent)==null?void 0:u.path)!=null?c:"/",s=`${i}/${n}.md`;for(let l=1;await this.app.vault.adapter.exists(s);l++)s=`${i}/${n} (${l}).md`;try{await this.app.fileManager.renameFile(o,s)}catch(l){throw new du.Notice("[ChatGPT MD] Error writing inferred title to editor"),l}}sanitizeFileName(t){return t.replace(/[\\/:*?"<>|]/g,"-")}async ensureFolderExists(t,r){return!await this.app.vault.adapter.exists(t)&&!await lg(this.app,r,t)?(new du.Notice(`[ChatGPT MD] No ${r} found. One must be created to use the plugin. Set one in settings and make sure it exists.`),!1):!0}async createNewFile(t,r){return this.app.vault.create(t,r)}async readFile(t){return this.app.vault.read(t)}async getLinkedNoteContent(t){try{let r=this.app.metadataCache.getFirstLinkpathDest(t,"");return r?await this.app.vault.read(r):null}catch(r){return null}}formatDate(t,r){return t.toISOString().replace(/[-:]/g,"").replace(/\..+/,"")}};var Og=require("obsidian");var Me="ollama",Ie="openai",Ee="openrouter",Le="lmstudio",Ze="anthropic",qe="gemini",ug={[Ie]:"/v1/chat/completions",[Ee]:"/api/v1/chat/completions",[Me]:"/api/chat",[Le]:"/v1/chat/completions",[Ze]:"/v1/messages",[qe]:"/v1beta/models/{model}:generateContent"},cg="add-comment-block",dg="add-hr",pg="call-chatgpt-api",mg="stop-streaming",fg="move-to-chat",gg="infer-title",hg="choose-chat-template",vg="clear-chat";var pu="chatFolder",yg="chatTemplateFolder",at=`

`,_g=/\[\[([^\][]+)\]\]/g,bg=/\[([^\]]+)\]\(([^()]+)\)/g,xg=`=begin-chatgpt-md-comment${at}`,wg="=end-chatgpt-md-comment",Sg=3,mu=6,kg="English",Ig=4,Oi="YYYYMMDDhhmmss",Tg="Failed to fetch",fu="__chatgpt_plugin",Wo=`<hr class="${fu}">`,fr="role::",gr="assistant",gu="developer",hr="system",ct="user",Tn=6e3,Ni="You're chatting with a user in Obsidian, a knowledge management system where they organize notes in interconnected Markdown files. This conversation appears as a chat within their active document.\n\nBe helpful and concise. Use proper Markdown: ```language for code blocks, `inline` for code/filenames. Support [[Internal Links]] and [external links](url). Consider this chat is part of their personal knowledge base.\n\nWhen appropriate, end with an open question to keep the conversation helpful and make contextual offers based on their last message.",$g="\u26A0\uFE0F **Response was truncated due to token limit.** Please increase the `max_tokens` setting in ChatGPT MD plugin settings to get the complete response.",Eg="\u26A0\uFE0F *Note: Some alternative responses were truncated due to token limit. Consider increasing `max_tokens` in settings for fuller responses.*",Ag="Response was truncated due to token limit",Cg="\u26A0\uFE0F Title Inference Error";var PT=e=>{let t=e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&").replace("YYYY","\\d{4}").replace("MM","\\d{2}").replace("DD","\\d{2}").replace("hh","\\d{2}").replace("mm","\\d{2}").replace("ss","\\d{2}");return new RegExp(`^${t}$`)},Pg=(e="",t)=>(e==null?void 0:e.length)==t.length&&PT(t).test(e),vr=e=>e===0?"":e>mu?"#".repeat(mu)+" ":"#".repeat(e)+" ",Vt=(e,t,r)=>`${at}${Wo}${at}${e}${fr}${t}${r?`<span style="font-size: small;"> (${r})</span>`:""}${at}`,hu=e=>{let r=e.replace(/^---\n/,"").replace(/\n---$/,"").split(`
`),o={},n=null,i=[];for(let s=0;s<r.length;s++){let u=r[s].trim();if(!u)continue;if(n!==null)if(u.startsWith("-")){let m=u.substring(1).trim();(m.startsWith("'")&&m.endsWith("'")||m.startsWith('"')&&m.endsWith('"'))&&(m=m.substring(1,m.length-1)),i.push(m);continue}else o[n]=i,n=null,i=[];let c=u.indexOf(":");if(c===-1)continue;let l=u.substring(0,c).trim(),d=u.substring(c+1).trim();if(d===""&&s+1<r.length&&r[s+1].trim().startsWith("-")){n=l,i=[];continue}d.startsWith("[")&&d.endsWith("]")?o[l]=d.slice(1,-1).split(",").map(m=>{let p=m.trim();return p.startsWith("'")&&p.endsWith("'")||p.startsWith('"')&&p.endsWith('"')?p.slice(1,-1):p}):d==="true"?o[l]=!0:d==="false"?o[l]=!1:d==="null"?o[l]=null:isNaN(Number(d))?o[l]=d:o[l]=Number(d)}return n!==null&&(o[n]=i),o};var Gn=class{constructor(t){this.app=t}async readFrontmatter(t){try{let r=this.app.metadataCache.getFileCache(t);return r!=null&&r.frontmatter?{...r.frontmatter}:null}catch(r){return null}}async writeFrontmatter(t,r){try{await this.app.fileManager.processFrontMatter(t,o=>{Object.keys(o).forEach(n=>{delete o[n]}),Object.assign(o,r)})}catch(o){throw new Error(`Failed to write frontmatter: ${o.message}`)}}async updateFrontmatterField(t,r,o){try{await this.app.fileManager.processFrontMatter(t,n=>{n[r]=o})}catch(n){throw new Error(`Failed to update frontmatter field '${r}': ${n.message}`)}}async mergeFrontmatter(t,r){try{await this.app.fileManager.processFrontMatter(t,o=>{Object.assign(o,r)})}catch(o){throw new Error(`Failed to merge frontmatter: ${o.message}`)}}hasFrontmatter(t){try{let r=this.app.metadataCache.getFileCache(t);return!!(r!=null&&r.frontmatter&&Object.keys(r.frontmatter).length>0)}catch(r){return!1}}async removeFrontmatterField(t,r){try{await this.app.fileManager.processFrontMatter(t,o=>{delete o[r]})}catch(o){throw new Error(`Failed to remove frontmatter field '${r}': ${o.message}`)}}async removeFrontmatterFields(t,r){try{await this.app.fileManager.processFrontMatter(t,o=>{r.forEach(n=>{delete o[n]})})}catch(o){throw new Error(`Failed to remove frontmatter fields: ${o.message}`)}}async clearFrontmatter(t){try{await this.app.fileManager.processFrontMatter(t,r=>{Object.keys(r).forEach(o=>{delete r[o]})})}catch(r){throw new Error(`Failed to clear frontmatter: ${r.message}`)}}async getFrontmatterField(t,r,o){try{let n=await this.readFrontmatter(t);return!n||!(r in n)?o:n[r]}catch(n){return o}}async hasFrontmatterField(t,r){try{let o=await this.readFrontmatter(t);return!!(o&&r in o)}catch(o){return!1}}};var Jn=class{constructor(t){this.app=t;t&&(this.frontmatterManager=new Gn(t))}addHorizontalRule(t,r,o){let n=`${at}<hr class="${fu}">${at}${vr(o)}${fr}${r}${at}`,i=t.getCursor();t.replaceRange(n,i),t.setCursor(i.line+n.split(`
`).length-1,0)}appendMessage(t,r,o){let n=vr(o),i=Vt(n,gr),s=Vt(n,ct);t.replaceRange(`${i}${r}${s}`,t.getCursor())}async clearChat(t){let r="";if(this.app&&this.frontmatterManager){let o=this.app.workspace.getActiveViewOfType(Og.MarkdownView);if(o!=null&&o.file)try{let n=await this.frontmatterManager.readFrontmatter(o.file);if(n&&Object.keys(n).length>0){let i=Object.entries(n).filter(([s])=>s!=="position").map(([s,u])=>typeof u=="string"?`${s}: "${u}"`:`${s}: ${u}`);i.length>0&&(r=`---
${i.join(`
`)}
---

`)}}catch(n){}}t.setValue(r),r?t.setCursor({line:t.lastLine()+1,ch:0}):t.setCursor({line:0,ch:0})}moveCursorToEnd(t){try{let o={line:t.lastLine()+1,ch:0};t.setCursor(o)}catch(r){throw new Error("Error moving cursor to end of file"+r)}}addCommentBlock(t,r,o){let n=t.getCursor(),i=`${r}${at}${o}`;t.replaceRange(i,n),t.setCursor({line:n.line+1,ch:n.ch})}};var Bn=class{constructor(t,r){this.fileService=t;this.notificationService=r}findLinksInMessage(t){let r=[{regex:_g,fullMatchIndex:0,titleIndex:1},{regex:bg,fullMatchIndex:0,titleIndex:2}],o=[],n=new Set;for(let{regex:i,fullMatchIndex:s,titleIndex:u}of r)for(let c of t.matchAll(i)){let l=c[s],d=c[u];d&&d.includes("|")&&(d=d.split("|")[0].trim()),d&&!n.has(d)&&!d.startsWith("http://")&&!d.startsWith("https://")&&(o.push({link:l,title:d}),n.add(d))}return o}splitMessages(t){return t?t.split(Wo):[]}removeYAMLFrontMatter(t){if(!t||!t.trim().startsWith("---"))return t;let r=t.split(`
`),o=-1;for(let n=1;n<r.length;n++)if(r[n].trim()==="---"){o=n;break}return o===-1?t:r.slice(o+1).join(`
`).trim()}removeCommentsFromMessages(t){try{let r=/=begin-chatgpt-md-comment[\s\S]*?=end-chatgpt-md-comment/g;return t.replace(r,"")}catch(r){return this.notificationService.showError("Error removing comments from messages: "+r),t}}extractRoleAndMessage(t){try{if(!t.includes(fr))return{role:ct,content:t};let[r,...o]=t.split(fr)[1].split(`
`);return{role:this.cleanupRole(r),content:o.join(`
`).trim()}}catch(r){return this.notificationService.showError("Failed to extract role and message: "+r),{role:ct,content:t}}}cleanupRole(t){let r=t.trim().toLowerCase(),n=[ct,gr].find(i=>r.includes(i));return n||(this.notificationService.showWarning(`Unknown role: "${t}", defaulting to user`),ct)}cleanMessagesFromNote(t){return this.splitMessages(this.removeYAMLFrontMatter(t.getValue())).map(o=>this.removeCommentsFromMessages(o))}async getMessagesFromEditor(t,r){let o=this.cleanMessagesFromNote(t);o=await Promise.all(o.map(async i=>{let s=this.findLinksInMessage(i);for(let u of s)try{let c=await this.fileService.getLinkedNoteContent(u.title);if(c){let l=new RegExp(`${at}${Wo}${at}#+ ${fr}(?:${ct}|${gr}).*$`,"gm");c=c==null?void 0:c.replace(l,""),c=this.removeYAMLFrontMatter(c)||null,i=i.replace(new RegExp(this.escapeRegExp(u.link),"g"),`${at}${u.title}${at}${c}${at}`)}}catch(c){}return i}));let n=o.map(i=>this.extractRoleAndMessage(i));return{messages:o,messagesWithRole:n}}addSystemCommandsToMessages(t,r){return!r||r.length===0?t:[...r.map(n=>({role:"system",content:n})),...t]}formatMessage(t,r,o){let n=vr(r);return`${Vt(n,t.role,o)}${t.content}`}appendMessage(t,r,o){let n=vr(o),i=Vt(n,gr),s=Vt(n,ct);t.replaceRange(`${i}${r}${s}`,t.getCursor())}processResponse(t,r,o){r.mode==="streaming"?r.wasAborted||this.processStreamingResponse(t,o):this.processStandardResponse(t,r,o)}processStreamingResponse(t,r){let o=vr(r.headingLevel),n=Vt(o,ct),i=t.getCursor();t.replaceRange(n,i);let s=t.offsetToPos(t.posToOffset(i)+n.length);t.setCursor(s)}processStandardResponse(t,r,o){let n,i;typeof r=="object"&&r!==null?(n=r.fullString||JSON.stringify(r.text||r)||"[No response]",i=r.model):n=String(r||"[No response]");let s=vr(o.headingLevel),u=Vt(s,gr,i),c=Vt(s,ct),l=t.getCursor(),d=`${u}${n}${c}`;t.replaceRange(d,l);let m=t.offsetToPos(t.posToOffset(l)+d.length);t.setCursor(m)}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}};var Ur=require("obsidian");var on=require("obsidian"),Ri=class extends on.SuggestModal{constructor(t,r,o){super(t),this.settings=r,this.titleDate=o}getFilesInChatFolder(){let t=this.app.vault.getAbstractFileByPath(this.settings.chatTemplateFolder);if(t!=null)return t.children;throw new on.Notice(`Error getting folder: ${this.settings.chatTemplateFolder}`),new Error(`Error getting folder: ${this.settings.chatTemplateFolder}`)}getSuggestions(t){let r=this.getFilesInChatFolder();return t==""?r.map(o=>({title:o.basename,file:o})).sort((o,n)=>o.title.localeCompare(n.title)):r.filter(o=>o.basename.toLowerCase().includes(t.toLowerCase())).map(o=>({title:o.basename,file:o})).sort((o,n)=>o.title.localeCompare(n.title))}renderSuggestion(t,r){r.createEl("div",{text:t.title})}async onChooseSuggestion(t,r){new on.Notice(`Selected ${t.title}`);let o=await this.app.vault.read(t.file),n=o;!/^---\n[\s\S]*?\n---/.test(o)&&this.settings.defaultChatFrontmatter&&(n=this.settings.defaultChatFrontmatter+`

`+o);let s=`${this.titleDate} ${t.title}`,u=(0,on.normalizePath)(`${this.settings.chatFolder}/${s}.md`),c=1;for(;await this.app.vault.adapter.exists(u);)u=(0,on.normalizePath)(`${this.settings.chatFolder}/${s} (${c}).md`),c++;try{let l=await this.app.vault.create(u,n);await this.app.workspace.openLinkText(l.basename,"",!0)}catch(l){}}};var Hn=class{constructor(t,r,o){this.app=t;this.fileService=r;this.editorContentService=o}async createNewChatFromTemplate(t,r){try{if(!t.chatFolder||t.chatFolder.trim()===""){new Ur.Notice("[ChatGPT MD] No chat folder value found. Please set one in settings.");return}if(!t.chatTemplateFolder||t.chatTemplateFolder.trim()===""){new Ur.Notice("[ChatGPT MD] No chat template folder value found. Please set one in settings.");return}if(!await this.fileService.ensureFolderExists(t.chatFolder,pu)||!await this.fileService.ensureFolderExists(t.chatTemplateFolder,yg))return;new Ri(this.app,t,r).open()}catch(o){new Ur.Notice("[ChatGPT MD] Error in Create new chat from template, check console")}}async createNewChatWithHighlightedText(t,r){try{let o=t.getSelection();if(!r.chatFolder||r.chatFolder.trim()===""){new Ur.Notice("[ChatGPT MD] No chat folder value found. Please set one in settings.");return}if(!await this.fileService.ensureFolderExists(r.chatFolder,pu))return;let i=`${this.fileService.formatDate(new Date,r.dateFormat)}.md`,s=`${r.chatFolder}/${i}`,u="";r.defaultChatFrontmatter&&(u=r.defaultChatFrontmatter+`

`),o&&(u+=o);let c=await this.fileService.createNewFile(s,u);await this.app.workspace.openLinkText(c.basename,"",!0,{state:{mode:"source"}});let l=this.app.workspace.getActiveViewOfType(Ur.MarkdownView);if(!l){new Ur.Notice("No active markdown editor found.");return}l.editor.focus(),this.editorContentService.moveCursorToEnd(l.editor)}catch(o){new Ur.Notice("[ChatGPT MD] Error in Create new chat with highlighted text, check console")}}};var yT=require("obsidian");var yu=require("obsidian");var Ng=require("obsidian"),ft=class{showNotification(t,r=5e3){new Ng.Notice(t,r)}formatChatMessage(t,r=!1){return r?`I am sorry. ${t}`:t}showSuccess(t){this.showNotification(`\u2705 ${t}`,3e3)}showWarning(t){this.showNotification(`\u26A0\uFE0F ${t}`,5e3)}showError(t){this.showNotification(`\u274C ${t}`,7e3)}};function rt(e){return!!e&&e.trim()!==""}var yr=class{constructor(t){this.notificationService=t||new ft}getApiKey(t,r){switch(r){case Ie:return t.apiKey;case Ee:return t.openrouterApiKey;case Ze:return t.anthropicApiKey;case qe:return t.geminiApiKey;case Me:return"";case Le:return"";default:return""}}validateApiKey(t,r){if(!(r===Me||r===Le)&&!rt(t)){let o=`${r} API key is missing or invalid. Please add your ${r} API key in the settings or set your default model in the settings if you use Ollama or LM Studio.`;throw this.notificationService.showError(o),new Error(o)}}createAuthHeaders(t,r){let o={"Content-Type":"application/json"};switch(r){case Ie:o.Authorization=`Bearer ${t}`;break;case Ee:o.Authorization=`Bearer ${t}`,o["HTTP-Referer"]="https://github.com/bramses/chatgpt-md",o["X-Title"]="Obsidian ChatGPT MD Plugin";break;case Ze:o["x-api-key"]=t,o["anthropic-version"]="2023-06-01";break;case qe:o["x-goog-api-key"]=t;break;case Me:break;case Le:break}return o}};var an=class{constructor(t){this.notificationService=t||new ft}handleChoicesWithFinishReason(t){var n,i;if(!t||t.length===0)return null;let r=t.filter(s=>s.finish_reason==="stop"),o=t.filter(s=>s.finish_reason==="length");if(r.length>0){let s=((n=r[0].message)==null?void 0:n.content)||"";return o.length>0?s+`

`+Eg:s}return o.length>0?$g:((i=t[0].message)==null?void 0:i.content)||""}insertAssistantHeader(t,r,o){let n=Vt(r,gr,o),i=t.getCursor();t.replaceRange(n,i);let s=t.posToOffset(i),u=t.offsetToPos(s+n.length);return t.setCursor(u),{initialCursor:i,newCursor:u}}parseNonStreamingResponse(t,r){switch(r){case Ie:case Ee:case Le:let o=this.handleChoicesWithFinishReason(t.choices);return o!==null?o:"";case Ze:return t.content&&Array.isArray(t.content)?t.content.filter(i=>i.type==="text").map(i=>i.text).join(""):t.content||JSON.stringify(t);case qe:if(t.candidates&&t.candidates.length>0){let i=t.candidates[0];if(i.content&&i.content.parts&&i.content.parts.length>0)return i.content.parts.filter(s=>s.text).map(s=>s.text).join("")}return t.text||JSON.stringify(t);case Me:return t.message&&t.message.content?t.message.content:t.response?t.response:JSON.stringify(t);default:let n=this.handleChoicesWithFinishReason(t==null?void 0:t.choices);return n!==null?n:(t==null?void 0:t.response)||JSON.stringify(t)}}};var _r=class{constructor(t){this.notificationService=t}handleApiError(t,r,o={showNotification:!0,logToConsole:!0,returnForChat:!1}){var l,d,m,p;let n=`[ChatGPT MD] ${r}`,i="",s=((l=o.context)==null?void 0:l.model)||"",u=((d=o.context)==null?void 0:d.url)||"",c=this.formatContextInfo(s,u);if(t instanceof Object?t.name==="AbortError"?i=`${n}: Stream aborted`:t.message===Tg?i=`${n}: Network connection error`:t.status===401||((m=t.error)==null?void 0:m.status)===401?i=`${n}: Authentication failed (401)`:t.status===404||((p=t.error)==null?void 0:p.status)===404?i=`${n}: Resource not found (404)${c?` - ${c}`:""}`:t.error?i=`${n}: ${t.error.message}${c?` - ${c}`:""}`:i=`${n}: ${JSON.stringify(t)}${c?` - ${c}`:""}`:i=`${n}: ${t}${c?` - ${c}`:""}`,o.logToConsole,o.showNotification&&this.notificationService.showNotification(i,5e3),o.returnForChat)return`I am sorry, I could not answer your request because of an error, here is what went wrong-

${t instanceof Object&&t.error?t.error.message:(t==null?void 0:t.message)||t||"undefined"}

Model- ${s}, URL- ${u}`;throw new Error(i)}formatContextInfo(t,r){let o=[];return t&&o.push(`Model: ${t}`),r&&o.push(`URL: ${r}`),o.length>0?o.join(", "):""}handleUrlError(t,r,o){let n=`[ChatGPT MD] Error calling specified URL: ${t}`;return this.notificationService.showNotification(n),`I am sorry, I could not answer your request because of an error, here is what went wrong-

Error connecting to the custom URL.

Model- ${o===Me?"llama2":"unknown"}, URL- ${t}`}handleModelError(t,r){let o=`[ChatGPT MD] Error calling model: ${t}`;return this.notificationService.showNotification(o),`I am sorry, there was an error with the model: ${t}. Please check your settings or try a different model.`}handleValidationError(t,r){let o=`[ChatGPT MD] Validation Error: ${t}`;throw this.notificationService.showNotification(o),new Error(o)}};var ji,Mi,vu;try{let e=globalThis.require,t=e("http"),r=e("https"),o=e("url");ji=t.request,Mi=r.request,vu=o.URL}catch(e){ji=null,Mi=null,vu=globalThis.URL}async function Rg(e){return ji&&Mi?OT(e):NT(e)}async function OT(e){return new Promise((t,r)=>{let o=new vu(e.url),n=o.protocol==="https:",i=n?Mi:ji,s={hostname:o.hostname==="localhost"?"127.0.0.1":o.hostname,port:o.port||(n?443:80),path:o.pathname+o.search,method:e.method||"GET",headers:{"Content-Type":"application/json",...e.headers}},u=i(s,c=>{let l=new Headers;Object.entries(c.headers).forEach(([h,v])=>{v&&l.set(h,Array.isArray(v)?v.join(", "):String(v))});let d=c.statusCode||0,m=d>=200&&d<300,p=new ReadableStream({start(h){c.on("data",v=>{h.enqueue(new Uint8Array(v))}),c.on("end",()=>{h.close()}),c.on("error",v=>{h.error(v)})}}),g={ok:m,status:d,statusText:c.statusMessage||"",headers:l,body:p,json:async()=>{let h=p.getReader(),v=[];try{for(;;){let{done:b,value:y}=await h.read();if(b)break;v.push(y)}let _=v.reduce((b,y)=>b+y.length,0),w=new Uint8Array(_),x=0;for(let b of v)w.set(b,x),x+=b.length;let f=new TextDecoder().decode(w);return JSON.parse(f)}finally{h.releaseLock()}},text:async()=>{let h=p.getReader(),v=[];try{for(;;){let{done:f,value:b}=await h.read();if(f)break;v.push(b)}let _=v.reduce((f,b)=>f+b.length,0),w=new Uint8Array(_),x=0;for(let f of v)w.set(f,x),x+=f.length;return new TextDecoder().decode(w)}finally{h.releaseLock()}},clone:()=>{throw new Error("Response cloning not implemented for requestStream")}};t(g)});e.signal&&e.signal.addEventListener("abort",()=>{u.destroy(),r(new Error("Request aborted"))}),u.on("error",c=>{r(c)}),e.body&&u.write(e.body),u.end()})}async function NT(e){let t={...e.headers&&!e.headers["Content-Type"]&&!e.headers["content-type"]?{"Content-Type":"application/json"}:{},...e.headers},r={method:e.method||"GET",headers:t,signal:e.signal};return e.body&&(r.body=e.body),await fetch(e.url,r)}var Wn=class{constructor(t,r,o,n){this.abortController=null;this.wasStreamingAborted=!1;this.notificationService=r||new ft,this.errorService=t||new _r(this.notificationService),this.apiAuthService=o||new yr,this.apiResponseParser=n||new an}async makeNonStreamingRequest(t,r,o,n){try{let s=(await(0,yu.requestUrl)({url:t,method:"POST",headers:o,contentType:"application/json",body:JSON.stringify(r),throw:!1})).json;return s!=null&&s.error?this.errorService.handleApiError({error:s.error},n,{returnForChat:!0,showNotification:!0,context:{model:r.model,url:t}}):this.apiResponseParser.parseNonStreamingResponse(s,n)}catch(i){return this.errorService.handleApiError(i,n,{returnForChat:!0,showNotification:!0,context:{model:r.model,url:t}})}}async makeGetRequest(t,r,o){try{let n=await(0,yu.requestUrl)({url:t,method:"GET",headers:r,throw:!1});if(n.status!==200)throw new Error(`Failed to fetch data from ${t}: ${n.status}`);return n.json}catch(n){throw n}}async handleHttpError(t,r,o,n){let i;try{i=await t.json()}catch(u){i={status:t.status,statusText:t.statusText}}let s=this.errorService.handleApiError(i,r,{returnForChat:!1,showNotification:!0,context:{model:o.model,url:n,status:t.status}});return new Error(s)}handleRequestError(t,r,o,n){return this.errorService.handleApiError(t,r,{returnForChat:!1,showNotification:!0,context:{model:o.model,url:n}})}setAbortController(t){this.abortController=t,this.wasStreamingAborted=!1}stopStreaming(){this.abortController&&(this.wasStreamingAborted=!0,this.abortController.abort(),this.abortController=null)}wasAborted(){return this.wasStreamingAborted}resetAbortedFlag(){this.wasStreamingAborted=!1}createFetchAdapter(){return async(t,r)=>{let n={url:typeof t=="string"?t:t instanceof URL?t.toString():t.url,method:(r==null?void 0:r.method)||"GET",headers:r!=null&&r.headers?typeof r.headers=="object"&&"forEach"in r.headers?this.convertHeadersToRecord(r.headers):r.headers:{},body:r!=null&&r.body?typeof r.body=="string"?r.body:JSON.stringify(r.body):void 0,signal:(r==null?void 0:r.signal)||void 0};return Rg(n)}}convertHeadersToRecord(t){let r={};return t.forEach((o,n)=>{r[n]=o}),r}};var uh="vercel.ai.error",RT=Symbol.for(uh),jg,Mg,Ve=class ch extends(Mg=Error,jg=RT,Mg){constructor({name:t,message:r,cause:o}){super(r),this[jg]=!0,this.name=t,this.cause=o}static isInstance(t){return ch.hasMarker(t,uh)}static hasMarker(t,r){let o=Symbol.for(r);return t!=null&&typeof t=="object"&&o in t&&typeof t[o]=="boolean"&&t[o]===!0}},dh="AI_APICallError",ph=`vercel.ai.error.${dh}`,jT=Symbol.for(ph),Dg,zg,lt=class extends(zg=Ve,Dg=jT,zg){constructor({message:e,url:t,requestBodyValues:r,statusCode:o,responseHeaders:n,responseBody:i,cause:s,isRetryable:u=o!=null&&(o===408||o===409||o===429||o>=500),data:c}){super({name:dh,message:e,cause:s}),this[Dg]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=o,this.responseHeaders=n,this.responseBody=i,this.isRetryable=u,this.data=c}static isInstance(e){return Ve.hasMarker(e,ph)}},mh="AI_EmptyResponseBodyError",fh=`vercel.ai.error.${mh}`,MT=Symbol.for(fh),Ug,Fg,gh=class extends(Fg=Ve,Ug=MT,Fg){constructor({message:e="Empty response body"}={}){super({name:mh,message:e}),this[Ug]=!0}static isInstance(e){return Ve.hasMarker(e,fh)}};function hh(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var vh="AI_InvalidArgumentError",yh=`vercel.ai.error.${vh}`,DT=Symbol.for(yh),Lg,Zg,_h=class extends(Zg=Ve,Lg=DT,Zg){constructor({message:e,cause:t,argument:r}){super({name:vh,message:e,cause:t}),this[Lg]=!0,this.argument=r}static isInstance(e){return Ve.hasMarker(e,yh)}},bh="AI_InvalidPromptError",xh=`vercel.ai.error.${bh}`,zT=Symbol.for(xh),qg,Vg,EF=class extends(Vg=Ve,qg=zT,Vg){constructor({prompt:e,message:t,cause:r}){super({name:bh,message:`Invalid prompt: ${t}`,cause:r}),this[qg]=!0,this.prompt=e}static isInstance(e){return Ve.hasMarker(e,xh)}},wh="AI_InvalidResponseDataError",Sh=`vercel.ai.error.${wh}`,UT=Symbol.for(Sh),Gg,Jg,AF=class extends(Jg=Ve,Gg=UT,Jg){constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:wh,message:t}),this[Gg]=!0,this.data=e}static isInstance(e){return Ve.hasMarker(e,Sh)}},kh="AI_JSONParseError",Ih=`vercel.ai.error.${kh}`,FT=Symbol.for(Ih),Bg,Hg,Ko=class extends(Hg=Ve,Bg=FT,Hg){constructor({text:e,cause:t}){super({name:kh,message:`JSON parsing failed: Text: ${e}.
Error message: ${hh(t)}`,cause:t}),this[Bg]=!0,this.text=e}static isInstance(e){return Ve.hasMarker(e,Ih)}},Th="AI_LoadAPIKeyError",$h=`vercel.ai.error.${Th}`,LT=Symbol.for($h),Wg,Kg,CF=class extends(Kg=Ve,Wg=LT,Kg){constructor({message:e}){super({name:Th,message:e}),this[Wg]=!0}static isInstance(e){return Ve.hasMarker(e,$h)}},Eh="AI_LoadSettingError",Ah=`vercel.ai.error.${Eh}`,ZT=Symbol.for(Ah),Yg,Xg,PF=class extends(Xg=Ve,Yg=ZT,Xg){constructor({message:e}){super({name:Eh,message:e}),this[Yg]=!0}static isInstance(e){return Ve.hasMarker(e,Ah)}},Ch="AI_NoContentGeneratedError",Ph=`vercel.ai.error.${Ch}`,qT=Symbol.for(Ph),Qg,eh,OF=class extends(eh=Ve,Qg=qT,eh){constructor({message:e="No content generated."}={}){super({name:Ch,message:e}),this[Qg]=!0}static isInstance(e){return Ve.hasMarker(e,Ph)}},Oh="AI_NoSuchModelError",Nh=`vercel.ai.error.${Oh}`,VT=Symbol.for(Nh),th,rh,NF=class extends(rh=Ve,th=VT,rh){constructor({errorName:e=Oh,modelId:t,modelType:r,message:o=`No such ${r}: ${t}`}){super({name:e,message:o}),this[th]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return Ve.hasMarker(e,Nh)}},Rh="AI_TooManyEmbeddingValuesForCallError",jh=`vercel.ai.error.${Rh}`,GT=Symbol.for(jh),nh,oh,RF=class extends(oh=Ve,nh=GT,oh){constructor(e){super({name:Rh,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[nh]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Ve.hasMarker(e,jh)}},Mh="AI_TypeValidationError",Dh=`vercel.ai.error.${Mh}`,JT=Symbol.for(Dh),ah,ih,sn=class _u extends(ih=Ve,ah=JT,ih){constructor({value:t,cause:r}){super({name:Mh,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${hh(r)}`,cause:r}),this[ah]=!0,this.value=t}static isInstance(t){return Ve.hasMarker(t,Dh)}static wrap({value:t,cause:r}){return _u.isInstance(r)&&r.value===t?r:new _u({value:t,cause:r})}},zh="AI_UnsupportedFunctionalityError",Uh=`vercel.ai.error.${zh}`,BT=Symbol.for(Uh),sh,lh,jF=class extends(lh=Ve,sh=BT,lh){constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:zh,message:t}),this[sh]=!0,this.functionality=e}static isInstance(e){return Ve.hasMarker(e,Uh)}};var a={};nn(a,{$brand:()=>Di,$input:()=>Ud,$output:()=>zd,NEVER:()=>bu,TimePrecision:()=>qd,ZodAny:()=>vy,ZodArray:()=>xy,ZodBase64:()=>sm,ZodBase64URL:()=>lm,ZodBigInt:()=>Ma,ZodBigIntFormat:()=>dm,ZodBoolean:()=>ja,ZodCIDRv4:()=>am,ZodCIDRv6:()=>im,ZodCUID:()=>Xp,ZodCUID2:()=>Qp,ZodCatch:()=>Fy,ZodCodec:()=>xm,ZodCustom:()=>Vs,ZodCustomStringFormat:()=>Na,ZodDate:()=>Ls,ZodDefault:()=>Ry,ZodDiscriminatedUnion:()=>wy,ZodE164:()=>um,ZodEmail:()=>Wp,ZodEmoji:()=>Kp,ZodEnum:()=>Pa,ZodError:()=>kE,ZodFile:()=>Py,ZodFirstPartyTypeKind:()=>wm,ZodFunction:()=>Wy,ZodGUID:()=>Ms,ZodIPv4:()=>nm,ZodIPv6:()=>om,ZodISODate:()=>Ns,ZodISODateTime:()=>Os,ZodISODuration:()=>js,ZodISOTime:()=>Rs,ZodIntersection:()=>Sy,ZodIssueCode:()=>zA,ZodJWT:()=>cm,ZodKSUID:()=>rm,ZodLazy:()=>Jy,ZodLiteral:()=>Cy,ZodMAC:()=>cy,ZodMap:()=>Ey,ZodNaN:()=>Zy,ZodNanoID:()=>Yp,ZodNever:()=>_y,ZodNonOptional:()=>_m,ZodNull:()=>gy,ZodNullable:()=>Ny,ZodNumber:()=>Ra,ZodNumberFormat:()=>co,ZodObject:()=>qs,ZodOptional:()=>ym,ZodPipe:()=>bm,ZodPrefault:()=>My,ZodPromise:()=>Hy,ZodReadonly:()=>qy,ZodRealError:()=>Et,ZodRecord:()=>gm,ZodSet:()=>Ay,ZodString:()=>Oa,ZodStringFormat:()=>Fe,ZodSuccess:()=>Uy,ZodSymbol:()=>my,ZodTemplateLiteral:()=>Gy,ZodTransform:()=>Oy,ZodTuple:()=>Iy,ZodType:()=>fe,ZodULID:()=>em,ZodURL:()=>Fs,ZodUUID:()=>Vr,ZodUndefined:()=>fy,ZodUnion:()=>mm,ZodUnknown:()=>yy,ZodVoid:()=>by,ZodXID:()=>tm,_ZodString:()=>Hp,_default:()=>jy,_function:()=>AA,any:()=>uA,array:()=>Zs,base64:()=>JE,base64url:()=>BE,bigint:()=>oA,boolean:()=>py,catch:()=>Ly,check:()=>CA,cidrv4:()=>VE,cidrv6:()=>GE,clone:()=>vt,codec:()=>TA,coerce:()=>Gs,config:()=>nt,core:()=>xr,cuid:()=>ME,cuid2:()=>DE,custom:()=>PA,date:()=>dA,decode:()=>Up,decodeAsync:()=>Lp,describe:()=>OA,discriminatedUnion:()=>hA,e164:()=>HE,email:()=>TE,emoji:()=>RE,encode:()=>zp,encodeAsync:()=>Fp,endsWith:()=>wa,enum:()=>hm,file:()=>wA,flattenError:()=>aa,float32:()=>eA,float64:()=>tA,formatError:()=>ia,function:()=>AA,getErrorMap:()=>FA,globalRegistry:()=>yt,gt:()=>Lr,gte:()=>$t,guid:()=>$E,hash:()=>QE,hex:()=>XE,hostname:()=>YE,httpUrl:()=>NE,includes:()=>ba,instanceof:()=>RA,int:()=>Bp,int32:()=>rA,int64:()=>aA,intersection:()=>ky,ipv4:()=>LE,ipv6:()=>qE,iso:()=>Ca,json:()=>MA,jwt:()=>WE,keyof:()=>pA,ksuid:()=>FE,lazy:()=>By,length:()=>so,literal:()=>xA,locales:()=>Cn,looseObject:()=>gA,lowercase:()=>ya,lt:()=>Fr,lte:()=>Jt,mac:()=>ZE,map:()=>yA,maxLength:()=>io,maxSize:()=>ao,meta:()=>NA,mime:()=>Sa,minLength:()=>fn,minSize:()=>On,multipleOf:()=>Pn,nan:()=>IA,nanoid:()=>jE,nativeEnum:()=>bA,negative:()=>yp,never:()=>pm,nonnegative:()=>bp,nonoptional:()=>zy,nonpositive:()=>_p,normalize:()=>ka,null:()=>hy,nullable:()=>zs,nullish:()=>SA,number:()=>dy,object:()=>mA,optional:()=>Ds,overwrite:()=>br,parse:()=>jp,parseAsync:()=>Mp,partialRecord:()=>vA,pipe:()=>Us,positive:()=>vp,prefault:()=>Dy,preprocess:()=>DA,prettifyError:()=>Ou,promise:()=>EA,property:()=>xp,readonly:()=>Vy,record:()=>$y,refine:()=>Ky,regex:()=>va,regexes:()=>jt,registry:()=>ds,safeDecode:()=>qp,safeDecodeAsync:()=>Gp,safeEncode:()=>Zp,safeEncodeAsync:()=>Vp,safeParse:()=>Dp,safeParseAsync:()=>qr,set:()=>_A,setErrorMap:()=>UA,size:()=>ha,slugify:()=>Ea,startsWith:()=>xa,strictObject:()=>fA,string:()=>Jp,stringFormat:()=>KE,stringbool:()=>jA,success:()=>kA,superRefine:()=>Yy,symbol:()=>sA,templateLiteral:()=>$A,toJSONSchema:()=>Zr,toLowerCase:()=>Ta,toUpperCase:()=>$a,transform:()=>vm,treeifyError:()=>Pu,trim:()=>Ia,tuple:()=>Ty,uint32:()=>nA,uint64:()=>iA,ulid:()=>zE,undefined:()=>lA,union:()=>fm,unknown:()=>uo,uppercase:()=>_a,url:()=>OE,util:()=>K,uuid:()=>EE,uuidv4:()=>AE,uuidv6:()=>CE,uuidv7:()=>PE,void:()=>cA,xid:()=>UE});var xr={};nn(xr,{$ZodAny:()=>sd,$ZodArray:()=>pd,$ZodAsyncError:()=>Qt,$ZodBase64:()=>Yc,$ZodBase64URL:()=>Xc,$ZodBigInt:()=>as,$ZodBigIntFormat:()=>nd,$ZodBoolean:()=>ca,$ZodCIDRv4:()=>Hc,$ZodCIDRv6:()=>Wc,$ZodCUID:()=>Mc,$ZodCUID2:()=>Dc,$ZodCatch:()=>Ad,$ZodCheck:()=>Ue,$ZodCheckBigIntFormat:()=>pc,$ZodCheckEndsWith:()=>kc,$ZodCheckGreaterThan:()=>Xi,$ZodCheckIncludes:()=>wc,$ZodCheckLengthEquals:()=>yc,$ZodCheckLessThan:()=>Yi,$ZodCheckLowerCase:()=>bc,$ZodCheckMaxLength:()=>hc,$ZodCheckMaxSize:()=>mc,$ZodCheckMimeType:()=>Tc,$ZodCheckMinLength:()=>vc,$ZodCheckMinSize:()=>fc,$ZodCheckMultipleOf:()=>cc,$ZodCheckNumberFormat:()=>dc,$ZodCheckOverwrite:()=>$c,$ZodCheckProperty:()=>Ic,$ZodCheckRegex:()=>_c,$ZodCheckSizeEquals:()=>gc,$ZodCheckStartsWith:()=>Sc,$ZodCheckStringFormat:()=>no,$ZodCheckUpperCase:()=>xc,$ZodCodec:()=>da,$ZodCustom:()=>Dd,$ZodCustomStringFormat:()=>td,$ZodDate:()=>dd,$ZodDefault:()=>Id,$ZodDiscriminatedUnion:()=>fd,$ZodE164:()=>Qc,$ZodEmail:()=>Oc,$ZodEmoji:()=>Rc,$ZodEncodeError:()=>ln,$ZodEnum:()=>_d,$ZodError:()=>oa,$ZodFile:()=>xd,$ZodFunction:()=>Rd,$ZodGUID:()=>Cc,$ZodIPv4:()=>Gc,$ZodIPv6:()=>Jc,$ZodISODate:()=>Zc,$ZodISODateTime:()=>Lc,$ZodISODuration:()=>Vc,$ZodISOTime:()=>qc,$ZodIntersection:()=>gd,$ZodJWT:()=>ed,$ZodKSUID:()=>Fc,$ZodLazy:()=>Md,$ZodLiteral:()=>bd,$ZodMAC:()=>Bc,$ZodMap:()=>vd,$ZodNaN:()=>Cd,$ZodNanoID:()=>jc,$ZodNever:()=>ud,$ZodNonOptional:()=>$d,$ZodNull:()=>id,$ZodNullable:()=>kd,$ZodNumber:()=>os,$ZodNumberFormat:()=>rd,$ZodObject:()=>dv,$ZodObjectJIT:()=>md,$ZodOptional:()=>Sd,$ZodPipe:()=>Pd,$ZodPrefault:()=>Td,$ZodPromise:()=>jd,$ZodReadonly:()=>Od,$ZodRealError:()=>Tt,$ZodRecord:()=>hd,$ZodRegistry:()=>oo,$ZodSet:()=>yd,$ZodString:()=>An,$ZodStringFormat:()=>De,$ZodSuccess:()=>Ed,$ZodSymbol:()=>od,$ZodTemplateLiteral:()=>Nd,$ZodTransform:()=>wd,$ZodTuple:()=>ss,$ZodType:()=>ce,$ZodULID:()=>zc,$ZodURL:()=>Nc,$ZodUUID:()=>Pc,$ZodUndefined:()=>ad,$ZodUnion:()=>is,$ZodUnknown:()=>ld,$ZodVoid:()=>cd,$ZodXID:()=>Uc,$brand:()=>Di,$constructor:()=>T,$input:()=>Ud,$output:()=>zd,Doc:()=>ua,JSONSchema:()=>Cp,JSONSchemaGenerator:()=>Aa,NEVER:()=>bu,TimePrecision:()=>qd,_any:()=>cp,_array:()=>wp,_base64:()=>Es,_base64url:()=>As,_bigint:()=>np,_boolean:()=>tp,_catch:()=>vE,_check:()=>sy,_cidrv4:()=>Ts,_cidrv6:()=>$s,_coercedBigint:()=>op,_coercedBoolean:()=>rp,_coercedDate:()=>gp,_coercedNumber:()=>Wd,_coercedString:()=>Ld,_cuid:()=>_s,_cuid2:()=>bs,_custom:()=>kp,_date:()=>fp,_decode:()=>qi,_decodeAsync:()=>Gi,_default:()=>fE,_discriminatedUnion:()=>rE,_e164:()=>Cs,_email:()=>ps,_emoji:()=>vs,_encode:()=>Zi,_encodeAsync:()=>Vi,_endsWith:()=>wa,_enum:()=>lE,_file:()=>Sp,_float32:()=>Yd,_float64:()=>Xd,_gt:()=>Lr,_gte:()=>$t,_guid:()=>fa,_includes:()=>ba,_int:()=>Kd,_int32:()=>Qd,_int64:()=>ap,_intersection:()=>nE,_ipv4:()=>ks,_ipv6:()=>Is,_isoDate:()=>Gd,_isoDateTime:()=>Vd,_isoDuration:()=>Bd,_isoTime:()=>Jd,_jwt:()=>Ps,_ksuid:()=>Ss,_lazy:()=>xE,_length:()=>so,_literal:()=>cE,_lowercase:()=>ya,_lt:()=>Fr,_lte:()=>Jt,_mac:()=>Zd,_map:()=>iE,_max:()=>Jt,_maxLength:()=>io,_maxSize:()=>ao,_mime:()=>Sa,_min:()=>$t,_minLength:()=>fn,_minSize:()=>On,_multipleOf:()=>Pn,_nan:()=>hp,_nanoid:()=>ys,_nativeEnum:()=>uE,_negative:()=>yp,_never:()=>pp,_nonnegative:()=>bp,_nonoptional:()=>gE,_nonpositive:()=>_p,_normalize:()=>ka,_null:()=>up,_nullable:()=>mE,_number:()=>Hd,_optional:()=>pE,_overwrite:()=>br,_parse:()=>Qn,_parseAsync:()=>eo,_pipe:()=>yE,_positive:()=>vp,_promise:()=>wE,_property:()=>xp,_readonly:()=>_E,_record:()=>aE,_refine:()=>Ip,_regex:()=>va,_safeDecode:()=>Bi,_safeDecodeAsync:()=>Wi,_safeEncode:()=>Ji,_safeEncodeAsync:()=>Hi,_safeParse:()=>to,_safeParseAsync:()=>ro,_set:()=>sE,_size:()=>ha,_slugify:()=>Ea,_startsWith:()=>xa,_string:()=>Fd,_stringFormat:()=>lo,_stringbool:()=>Ap,_success:()=>hE,_superRefine:()=>Tp,_symbol:()=>sp,_templateLiteral:()=>bE,_toLowerCase:()=>Ta,_toUpperCase:()=>$a,_transform:()=>dE,_trim:()=>Ia,_tuple:()=>oE,_uint32:()=>ep,_uint64:()=>ip,_ulid:()=>xs,_undefined:()=>lp,_union:()=>tE,_unknown:()=>dp,_uppercase:()=>_a,_url:()=>ga,_uuid:()=>ms,_uuidv4:()=>fs,_uuidv6:()=>gs,_uuidv7:()=>hs,_void:()=>mp,_xid:()=>ws,clone:()=>vt,config:()=>nt,decode:()=>x0,decodeAsync:()=>S0,describe:()=>$p,encode:()=>b0,encodeAsync:()=>w0,flattenError:()=>aa,formatError:()=>ia,globalConfig:()=>Yo,globalRegistry:()=>yt,isValidBase64:()=>Kc,isValidBase64URL:()=>sv,isValidJWT:()=>lv,locales:()=>Cn,meta:()=>Ep,parse:()=>Fi,parseAsync:()=>Li,prettifyError:()=>Ou,regexes:()=>jt,registry:()=>ds,safeDecode:()=>I0,safeDecodeAsync:()=>$0,safeEncode:()=>k0,safeEncodeAsync:()=>T0,safeParse:()=>Nu,safeParseAsync:()=>Ru,toDotPath:()=>Vh,toJSONSchema:()=>Zr,treeifyError:()=>Pu,util:()=>K,version:()=>Ec});var bu=Object.freeze({status:"aborted"});function T(e,t,r){var u;function o(c,l){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:l,constr:s,traits:new Set},enumerable:!1}),c._zod.traits.has(e))return;c._zod.traits.add(e),t(c,l);let d=s.prototype,m=Object.keys(d);for(let p=0;p<m.length;p++){let g=m[p];g in c||(c[g]=d[g].bind(c))}}let n=(u=r==null?void 0:r.Parent)!=null?u:Object;class i extends n{}Object.defineProperty(i,"name",{value:e});function s(c){var m;var l;let d=r!=null&&r.Parent?new i:this;o(d,c),(m=(l=d._zod).deferred)!=null||(l.deferred=[]);for(let p of d._zod.deferred)p();return d}return Object.defineProperty(s,"init",{value:o}),Object.defineProperty(s,Symbol.hasInstance,{value:c=>{var l,d;return r!=null&&r.Parent&&c instanceof r.Parent?!0:(d=(l=c==null?void 0:c._zod)==null?void 0:l.traits)==null?void 0:d.has(e)}}),Object.defineProperty(s,"name",{value:e}),s}var Di=Symbol("zod_brand"),Qt=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},ln=class extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}},Yo={};function nt(e){return e&&Object.assign(Yo,e),Yo}var K={};nn(K,{BIGINT_FORMAT_RANGES:()=>Cu,Class:()=>wu,NUMBER_FORMAT_RANGES:()=>Au,aborted:()=>mn,allowsEval:()=>Iu,assert:()=>XT,assertEqual:()=>HT,assertIs:()=>KT,assertNever:()=>YT,assertNotEqual:()=>WT,assignProp:()=>cn,base64ToUint8Array:()=>Lh,base64urlToUint8Array:()=>g0,cached:()=>Yn,captureStackTrace:()=>Ui,cleanEnum:()=>f0,cleanRegex:()=>ea,clone:()=>vt,cloneDef:()=>e0,createTransparentProxy:()=>i0,defineLazy:()=>ve,esc:()=>zi,escapeRegex:()=>Gt,extend:()=>u0,finalizeIssue:()=>Rt,floatSafeRemainder:()=>Su,getElementAtPath:()=>t0,getEnumValues:()=>Qo,getLengthableOrigin:()=>na,getParsedType:()=>a0,getSizableOrigin:()=>ra,hexToUint8Array:()=>v0,isObject:()=>$n,isPlainObject:()=>pn,issue:()=>Xn,joinValues:()=>N,jsonStringifyReplacer:()=>Kn,merge:()=>d0,mergeDefs:()=>dn,normalizeParams:()=>X,nullish:()=>un,numKeys:()=>o0,objectClone:()=>QT,omit:()=>l0,optionalKeys:()=>Eu,partial:()=>p0,pick:()=>s0,prefixIssues:()=>Nt,primitiveTypes:()=>$u,promiseAllObject:()=>r0,propertyKeyTypes:()=>ta,randomString:()=>n0,required:()=>m0,safeExtend:()=>c0,shallowClone:()=>Tu,slugify:()=>ku,stringifyPrimitive:()=>W,uint8ArrayToBase64:()=>Zh,uint8ArrayToBase64url:()=>h0,uint8ArrayToHex:()=>y0,unwrapMessage:()=>Xo});function HT(e){return e}function WT(e){return e}function KT(e){}function YT(e){throw new Error}function XT(e){}function Qo(e){let t=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,n])=>t.indexOf(+o)===-1).map(([o,n])=>n)}function N(e,t="|"){return e.map(r=>W(r)).join(t)}function Kn(e,t){return typeof t=="bigint"?t.toString():t}function Yn(e){return{get value(){{let r=e();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}function un(e){return e==null}function ea(e){let t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Su(e,t){let r=(e.toString().split(".")[1]||"").length,o=t.toString(),n=(o.split(".")[1]||"").length;if(n===0&&/\d?e-\d?/.test(o)){let c=o.match(/\d?e-(\d?)/);c!=null&&c[1]&&(n=Number.parseInt(c[1]))}let i=r>n?r:n,s=Number.parseInt(e.toFixed(i).replace(".","")),u=Number.parseInt(t.toFixed(i).replace(".",""));return s%u/10**i}var Fh=Symbol("evaluating");function ve(e,t,r){let o;Object.defineProperty(e,t,{get(){if(o!==Fh)return o===void 0&&(o=Fh,o=r()),o},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function QT(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function cn(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function dn(...e){let t={};for(let r of e){let o=Object.getOwnPropertyDescriptors(r);Object.assign(t,o)}return Object.defineProperties({},t)}function e0(e){return dn(e._zod.def)}function t0(e,t){return t?t.reduce((r,o)=>r==null?void 0:r[o],e):e}function r0(e){let t=Object.keys(e),r=t.map(o=>e[o]);return Promise.all(r).then(o=>{let n={};for(let i=0;i<t.length;i++)n[t[i]]=o[i];return n})}function n0(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let o=0;o<e;o++)r+=t[Math.floor(Math.random()*t.length)];return r}function zi(e){return JSON.stringify(e)}function ku(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}var Ui="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function $n(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}var Iu=Yn(()=>{var e;if(typeof navigator!="undefined"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{let t=Function;return new t(""),!0}catch(t){return!1}});function pn(e){if($n(e)===!1)return!1;let t=e.constructor;if(t===void 0||typeof t!="function")return!0;let r=t.prototype;return!($n(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Tu(e){return pn(e)?{...e}:Array.isArray(e)?[...e]:e}function o0(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}var a0=e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":e===null?"null":e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?"promise":typeof Map!="undefined"&&e instanceof Map?"map":typeof Set!="undefined"&&e instanceof Set?"set":typeof Date!="undefined"&&e instanceof Date?"date":typeof File!="undefined"&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},ta=new Set(["string","number","symbol"]),$u=new Set(["string","number","bigint","boolean","symbol","undefined"]);function Gt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function vt(e,t,r){let o=new e._zod.constr(t!=null?t:e._zod.def);return(!t||r!=null&&r.parent)&&(o._zod.parent=e),o}function X(e){let t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function i0(e){let t;return new Proxy({},{get(r,o,n){return t!=null||(t=e()),Reflect.get(t,o,n)},set(r,o,n,i){return t!=null||(t=e()),Reflect.set(t,o,n,i)},has(r,o){return t!=null||(t=e()),Reflect.has(t,o)},deleteProperty(r,o){return t!=null||(t=e()),Reflect.deleteProperty(t,o)},ownKeys(r){return t!=null||(t=e()),Reflect.ownKeys(t)},getOwnPropertyDescriptor(r,o){return t!=null||(t=e()),Reflect.getOwnPropertyDescriptor(t,o)},defineProperty(r,o,n){return t!=null||(t=e()),Reflect.defineProperty(t,o,n)}})}function W(e){return typeof e=="bigint"?e.toString()+"n":typeof e=="string"?`"${e}"`:`${e}`}function Eu(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}var Au={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Cu={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function s0(e,t){let r=e._zod.def,o=dn(e._zod.def,{get shape(){let n={};for(let i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(n[i]=r.shape[i])}return cn(this,"shape",n),n},checks:[]});return vt(e,o)}function l0(e,t){let r=e._zod.def,o=dn(e._zod.def,{get shape(){let n={...e._zod.def.shape};for(let i in t){if(!(i in r.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete n[i]}return cn(this,"shape",n),n},checks:[]});return vt(e,o)}function u0(e,t){if(!pn(t))throw new Error("Invalid input to extend: expected a plain object");let r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let n=dn(e._zod.def,{get shape(){let i={...e._zod.def.shape,...t};return cn(this,"shape",i),i},checks:[]});return vt(e,n)}function c0(e,t){if(!pn(t))throw new Error("Invalid input to safeExtend: expected a plain object");let r={...e._zod.def,get shape(){let o={...e._zod.def.shape,...t};return cn(this,"shape",o),o},checks:e._zod.def.checks};return vt(e,r)}function d0(e,t){let r=dn(e._zod.def,{get shape(){let o={...e._zod.def.shape,...t._zod.def.shape};return cn(this,"shape",o),o},get catchall(){return t._zod.def.catchall},checks:[]});return vt(e,r)}function p0(e,t,r){let o=dn(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let s in r){if(!(s in n))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(i[s]=e?new e({type:"optional",innerType:n[s]}):n[s])}else for(let s in n)i[s]=e?new e({type:"optional",innerType:n[s]}):n[s];return cn(this,"shape",i),i},checks:[]});return vt(t,o)}function m0(e,t,r){let o=dn(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let s in r){if(!(s in i))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(i[s]=new e({type:"nonoptional",innerType:n[s]}))}else for(let s in n)i[s]=new e({type:"nonoptional",innerType:n[s]});return cn(this,"shape",i),i},checks:[]});return vt(t,o)}function mn(e,t=0){var r;if(e.aborted===!0)return!0;for(let o=t;o<e.issues.length;o++)if(((r=e.issues[o])==null?void 0:r.continue)!==!0)return!0;return!1}function Nt(e,t){return t.map(r=>{var n;var o;return(n=(o=r).path)!=null||(o.path=[]),r.path.unshift(e),r})}function Xo(e){return typeof e=="string"?e:e==null?void 0:e.message}function Rt(e,t,r){var n,i,s,u,c,l,d,m,p,g,h;let o={...e,path:(n=e.path)!=null?n:[]};if(!e.message){let v=(h=(g=(m=(l=Xo((u=(s=(i=e.inst)==null?void 0:i._zod.def)==null?void 0:s.error)==null?void 0:u.call(s,e)))!=null?l:Xo((c=t==null?void 0:t.error)==null?void 0:c.call(t,e)))!=null?m:Xo((d=r.customError)==null?void 0:d.call(r,e)))!=null?g:Xo((p=r.localeError)==null?void 0:p.call(r,e)))!=null?h:"Invalid input";o.message=v}return delete o.inst,delete o.continue,t!=null&&t.reportInput||delete o.input,o}function ra(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function na(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Xn(...e){let[t,r,o]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:o}:{...t}}function f0(e){return Object.entries(e).filter(([t,r])=>Number.isNaN(Number.parseInt(t,10))).map(t=>t[1])}function Lh(e){let t=atob(e),r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}function Zh(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function g0(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-t.length%4)%4);return Lh(t+r)}function h0(e){return Zh(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function v0(e){let t=e.replace(/^0x/,"");if(t.length%2!==0)throw new Error("Invalid hex string length");let r=new Uint8Array(t.length/2);for(let o=0;o<t.length;o+=2)r[o/2]=Number.parseInt(t.slice(o,o+2),16);return r}function y0(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}var wu=class{constructor(...t){}};var qh=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Kn,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},oa=T("$ZodError",qh),Tt=T("$ZodError",qh,{Parent:Error});function aa(e,t=r=>r.message){let r={},o=[];for(let n of e.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(t(n))):o.push(t(n));return{formErrors:o,fieldErrors:r}}function ia(e,t=r=>r.message){let r={_errors:[]},o=n=>{for(let i of n.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(s=>o({issues:s}));else if(i.code==="invalid_key")o({issues:i.issues});else if(i.code==="invalid_element")o({issues:i.issues});else if(i.path.length===0)r._errors.push(t(i));else{let s=r,u=0;for(;u<i.path.length;){let c=i.path[u];u===i.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(t(i))):s[c]=s[c]||{_errors:[]},s=s[c],u++}}};return o(e),r}function Pu(e,t=r=>r.message){let r={errors:[]},o=(n,i=[])=>{var c,l,d,m;var s,u;for(let p of n.issues)if(p.code==="invalid_union"&&p.errors.length)p.errors.map(g=>o({issues:g},p.path));else if(p.code==="invalid_key")o({issues:p.issues},p.path);else if(p.code==="invalid_element")o({issues:p.issues},p.path);else{let g=[...i,...p.path];if(g.length===0){r.errors.push(t(p));continue}let h=r,v=0;for(;v<g.length;){let _=g[v],w=v===g.length-1;typeof _=="string"?((c=h.properties)!=null||(h.properties={}),(l=(s=h.properties)[_])!=null||(s[_]={errors:[]}),h=h.properties[_]):((d=h.items)!=null||(h.items=[]),(m=(u=h.items)[_])!=null||(u[_]={errors:[]}),h=h.items[_]),w&&h.errors.push(t(p)),v++}}};return o(e),r}function Vh(e){let t=[],r=e.map(o=>typeof o=="object"?o.key:o);for(let o of r)typeof o=="number"?t.push(`[${o}]`):typeof o=="symbol"?t.push(`[${JSON.stringify(String(o))}]`):/[^\w$]/.test(o)?t.push(`[${JSON.stringify(o)}]`):(t.length&&t.push("."),t.push(o));return t.join("")}function Ou(e){var o;let t=[],r=[...e.issues].sort((n,i)=>{var s,u;return((s=n.path)!=null?s:[]).length-((u=i.path)!=null?u:[]).length});for(let n of r)t.push(`\u2716 ${n.message}`),(o=n.path)!=null&&o.length&&t.push(`  \u2192 at ${Vh(n.path)}`);return t.join(`
`)}var Qn=e=>(t,r,o,n)=>{var u;let i=o?Object.assign(o,{async:!1}):{async:!1},s=t._zod.run({value:r,issues:[]},i);if(s instanceof Promise)throw new Qt;if(s.issues.length){let c=new((u=n==null?void 0:n.Err)!=null?u:e)(s.issues.map(l=>Rt(l,i,nt())));throw Ui(c,n==null?void 0:n.callee),c}return s.value},Fi=Qn(Tt),eo=e=>async(t,r,o,n)=>{var u;let i=o?Object.assign(o,{async:!0}):{async:!0},s=t._zod.run({value:r,issues:[]},i);if(s instanceof Promise&&(s=await s),s.issues.length){let c=new((u=n==null?void 0:n.Err)!=null?u:e)(s.issues.map(l=>Rt(l,i,nt())));throw Ui(c,n==null?void 0:n.callee),c}return s.value},Li=eo(Tt),to=e=>(t,r,o)=>{let n=o?{...o,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},n);if(i instanceof Promise)throw new Qt;return i.issues.length?{success:!1,error:new(e!=null?e:oa)(i.issues.map(s=>Rt(s,n,nt())))}:{success:!0,data:i.value}},Nu=to(Tt),ro=e=>async(t,r,o)=>{let n=o?Object.assign(o,{async:!0}):{async:!0},i=t._zod.run({value:r,issues:[]},n);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(s=>Rt(s,n,nt())))}:{success:!0,data:i.value}},Ru=ro(Tt),Zi=e=>(t,r,o)=>{let n=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Qn(e)(t,r,n)},b0=Zi(Tt),qi=e=>(t,r,o)=>Qn(e)(t,r,o),x0=qi(Tt),Vi=e=>async(t,r,o)=>{let n=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return eo(e)(t,r,n)},w0=Vi(Tt),Gi=e=>async(t,r,o)=>eo(e)(t,r,o),S0=Gi(Tt),Ji=e=>(t,r,o)=>{let n=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return to(e)(t,r,n)},k0=Ji(Tt),Bi=e=>(t,r,o)=>to(e)(t,r,o),I0=Bi(Tt),Hi=e=>async(t,r,o)=>{let n=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return ro(e)(t,r,n)},T0=Hi(Tt),Wi=e=>async(t,r,o)=>ro(e)(t,r,o),$0=Wi(Tt);var jt={};nn(jt,{base64:()=>Ku,base64url:()=>Ki,bigint:()=>rc,boolean:()=>ac,browserEmail:()=>j0,cidrv4:()=>Hu,cidrv6:()=>Wu,cuid:()=>ju,cuid2:()=>Mu,date:()=>Xu,datetime:()=>ec,domain:()=>z0,duration:()=>Lu,e164:()=>Yu,email:()=>qu,emoji:()=>Vu,extendedDuration:()=>E0,guid:()=>Zu,hex:()=>U0,hostname:()=>D0,html5Email:()=>O0,idnEmail:()=>R0,integer:()=>nc,ipv4:()=>Gu,ipv6:()=>Ju,ksuid:()=>Uu,lowercase:()=>lc,mac:()=>Bu,md5_base64:()=>L0,md5_base64url:()=>Z0,md5_hex:()=>F0,nanoid:()=>Fu,null:()=>ic,number:()=>oc,rfc5322Email:()=>N0,sha1_base64:()=>V0,sha1_base64url:()=>G0,sha1_hex:()=>q0,sha256_base64:()=>B0,sha256_base64url:()=>H0,sha256_hex:()=>J0,sha384_base64:()=>K0,sha384_base64url:()=>Y0,sha384_hex:()=>W0,sha512_base64:()=>Q0,sha512_base64url:()=>e$,sha512_hex:()=>X0,string:()=>tc,time:()=>Qu,ulid:()=>Du,undefined:()=>sc,unicodeEmail:()=>Gh,uppercase:()=>uc,uuid:()=>En,uuid4:()=>A0,uuid6:()=>C0,uuid7:()=>P0,xid:()=>zu});var ju=/^[cC][^\s-]{8,}$/,Mu=/^[0-9a-z]+$/,Du=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,zu=/^[0-9a-vA-V]{20}$/,Uu=/^[A-Za-z0-9]{27}$/,Fu=/^[a-zA-Z0-9_-]{21}$/,Lu=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,E0=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Zu=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,En=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,A0=En(4),C0=En(6),P0=En(7),qu=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,O0=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,N0=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Gh=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,R0=Gh,j0=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,M0="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Vu(){return new RegExp(M0,"u")}var Gu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ju=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Bu=e=>{let t=Gt(e!=null?e:":");return new RegExp(`^(?:[0-9A-F]{2}${t}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${t}){5}[0-9a-f]{2}$`)},Hu=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Wu=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ku=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Ki=/^[A-Za-z0-9_-]*$/,D0=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,z0=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,Yu=/^\+(?:[0-9]){6,14}[0-9]$/,Jh="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Xu=new RegExp(`^${Jh}$`);function Bh(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Qu(e){return new RegExp(`^${Bh(e)}$`)}function ec(e){let t=Bh({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let o=`${t}(?:${r.join("|")})`;return new RegExp(`^${Jh}T(?:${o})$`)}var tc=e=>{var r,o;let t=e?`[\\s\\S]{${(r=e==null?void 0:e.minimum)!=null?r:0},${(o=e==null?void 0:e.maximum)!=null?o:""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},rc=/^-?\d+n?$/,nc=/^-?\d+$/,oc=/^-?\d+(?:\.\d+)?/,ac=/^(?:true|false)$/i,ic=/^null$/i;var sc=/^undefined$/i;var lc=/^[^A-Z]*$/,uc=/^[^a-z]*$/,U0=/^[0-9a-fA-F]*$/;function sa(e,t){return new RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function la(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}var F0=/^[0-9a-fA-F]{32}$/,L0=sa(22,"=="),Z0=la(22),q0=/^[0-9a-fA-F]{40}$/,V0=sa(27,"="),G0=la(27),J0=/^[0-9a-fA-F]{64}$/,B0=sa(43,"="),H0=la(43),W0=/^[0-9a-fA-F]{96}$/,K0=sa(64,""),Y0=la(64),X0=/^[0-9a-fA-F]{128}$/,Q0=sa(86,"=="),e$=la(86);var Ue=T("$ZodCheck",(e,t)=>{var o,n;var r;(o=e._zod)!=null||(e._zod={}),e._zod.def=t,(n=(r=e._zod).onattach)!=null||(r.onattach=[])}),Wh={number:"number",bigint:"bigint",object:"date"},Yi=T("$ZodCheckLessThan",(e,t)=>{Ue.init(e,t);let r=Wh[typeof t.value];e._zod.onattach.push(o=>{var s;let n=o._zod.bag,i=(s=t.inclusive?n.maximum:n.exclusiveMaximum)!=null?s:Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value<=t.value:o.value<t.value)||o.issues.push({origin:r,code:"too_big",maximum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Xi=T("$ZodCheckGreaterThan",(e,t)=>{Ue.init(e,t);let r=Wh[typeof t.value];e._zod.onattach.push(o=>{var s;let n=o._zod.bag,i=(s=t.inclusive?n.minimum:n.exclusiveMinimum)!=null?s:Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value>=t.value:o.value>t.value)||o.issues.push({origin:r,code:"too_small",minimum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),cc=T("$ZodCheckMultipleOf",(e,t)=>{Ue.init(e,t),e._zod.onattach.push(r=>{var n;var o;(n=(o=r._zod.bag).multipleOf)!=null||(o.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Su(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),dc=T("$ZodCheckNumberFormat",(e,t)=>{var s;Ue.init(e,t),t.format=t.format||"float64";let r=(s=t.format)==null?void 0:s.includes("int"),o=r?"int":"number",[n,i]=Au[t.format];e._zod.onattach.push(u=>{let c=u._zod.bag;c.format=t.format,c.minimum=n,c.maximum=i,r&&(c.pattern=nc)}),e._zod.check=u=>{let c=u.value;if(r){if(!Number.isInteger(c)){u.issues.push({expected:o,format:t.format,code:"invalid_type",continue:!1,input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?u.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort}):u.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort});return}}c<n&&u.issues.push({origin:"number",input:c,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),c>i&&u.issues.push({origin:"number",input:c,code:"too_big",maximum:i,inst:e})}}),pc=T("$ZodCheckBigIntFormat",(e,t)=>{Ue.init(e,t);let[r,o]=Cu[t.format];e._zod.onattach.push(n=>{let i=n._zod.bag;i.format=t.format,i.minimum=r,i.maximum=o}),e._zod.check=n=>{let i=n.value;i<r&&n.issues.push({origin:"bigint",input:i,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),i>o&&n.issues.push({origin:"bigint",input:i,code:"too_big",maximum:o,inst:e})}}),mc=T("$ZodCheckMaxSize",(e,t)=>{var o;var r;Ue.init(e,t),(o=(r=e._zod.def).when)!=null||(r.when=n=>{let i=n.value;return!un(i)&&i.size!==void 0}),e._zod.onattach.push(n=>{var s;let i=(s=n._zod.bag.maximum)!=null?s:Number.POSITIVE_INFINITY;t.maximum<i&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{let i=n.value;i.size<=t.maximum||n.issues.push({origin:ra(i),code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),fc=T("$ZodCheckMinSize",(e,t)=>{var o;var r;Ue.init(e,t),(o=(r=e._zod.def).when)!=null||(r.when=n=>{let i=n.value;return!un(i)&&i.size!==void 0}),e._zod.onattach.push(n=>{var s;let i=(s=n._zod.bag.minimum)!=null?s:Number.NEGATIVE_INFINITY;t.minimum>i&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{let i=n.value;i.size>=t.minimum||n.issues.push({origin:ra(i),code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),gc=T("$ZodCheckSizeEquals",(e,t)=>{var o;var r;Ue.init(e,t),(o=(r=e._zod.def).when)!=null||(r.when=n=>{let i=n.value;return!un(i)&&i.size!==void 0}),e._zod.onattach.push(n=>{let i=n._zod.bag;i.minimum=t.size,i.maximum=t.size,i.size=t.size}),e._zod.check=n=>{let i=n.value,s=i.size;if(s===t.size)return;let u=s>t.size;n.issues.push({origin:ra(i),...u?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),hc=T("$ZodCheckMaxLength",(e,t)=>{var o;var r;Ue.init(e,t),(o=(r=e._zod.def).when)!=null||(r.when=n=>{let i=n.value;return!un(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{var s;let i=(s=n._zod.bag.maximum)!=null?s:Number.POSITIVE_INFINITY;t.maximum<i&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{let i=n.value;if(i.length<=t.maximum)return;let u=na(i);n.issues.push({origin:u,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),vc=T("$ZodCheckMinLength",(e,t)=>{var o;var r;Ue.init(e,t),(o=(r=e._zod.def).when)!=null||(r.when=n=>{let i=n.value;return!un(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{var s;let i=(s=n._zod.bag.minimum)!=null?s:Number.NEGATIVE_INFINITY;t.minimum>i&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{let i=n.value;if(i.length>=t.minimum)return;let u=na(i);n.issues.push({origin:u,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),yc=T("$ZodCheckLengthEquals",(e,t)=>{var o;var r;Ue.init(e,t),(o=(r=e._zod.def).when)!=null||(r.when=n=>{let i=n.value;return!un(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{let i=n._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=n=>{let i=n.value,s=i.length;if(s===t.length)return;let u=na(i),c=s>t.length;n.issues.push({origin:u,...c?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),no=T("$ZodCheckStringFormat",(e,t)=>{var n,i;var r,o;Ue.init(e,t),e._zod.onattach.push(s=>{var c;let u=s._zod.bag;u.format=t.format,t.pattern&&((c=u.patterns)!=null||(u.patterns=new Set),u.patterns.add(t.pattern))}),t.pattern?(n=(r=e._zod).check)!=null||(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(i=(o=e._zod).check)!=null||(o.check=()=>{})}),_c=T("$ZodCheckRegex",(e,t)=>{no.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),bc=T("$ZodCheckLowerCase",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=lc),no.init(e,t)}),xc=T("$ZodCheckUpperCase",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=uc),no.init(e,t)}),wc=T("$ZodCheckIncludes",(e,t)=>{Ue.init(e,t);let r=Gt(t.includes),o=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=o,e._zod.onattach.push(n=>{var s;let i=n._zod.bag;(s=i.patterns)!=null||(i.patterns=new Set),i.patterns.add(o)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),Sc=T("$ZodCheckStartsWith",(e,t)=>{var o;Ue.init(e,t);let r=new RegExp(`^${Gt(t.prefix)}.*`);(o=t.pattern)!=null||(t.pattern=r),e._zod.onattach.push(n=>{var s;let i=n._zod.bag;(s=i.patterns)!=null||(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),kc=T("$ZodCheckEndsWith",(e,t)=>{var o;Ue.init(e,t);let r=new RegExp(`.*${Gt(t.suffix)}$`);(o=t.pattern)!=null||(t.pattern=r),e._zod.onattach.push(n=>{var s;let i=n._zod.bag;(s=i.patterns)!=null||(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}});function Hh(e,t,r){e.issues.length&&t.issues.push(...Nt(r,e.issues))}var Ic=T("$ZodCheckProperty",(e,t)=>{Ue.init(e,t),e._zod.check=r=>{let o=t.schema._zod.run({value:r.value[t.property],issues:[]},{});if(o instanceof Promise)return o.then(n=>Hh(n,r,t.property));Hh(o,r,t.property)}}),Tc=T("$ZodCheckMimeType",(e,t)=>{Ue.init(e,t);let r=new Set(t.mime);e._zod.onattach.push(o=>{o._zod.bag.mime=t.mime}),e._zod.check=o=>{r.has(o.value.type)||o.issues.push({code:"invalid_value",values:t.mime,input:o.value.type,inst:e,continue:!t.abort})}}),$c=T("$ZodCheckOverwrite",(e,t)=>{Ue.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});var ua=class{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}let o=t.split(`
`).filter(s=>s),n=Math.min(...o.map(s=>s.length-s.trimStart().length)),i=o.map(s=>s.slice(n)).map(s=>" ".repeat(this.indent*2)+s);for(let s of i)this.content.push(s)}compile(){var i;let t=Function,r=this==null?void 0:this.args,n=[...((i=this==null?void 0:this.content)!=null?i:[""]).map(s=>`  ${s}`)];return new t(...r,n.join(`
`))}};var Ec={major:4,minor:1,patch:13};var ce=T("$ZodType",(e,t)=>{var n,i,s;var r;e!=null||(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Ec;let o=[...(n=e._zod.def.checks)!=null?n:[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(let u of o)for(let c of u._zod.onattach)c(e);if(o.length===0)(i=(r=e._zod).deferred)!=null||(r.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{let u=(l,d,m)=>{let p=mn(l),g;for(let h of d){if(h._zod.def.when){if(!h._zod.def.when(l))continue}else if(p)continue;let v=l.issues.length,_=h._zod.check(l);if(_ instanceof Promise&&(m==null?void 0:m.async)===!1)throw new Qt;if(g||_ instanceof Promise)g=(g!=null?g:Promise.resolve()).then(async()=>{await _,l.issues.length!==v&&(p||(p=mn(l,v)))});else{if(l.issues.length===v)continue;p||(p=mn(l,v))}}return g?g.then(()=>l):l},c=(l,d,m)=>{if(mn(l))return l.aborted=!0,l;let p=u(d,o,m);if(p instanceof Promise){if(m.async===!1)throw new Qt;return p.then(g=>e._zod.parse(g,m))}return e._zod.parse(p,m)};e._zod.run=(l,d)=>{if(d.skipChecks)return e._zod.parse(l,d);if(d.direction==="backward"){let p=e._zod.parse({value:l.value,issues:[]},{...d,skipChecks:!0});return p instanceof Promise?p.then(g=>c(g,l,d)):c(p,l,d)}let m=e._zod.parse(l,d);if(m instanceof Promise){if(d.async===!1)throw new Qt;return m.then(p=>u(p,o,d))}return u(m,o,d)}}e["~standard"]={validate:u=>{var c;try{let l=Nu(e,u);return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}}catch(l){return Ru(e,u).then(d=>{var m;return d.success?{value:d.data}:{issues:(m=d.error)==null?void 0:m.issues}})}},vendor:"zod",version:1}}),An=T("$ZodString",(e,t)=>{var r,o,n;ce.init(e,t),e._zod.pattern=(n=[...(o=(r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)!=null?o:[]].pop())!=null?n:tc(e._zod.bag),e._zod.parse=(i,s)=>{if(t.coerce)try{i.value=String(i.value)}catch(u){}return typeof i.value=="string"||i.issues.push({expected:"string",code:"invalid_type",input:i.value,inst:e}),i}}),De=T("$ZodStringFormat",(e,t)=>{no.init(e,t),An.init(e,t)}),Cc=T("$ZodGUID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Zu),De.init(e,t)}),Pc=T("$ZodUUID",(e,t)=>{var r,o;if(t.version){let i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(i===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);(r=t.pattern)!=null||(t.pattern=En(i))}else(o=t.pattern)!=null||(t.pattern=En());De.init(e,t)}),Oc=T("$ZodEmail",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=qu),De.init(e,t)}),Nc=T("$ZodURL",(e,t)=>{De.init(e,t),e._zod.check=r=>{try{let o=r.value.trim(),n=new URL(o);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(n.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=n.href:r.value=o;return}catch(o){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),Rc=T("$ZodEmoji",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Vu()),De.init(e,t)}),jc=T("$ZodNanoID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Fu),De.init(e,t)}),Mc=T("$ZodCUID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=ju),De.init(e,t)}),Dc=T("$ZodCUID2",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Mu),De.init(e,t)}),zc=T("$ZodULID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Du),De.init(e,t)}),Uc=T("$ZodXID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=zu),De.init(e,t)}),Fc=T("$ZodKSUID",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Uu),De.init(e,t)}),Lc=T("$ZodISODateTime",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=ec(t)),De.init(e,t)}),Zc=T("$ZodISODate",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Xu),De.init(e,t)}),qc=T("$ZodISOTime",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Qu(t)),De.init(e,t)}),Vc=T("$ZodISODuration",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Lu),De.init(e,t)}),Gc=T("$ZodIPv4",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Gu),De.init(e,t),e._zod.bag.format="ipv4"}),Jc=T("$ZodIPv6",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Ju),De.init(e,t),e._zod.bag.format="ipv6",e._zod.check=o=>{try{new URL(`http://[${o.value}]`)}catch(n){o.issues.push({code:"invalid_format",format:"ipv6",input:o.value,inst:e,continue:!t.abort})}}}),Bc=T("$ZodMAC",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Bu(t.delimiter)),De.init(e,t),e._zod.bag.format="mac"}),Hc=T("$ZodCIDRv4",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Hu),De.init(e,t)}),Wc=T("$ZodCIDRv6",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Wu),De.init(e,t),e._zod.check=o=>{let n=o.value.split("/");try{if(n.length!==2)throw new Error;let[i,s]=n;if(!s)throw new Error;let u=Number(s);if(`${u}`!==s)throw new Error;if(u<0||u>128)throw new Error;new URL(`http://[${i}]`)}catch(i){o.issues.push({code:"invalid_format",format:"cidrv6",input:o.value,inst:e,continue:!t.abort})}}});function Kc(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch(t){return!1}}var Yc=T("$ZodBase64",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Ku),De.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=o=>{Kc(o.value)||o.issues.push({code:"invalid_format",format:"base64",input:o.value,inst:e,continue:!t.abort})}});function sv(e){if(!Ki.test(e))return!1;let t=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Kc(r)}var Xc=T("$ZodBase64URL",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Ki),De.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=o=>{sv(o.value)||o.issues.push({code:"invalid_format",format:"base64url",input:o.value,inst:e,continue:!t.abort})}}),Qc=T("$ZodE164",(e,t)=>{var r;(r=t.pattern)!=null||(t.pattern=Yu),De.init(e,t)});function lv(e,t=null){try{let r=e.split(".");if(r.length!==3)return!1;let[o]=r;if(!o)return!1;let n=JSON.parse(atob(o));return!("typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||t&&(!("alg"in n)||n.alg!==t))}catch(r){return!1}}var ed=T("$ZodJWT",(e,t)=>{De.init(e,t),e._zod.check=r=>{lv(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),td=T("$ZodCustomStringFormat",(e,t)=>{De.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),os=T("$ZodNumber",(e,t)=>{var r;ce.init(e,t),e._zod.pattern=(r=e._zod.bag.pattern)!=null?r:oc,e._zod.parse=(o,n)=>{if(t.coerce)try{o.value=Number(o.value)}catch(u){}let i=o.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return o;let s=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return o.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...s?{received:s}:{}}),o}}),rd=T("$ZodNumberFormat",(e,t)=>{dc.init(e,t),os.init(e,t)}),ca=T("$ZodBoolean",(e,t)=>{ce.init(e,t),e._zod.pattern=ac,e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=!!r.value}catch(i){}let n=r.value;return typeof n=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:n,inst:e}),r}}),as=T("$ZodBigInt",(e,t)=>{ce.init(e,t),e._zod.pattern=rc,e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch(n){}return typeof r.value=="bigint"||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),nd=T("$ZodBigIntFormat",(e,t)=>{pc.init(e,t),as.init(e,t)}),od=T("$ZodSymbol",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;return typeof n=="symbol"||r.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:e}),r}}),ad=T("$ZodUndefined",(e,t)=>{ce.init(e,t),e._zod.pattern=sc,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(r,o)=>{let n=r.value;return typeof n=="undefined"||r.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:e}),r}}),id=T("$ZodNull",(e,t)=>{ce.init(e,t),e._zod.pattern=ic,e._zod.values=new Set([null]),e._zod.parse=(r,o)=>{let n=r.value;return n===null||r.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),r}}),sd=T("$ZodAny",(e,t)=>{ce.init(e,t),e._zod.parse=r=>r}),ld=T("$ZodUnknown",(e,t)=>{ce.init(e,t),e._zod.parse=r=>r}),ud=T("$ZodNever",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)}),cd=T("$ZodVoid",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;return typeof n=="undefined"||r.issues.push({expected:"void",code:"invalid_type",input:n,inst:e}),r}}),dd=T("$ZodDate",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=new Date(r.value)}catch(u){}let n=r.value,i=n instanceof Date;return i&&!Number.isNaN(n.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:n,...i?{received:"Invalid Date"}:{},inst:e}),r}});function Yh(e,t,r){e.issues.length&&t.issues.push(...Nt(r,e.issues)),t.value[r]=e.value}var pd=T("$ZodArray",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!Array.isArray(n))return r.issues.push({expected:"array",code:"invalid_type",input:n,inst:e}),r;r.value=Array(n.length);let i=[];for(let s=0;s<n.length;s++){let u=n[s],c=t.element._zod.run({value:u,issues:[]},o);c instanceof Promise?i.push(c.then(l=>Yh(l,r,s))):Yh(c,r,s)}return i.length?Promise.all(i).then(()=>r):r}});function ns(e,t,r,o){e.issues.length&&t.issues.push(...Nt(r,e.issues)),e.value===void 0?r in o&&(t.value[r]=void 0):t.value[r]=e.value}function uv(e){var o,n,i,s;let t=Object.keys(e.shape);for(let u of t)if(!((s=(i=(n=(o=e.shape)==null?void 0:o[u])==null?void 0:n._zod)==null?void 0:i.traits)!=null&&s.has("$ZodType")))throw new Error(`Invalid element at key "${u}": expected a Zod schema`);let r=Eu(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function cv(e,t,r,o,n,i){let s=[],u=n.keySet,c=n.catchall._zod,l=c.def.type;for(let d in t){if(u.has(d))continue;if(l==="never"){s.push(d);continue}let m=c.run({value:t[d],issues:[]},o);m instanceof Promise?e.push(m.then(p=>ns(p,r,d,t))):ns(m,r,d,t)}return s.length&&r.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:i}),e.length?Promise.all(e).then(()=>r):r}var dv=T("$ZodObject",(e,t)=>{ce.init(e,t);let r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){let u=t.shape;Object.defineProperty(t,"shape",{get:()=>{let c={...u};return Object.defineProperty(t,"shape",{value:c}),c}})}let o=Yn(()=>uv(t));ve(e._zod,"propValues",()=>{var l;let u=t.shape,c={};for(let d in u){let m=u[d]._zod;if(m.values){(l=c[d])!=null||(c[d]=new Set);for(let p of m.values)c[d].add(p)}}return c});let n=$n,i=t.catchall,s;e._zod.parse=(u,c)=>{s!=null||(s=o.value);let l=u.value;if(!n(l))return u.issues.push({expected:"object",code:"invalid_type",input:l,inst:e}),u;u.value={};let d=[],m=s.shape;for(let p of s.keys){let h=m[p]._zod.run({value:l[p],issues:[]},c);h instanceof Promise?d.push(h.then(v=>ns(v,u,p,l))):ns(h,u,p,l)}return i?cv(d,l,u,c,o.value,e):d.length?Promise.all(d).then(()=>u):u}}),md=T("$ZodObjectJIT",(e,t)=>{dv.init(e,t);let r=e._zod.parse,o=Yn(()=>uv(t)),n=p=>{let g=new ua(["shape","payload","ctx"]),h=o.value,v=f=>{let b=zi(f);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};g.write("const input = payload.value;");let _=Object.create(null),w=0;for(let f of h.keys)_[f]=`key_${w++}`;g.write("const newResult = {};");for(let f of h.keys){let b=_[f],y=zi(f);g.write(`const ${b} = ${v(f)};`),g.write(`
        if (${b}.issues.length) {
          payload.issues = payload.issues.concat(${b}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${y}, ...iss.path] : [${y}]
          })));
        }
        
        
        if (${b}.value === undefined) {
          if (${y} in input) {
            newResult[${y}] = undefined;
          }
        } else {
          newResult[${y}] = ${b}.value;
        }
        
      `)}g.write("payload.value = newResult;"),g.write("return payload;");let x=g.compile();return(f,b)=>x(p,f,b)},i,s=$n,u=!Yo.jitless,l=u&&Iu.value,d=t.catchall,m;e._zod.parse=(p,g)=>{m!=null||(m=o.value);let h=p.value;return s(h)?u&&l&&(g==null?void 0:g.async)===!1&&g.jitless!==!0?(i||(i=n(t.shape)),p=i(p,g),d?cv([],h,p,g,m,e):p):r(p,g):(p.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),p)}});function Xh(e,t,r,o){for(let i of e)if(i.issues.length===0)return t.value=i.value,t;let n=e.filter(i=>!mn(i));return n.length===1?(t.value=n[0].value,n[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(s=>Rt(s,o,nt())))}),t)}var is=T("$ZodUnion",(e,t)=>{ce.init(e,t),ve(e._zod,"optin",()=>t.options.some(n=>n._zod.optin==="optional")?"optional":void 0),ve(e._zod,"optout",()=>t.options.some(n=>n._zod.optout==="optional")?"optional":void 0),ve(e._zod,"values",()=>{if(t.options.every(n=>n._zod.values))return new Set(t.options.flatMap(n=>Array.from(n._zod.values)))}),ve(e._zod,"pattern",()=>{if(t.options.every(n=>n._zod.pattern)){let n=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${n.map(i=>ea(i.source)).join("|")})$`)}});let r=t.options.length===1,o=t.options[0]._zod.run;e._zod.parse=(n,i)=>{if(r)return o(n,i);let s=!1,u=[];for(let c of t.options){let l=c._zod.run({value:n.value,issues:[]},i);if(l instanceof Promise)u.push(l),s=!0;else{if(l.issues.length===0)return l;u.push(l)}}return s?Promise.all(u).then(c=>Xh(c,n,e,i)):Xh(u,n,e,i)}}),fd=T("$ZodDiscriminatedUnion",(e,t)=>{is.init(e,t);let r=e._zod.parse;ve(e._zod,"propValues",()=>{let n={};for(let i of t.options){let s=i._zod.propValues;if(!s||Object.keys(s).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(let[u,c]of Object.entries(s)){n[u]||(n[u]=new Set);for(let l of c)n[u].add(l)}}return n});let o=Yn(()=>{var s;let n=t.options,i=new Map;for(let u of n){let c=(s=u._zod.propValues)==null?void 0:s[t.discriminator];if(!c||c.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(u)}"`);for(let l of c){if(i.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);i.set(l,u)}}return i});e._zod.parse=(n,i)=>{let s=n.value;if(!$n(s))return n.issues.push({code:"invalid_type",expected:"object",input:s,inst:e}),n;let u=o.value.get(s==null?void 0:s[t.discriminator]);return u?u._zod.run(n,i):t.unionFallback?r(n,i):(n.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:s,path:[t.discriminator],inst:e}),n)}}),gd=T("$ZodIntersection",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>{let n=r.value,i=t.left._zod.run({value:n,issues:[]},o),s=t.right._zod.run({value:n,issues:[]},o);return i instanceof Promise||s instanceof Promise?Promise.all([i,s]).then(([c,l])=>Qh(r,c,l)):Qh(r,i,s)}});function Ac(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(pn(e)&&pn(t)){let r=Object.keys(t),o=Object.keys(e).filter(i=>r.indexOf(i)!==-1),n={...e,...t};for(let i of o){let s=Ac(e[i],t[i]);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};n[i]=s.data}return{valid:!0,data:n}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let o=0;o<e.length;o++){let n=e[o],i=t[o],s=Ac(n,i);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};r.push(s.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Qh(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),mn(e))return e;let o=Ac(t.value,r.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return e.value=o.data,e}var ss=T("$ZodTuple",(e,t)=>{ce.init(e,t);let r=t.items;e._zod.parse=(o,n)=>{let i=o.value;if(!Array.isArray(i))return o.issues.push({input:i,inst:e,expected:"tuple",code:"invalid_type"}),o;o.value=[];let s=[],u=[...r].reverse().findIndex(d=>d._zod.optin!=="optional"),c=u===-1?0:r.length-u;if(!t.rest){let d=i.length>r.length,m=i.length<c-1;if(d||m)return o.issues.push({...d?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:i,inst:e,origin:"array"}),o}let l=-1;for(let d of r){if(l++,l>=i.length&&l>=c)continue;let m=d._zod.run({value:i[l],issues:[]},n);m instanceof Promise?s.push(m.then(p=>Qi(p,o,l))):Qi(m,o,l)}if(t.rest){let d=i.slice(r.length);for(let m of d){l++;let p=t.rest._zod.run({value:m,issues:[]},n);p instanceof Promise?s.push(p.then(g=>Qi(g,o,l))):Qi(p,o,l)}}return s.length?Promise.all(s).then(()=>o):o}});function Qi(e,t,r){e.issues.length&&t.issues.push(...Nt(r,e.issues)),t.value[r]=e.value}var hd=T("$ZodRecord",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!pn(n))return r.issues.push({expected:"record",code:"invalid_type",input:n,inst:e}),r;let i=[],s=t.keyType._zod.values;if(s){r.value={};let u=new Set;for(let l of s)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){u.add(typeof l=="number"?l.toString():l);let d=t.valueType._zod.run({value:n[l],issues:[]},o);d instanceof Promise?i.push(d.then(m=>{m.issues.length&&r.issues.push(...Nt(l,m.issues)),r.value[l]=m.value})):(d.issues.length&&r.issues.push(...Nt(l,d.issues)),r.value[l]=d.value)}let c;for(let l in n)u.has(l)||(c=c!=null?c:[],c.push(l));c&&c.length>0&&r.issues.push({code:"unrecognized_keys",input:n,inst:e,keys:c})}else{r.value={};for(let u of Reflect.ownKeys(n)){if(u==="__proto__")continue;let c=t.keyType._zod.run({value:u,issues:[]},o);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(c.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:c.issues.map(d=>Rt(d,o,nt())),input:u,path:[u],inst:e}),r.value[c.value]=c.value;continue}let l=t.valueType._zod.run({value:n[u],issues:[]},o);l instanceof Promise?i.push(l.then(d=>{d.issues.length&&r.issues.push(...Nt(u,d.issues)),r.value[c.value]=d.value})):(l.issues.length&&r.issues.push(...Nt(u,l.issues)),r.value[c.value]=l.value)}}return i.length?Promise.all(i).then(()=>r):r}}),vd=T("$ZodMap",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!(n instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:n,inst:e}),r;let i=[];r.value=new Map;for(let[s,u]of n){let c=t.keyType._zod.run({value:s,issues:[]},o),l=t.valueType._zod.run({value:u,issues:[]},o);c instanceof Promise||l instanceof Promise?i.push(Promise.all([c,l]).then(([d,m])=>{ev(d,m,r,s,n,e,o)})):ev(c,l,r,s,n,e,o)}return i.length?Promise.all(i).then(()=>r):r}});function ev(e,t,r,o,n,i,s){e.issues.length&&(ta.has(typeof o)?r.issues.push(...Nt(o,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:n,inst:i,issues:e.issues.map(u=>Rt(u,s,nt()))})),t.issues.length&&(ta.has(typeof o)?r.issues.push(...Nt(o,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:n,inst:i,key:o,issues:t.issues.map(u=>Rt(u,s,nt()))})),r.value.set(e.value,t.value)}var yd=T("$ZodSet",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!(n instanceof Set))return r.issues.push({input:n,inst:e,expected:"set",code:"invalid_type"}),r;let i=[];r.value=new Set;for(let s of n){let u=t.valueType._zod.run({value:s,issues:[]},o);u instanceof Promise?i.push(u.then(c=>tv(c,r))):tv(u,r)}return i.length?Promise.all(i).then(()=>r):r}});function tv(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}var _d=T("$ZodEnum",(e,t)=>{ce.init(e,t);let r=Qo(t.entries),o=new Set(r);e._zod.values=o,e._zod.pattern=new RegExp(`^(${r.filter(n=>ta.has(typeof n)).map(n=>typeof n=="string"?Gt(n):n.toString()).join("|")})$`),e._zod.parse=(n,i)=>{let s=n.value;return o.has(s)||n.issues.push({code:"invalid_value",values:r,input:s,inst:e}),n}}),bd=T("$ZodLiteral",(e,t)=>{if(ce.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");let r=new Set(t.values);e._zod.values=r,e._zod.pattern=new RegExp(`^(${t.values.map(o=>typeof o=="string"?Gt(o):o?Gt(o.toString()):String(o)).join("|")})$`),e._zod.parse=(o,n)=>{let i=o.value;return r.has(i)||o.issues.push({code:"invalid_value",values:t.values,input:i,inst:e}),o}}),xd=T("$ZodFile",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;return n instanceof File||r.issues.push({expected:"file",code:"invalid_type",input:n,inst:e}),r}}),wd=T("$ZodTransform",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>{if(o.direction==="backward")throw new ln(e.constructor.name);let n=t.transform(r.value,r);if(o.async)return(n instanceof Promise?n:Promise.resolve(n)).then(s=>(r.value=s,r));if(n instanceof Promise)throw new Qt;return r.value=n,r}});function rv(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}var Sd=T("$ZodOptional",(e,t)=>{ce.init(e,t),e._zod.optin="optional",e._zod.optout="optional",ve(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),ve(e._zod,"pattern",()=>{let r=t.innerType._zod.pattern;return r?new RegExp(`^(${ea(r.source)})?$`):void 0}),e._zod.parse=(r,o)=>{if(t.innerType._zod.optin==="optional"){let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>rv(i,r.value)):rv(n,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,o)}}),kd=T("$ZodNullable",(e,t)=>{ce.init(e,t),ve(e._zod,"optin",()=>t.innerType._zod.optin),ve(e._zod,"optout",()=>t.innerType._zod.optout),ve(e._zod,"pattern",()=>{let r=t.innerType._zod.pattern;return r?new RegExp(`^(${ea(r.source)}|null)$`):void 0}),ve(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,o)=>r.value===null?r:t.innerType._zod.run(r,o)}),Id=T("$ZodDefault",(e,t)=>{ce.init(e,t),e._zod.optin="optional",ve(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,o)=>{if(o.direction==="backward")return t.innerType._zod.run(r,o);if(r.value===void 0)return r.value=t.defaultValue,r;let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>nv(i,t)):nv(n,t)}});function nv(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}var Td=T("$ZodPrefault",(e,t)=>{ce.init(e,t),e._zod.optin="optional",ve(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,o)=>(o.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,o))}),$d=T("$ZodNonOptional",(e,t)=>{ce.init(e,t),ve(e._zod,"values",()=>{let r=t.innerType._zod.values;return r?new Set([...r].filter(o=>o!==void 0)):void 0}),e._zod.parse=(r,o)=>{let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>ov(i,e)):ov(n,e)}});function ov(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}var Ed=T("$ZodSuccess",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>{if(o.direction==="backward")throw new ln("ZodSuccess");let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>(r.value=i.issues.length===0,r)):(r.value=n.issues.length===0,r)}}),Ad=T("$ZodCatch",(e,t)=>{ce.init(e,t),ve(e._zod,"optin",()=>t.innerType._zod.optin),ve(e._zod,"optout",()=>t.innerType._zod.optout),ve(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,o)=>{if(o.direction==="backward")return t.innerType._zod.run(r,o);let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(s=>Rt(s,o,nt()))},input:r.value}),r.issues=[]),r)):(r.value=n.value,n.issues.length&&(r.value=t.catchValue({...r,error:{issues:n.issues.map(i=>Rt(i,o,nt()))},input:r.value}),r.issues=[]),r)}}),Cd=T("$ZodNaN",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>((typeof r.value!="number"||!Number.isNaN(r.value))&&r.issues.push({input:r.value,inst:e,expected:"nan",code:"invalid_type"}),r)}),Pd=T("$ZodPipe",(e,t)=>{ce.init(e,t),ve(e._zod,"values",()=>t.in._zod.values),ve(e._zod,"optin",()=>t.in._zod.optin),ve(e._zod,"optout",()=>t.out._zod.optout),ve(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,o)=>{if(o.direction==="backward"){let i=t.out._zod.run(r,o);return i instanceof Promise?i.then(s=>es(s,t.in,o)):es(i,t.in,o)}let n=t.in._zod.run(r,o);return n instanceof Promise?n.then(i=>es(i,t.out,o)):es(n,t.out,o)}});function es(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}var da=T("$ZodCodec",(e,t)=>{ce.init(e,t),ve(e._zod,"values",()=>t.in._zod.values),ve(e._zod,"optin",()=>t.in._zod.optin),ve(e._zod,"optout",()=>t.out._zod.optout),ve(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,o)=>{if((o.direction||"forward")==="forward"){let i=t.in._zod.run(r,o);return i instanceof Promise?i.then(s=>ts(s,t,o)):ts(i,t,o)}else{let i=t.out._zod.run(r,o);return i instanceof Promise?i.then(s=>ts(s,t,o)):ts(i,t,o)}}});function ts(e,t,r){if(e.issues.length)return e.aborted=!0,e;if((r.direction||"forward")==="forward"){let n=t.transform(e.value,e);return n instanceof Promise?n.then(i=>rs(e,i,t.out,r)):rs(e,n,t.out,r)}else{let n=t.reverseTransform(e.value,e);return n instanceof Promise?n.then(i=>rs(e,i,t.in,r)):rs(e,n,t.in,r)}}function rs(e,t,r,o){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},o)}var Od=T("$ZodReadonly",(e,t)=>{ce.init(e,t),ve(e._zod,"propValues",()=>t.innerType._zod.propValues),ve(e._zod,"values",()=>t.innerType._zod.values),ve(e._zod,"optin",()=>{var r,o;return(o=(r=t.innerType)==null?void 0:r._zod)==null?void 0:o.optin}),ve(e._zod,"optout",()=>{var r,o;return(o=(r=t.innerType)==null?void 0:r._zod)==null?void 0:o.optout}),e._zod.parse=(r,o)=>{if(o.direction==="backward")return t.innerType._zod.run(r,o);let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(av):av(n)}});function av(e){return e.value=Object.freeze(e.value),e}var Nd=T("$ZodTemplateLiteral",(e,t)=>{ce.init(e,t);let r=[];for(let o of t.parts)if(typeof o=="object"&&o!==null){if(!o._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...o._zod.traits].shift()}`);let n=o._zod.pattern instanceof RegExp?o._zod.pattern.source:o._zod.pattern;if(!n)throw new Error(`Invalid template literal part: ${o._zod.traits}`);let i=n.startsWith("^")?1:0,s=n.endsWith("$")?n.length-1:n.length;r.push(n.slice(i,s))}else if(o===null||$u.has(typeof o))r.push(Gt(`${o}`));else throw new Error(`Invalid template literal part: ${o}`);e._zod.pattern=new RegExp(`^${r.join("")}$`),e._zod.parse=(o,n)=>{var i;return typeof o.value!="string"?(o.issues.push({input:o.value,inst:e,expected:"template_literal",code:"invalid_type"}),o):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(o.value)||o.issues.push({input:o.value,inst:e,code:"invalid_format",format:(i=t.format)!=null?i:"template_literal",pattern:e._zod.pattern.source}),o)}}),Rd=T("$ZodFunction",(e,t)=>(ce.init(e,t),e._def=t,e._zod.def=t,e.implement=r=>{if(typeof r!="function")throw new Error("implement() must be called with a function");return function(...o){let n=e._def.input?Fi(e._def.input,o):o,i=Reflect.apply(r,this,n);return e._def.output?Fi(e._def.output,i):i}},e.implementAsync=r=>{if(typeof r!="function")throw new Error("implementAsync() must be called with a function");return async function(...o){let n=e._def.input?await Li(e._def.input,o):o,i=await Reflect.apply(r,this,n);return e._def.output?await Li(e._def.output,i):i}},e._zod.parse=(r,o)=>typeof r.value!="function"?(r.issues.push({code:"invalid_type",expected:"function",input:r.value,inst:e}),r):(e._def.output&&e._def.output._zod.def.type==="promise"?r.value=e.implementAsync(r.value):r.value=e.implement(r.value),r),e.input=(...r)=>{let o=e.constructor;return Array.isArray(r[0])?new o({type:"function",input:new ss({type:"tuple",items:r[0],rest:r[1]}),output:e._def.output}):new o({type:"function",input:r[0],output:e._def.output})},e.output=r=>{let o=e.constructor;return new o({type:"function",input:e._def.input,output:r})},e)),jd=T("$ZodPromise",(e,t)=>{ce.init(e,t),e._zod.parse=(r,o)=>Promise.resolve(r.value).then(n=>t.innerType._zod.run({value:n,issues:[]},o))}),Md=T("$ZodLazy",(e,t)=>{ce.init(e,t),ve(e._zod,"innerType",()=>t.getter()),ve(e._zod,"pattern",()=>{var r,o;return(o=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:o.pattern}),ve(e._zod,"propValues",()=>{var r,o;return(o=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:o.propValues}),ve(e._zod,"optin",()=>{var r,o,n;return(n=(o=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:o.optin)!=null?n:void 0}),ve(e._zod,"optout",()=>{var r,o,n;return(n=(o=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:o.optout)!=null?n:void 0}),e._zod.parse=(r,o)=>e._zod.innerType._zod.run(r,o)}),Dd=T("$ZodCustom",(e,t)=>{Ue.init(e,t),ce.init(e,t),e._zod.parse=(r,o)=>r,e._zod.check=r=>{let o=r.value,n=t.fn(o);if(n instanceof Promise)return n.then(i=>iv(i,r,o,e));iv(n,r,o,e)}});function iv(e,t,r,o){var n;if(!e){let i={code:"custom",input:r,inst:o,path:[...(n=o._zod.def.path)!=null?n:[]],continue:!o._zod.def.abort};o._zod.def.params&&(i.params=o._zod.def.params),t.issues.push(Xn(i))}}var Cn={};nn(Cn,{ar:()=>pv,az:()=>mv,be:()=>gv,bg:()=>hv,ca:()=>vv,cs:()=>yv,da:()=>_v,de:()=>bv,en:()=>ls,eo:()=>xv,es:()=>wv,fa:()=>Sv,fi:()=>kv,fr:()=>Iv,frCA:()=>Tv,he:()=>$v,hu:()=>Ev,id:()=>Av,is:()=>Cv,it:()=>Pv,ja:()=>Ov,ka:()=>Nv,kh:()=>Rv,km:()=>us,ko:()=>jv,lt:()=>Dv,mk:()=>zv,ms:()=>Uv,nl:()=>Fv,no:()=>Lv,ota:()=>Zv,pl:()=>Vv,ps:()=>qv,pt:()=>Gv,ru:()=>Bv,sl:()=>Hv,sv:()=>Wv,ta:()=>Kv,th:()=>Yv,tr:()=>Xv,ua:()=>Qv,uk:()=>cs,ur:()=>ey,vi:()=>ty,yo:()=>oy,zhCN:()=>ry,zhTW:()=>ny});var r$=()=>{let e={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${n.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${W(n.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${(i=n.origin)!=null?i:"\u0627\u0644\u0642\u064A\u0645\u0629"} ${l} ${n.maximum.toString()} ${(s=d.unit)!=null?s:"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${(u=n.origin)!=null?u:"\u0627\u0644\u0642\u064A\u0645\u0629"} ${l} ${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${n.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${l} ${n.minimum.toString()} ${d.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${n.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${l} ${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${n.prefix}"`:l.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${l.suffix}"`:l.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${l.includes}"`:l.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${l.pattern}`:`${(c=o[l.format])!=null?c:n.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${n.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${n.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${n.keys.length>1?"\u0629":""}: ${N(n.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${n.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${n.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}};function pv(){return{localeError:r$()}}var n$=()=>{let e={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${n.expected}, daxil olan ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${W(n.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${(i=n.origin)!=null?i:"d\u0259y\u0259r"} ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${(u=n.origin)!=null?u:"d\u0259y\u0259r"} ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${n.origin} ${l}${n.minimum.toString()} ${d.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${n.origin} ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${l.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:l.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${l.suffix}" il\u0259 bitm\u0259lidir`:l.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${l.includes}" daxil olmal\u0131d\u0131r`:l.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${l.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${n.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${n.keys.length>1?"lar":""}: ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${n.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};function mv(){return{localeError:n$()}}function fv(e,t,r,o){let n=Math.abs(e),i=n%10,s=n%100;return s>=11&&s<=19?o:i===1?t:i>=2&&i<=4?r:o}var o$=()=>{let e={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(n))return"\u043C\u0430\u0441\u0456\u045E";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return n=>{var i,s,u;switch(n.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${n.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${W(n.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",l=t(n.origin);if(l){let d=Number(n.maximum),m=fv(d,l.unit.one,l.unit.few,l.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${(i=n.origin)!=null?i:"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${l.verb} ${c}${n.maximum.toString()} ${m}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${(s=n.origin)!=null?s:"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",l=t(n.origin);if(l){let d=Number(n.minimum),m=fv(d,l.unit.one,l.unit.few,l.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${l.verb} ${c}${n.minimum.toString()} ${m}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${c.prefix}"`:c.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${c.suffix}"`:c.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${c.includes}"`:c.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${c.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${(u=o[c.format])!=null?u:n.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${n.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${N(n.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${n.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${n.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};function gv(){return{localeError:o$()}}var a$=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(e))return"\u043C\u0430\u0441\u0438\u0432";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},i$=()=>{let e={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function t(o){var n;return(n=e[o])!=null?n:null}let r={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return o=>{var n,i,s,u;switch(o.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${o.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${a$(o.input)}`;case"invalid_value":return o.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${W(o.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${N(o.values,"|")}`;case"too_big":{let c=o.inclusive?"<=":"<",l=t(o.origin);return l?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${(n=o.origin)!=null?n:"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${c}${o.maximum.toString()} ${(i=l.unit)!=null?i:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${(s=o.origin)!=null?s:"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${c}${o.maximum.toString()}`}case"too_small":{let c=o.inclusive?">=":">",l=t(o.origin);return l?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${o.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${c}${o.minimum.toString()} ${l.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${o.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${c}${o.minimum.toString()}`}case"invalid_format":{let c=o;if(c.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${c.prefix}"`;if(c.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${c.suffix}"`;if(c.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${c.includes}"`;if(c.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${c.pattern}`;let l="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return c.format==="emoji"&&(l="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),c.format==="datetime"&&(l="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),c.format==="date"&&(l="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),c.format==="time"&&(l="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),c.format==="duration"&&(l="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${l} ${(u=r[c.format])!=null?u:o.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${o.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${o.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${o.keys.length>1?"\u043E\u0432\u0435":""}: ${N(o.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${o.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${o.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}};function hv(){return{localeError:i$()}}var s$=()=>{let e={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${n.expected}, s'ha rebut ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Valor inv\xE0lid: s'esperava ${W(n.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${N(n.values," o ")}`;case"too_big":{let l=n.inclusive?"com a m\xE0xim":"menys de",d=t(n.origin);return d?`Massa gran: s'esperava que ${(i=n.origin)!=null?i:"el valor"} contingu\xE9s ${l} ${n.maximum.toString()} ${(s=d.unit)!=null?s:"elements"}`:`Massa gran: s'esperava que ${(u=n.origin)!=null?u:"el valor"} fos ${l} ${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?"com a m\xEDnim":"m\xE9s de",d=t(n.origin);return d?`Massa petit: s'esperava que ${n.origin} contingu\xE9s ${l} ${n.minimum.toString()} ${d.unit}`:`Massa petit: s'esperava que ${n.origin} fos ${l} ${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${l.prefix}"`:l.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${l.suffix}"`:l.format==="includes"?`Format inv\xE0lid: ha d'incloure "${l.includes}"`:l.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${l.pattern}`:`Format inv\xE0lid per a ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${n.divisor}`;case"unrecognized_keys":return`Clau${n.keys.length>1?"s":""} no reconeguda${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${n.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${n.origin}`;default:return"Entrada inv\xE0lida"}}};function vv(){return{localeError:s$()}}var l$=()=>{let e={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(n))return"pole";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return n=>{var i,s,u,c,l,d,m;switch(n.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${n.expected}, obdr\u017Eeno ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${W(n.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${N(n.values,"|")}`;case"too_big":{let p=n.inclusive?"<=":"<",g=t(n.origin);return g?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${(i=n.origin)!=null?i:"hodnota"} mus\xED m\xEDt ${p}${n.maximum.toString()} ${(s=g.unit)!=null?s:"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${(u=n.origin)!=null?u:"hodnota"} mus\xED b\xFDt ${p}${n.maximum.toString()}`}case"too_small":{let p=n.inclusive?">=":">",g=t(n.origin);return g?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${(c=n.origin)!=null?c:"hodnota"} mus\xED m\xEDt ${p}${n.minimum.toString()} ${(l=g.unit)!=null?l:"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${(d=n.origin)!=null?d:"hodnota"} mus\xED b\xFDt ${p}${n.minimum.toString()}`}case"invalid_format":{let p=n;return p.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${p.prefix}"`:p.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${p.suffix}"`:p.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${p.includes}"`:p.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${p.pattern}`:`Neplatn\xFD form\xE1t ${(m=o[p.format])!=null?m:n.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${n.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${N(n.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${n.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${n.origin}`;default:return"Neplatn\xFD vstup"}}};function yv(){return{localeError:l$()}}var u$=()=>{let e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},t={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function r(s){var u;return(u=e[s])!=null?u:null}function o(s){var u;return(u=t[s])!=null?u:s}let n=s=>{let u=typeof s;switch(u){case"number":return Number.isNaN(s)?"NaN":"tal";case"object":return Array.isArray(s)?"liste":s===null?"null":Object.getPrototypeOf(s)!==Object.prototype&&s.constructor?s.constructor.name:"objekt"}return u},i={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return s=>{var u,c;switch(s.code){case"invalid_type":return`Ugyldigt input: forventede ${o(s.expected)}, fik ${o(n(s.input))}`;case"invalid_value":return s.values.length===1?`Ugyldig v\xE6rdi: forventede ${W(s.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${N(s.values,"|")}`;case"too_big":{let l=s.inclusive?"<=":"<",d=r(s.origin),m=o(s.origin);return d?`For stor: forventede ${m!=null?m:"value"} ${d.verb} ${l} ${s.maximum.toString()} ${(u=d.unit)!=null?u:"elementer"}`:`For stor: forventede ${m!=null?m:"value"} havde ${l} ${s.maximum.toString()}`}case"too_small":{let l=s.inclusive?">=":">",d=r(s.origin),m=o(s.origin);return d?`For lille: forventede ${m} ${d.verb} ${l} ${s.minimum.toString()} ${d.unit}`:`For lille: forventede ${m} havde ${l} ${s.minimum.toString()}`}case"invalid_format":{let l=s;return l.format==="starts_with"?`Ugyldig streng: skal starte med "${l.prefix}"`:l.format==="ends_with"?`Ugyldig streng: skal ende med "${l.suffix}"`:l.format==="includes"?`Ugyldig streng: skal indeholde "${l.includes}"`:l.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${l.pattern}`:`Ugyldig ${(c=i[l.format])!=null?c:s.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${s.divisor}`;case"unrecognized_keys":return`${s.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${N(s.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${s.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${s.origin}`;default:return"Ugyldigt input"}}};function _v(){return{localeError:u$()}}var c$=()=>{let e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"Zahl";case"object":{if(Array.isArray(n))return"Array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${n.expected}, erhalten ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ung\xFCltige Eingabe: erwartet ${W(n.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`Zu gro\xDF: erwartet, dass ${(i=n.origin)!=null?i:"Wert"} ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${(u=n.origin)!=null?u:"Wert"} ${l}${n.maximum.toString()} ist`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`Zu klein: erwartet, dass ${n.origin} ${l}${n.minimum.toString()} ${d.unit} hat`:`Zu klein: erwartet, dass ${n.origin} ${l}${n.minimum.toString()} ist`}case"invalid_format":{let l=n;return l.format==="starts_with"?`Ung\xFCltiger String: muss mit "${l.prefix}" beginnen`:l.format==="ends_with"?`Ung\xFCltiger String: muss mit "${l.suffix}" enden`:l.format==="includes"?`Ung\xFCltiger String: muss "${l.includes}" enthalten`:l.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${l.pattern} entsprechen`:`Ung\xFCltig: ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${n.divisor} sein`;case"unrecognized_keys":return`${n.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${N(n.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${n.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${n.origin}`;default:return"Ung\xFCltige Eingabe"}}};function bv(){return{localeError:c$()}}var d$=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},p$=()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function t(o){var n;return(n=e[o])!=null?n:null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return o=>{var n,i,s,u;switch(o.code){case"invalid_type":return`Invalid input: expected ${o.expected}, received ${d$(o.input)}`;case"invalid_value":return o.values.length===1?`Invalid input: expected ${W(o.values[0])}`:`Invalid option: expected one of ${N(o.values,"|")}`;case"too_big":{let c=o.inclusive?"<=":"<",l=t(o.origin);return l?`Too big: expected ${(n=o.origin)!=null?n:"value"} to have ${c}${o.maximum.toString()} ${(i=l.unit)!=null?i:"elements"}`:`Too big: expected ${(s=o.origin)!=null?s:"value"} to be ${c}${o.maximum.toString()}`}case"too_small":{let c=o.inclusive?">=":">",l=t(o.origin);return l?`Too small: expected ${o.origin} to have ${c}${o.minimum.toString()} ${l.unit}`:`Too small: expected ${o.origin} to be ${c}${o.minimum.toString()}`}case"invalid_format":{let c=o;return c.format==="starts_with"?`Invalid string: must start with "${c.prefix}"`:c.format==="ends_with"?`Invalid string: must end with "${c.suffix}"`:c.format==="includes"?`Invalid string: must include "${c.includes}"`:c.format==="regex"?`Invalid string: must match pattern ${c.pattern}`:`Invalid ${(u=r[c.format])!=null?u:o.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${o.divisor}`;case"unrecognized_keys":return`Unrecognized key${o.keys.length>1?"s":""}: ${N(o.keys,", ")}`;case"invalid_key":return`Invalid key in ${o.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${o.origin}`;default:return"Invalid input"}}};function ls(){return{localeError:p$()}}var m$=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombro";case"object":{if(Array.isArray(e))return"tabelo";if(e===null)return"senvalora";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},f$=()=>{let e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function t(o){var n;return(n=e[o])!=null?n:null}let r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return o=>{var n,i,s,u;switch(o.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${o.expected}, ricevi\u011Dis ${m$(o.input)}`;case"invalid_value":return o.values.length===1?`Nevalida enigo: atendi\u011Dis ${W(o.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${N(o.values,"|")}`;case"too_big":{let c=o.inclusive?"<=":"<",l=t(o.origin);return l?`Tro granda: atendi\u011Dis ke ${(n=o.origin)!=null?n:"valoro"} havu ${c}${o.maximum.toString()} ${(i=l.unit)!=null?i:"elementojn"}`:`Tro granda: atendi\u011Dis ke ${(s=o.origin)!=null?s:"valoro"} havu ${c}${o.maximum.toString()}`}case"too_small":{let c=o.inclusive?">=":">",l=t(o.origin);return l?`Tro malgranda: atendi\u011Dis ke ${o.origin} havu ${c}${o.minimum.toString()} ${l.unit}`:`Tro malgranda: atendi\u011Dis ke ${o.origin} estu ${c}${o.minimum.toString()}`}case"invalid_format":{let c=o;return c.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${c.prefix}"`:c.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${c.suffix}"`:c.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${c.includes}"`:c.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${c.pattern}`:`Nevalida ${(u=r[c.format])!=null?u:o.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${o.divisor}`;case"unrecognized_keys":return`Nekonata${o.keys.length>1?"j":""} \u015Dlosilo${o.keys.length>1?"j":""}: ${N(o.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${o.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${o.origin}`;default:return"Nevalida enigo"}}};function xv(){return{localeError:f$()}}var g$=()=>{let e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},t={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(s){var u;return(u=e[s])!=null?u:null}function o(s){var u;return(u=t[s])!=null?u:s}let n=s=>{let u=typeof s;switch(u){case"number":return Number.isNaN(s)?"NaN":"number";case"object":return Array.isArray(s)?"array":s===null?"null":Object.getPrototypeOf(s)!==Object.prototype?s.constructor.name:"object"}return u},i={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return s=>{var u,c;switch(s.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${o(s.expected)}, recibido ${o(n(s.input))}`;case"invalid_value":return s.values.length===1?`Entrada inv\xE1lida: se esperaba ${W(s.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${N(s.values,"|")}`;case"too_big":{let l=s.inclusive?"<=":"<",d=r(s.origin),m=o(s.origin);return d?`Demasiado grande: se esperaba que ${m!=null?m:"valor"} tuviera ${l}${s.maximum.toString()} ${(u=d.unit)!=null?u:"elementos"}`:`Demasiado grande: se esperaba que ${m!=null?m:"valor"} fuera ${l}${s.maximum.toString()}`}case"too_small":{let l=s.inclusive?">=":">",d=r(s.origin),m=o(s.origin);return d?`Demasiado peque\xF1o: se esperaba que ${m} tuviera ${l}${s.minimum.toString()} ${d.unit}`:`Demasiado peque\xF1o: se esperaba que ${m} fuera ${l}${s.minimum.toString()}`}case"invalid_format":{let l=s;return l.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${l.prefix}"`:l.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${l.suffix}"`:l.format==="includes"?`Cadena inv\xE1lida: debe incluir "${l.includes}"`:l.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${l.pattern}`:`Inv\xE1lido ${(c=i[l.format])!=null?c:s.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${s.divisor}`;case"unrecognized_keys":return`Llave${s.keys.length>1?"s":""} desconocida${s.keys.length>1?"s":""}: ${N(s.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${o(s.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${o(s.origin)}`;default:return"Entrada inv\xE1lida"}}};function wv(){return{localeError:g$()}}var h$=()=>{let e={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(n))return"\u0622\u0631\u0627\u06CC\u0647";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${n.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${r(n.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":return n.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${W(n.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${N(n.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${(i=n.origin)!=null?i:"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${(u=n.origin)!=null?u:"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${l}${n.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${n.origin} \u0628\u0627\u06CC\u062F ${l}${n.minimum.toString()} ${d.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${n.origin} \u0628\u0627\u06CC\u062F ${l}${n.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let l=n;return l.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${l.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:l.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${l.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:l.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${l.includes}" \u0628\u0627\u0634\u062F`:l.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${l.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${(c=o[l.format])!=null?c:n.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${n.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${n.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${N(n.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${n.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${n.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}};function Sv(){return{localeError:h$()}}var v$=()=>{let e={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return n=>{var i;switch(n.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${n.expected}, oli ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${W(n.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${N(n.values,"|")}`;case"too_big":{let s=n.inclusive?"<=":"<",u=t(n.origin);return u?`Liian suuri: ${u.subject} t\xE4ytyy olla ${s}${n.maximum.toString()} ${u.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${s}${n.maximum.toString()}`}case"too_small":{let s=n.inclusive?">=":">",u=t(n.origin);return u?`Liian pieni: ${u.subject} t\xE4ytyy olla ${s}${n.minimum.toString()} ${u.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${s}${n.minimum.toString()}`}case"invalid_format":{let s=n;return s.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${s.prefix}"`:s.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${s.suffix}"`:s.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${s.includes}"`:s.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${s.pattern}`:`Virheellinen ${(i=o[s.format])!=null?i:n.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${n.divisor} monikerta`;case"unrecognized_keys":return`${n.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${N(n.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};function kv(){return{localeError:v$()}}var y$=()=>{let e={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"nombre";case"object":{if(Array.isArray(n))return"tableau";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`Entr\xE9e invalide : ${n.expected} attendu, ${r(n.input)} re\xE7u`;case"invalid_value":return n.values.length===1?`Entr\xE9e invalide : ${W(n.values[0])} attendu`:`Option invalide : une valeur parmi ${N(n.values,"|")} attendue`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`Trop grand : ${(i=n.origin)!=null?i:"valeur"} doit ${d.verb} ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"\xE9l\xE9ment(s)"}`:`Trop grand : ${(u=n.origin)!=null?u:"valeur"} doit \xEAtre ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`Trop petit : ${n.origin} doit ${d.verb} ${l}${n.minimum.toString()} ${d.unit}`:`Trop petit : ${n.origin} doit \xEAtre ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${l.prefix}"`:l.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${l.suffix}"`:l.format==="includes"?`Cha\xEEne invalide : doit inclure "${l.includes}"`:l.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${l.pattern}`:`${(c=o[l.format])!=null?c:n.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${n.divisor}`;case"unrecognized_keys":return`Cl\xE9${n.keys.length>1?"s":""} non reconnue${n.keys.length>1?"s":""} : ${N(n.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${n.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${n.origin}`;default:return"Entr\xE9e invalide"}}};function Iv(){return{localeError:y$()}}var _$=()=>{let e={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return n=>{var i,s,u;switch(n.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${n.expected}, re\xE7u ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Entr\xE9e invalide : attendu ${W(n.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"\u2264":"<",l=t(n.origin);return l?`Trop grand : attendu que ${(i=n.origin)!=null?i:"la valeur"} ait ${c}${n.maximum.toString()} ${l.unit}`:`Trop grand : attendu que ${(s=n.origin)!=null?s:"la valeur"} soit ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?"\u2265":">",l=t(n.origin);return l?`Trop petit : attendu que ${n.origin} ait ${c}${n.minimum.toString()} ${l.unit}`:`Trop petit : attendu que ${n.origin} soit ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${c.prefix}"`:c.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${c.suffix}"`:c.format==="includes"?`Cha\xEEne invalide : doit inclure "${c.includes}"`:c.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${c.pattern}`:`${(u=o[c.format])!=null?u:n.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${n.divisor}`;case"unrecognized_keys":return`Cl\xE9${n.keys.length>1?"s":""} non reconnue${n.keys.length>1?"s":""} : ${N(n.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${n.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${n.origin}`;default:return"Entr\xE9e invalide"}}};function Tv(){return{localeError:_$()}}var b$=()=>{let e={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},t={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},r=l=>l?e[l]:void 0,o=l=>{let d=r(l);return d?d.label:l!=null?l:e.unknown.label},n=l=>`\u05D4${o(l)}`,i=l=>{var p;let d=r(l);return((p=d==null?void 0:d.gender)!=null?p:"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA"},s=l=>{var d;return l&&(d=t[l])!=null?d:null},u=l=>{let d=typeof l;switch(d){case"number":return Number.isNaN(l)?"NaN":"number";case"object":return Array.isArray(l)?"array":l===null?"null":Object.getPrototypeOf(l)!==Object.prototype&&l.constructor?l.constructor.name:"object";default:return d}},c={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}};return l=>{var d,m,p,g,h,v,_,w,x,f,b,y,k,$,O,L,F,U,Z;switch(l.code){case"invalid_type":{let E=l.expected,z=o(E),J=u(l.input),B=(m=(d=e[J])==null?void 0:d.label)!=null?m:J;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${z}, \u05D4\u05EA\u05E7\u05D1\u05DC ${B}`}case"invalid_value":{if(l.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${W(l.values[0])}`;let E=l.values.map(B=>W(B));if(l.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${E[0]} \u05D0\u05D5 ${E[1]}`;let z=E[E.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${E.slice(0,-1).join(", ")} \u05D0\u05D5 ${z}`}case"too_big":{let E=s(l.origin),z=n((p=l.origin)!=null?p:"value");if(l.origin==="string")return`${(g=E==null?void 0:E.longLabel)!=null?g:"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${z} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${l.maximum.toString()} ${(h=E==null?void 0:E.unit)!=null?h:""} ${l.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(l.origin==="number"){let D=l.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${l.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${l.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${z} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${D}`}if(l.origin==="array"||l.origin==="set"){let D=l.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",H=l.inclusive?`${l.maximum} ${(v=E==null?void 0:E.unit)!=null?v:""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${l.maximum} ${(_=E==null?void 0:E.unit)!=null?_:""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${z} ${D} \u05DC\u05D4\u05DB\u05D9\u05DC ${H}`.trim()}let J=l.inclusive?"<=":"<",B=i((w=l.origin)!=null?w:"value");return E!=null&&E.unit?`${E.longLabel} \u05DE\u05D3\u05D9: ${z} ${B} ${J}${l.maximum.toString()} ${E.unit}`:`${(x=E==null?void 0:E.longLabel)!=null?x:"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${z} ${B} ${J}${l.maximum.toString()}`}case"too_small":{let E=s(l.origin),z=n((f=l.origin)!=null?f:"value");if(l.origin==="string")return`${(b=E==null?void 0:E.shortLabel)!=null?b:"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${z} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${l.minimum.toString()} ${(y=E==null?void 0:E.unit)!=null?y:""} ${l.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(l.origin==="number"){let D=l.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${l.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${l.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${z} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${D}`}if(l.origin==="array"||l.origin==="set"){let D=l.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(l.minimum===1&&l.inclusive){let G=(l.origin==="set","\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${z} ${D} \u05DC\u05D4\u05DB\u05D9\u05DC ${G}`}let H=l.inclusive?`${l.minimum} ${(k=E==null?void 0:E.unit)!=null?k:""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${l.minimum} ${($=E==null?void 0:E.unit)!=null?$:""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${z} ${D} \u05DC\u05D4\u05DB\u05D9\u05DC ${H}`.trim()}let J=l.inclusive?">=":">",B=i((O=l.origin)!=null?O:"value");return E!=null&&E.unit?`${E.shortLabel} \u05DE\u05D3\u05D9: ${z} ${B} ${J}${l.minimum.toString()} ${E.unit}`:`${(L=E==null?void 0:E.shortLabel)!=null?L:"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${z} ${B} ${J}${l.minimum.toString()}`}case"invalid_format":{let E=l;if(E.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${E.prefix}"`;if(E.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${E.suffix}"`;if(E.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${E.includes}"`;if(E.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${E.pattern}`;let z=c[E.format],J=(F=z==null?void 0:z.label)!=null?F:E.format,D=((U=z==null?void 0:z.gender)!=null?U:"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${J} \u05DC\u05D0 ${D}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${l.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${l.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${l.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${N(l.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${n((Z=l.origin)!=null?Z:"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};function $v(){return{localeError:b$()}}var x$=()=>{let e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(n))return"t\xF6mb";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${n.expected}, a kapott \xE9rt\xE9k ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${W(n.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`T\xFAl nagy: ${(i=n.origin)!=null?i:"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${(u=n.origin)!=null?u:"\xE9rt\xE9k"} t\xFAl nagy: ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${n.origin} m\xE9rete t\xFAl kicsi ${l}${n.minimum.toString()} ${d.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${n.origin} t\xFAl kicsi ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`\xC9rv\xE9nytelen string: "${l.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:l.format==="ends_with"?`\xC9rv\xE9nytelen string: "${l.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:l.format==="includes"?`\xC9rv\xE9nytelen string: "${l.includes}" \xE9rt\xE9ket kell tartalmaznia`:l.format==="regex"?`\xC9rv\xE9nytelen string: ${l.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${n.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${n.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${n.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};function Ev(){return{localeError:x$()}}var w$=()=>{let e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`Input tidak valid: diharapkan ${n.expected}, diterima ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Input tidak valid: diharapkan ${W(n.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`Terlalu besar: diharapkan ${(i=n.origin)!=null?i:"value"} memiliki ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"elemen"}`:`Terlalu besar: diharapkan ${(u=n.origin)!=null?u:"value"} menjadi ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`Terlalu kecil: diharapkan ${n.origin} memiliki ${l}${n.minimum.toString()} ${d.unit}`:`Terlalu kecil: diharapkan ${n.origin} menjadi ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`String tidak valid: harus dimulai dengan "${l.prefix}"`:l.format==="ends_with"?`String tidak valid: harus berakhir dengan "${l.suffix}"`:l.format==="includes"?`String tidak valid: harus menyertakan "${l.includes}"`:l.format==="regex"?`String tidak valid: harus sesuai pola ${l.pattern}`:`${(c=o[l.format])!=null?c:n.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${n.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${n.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${n.origin}`;default:return"Input tidak valid"}}};function Av(){return{localeError:w$()}}var S$=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(e))return"fylki";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},k$=()=>{let e={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function t(o){var n;return(n=e[o])!=null?n:null}let r={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return o=>{var n,i,s,u;switch(o.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${S$(o.input)} \xFEar sem \xE1 a\xF0 vera ${o.expected}`;case"invalid_value":return o.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${W(o.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${N(o.values,"|")}`;case"too_big":{let c=o.inclusive?"<=":"<",l=t(o.origin);return l?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${(n=o.origin)!=null?n:"gildi"} hafi ${c}${o.maximum.toString()} ${(i=l.unit)!=null?i:"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${(s=o.origin)!=null?s:"gildi"} s\xE9 ${c}${o.maximum.toString()}`}case"too_small":{let c=o.inclusive?">=":">",l=t(o.origin);return l?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${o.origin} hafi ${c}${o.minimum.toString()} ${l.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${o.origin} s\xE9 ${c}${o.minimum.toString()}`}case"invalid_format":{let c=o;return c.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${c.prefix}"`:c.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${c.suffix}"`:c.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${c.includes}"`:c.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${c.pattern}`:`Rangt ${(u=r[c.format])!=null?u:o.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${o.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${o.keys.length>1?"ir lyklar":"ur lykill"}: ${N(o.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${o.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${o.origin}`;default:return"Rangt gildi"}}};function Cv(){return{localeError:k$()}}var I$=()=>{let e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"numero";case"object":{if(Array.isArray(n))return"vettore";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`Input non valido: atteso ${n.expected}, ricevuto ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Input non valido: atteso ${W(n.values[0])}`:`Opzione non valida: atteso uno tra ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`Troppo grande: ${(i=n.origin)!=null?i:"valore"} deve avere ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"elementi"}`:`Troppo grande: ${(u=n.origin)!=null?u:"valore"} deve essere ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`Troppo piccolo: ${n.origin} deve avere ${l}${n.minimum.toString()} ${d.unit}`:`Troppo piccolo: ${n.origin} deve essere ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`Stringa non valida: deve iniziare con "${l.prefix}"`:l.format==="ends_with"?`Stringa non valida: deve terminare con "${l.suffix}"`:l.format==="includes"?`Stringa non valida: deve includere "${l.includes}"`:l.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${l.pattern}`:`Invalid ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${n.divisor}`;case"unrecognized_keys":return`Chiav${n.keys.length>1?"i":"e"} non riconosciut${n.keys.length>1?"e":"a"}: ${N(n.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${n.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${n.origin}`;default:return"Input non valido"}}};function Pv(){return{localeError:I$()}}var T$=()=>{let e={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(n))return"\u914D\u5217";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${n.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${r(n.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":return n.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${W(n.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${N(n.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let l=n.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",d=t(n.origin);return d?`\u5927\u304D\u3059\u304E\u308B\u5024: ${(i=n.origin)!=null?i:"\u5024"}\u306F${n.maximum.toString()}${(s=d.unit)!=null?s:"\u8981\u7D20"}${l}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${(u=n.origin)!=null?u:"\u5024"}\u306F${n.maximum.toString()}${l}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let l=n.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",d=t(n.origin);return d?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${n.origin}\u306F${n.minimum.toString()}${d.unit}${l}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${n.origin}\u306F${n.minimum.toString()}${l}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let l=n;return l.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${l.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:l.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${l.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:l.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${l.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:l.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${l.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${n.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${n.keys.length>1?"\u7FA4":""}: ${N(n.keys,"\u3001")}`;case"invalid_key":return`${n.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${n.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};function Ov(){return{localeError:T$()}}var $$=e=>{var o;let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(e))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return(o={string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[t])!=null?o:t},E$=()=>{let e={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function t(o){var n;return(n=e[o])!=null?n:null}let r={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return o=>{var n,i,s;switch(o.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${o.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${$$(o.input)}`;case"invalid_value":return o.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${W(o.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${N(o.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let u=o.inclusive?"<=":"<",c=t(o.origin);return c?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${(n=o.origin)!=null?n:"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${c.verb} ${u}${o.maximum.toString()} ${c.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${(i=o.origin)!=null?i:"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${u}${o.maximum.toString()}`}case"too_small":{let u=o.inclusive?">=":">",c=t(o.origin);return c?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${o.origin} ${c.verb} ${u}${o.minimum.toString()} ${c.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${o.origin} \u10D8\u10E7\u10DD\u10E1 ${u}${o.minimum.toString()}`}case"invalid_format":{let u=o;return u.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${u.prefix}"-\u10D8\u10D7`:u.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${u.suffix}"-\u10D8\u10D7`:u.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${u.includes}"-\u10E1`:u.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${u.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${(s=r[u.format])!=null?s:o.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${o.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${o.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${N(o.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${o.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${o.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}};function Nv(){return{localeError:E$()}}var A$=()=>{let e={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(n))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(n===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${W(n.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${(i=n.origin)!=null?i:"\u178F\u1798\u17D2\u179B\u17C3"} ${l} ${n.maximum.toString()} ${(s=d.unit)!=null?s:"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${(u=n.origin)!=null?u:"\u178F\u1798\u17D2\u179B\u17C3"} ${l} ${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin} ${l} ${n.minimum.toString()} ${d.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin} ${l} ${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${l.prefix}"`:l.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${l.suffix}"`:l.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${l.includes}"`:l.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${l.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${n.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${N(n.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${n.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${n.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}};function us(){return{localeError:A$()}}function Rv(){return us()}var C$=()=>{let e={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return n=>{var i,s,u,c,l,d,m;switch(n.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${n.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${r(n.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":return n.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${W(n.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${N(n.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let p=n.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",g=p==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",h=t(n.origin),v=(i=h==null?void 0:h.unit)!=null?i:"\uC694\uC18C";return h?`${(s=n.origin)!=null?s:"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${n.maximum.toString()}${v} ${p}${g}`:`${(u=n.origin)!=null?u:"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${n.maximum.toString()} ${p}${g}`}case"too_small":{let p=n.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",g=p==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",h=t(n.origin),v=(c=h==null?void 0:h.unit)!=null?c:"\uC694\uC18C";return h?`${(l=n.origin)!=null?l:"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${n.minimum.toString()}${v} ${p}${g}`:`${(d=n.origin)!=null?d:"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${n.minimum.toString()} ${p}${g}`}case"invalid_format":{let p=n;return p.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${p.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:p.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${p.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:p.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${p.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:p.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${p.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${(m=o[p.format])!=null?m:n.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${n.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${N(n.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${n.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${n.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}};function jv(){return{localeError:C$()}}var P$=e=>ma(typeof e,e),ma=(e,t=void 0)=>{switch(e){case"number":return Number.isNaN(t)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return t===void 0?"ne\u017Einomas objektas":t===null?"nulin\u0117 reik\u0161m\u0117":Array.isArray(t)?"masyvas":Object.getPrototypeOf(t)!==Object.prototype&&t.constructor?t.constructor.name:"objektas";case"null":return"nulin\u0117 reik\u0161m\u0117"}return e},pa=e=>e.charAt(0).toUpperCase()+e.slice(1);function Mv(e){let t=Math.abs(e),r=t%10,o=t%100;return o>=11&&o<=19||r===0?"many":r===1?"one":"few"}var O$=()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function t(o,n,i,s){var c;let u=(c=e[o])!=null?c:null;return u===null?u:{unit:u.unit[n],verb:u.verb[s][i?"inclusive":"notInclusive"]}}let r={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return o=>{var n,i,s,u,c,l,d,m,p,g;switch(o.code){case"invalid_type":return`Gautas tipas ${P$(o.input)}, o tik\u0117tasi - ${ma(o.expected)}`;case"invalid_value":return o.values.length===1?`Privalo b\u016Bti ${W(o.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${N(o.values,"|")} pasirinkim\u0173`;case"too_big":{let h=ma(o.origin),v=t(o.origin,Mv(Number(o.maximum)),(n=o.inclusive)!=null?n:!1,"smaller");if(v!=null&&v.verb)return`${pa((i=h!=null?h:o.origin)!=null?i:"reik\u0161m\u0117")} ${v.verb} ${o.maximum.toString()} ${(s=v.unit)!=null?s:"element\u0173"}`;let _=o.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${pa((u=h!=null?h:o.origin)!=null?u:"reik\u0161m\u0117")} turi b\u016Bti ${_} ${o.maximum.toString()} ${v==null?void 0:v.unit}`}case"too_small":{let h=ma(o.origin),v=t(o.origin,Mv(Number(o.minimum)),(c=o.inclusive)!=null?c:!1,"bigger");if(v!=null&&v.verb)return`${pa((l=h!=null?h:o.origin)!=null?l:"reik\u0161m\u0117")} ${v.verb} ${o.minimum.toString()} ${(d=v.unit)!=null?d:"element\u0173"}`;let _=o.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${pa((m=h!=null?h:o.origin)!=null?m:"reik\u0161m\u0117")} turi b\u016Bti ${_} ${o.minimum.toString()} ${v==null?void 0:v.unit}`}case"invalid_format":{let h=o;return h.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${h.prefix}"`:h.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${h.suffix}"`:h.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${h.includes}"`:h.format==="regex"?`Eilut\u0117 privalo atitikti ${h.pattern}`:`Neteisingas ${(p=r[h.format])!=null?p:o.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${o.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${o.keys.length>1?"i":"as"} rakt${o.keys.length>1?"ai":"as"}: ${N(o.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let h=ma(o.origin);return`${pa((g=h!=null?h:o.origin)!=null?g:"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}};function Dv(){return{localeError:O$()}}var N$=()=>{let e={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(n))return"\u043D\u0438\u0437\u0430";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Invalid input: expected ${W(n.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${(i=n.origin)!=null?i:"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${(u=n.origin)!=null?u:"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin} \u0434\u0430 \u0438\u043C\u0430 ${l}${n.minimum.toString()} ${d.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${l.prefix}"`:l.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${l.suffix}"`:l.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${l.includes}"`:l.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${l.pattern}`:`Invalid ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${N(n.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${n.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${n.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};function zv(){return{localeError:N$()}}var R$=()=>{let e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"nombor";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`Input tidak sah: dijangka ${n.expected}, diterima ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Input tidak sah: dijangka ${W(n.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`Terlalu besar: dijangka ${(i=n.origin)!=null?i:"nilai"} ${d.verb} ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"elemen"}`:`Terlalu besar: dijangka ${(u=n.origin)!=null?u:"nilai"} adalah ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`Terlalu kecil: dijangka ${n.origin} ${d.verb} ${l}${n.minimum.toString()} ${d.unit}`:`Terlalu kecil: dijangka ${n.origin} adalah ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`String tidak sah: mesti bermula dengan "${l.prefix}"`:l.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${l.suffix}"`:l.format==="includes"?`String tidak sah: mesti mengandungi "${l.includes}"`:l.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${l.pattern}`:`${(c=o[l.format])!=null?c:n.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${n.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${N(n.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${n.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${n.origin}`;default:return"Input tidak sah"}}};function Uv(){return{localeError:R$()}}var j$=()=>{let e={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"getal";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`Ongeldige invoer: verwacht ${n.expected}, ontving ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ongeldige invoer: verwacht ${W(n.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`Te groot: verwacht dat ${(i=n.origin)!=null?i:"waarde"} ${d.verb} ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"elementen"}`:`Te groot: verwacht dat ${(u=n.origin)!=null?u:"waarde"} ${l}${n.maximum.toString()} is`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`Te klein: verwacht dat ${n.origin} ${d.verb} ${l}${n.minimum.toString()} ${d.unit}`:`Te klein: verwacht dat ${n.origin} ${l}${n.minimum.toString()} is`}case"invalid_format":{let l=n;return l.format==="starts_with"?`Ongeldige tekst: moet met "${l.prefix}" beginnen`:l.format==="ends_with"?`Ongeldige tekst: moet op "${l.suffix}" eindigen`:l.format==="includes"?`Ongeldige tekst: moet "${l.includes}" bevatten`:l.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${l.pattern}`:`Ongeldig: ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${n.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${n.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${n.origin}`;default:return"Ongeldige invoer"}}};function Fv(){return{localeError:j$()}}var M$=()=>{let e={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"tall";case"object":{if(Array.isArray(n))return"liste";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`Ugyldig input: forventet ${n.expected}, fikk ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ugyldig verdi: forventet ${W(n.values[0])}`:`Ugyldig valg: forventet en av ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`For stor(t): forventet ${(i=n.origin)!=null?i:"value"} til \xE5 ha ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"elementer"}`:`For stor(t): forventet ${(u=n.origin)!=null?u:"value"} til \xE5 ha ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`For lite(n): forventet ${n.origin} til \xE5 ha ${l}${n.minimum.toString()} ${d.unit}`:`For lite(n): forventet ${n.origin} til \xE5 ha ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${l.prefix}"`:l.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${l.suffix}"`:l.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${l.includes}"`:l.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${l.pattern}`:`Ugyldig ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${N(n.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${n.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${n.origin}`;default:return"Ugyldig input"}}};function Lv(){return{localeError:M$()}}var D$=()=>{let e={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"numara";case"object":{if(Array.isArray(n))return"saf";if(n===null)return"gayb";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`F\xE2sit giren: umulan ${n.expected}, al\u0131nan ${r(n.input)}`;case"invalid_value":return n.values.length===1?`F\xE2sit giren: umulan ${W(n.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`Fazla b\xFCy\xFCk: ${(i=n.origin)!=null?i:"value"}, ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${(u=n.origin)!=null?u:"value"}, ${l}${n.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`Fazla k\xFC\xE7\xFCk: ${n.origin}, ${l}${n.minimum.toString()} ${d.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${n.origin}, ${l}${n.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let l=n;return l.format==="starts_with"?`F\xE2sit metin: "${l.prefix}" ile ba\u015Flamal\u0131.`:l.format==="ends_with"?`F\xE2sit metin: "${l.suffix}" ile bitmeli.`:l.format==="includes"?`F\xE2sit metin: "${l.includes}" ihtiv\xE2 etmeli.`:l.format==="regex"?`F\xE2sit metin: ${l.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${n.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${n.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};function Zv(){return{localeError:D$()}}var z$=()=>{let e={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(n))return"\u0627\u0631\u06D0";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${n.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${r(n.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":return n.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${W(n.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${N(n.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${(i=n.origin)!=null?i:"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${(u=n.origin)!=null?u:"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${l}${n.maximum.toString()} \u0648\u064A`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${n.origin} \u0628\u0627\u06CC\u062F ${l}${n.minimum.toString()} ${d.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${n.origin} \u0628\u0627\u06CC\u062F ${l}${n.minimum.toString()} \u0648\u064A`}case"invalid_format":{let l=n;return l.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${l.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:l.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${l.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:l.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${l.includes}" \u0648\u0644\u0631\u064A`:l.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${l.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${(c=o[l.format])!=null?c:n.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${n.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${n.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${N(n.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${n.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${n.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}};function qv(){return{localeError:z$()}}var U$=()=>{let e={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"liczba";case"object":{if(Array.isArray(n))return"tablica";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return n=>{var i,s,u,c,l,d,m;switch(n.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${n.expected}, otrzymano ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${W(n.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${N(n.values,"|")}`;case"too_big":{let p=n.inclusive?"<=":"<",g=t(n.origin);return g?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${(i=n.origin)!=null?i:"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${p}${n.maximum.toString()} ${(s=g.unit)!=null?s:"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${(u=n.origin)!=null?u:"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${p}${n.maximum.toString()}`}case"too_small":{let p=n.inclusive?">=":">",g=t(n.origin);return g?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${(c=n.origin)!=null?c:"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${p}${n.minimum.toString()} ${(l=g.unit)!=null?l:"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${(d=n.origin)!=null?d:"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${p}${n.minimum.toString()}`}case"invalid_format":{let p=n;return p.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${p.prefix}"`:p.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${p.suffix}"`:p.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${p.includes}"`:p.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${p.pattern}`:`Nieprawid\u0142ow(y/a/e) ${(m=o[p.format])!=null?m:n.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${n.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${n.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${n.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};function Vv(){return{localeError:U$()}}var F$=()=>{let e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(n))return"array";if(n===null)return"nulo";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${n.expected}, recebido ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Entrada inv\xE1lida: esperado ${W(n.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`Muito grande: esperado que ${(i=n.origin)!=null?i:"valor"} tivesse ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"elementos"}`:`Muito grande: esperado que ${(u=n.origin)!=null?u:"valor"} fosse ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`Muito pequeno: esperado que ${n.origin} tivesse ${l}${n.minimum.toString()} ${d.unit}`:`Muito pequeno: esperado que ${n.origin} fosse ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${l.prefix}"`:l.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${l.suffix}"`:l.format==="includes"?`Texto inv\xE1lido: deve incluir "${l.includes}"`:l.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${l.pattern}`:`${(c=o[l.format])!=null?c:n.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${n.divisor}`;case"unrecognized_keys":return`Chave${n.keys.length>1?"s":""} desconhecida${n.keys.length>1?"s":""}: ${N(n.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${n.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${n.origin}`;default:return"Campo inv\xE1lido"}}};function Gv(){return{localeError:F$()}}function Jv(e,t,r,o){let n=Math.abs(e),i=n%10,s=n%100;return s>=11&&s<=19?o:i===1?t:i>=2&&i<=4?r:o}var L$=()=>{let e={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(n))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return n=>{var i,s,u;switch(n.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${n.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${W(n.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${N(n.values,"|")}`;case"too_big":{let c=n.inclusive?"<=":"<",l=t(n.origin);if(l){let d=Number(n.maximum),m=Jv(d,l.unit.one,l.unit.few,l.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${(i=n.origin)!=null?i:"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${c}${n.maximum.toString()} ${m}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${(s=n.origin)!=null?s:"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${c}${n.maximum.toString()}`}case"too_small":{let c=n.inclusive?">=":">",l=t(n.origin);if(l){let d=Number(n.minimum),m=Jv(d,l.unit.one,l.unit.few,l.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${c}${n.minimum.toString()} ${m}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin} \u0431\u0443\u0434\u0435\u0442 ${c}${n.minimum.toString()}`}case"invalid_format":{let c=n;return c.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${c.prefix}"`:c.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${c.suffix}"`:c.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${c.includes}"`:c.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${c.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${(u=o[c.format])!=null?u:n.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${n.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${n.keys.length>1?"\u0438":""}: ${N(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${n.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};function Bv(){return{localeError:L$()}}var Z$=()=>{let e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(n))return"tabela";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${n.expected}, prejeto ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${W(n.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`Preveliko: pri\u010Dakovano, da bo ${(i=n.origin)!=null?i:"vrednost"} imelo ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${(u=n.origin)!=null?u:"vrednost"} ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`Premajhno: pri\u010Dakovano, da bo ${n.origin} imelo ${l}${n.minimum.toString()} ${d.unit}`:`Premajhno: pri\u010Dakovano, da bo ${n.origin} ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${l.prefix}"`:l.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${l.suffix}"`:l.format==="includes"?`Neveljaven niz: mora vsebovati "${l.includes}"`:l.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${l.pattern}`:`Neveljaven ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${n.divisor}`;case"unrecognized_keys":return`Neprepoznan${n.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${N(n.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${n.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${n.origin}`;default:return"Neveljaven vnos"}}};function Hv(){return{localeError:Z$()}}var q$=()=>{let e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"antal";case"object":{if(Array.isArray(n))return"lista";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return n=>{var i,s,u,c,l,d,m,p;switch(n.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${n.expected}, fick ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${W(n.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${N(n.values,"|")}`;case"too_big":{let g=n.inclusive?"<=":"<",h=t(n.origin);return h?`F\xF6r stor(t): f\xF6rv\xE4ntade ${(i=n.origin)!=null?i:"v\xE4rdet"} att ha ${g}${n.maximum.toString()} ${(s=h.unit)!=null?s:"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${(u=n.origin)!=null?u:"v\xE4rdet"} att ha ${g}${n.maximum.toString()}`}case"too_small":{let g=n.inclusive?">=":">",h=t(n.origin);return h?`F\xF6r lite(t): f\xF6rv\xE4ntade ${(c=n.origin)!=null?c:"v\xE4rdet"} att ha ${g}${n.minimum.toString()} ${h.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${(l=n.origin)!=null?l:"v\xE4rdet"} att ha ${g}${n.minimum.toString()}`}case"invalid_format":{let g=n;return g.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${g.prefix}"`:g.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${g.suffix}"`:g.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${g.includes}"`:g.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${g.pattern}"`:`Ogiltig(t) ${(d=o[g.format])!=null?d:n.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${N(n.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${(m=n.origin)!=null?m:"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${(p=n.origin)!=null?p:"v\xE4rdet"}`;default:return"Ogiltig input"}}};function Wv(){return{localeError:q$()}}var V$=()=>{let e={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(n))return"\u0B85\u0BA3\u0BBF";if(n===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${W(n.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${N(n.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${(i=n.origin)!=null?i:"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${(u=n.origin)!=null?u:"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${l}${n.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin} ${l}${n.minimum.toString()} ${d.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin} ${l}${n.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let l=n;return l.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${l.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:l.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${l.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:l.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${l.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:l.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${l.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${n.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${n.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${n.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};function Kv(){return{localeError:V$()}}var G$=()=>{let e={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(n))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(n===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${n.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${W(n.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",d=t(n.origin);return d?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${(i=n.origin)!=null?i:"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${l} ${n.maximum.toString()} ${(s=d.unit)!=null?s:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${(u=n.origin)!=null?u:"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${l} ${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",d=t(n.origin);return d?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${l} ${n.minimum.toString()} ${d.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${l} ${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${l.prefix}"`:l.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${l.suffix}"`:l.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${l.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:l.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${l.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${n.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${N(n.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${n.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${n.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};function Yv(){return{localeError:G$()}}var J$=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},B$=()=>{let e={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function t(o){var n;return(n=e[o])!=null?n:null}let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return o=>{var n,i,s,u;switch(o.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${o.expected}, al\u0131nan ${J$(o.input)}`;case"invalid_value":return o.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${W(o.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${N(o.values,"|")}`;case"too_big":{let c=o.inclusive?"<=":"<",l=t(o.origin);return l?`\xC7ok b\xFCy\xFCk: beklenen ${(n=o.origin)!=null?n:"de\u011Fer"} ${c}${o.maximum.toString()} ${(i=l.unit)!=null?i:"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${(s=o.origin)!=null?s:"de\u011Fer"} ${c}${o.maximum.toString()}`}case"too_small":{let c=o.inclusive?">=":">",l=t(o.origin);return l?`\xC7ok k\xFC\xE7\xFCk: beklenen ${o.origin} ${c}${o.minimum.toString()} ${l.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${o.origin} ${c}${o.minimum.toString()}`}case"invalid_format":{let c=o;return c.format==="starts_with"?`Ge\xE7ersiz metin: "${c.prefix}" ile ba\u015Flamal\u0131`:c.format==="ends_with"?`Ge\xE7ersiz metin: "${c.suffix}" ile bitmeli`:c.format==="includes"?`Ge\xE7ersiz metin: "${c.includes}" i\xE7ermeli`:c.format==="regex"?`Ge\xE7ersiz metin: ${c.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${(u=r[c.format])!=null?u:o.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${o.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${o.keys.length>1?"lar":""}: ${N(o.keys,", ")}`;case"invalid_key":return`${o.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${o.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};function Xv(){return{localeError:B$()}}var H$=()=>{let e={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(n))return"\u043C\u0430\u0441\u0438\u0432";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${n.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${W(n.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${(i=n.origin)!=null?i:"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${d.verb} ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${(u=n.origin)!=null?u:"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin} ${d.verb} ${l}${n.minimum.toString()} ${d.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin} \u0431\u0443\u0434\u0435 ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${l.prefix}"`:l.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${l.suffix}"`:l.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${l.includes}"`:l.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${l.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${n.keys.length>1?"\u0456":""}: ${N(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${n.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};function cs(){return{localeError:H$()}}function Qv(){return cs()}var W$=()=>{let e={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(n))return"\u0622\u0631\u06D2";if(n===null)return"\u0646\u0644";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${n.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${r(n.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":return n.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${W(n.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${N(n.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${(i=n.origin)!=null?i:"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${(u=n.origin)!=null?u:"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${l}${n.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${n.origin} \u06A9\u06D2 ${l}${n.minimum.toString()} ${d.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${n.origin} \u06A9\u0627 ${l}${n.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let l=n;return l.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${l.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:l.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${l.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:l.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${l.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:l.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${l.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${n.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${n.keys.length>1?"\u0632":""}: ${N(n.keys,"\u060C ")}`;case"invalid_key":return`${n.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${n.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};function ey(){return{localeError:W$()}}var K$=()=>{let e={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(n))return"m\u1EA3ng";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${n.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${W(n.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${(i=n.origin)!=null?i:"gi\xE1 tr\u1ECB"} ${d.verb} ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${(u=n.origin)!=null?u:"gi\xE1 tr\u1ECB"} ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${n.origin} ${d.verb} ${l}${n.minimum.toString()} ${d.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${n.origin} ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${l.prefix}"`:l.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${l.suffix}"`:l.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${l.includes}"`:l.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${l.pattern}`:`${(c=o[l.format])!=null?c:n.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${n.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${N(n.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${n.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${n.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};function ty(){return{localeError:K$()}}var Y$=()=>{let e={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(n))return"\u6570\u7EC4";if(n===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${n.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${W(n.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${(i=n.origin)!=null?i:"\u503C"} ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${(u=n.origin)!=null?u:"\u503C"} ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${n.origin} ${l}${n.minimum.toString()} ${d.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${n.origin} ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${l.prefix}" \u5F00\u5934`:l.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${l.suffix}" \u7ED3\u5C3E`:l.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${l.includes}"`:l.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${l.pattern}`:`\u65E0\u6548${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${n.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${N(n.keys,", ")}`;case"invalid_key":return`${n.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${n.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};function ry(){return{localeError:Y$()}}var X$=()=>{let e={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return n=>{var i,s,u,c;switch(n.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${n.expected}\uFF0C\u4F46\u6536\u5230 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${W(n.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${N(n.values,"|")}`;case"too_big":{let l=n.inclusive?"<=":"<",d=t(n.origin);return d?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${(i=n.origin)!=null?i:"\u503C"} \u61C9\u70BA ${l}${n.maximum.toString()} ${(s=d.unit)!=null?s:"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${(u=n.origin)!=null?u:"\u503C"} \u61C9\u70BA ${l}${n.maximum.toString()}`}case"too_small":{let l=n.inclusive?">=":">",d=t(n.origin);return d?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${n.origin} \u61C9\u70BA ${l}${n.minimum.toString()} ${d.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${n.origin} \u61C9\u70BA ${l}${n.minimum.toString()}`}case"invalid_format":{let l=n;return l.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${l.prefix}" \u958B\u982D`:l.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${l.suffix}" \u7D50\u5C3E`:l.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${l.includes}"`:l.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${l.pattern}`:`\u7121\u6548\u7684 ${(c=o[l.format])!=null?c:n.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${n.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${n.keys.length>1?"\u5011":""}\uFF1A${N(n.keys,"\u3001")}`;case"invalid_key":return`${n.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${n.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};function ny(){return{localeError:X$()}}var Q$=()=>{let e={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function t(n){var i;return(i=e[n])!=null?i:null}let r=n=>{let i=typeof n;switch(i){case"number":return Number.isNaN(n)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(n))return"akop\u1ECD";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return i},o={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return n=>{var i,s;switch(n.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${n.expected}, \xE0m\u1ECD\u0300 a r\xED ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${W(n.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${N(n.values,"|")}`;case"too_big":{let u=n.inclusive?"<=":"<",c=t(n.origin);return c?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${(i=n.origin)!=null?i:"iye"} ${c.verb} ${u}${n.maximum} ${c.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${u}${n.maximum}`}case"too_small":{let u=n.inclusive?">=":">",c=t(n.origin);return c?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${n.origin} ${c.verb} ${u}${n.minimum} ${c.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${u}${n.minimum}`}case"invalid_format":{let u=n;return u.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${u.prefix}"`:u.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${u.suffix}"`:u.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${u.includes}"`:u.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${u.pattern}`:`A\u1E63\xEC\u1E63e: ${(s=o[u.format])!=null?s:n.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${n.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${N(n.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${n.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${n.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}};function oy(){return{localeError:Q$()}}var ay,zd=Symbol("ZodOutput"),Ud=Symbol("ZodInput"),oo=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){let o=r[0];if(this._map.set(t,o),o&&typeof o=="object"&&"id"in o){if(this._idmap.has(o.id))throw new Error(`ID ${o.id} already exists in the registry`);this._idmap.set(o.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){let r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){var o;let r=t._zod.parent;if(r){let n={...(o=this.get(r))!=null?o:{}};delete n.id;let i={...n,...this._map.get(t)};return Object.keys(i).length?i:void 0}return this._map.get(t)}has(t){return this._map.has(t)}};function ds(){return new oo}var iy;(iy=(ay=globalThis).__zod_globalRegistry)!=null||(ay.__zod_globalRegistry=ds());var yt=globalThis.__zod_globalRegistry;function Fd(e,t){return new e({type:"string",...X(t)})}function Ld(e,t){return new e({type:"string",coerce:!0,...X(t)})}function ps(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...X(t)})}function fa(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...X(t)})}function ms(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...X(t)})}function fs(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...X(t)})}function gs(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...X(t)})}function hs(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...X(t)})}function ga(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...X(t)})}function vs(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...X(t)})}function ys(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...X(t)})}function _s(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...X(t)})}function bs(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...X(t)})}function xs(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...X(t)})}function ws(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...X(t)})}function Ss(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...X(t)})}function ks(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...X(t)})}function Is(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...X(t)})}function Zd(e,t){return new e({type:"string",format:"mac",check:"string_format",abort:!1,...X(t)})}function Ts(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...X(t)})}function $s(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...X(t)})}function Es(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...X(t)})}function As(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...X(t)})}function Cs(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...X(t)})}function Ps(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...X(t)})}var qd={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function Vd(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...X(t)})}function Gd(e,t){return new e({type:"string",format:"date",check:"string_format",...X(t)})}function Jd(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...X(t)})}function Bd(e,t){return new e({type:"string",format:"duration",check:"string_format",...X(t)})}function Hd(e,t){return new e({type:"number",checks:[],...X(t)})}function Wd(e,t){return new e({type:"number",coerce:!0,checks:[],...X(t)})}function Kd(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...X(t)})}function Yd(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...X(t)})}function Xd(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...X(t)})}function Qd(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...X(t)})}function ep(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...X(t)})}function tp(e,t){return new e({type:"boolean",...X(t)})}function rp(e,t){return new e({type:"boolean",coerce:!0,...X(t)})}function np(e,t){return new e({type:"bigint",...X(t)})}function op(e,t){return new e({type:"bigint",coerce:!0,...X(t)})}function ap(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...X(t)})}function ip(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...X(t)})}function sp(e,t){return new e({type:"symbol",...X(t)})}function lp(e,t){return new e({type:"undefined",...X(t)})}function up(e,t){return new e({type:"null",...X(t)})}function cp(e){return new e({type:"any"})}function dp(e){return new e({type:"unknown"})}function pp(e,t){return new e({type:"never",...X(t)})}function mp(e,t){return new e({type:"void",...X(t)})}function fp(e,t){return new e({type:"date",...X(t)})}function gp(e,t){return new e({type:"date",coerce:!0,...X(t)})}function hp(e,t){return new e({type:"nan",...X(t)})}function Fr(e,t){return new Yi({check:"less_than",...X(t),value:e,inclusive:!1})}function Jt(e,t){return new Yi({check:"less_than",...X(t),value:e,inclusive:!0})}function Lr(e,t){return new Xi({check:"greater_than",...X(t),value:e,inclusive:!1})}function $t(e,t){return new Xi({check:"greater_than",...X(t),value:e,inclusive:!0})}function vp(e){return Lr(0,e)}function yp(e){return Fr(0,e)}function _p(e){return Jt(0,e)}function bp(e){return $t(0,e)}function Pn(e,t){return new cc({check:"multiple_of",...X(t),value:e})}function ao(e,t){return new mc({check:"max_size",...X(t),maximum:e})}function On(e,t){return new fc({check:"min_size",...X(t),minimum:e})}function ha(e,t){return new gc({check:"size_equals",...X(t),size:e})}function io(e,t){return new hc({check:"max_length",...X(t),maximum:e})}function fn(e,t){return new vc({check:"min_length",...X(t),minimum:e})}function so(e,t){return new yc({check:"length_equals",...X(t),length:e})}function va(e,t){return new _c({check:"string_format",format:"regex",...X(t),pattern:e})}function ya(e){return new bc({check:"string_format",format:"lowercase",...X(e)})}function _a(e){return new xc({check:"string_format",format:"uppercase",...X(e)})}function ba(e,t){return new wc({check:"string_format",format:"includes",...X(t),includes:e})}function xa(e,t){return new Sc({check:"string_format",format:"starts_with",...X(t),prefix:e})}function wa(e,t){return new kc({check:"string_format",format:"ends_with",...X(t),suffix:e})}function xp(e,t,r){return new Ic({check:"property",property:e,schema:t,...X(r)})}function Sa(e,t){return new Tc({check:"mime_type",mime:e,...X(t)})}function br(e){return new $c({check:"overwrite",tx:e})}function ka(e){return br(t=>t.normalize(e))}function Ia(){return br(e=>e.trim())}function Ta(){return br(e=>e.toLowerCase())}function $a(){return br(e=>e.toUpperCase())}function Ea(){return br(e=>ku(e))}function wp(e,t,r){return new e({type:"array",element:t,...X(r)})}function tE(e,t,r){return new e({type:"union",options:t,...X(r)})}function rE(e,t,r,o){return new e({type:"union",options:r,discriminator:t,...X(o)})}function nE(e,t,r){return new e({type:"intersection",left:t,right:r})}function oE(e,t,r,o){let n=r instanceof ce,i=n?o:r,s=n?r:null;return new e({type:"tuple",items:t,rest:s,...X(i)})}function aE(e,t,r,o){return new e({type:"record",keyType:t,valueType:r,...X(o)})}function iE(e,t,r,o){return new e({type:"map",keyType:t,valueType:r,...X(o)})}function sE(e,t,r){return new e({type:"set",valueType:t,...X(r)})}function lE(e,t,r){let o=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new e({type:"enum",entries:o,...X(r)})}function uE(e,t,r){return new e({type:"enum",entries:t,...X(r)})}function cE(e,t,r){return new e({type:"literal",values:Array.isArray(t)?t:[t],...X(r)})}function Sp(e,t){return new e({type:"file",...X(t)})}function dE(e,t){return new e({type:"transform",transform:t})}function pE(e,t){return new e({type:"optional",innerType:t})}function mE(e,t){return new e({type:"nullable",innerType:t})}function fE(e,t,r){return new e({type:"default",innerType:t,get defaultValue(){return typeof r=="function"?r():Tu(r)}})}function gE(e,t,r){return new e({type:"nonoptional",innerType:t,...X(r)})}function hE(e,t){return new e({type:"success",innerType:t})}function vE(e,t,r){return new e({type:"catch",innerType:t,catchValue:typeof r=="function"?r:()=>r})}function yE(e,t,r){return new e({type:"pipe",in:t,out:r})}function _E(e,t){return new e({type:"readonly",innerType:t})}function bE(e,t,r){return new e({type:"template_literal",parts:t,...X(r)})}function xE(e,t){return new e({type:"lazy",getter:t})}function wE(e,t){return new e({type:"promise",innerType:t})}function kp(e,t,r){var i;let o=X(r);return(i=o.abort)!=null||(o.abort=!0),new e({type:"custom",check:"custom",fn:t,...o})}function Ip(e,t,r){return new e({type:"custom",check:"custom",fn:t,...X(r)})}function Tp(e){let t=sy(r=>(r.addIssue=o=>{var n,i,s,u;if(typeof o=="string")r.issues.push(Xn(o,r.value,t._zod.def));else{let c=o;c.fatal&&(c.continue=!1),(n=c.code)!=null||(c.code="custom"),(i=c.input)!=null||(c.input=r.value),(s=c.inst)!=null||(c.inst=t),(u=c.continue)!=null||(c.continue=!t._zod.def.abort),r.issues.push(Xn(c))}},e(r.value,r)));return t}function sy(e,t){let r=new Ue({check:"custom",...X(t)});return r._zod.check=e,r}function $p(e){let t=new Ue({check:"describe"});return t._zod.onattach=[r=>{var n;let o=(n=yt.get(r))!=null?n:{};yt.add(r,{...o,description:e})}],t._zod.check=()=>{},t}function Ep(e){let t=new Ue({check:"meta"});return t._zod.onattach=[r=>{var n;let o=(n=yt.get(r))!=null?n:{};yt.add(r,{...o,...e})}],t._zod.check=()=>{},t}function Ap(e,t){var g,h,v,_,w;let r=X(t),o=(g=r.truthy)!=null?g:["true","1","yes","on","y","enabled"],n=(h=r.falsy)!=null?h:["false","0","no","off","n","disabled"];r.case!=="sensitive"&&(o=o.map(x=>typeof x=="string"?x.toLowerCase():x),n=n.map(x=>typeof x=="string"?x.toLowerCase():x));let i=new Set(o),s=new Set(n),u=(v=e.Codec)!=null?v:da,c=(_=e.Boolean)!=null?_:ca,l=(w=e.String)!=null?w:An,d=new l({type:"string",error:r.error}),m=new c({type:"boolean",error:r.error}),p=new u({type:"pipe",in:d,out:m,transform:((x,f)=>{let b=x;return r.case!=="sensitive"&&(b=b.toLowerCase()),i.has(b)?!0:s.has(b)?!1:(f.issues.push({code:"invalid_value",expected:"stringbool",values:[...i,...s],input:f.value,inst:p,continue:!1}),{})}),reverseTransform:((x,f)=>x===!0?o[0]||"true":n[0]||"false"),error:r.error});return p}function lo(e,t,r,o={}){let n=X(o),i={...X(o),check:"string_format",type:"string",format:t,fn:typeof r=="function"?r:u=>r.test(u),...n};return r instanceof RegExp&&(i.pattern=r),new e(i)}var Aa=class{constructor(t){var r,o,n,i,s;this.counter=0,this.metadataRegistry=(r=t==null?void 0:t.metadata)!=null?r:yt,this.target=(o=t==null?void 0:t.target)!=null?o:"draft-2020-12",this.unrepresentable=(n=t==null?void 0:t.unrepresentable)!=null?n:"throw",this.override=(i=t==null?void 0:t.override)!=null?i:(()=>{}),this.io=(s=t==null?void 0:t.io)!=null?s:"output",this.seen=new Map}process(t,r={path:[],schemaPath:[]}){var m,p,g,h,v;var o;let n=t._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},s=this.seen.get(t);if(s)return s.count++,r.schemaPath.includes(t)&&(s.cycle=r.path),s.schema;let u={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(t,u);let c=(p=(m=t._zod).toJSONSchema)==null?void 0:p.call(m);if(c)u.schema=c;else{let _={...r,schemaPath:[...r.schemaPath,t],path:r.path},w=t._zod.parent;if(w)u.ref=w,this.process(w,_),this.seen.get(w).isParent=!0;else{let x=u.schema;switch(n.type){case"string":{let f=x;f.type="string";let{minimum:b,maximum:y,format:k,patterns:$,contentEncoding:O}=t._zod.bag;if(typeof b=="number"&&(f.minLength=b),typeof y=="number"&&(f.maxLength=y),k&&(f.format=(g=i[k])!=null?g:k,f.format===""&&delete f.format),O&&(f.contentEncoding=O),$&&$.size>0){let L=[...$];L.length===1?f.pattern=L[0].source:L.length>1&&(u.schema.allOf=[...L.map(F=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:F.source}))])}break}case"number":{let f=x,{minimum:b,maximum:y,format:k,multipleOf:$,exclusiveMaximum:O,exclusiveMinimum:L}=t._zod.bag;typeof k=="string"&&k.includes("int")?f.type="integer":f.type="number",typeof L=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(f.minimum=L,f.exclusiveMinimum=!0):f.exclusiveMinimum=L),typeof b=="number"&&(f.minimum=b,typeof L=="number"&&this.target!=="draft-4"&&(L>=b?delete f.minimum:delete f.exclusiveMinimum)),typeof O=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(f.maximum=O,f.exclusiveMaximum=!0):f.exclusiveMaximum=O),typeof y=="number"&&(f.maximum=y,typeof O=="number"&&this.target!=="draft-4"&&(O<=y?delete f.maximum:delete f.exclusiveMaximum)),typeof $=="number"&&(f.multipleOf=$);break}case"boolean":{let f=x;f.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(x.type="string",x.nullable=!0,x.enum=[null]):x.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{x.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let f=x,{minimum:b,maximum:y}=t._zod.bag;typeof b=="number"&&(f.minItems=b),typeof y=="number"&&(f.maxItems=y),f.type="array",f.items=this.process(n.element,{..._,path:[..._.path,"items"]});break}case"object":{let f=x;f.type="object",f.properties={};let b=n.shape;for(let $ in b)f.properties[$]=this.process(b[$],{..._,path:[..._.path,"properties",$]});let y=new Set(Object.keys(b)),k=new Set([...y].filter($=>{let O=n.shape[$]._zod;return this.io==="input"?O.optin===void 0:O.optout===void 0}));k.size>0&&(f.required=Array.from(k)),((h=n.catchall)==null?void 0:h._zod.def.type)==="never"?f.additionalProperties=!1:n.catchall?n.catchall&&(f.additionalProperties=this.process(n.catchall,{..._,path:[..._.path,"additionalProperties"]})):this.io==="output"&&(f.additionalProperties=!1);break}case"union":{let f=x,b=n.discriminator!==void 0,y=n.options.map((k,$)=>this.process(k,{..._,path:[..._.path,b?"oneOf":"anyOf",$]}));b?f.oneOf=y:f.anyOf=y;break}case"intersection":{let f=x,b=this.process(n.left,{..._,path:[..._.path,"allOf",0]}),y=this.process(n.right,{..._,path:[..._.path,"allOf",1]}),k=O=>"allOf"in O&&Object.keys(O).length===1,$=[...k(b)?b.allOf:[b],...k(y)?y.allOf:[y]];f.allOf=$;break}case"tuple":{let f=x;f.type="array";let b=this.target==="draft-2020-12"?"prefixItems":"items",y=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",k=n.items.map((F,U)=>this.process(F,{..._,path:[..._.path,b,U]})),$=n.rest?this.process(n.rest,{..._,path:[..._.path,y,...this.target==="openapi-3.0"?[n.items.length]:[]]}):null;this.target==="draft-2020-12"?(f.prefixItems=k,$&&(f.items=$)):this.target==="openapi-3.0"?(f.items={anyOf:k},$&&f.items.anyOf.push($),f.minItems=k.length,$||(f.maxItems=k.length)):(f.items=k,$&&(f.additionalItems=$));let{minimum:O,maximum:L}=t._zod.bag;typeof O=="number"&&(f.minItems=O),typeof L=="number"&&(f.maxItems=L);break}case"record":{let f=x;f.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(f.propertyNames=this.process(n.keyType,{..._,path:[..._.path,"propertyNames"]})),f.additionalProperties=this.process(n.valueType,{..._,path:[..._.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let f=x,b=Qo(n.entries);b.every(y=>typeof y=="number")&&(f.type="number"),b.every(y=>typeof y=="string")&&(f.type="string"),f.enum=b;break}case"literal":{let f=x,b=[];for(let y of n.values)if(y===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof y=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");b.push(Number(y))}else b.push(y);if(b.length!==0)if(b.length===1){let y=b[0];f.type=y===null?"null":typeof y,this.target==="draft-4"||this.target==="openapi-3.0"?f.enum=[y]:f.const=y}else b.every(y=>typeof y=="number")&&(f.type="number"),b.every(y=>typeof y=="string")&&(f.type="string"),b.every(y=>typeof y=="boolean")&&(f.type="string"),b.every(y=>y===null)&&(f.type="null"),f.enum=b;break}case"file":{let f=x,b={type:"string",format:"binary",contentEncoding:"binary"},{minimum:y,maximum:k,mime:$}=t._zod.bag;y!==void 0&&(b.minLength=y),k!==void 0&&(b.maxLength=k),$?$.length===1?(b.contentMediaType=$[0],Object.assign(f,b)):f.anyOf=$.map(O=>({...b,contentMediaType:O})):Object.assign(f,b);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let f=this.process(n.innerType,_);this.target==="openapi-3.0"?(u.ref=n.innerType,x.nullable=!0):x.anyOf=[f,{type:"null"}];break}case"nonoptional":{this.process(n.innerType,_),u.ref=n.innerType;break}case"success":{let f=x;f.type="boolean";break}case"default":{this.process(n.innerType,_),u.ref=n.innerType,x.default=JSON.parse(JSON.stringify(n.defaultValue));break}case"prefault":{this.process(n.innerType,_),u.ref=n.innerType,this.io==="input"&&(x._prefault=JSON.parse(JSON.stringify(n.defaultValue)));break}case"catch":{this.process(n.innerType,_),u.ref=n.innerType;let f;try{f=n.catchValue(void 0)}catch(b){throw new Error("Dynamic catch values are not supported in JSON Schema")}x.default=f;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let f=x,b=t._zod.pattern;if(!b)throw new Error("Pattern not found in template literal");f.type="string",f.pattern=b.source;break}case"pipe":{let f=this.io==="input"?n.in._zod.def.type==="transform"?n.out:n.in:n.out;this.process(f,_),u.ref=f;break}case"readonly":{this.process(n.innerType,_),u.ref=n.innerType,x.readOnly=!0;break}case"promise":{this.process(n.innerType,_),u.ref=n.innerType;break}case"optional":{this.process(n.innerType,_),u.ref=n.innerType;break}case"lazy":{let f=t._zod.innerType;this.process(f,_),u.ref=f;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}default:}}}let l=this.metadataRegistry.get(t);return l&&Object.assign(u.schema,l),this.io==="input"&&_t(t)&&(delete u.schema.examples,delete u.schema.default),this.io==="input"&&u.schema._prefault&&((v=(o=u.schema).default)!=null||(o.default=u.schema._prefault)),delete u.schema._prefault,this.seen.get(t).schema}emit(t,r){var d,m,p,g,h,v,_,w,x,f;let o={cycles:(d=r==null?void 0:r.cycles)!=null?d:"ref",reused:(m=r==null?void 0:r.reused)!=null?m:"inline",external:(p=r==null?void 0:r.external)!=null?p:void 0},n=this.seen.get(t);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=b=>{var L,F,U,Z,E;let y=this.target==="draft-2020-12"?"$defs":"definitions";if(o.external){let z=(L=o.external.registry.get(b[0]))==null?void 0:L.id,J=(F=o.external.uri)!=null?F:(D=>D);if(z)return{ref:J(z)};let B=(Z=(U=b[1].defId)!=null?U:b[1].schema.id)!=null?Z:`schema${this.counter++}`;return b[1].defId=B,{defId:B,ref:`${J("__shared")}#/${y}/${B}`}}if(b[1]===n)return{ref:"#"};let $=`#/${y}/`,O=(E=b[1].schema.id)!=null?E:`__schema${this.counter++}`;return{defId:O,ref:$+O}},s=b=>{if(b[1].schema.$ref)return;let y=b[1],{ref:k,defId:$}=i(b);y.def={...y.schema},$&&(y.defId=$);let O=y.schema;for(let L in O)delete O[L];O.$ref=k};if(o.cycles==="throw")for(let b of this.seen.entries()){let y=b[1];if(y.cycle)throw new Error(`Cycle detected: #/${(g=y.cycle)==null?void 0:g.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let b of this.seen.entries()){let y=b[1];if(t===b[0]){s(b);continue}if(o.external){let $=(h=o.external.registry.get(b[0]))==null?void 0:h.id;if(t!==b[0]&&$){s(b);continue}}if((v=this.metadataRegistry.get(b[0]))==null?void 0:v.id){s(b);continue}if(y.cycle){s(b);continue}if(y.count>1&&o.reused==="ref"){s(b);continue}}let u=(b,y)=>{var F,U,Z;let k=this.seen.get(b),$=(F=k.def)!=null?F:k.schema,O={...$};if(k.ref===null)return;let L=k.ref;if(k.ref=null,L){u(L,y);let E=this.seen.get(L).schema;E.$ref&&(y.target==="draft-7"||y.target==="draft-4"||y.target==="openapi-3.0")?($.allOf=(U=$.allOf)!=null?U:[],$.allOf.push(E)):(Object.assign($,E),Object.assign($,O))}k.isParent||this.override({zodSchema:b,jsonSchema:$,path:(Z=k.path)!=null?Z:[]})};for(let b of[...this.seen.entries()].reverse())u(b[0],{target:this.target});let c={};if(this.target==="draft-2020-12"?c.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?c.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?c.$schema="http://json-schema.org/draft-04/schema#":this.target,(_=o.external)!=null&&_.uri){let b=(w=o.external.registry.get(t))==null?void 0:w.id;if(!b)throw new Error("Schema is missing an `id` property");c.$id=o.external.uri(b)}Object.assign(c,n.def);let l=(f=(x=o.external)==null?void 0:x.defs)!=null?f:{};for(let b of this.seen.entries()){let y=b[1];y.def&&y.defId&&(l[y.defId]=y.def)}o.external||Object.keys(l).length>0&&(this.target==="draft-2020-12"?c.$defs=l:c.definitions=l);try{return JSON.parse(JSON.stringify(c))}catch(b){throw new Error("Error converting schema to JSON.")}}};function Zr(e,t){if(e instanceof oo){let o=new Aa(t),n={};for(let u of e._idmap.entries()){let[c,l]=u;o.process(l)}let i={},s={registry:e,uri:t==null?void 0:t.uri,defs:n};for(let u of e._idmap.entries()){let[c,l]=u;i[c]=o.emit(l,{...t,external:s})}if(Object.keys(n).length>0){let u=o.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[u]:n}}return{schemas:i}}let r=new Aa(t);return r.process(e),r.emit(e,t)}function _t(e,t){let r=t!=null?t:{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);let o=e._zod.def;if(o.type==="transform")return!0;if(o.type==="array")return _t(o.element,r);if(o.type==="set")return _t(o.valueType,r);if(o.type==="lazy")return _t(o.getter(),r);if(o.type==="promise"||o.type==="optional"||o.type==="nonoptional"||o.type==="nullable"||o.type==="readonly"||o.type==="default"||o.type==="prefault")return _t(o.innerType,r);if(o.type==="intersection")return _t(o.left,r)||_t(o.right,r);if(o.type==="record"||o.type==="map")return _t(o.keyType,r)||_t(o.valueType,r);if(o.type==="pipe")return _t(o.in,r)||_t(o.out,r);if(o.type==="object"){for(let n in o.shape)if(_t(o.shape[n],r))return!0;return!1}if(o.type==="union"){for(let n of o.options)if(_t(n,r))return!0;return!1}if(o.type==="tuple"){for(let n of o.items)if(_t(n,r))return!0;return!!(o.rest&&_t(o.rest,r))}return!1}var Cp={};var Ca={};nn(Ca,{ZodISODate:()=>Ns,ZodISODateTime:()=>Os,ZodISODuration:()=>js,ZodISOTime:()=>Rs,date:()=>Op,datetime:()=>Pp,duration:()=>Rp,time:()=>Np});var Os=T("ZodISODateTime",(e,t)=>{Lc.init(e,t),Fe.init(e,t)});function Pp(e){return Vd(Os,e)}var Ns=T("ZodISODate",(e,t)=>{Zc.init(e,t),Fe.init(e,t)});function Op(e){return Gd(Ns,e)}var Rs=T("ZodISOTime",(e,t)=>{qc.init(e,t),Fe.init(e,t)});function Np(e){return Jd(Rs,e)}var js=T("ZodISODuration",(e,t)=>{Vc.init(e,t),Fe.init(e,t)});function Rp(e){return Bd(js,e)}var uy=(e,t)=>{oa.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>ia(e,r)},flatten:{value:r=>aa(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,Kn,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,Kn,2)}},isEmpty:{get(){return e.issues.length===0}}})},kE=T("ZodError",uy),Et=T("ZodError",uy,{Parent:Error});var jp=Qn(Et),Mp=eo(Et),Dp=to(Et),qr=ro(Et),zp=Zi(Et),Up=qi(Et),Fp=Vi(Et),Lp=Gi(Et),Zp=Ji(Et),qp=Bi(Et),Vp=Hi(Et),Gp=Wi(Et);var fe=T("ZodType",(e,t)=>(ce.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>{var o;return e.clone(K.mergeDefs(t,{checks:[...(o=t.checks)!=null?o:[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}))},e.clone=(r,o)=>vt(e,r,o),e.brand=()=>e,e.register=((r,o)=>(r.add(e,o),e)),e.parse=(r,o)=>jp(e,r,o,{callee:e.parse}),e.safeParse=(r,o)=>Dp(e,r,o),e.parseAsync=async(r,o)=>Mp(e,r,o,{callee:e.parseAsync}),e.safeParseAsync=async(r,o)=>qr(e,r,o),e.spa=e.safeParseAsync,e.encode=(r,o)=>zp(e,r,o),e.decode=(r,o)=>Up(e,r,o),e.encodeAsync=async(r,o)=>Fp(e,r,o),e.decodeAsync=async(r,o)=>Lp(e,r,o),e.safeEncode=(r,o)=>Zp(e,r,o),e.safeDecode=(r,o)=>qp(e,r,o),e.safeEncodeAsync=async(r,o)=>Vp(e,r,o),e.safeDecodeAsync=async(r,o)=>Gp(e,r,o),e.refine=(r,o)=>e.check(Ky(r,o)),e.superRefine=r=>e.check(Yy(r)),e.overwrite=r=>e.check(br(r)),e.optional=()=>Ds(e),e.nullable=()=>zs(e),e.nullish=()=>Ds(zs(e)),e.nonoptional=r=>zy(e,r),e.array=()=>Zs(e),e.or=r=>fm([e,r]),e.and=r=>ky(e,r),e.transform=r=>Us(e,vm(r)),e.default=r=>jy(e,r),e.prefault=r=>Dy(e,r),e.catch=r=>Ly(e,r),e.pipe=r=>Us(e,r),e.readonly=()=>Vy(e),e.describe=r=>{let o=e.clone();return yt.add(o,{description:r}),o},Object.defineProperty(e,"description",{get(){var r;return(r=yt.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return yt.get(e);let o=e.clone();return yt.add(o,r[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Hp=T("_ZodString",(e,t)=>{var o,n,i;An.init(e,t),fe.init(e,t);let r=e._zod.bag;e.format=(o=r.format)!=null?o:null,e.minLength=(n=r.minimum)!=null?n:null,e.maxLength=(i=r.maximum)!=null?i:null,e.regex=(...s)=>e.check(va(...s)),e.includes=(...s)=>e.check(ba(...s)),e.startsWith=(...s)=>e.check(xa(...s)),e.endsWith=(...s)=>e.check(wa(...s)),e.min=(...s)=>e.check(fn(...s)),e.max=(...s)=>e.check(io(...s)),e.length=(...s)=>e.check(so(...s)),e.nonempty=(...s)=>e.check(fn(1,...s)),e.lowercase=s=>e.check(ya(s)),e.uppercase=s=>e.check(_a(s)),e.trim=()=>e.check(Ia()),e.normalize=(...s)=>e.check(ka(...s)),e.toLowerCase=()=>e.check(Ta()),e.toUpperCase=()=>e.check($a()),e.slugify=()=>e.check(Ea())}),Oa=T("ZodString",(e,t)=>{An.init(e,t),Hp.init(e,t),e.email=r=>e.check(ps(Wp,r)),e.url=r=>e.check(ga(Fs,r)),e.jwt=r=>e.check(Ps(cm,r)),e.emoji=r=>e.check(vs(Kp,r)),e.guid=r=>e.check(fa(Ms,r)),e.uuid=r=>e.check(ms(Vr,r)),e.uuidv4=r=>e.check(fs(Vr,r)),e.uuidv6=r=>e.check(gs(Vr,r)),e.uuidv7=r=>e.check(hs(Vr,r)),e.nanoid=r=>e.check(ys(Yp,r)),e.guid=r=>e.check(fa(Ms,r)),e.cuid=r=>e.check(_s(Xp,r)),e.cuid2=r=>e.check(bs(Qp,r)),e.ulid=r=>e.check(xs(em,r)),e.base64=r=>e.check(Es(sm,r)),e.base64url=r=>e.check(As(lm,r)),e.xid=r=>e.check(ws(tm,r)),e.ksuid=r=>e.check(Ss(rm,r)),e.ipv4=r=>e.check(ks(nm,r)),e.ipv6=r=>e.check(Is(om,r)),e.cidrv4=r=>e.check(Ts(am,r)),e.cidrv6=r=>e.check($s(im,r)),e.e164=r=>e.check(Cs(um,r)),e.datetime=r=>e.check(Pp(r)),e.date=r=>e.check(Op(r)),e.time=r=>e.check(Np(r)),e.duration=r=>e.check(Rp(r))});function Jp(e){return Fd(Oa,e)}var Fe=T("ZodStringFormat",(e,t)=>{De.init(e,t),Hp.init(e,t)}),Wp=T("ZodEmail",(e,t)=>{Oc.init(e,t),Fe.init(e,t)});function TE(e){return ps(Wp,e)}var Ms=T("ZodGUID",(e,t)=>{Cc.init(e,t),Fe.init(e,t)});function $E(e){return fa(Ms,e)}var Vr=T("ZodUUID",(e,t)=>{Pc.init(e,t),Fe.init(e,t)});function EE(e){return ms(Vr,e)}function AE(e){return fs(Vr,e)}function CE(e){return gs(Vr,e)}function PE(e){return hs(Vr,e)}var Fs=T("ZodURL",(e,t)=>{Nc.init(e,t),Fe.init(e,t)});function OE(e){return ga(Fs,e)}function NE(e){return ga(Fs,{protocol:/^https?$/,hostname:jt.domain,...K.normalizeParams(e)})}var Kp=T("ZodEmoji",(e,t)=>{Rc.init(e,t),Fe.init(e,t)});function RE(e){return vs(Kp,e)}var Yp=T("ZodNanoID",(e,t)=>{jc.init(e,t),Fe.init(e,t)});function jE(e){return ys(Yp,e)}var Xp=T("ZodCUID",(e,t)=>{Mc.init(e,t),Fe.init(e,t)});function ME(e){return _s(Xp,e)}var Qp=T("ZodCUID2",(e,t)=>{Dc.init(e,t),Fe.init(e,t)});function DE(e){return bs(Qp,e)}var em=T("ZodULID",(e,t)=>{zc.init(e,t),Fe.init(e,t)});function zE(e){return xs(em,e)}var tm=T("ZodXID",(e,t)=>{Uc.init(e,t),Fe.init(e,t)});function UE(e){return ws(tm,e)}var rm=T("ZodKSUID",(e,t)=>{Fc.init(e,t),Fe.init(e,t)});function FE(e){return Ss(rm,e)}var nm=T("ZodIPv4",(e,t)=>{Gc.init(e,t),Fe.init(e,t)});function LE(e){return ks(nm,e)}var cy=T("ZodMAC",(e,t)=>{Bc.init(e,t),Fe.init(e,t)});function ZE(e){return Zd(cy,e)}var om=T("ZodIPv6",(e,t)=>{Jc.init(e,t),Fe.init(e,t)});function qE(e){return Is(om,e)}var am=T("ZodCIDRv4",(e,t)=>{Hc.init(e,t),Fe.init(e,t)});function VE(e){return Ts(am,e)}var im=T("ZodCIDRv6",(e,t)=>{Wc.init(e,t),Fe.init(e,t)});function GE(e){return $s(im,e)}var sm=T("ZodBase64",(e,t)=>{Yc.init(e,t),Fe.init(e,t)});function JE(e){return Es(sm,e)}var lm=T("ZodBase64URL",(e,t)=>{Xc.init(e,t),Fe.init(e,t)});function BE(e){return As(lm,e)}var um=T("ZodE164",(e,t)=>{Qc.init(e,t),Fe.init(e,t)});function HE(e){return Cs(um,e)}var cm=T("ZodJWT",(e,t)=>{ed.init(e,t),Fe.init(e,t)});function WE(e){return Ps(cm,e)}var Na=T("ZodCustomStringFormat",(e,t)=>{td.init(e,t),Fe.init(e,t)});function KE(e,t,r={}){return lo(Na,e,t,r)}function YE(e){return lo(Na,"hostname",jt.hostname,e)}function XE(e){return lo(Na,"hex",jt.hex,e)}function QE(e,t){var i;let r=(i=t==null?void 0:t.enc)!=null?i:"hex",o=`${e}_${r}`,n=jt[o];if(!n)throw new Error(`Unrecognized hash format: ${o}`);return lo(Na,o,n,t)}var Ra=T("ZodNumber",(e,t)=>{var o,n,i,s,u,c,l,d,m;os.init(e,t),fe.init(e,t),e.gt=(p,g)=>e.check(Lr(p,g)),e.gte=(p,g)=>e.check($t(p,g)),e.min=(p,g)=>e.check($t(p,g)),e.lt=(p,g)=>e.check(Fr(p,g)),e.lte=(p,g)=>e.check(Jt(p,g)),e.max=(p,g)=>e.check(Jt(p,g)),e.int=p=>e.check(Bp(p)),e.safe=p=>e.check(Bp(p)),e.positive=p=>e.check(Lr(0,p)),e.nonnegative=p=>e.check($t(0,p)),e.negative=p=>e.check(Fr(0,p)),e.nonpositive=p=>e.check(Jt(0,p)),e.multipleOf=(p,g)=>e.check(Pn(p,g)),e.step=(p,g)=>e.check(Pn(p,g)),e.finite=()=>e;let r=e._zod.bag;e.minValue=(i=Math.max((o=r.minimum)!=null?o:Number.NEGATIVE_INFINITY,(n=r.exclusiveMinimum)!=null?n:Number.NEGATIVE_INFINITY))!=null?i:null,e.maxValue=(c=Math.min((s=r.maximum)!=null?s:Number.POSITIVE_INFINITY,(u=r.exclusiveMaximum)!=null?u:Number.POSITIVE_INFINITY))!=null?c:null,e.isInt=((l=r.format)!=null?l:"").includes("int")||Number.isSafeInteger((d=r.multipleOf)!=null?d:.5),e.isFinite=!0,e.format=(m=r.format)!=null?m:null});function dy(e){return Hd(Ra,e)}var co=T("ZodNumberFormat",(e,t)=>{rd.init(e,t),Ra.init(e,t)});function Bp(e){return Kd(co,e)}function eA(e){return Yd(co,e)}function tA(e){return Xd(co,e)}function rA(e){return Qd(co,e)}function nA(e){return ep(co,e)}var ja=T("ZodBoolean",(e,t)=>{ca.init(e,t),fe.init(e,t)});function py(e){return tp(ja,e)}var Ma=T("ZodBigInt",(e,t)=>{var o,n,i;as.init(e,t),fe.init(e,t),e.gte=(s,u)=>e.check($t(s,u)),e.min=(s,u)=>e.check($t(s,u)),e.gt=(s,u)=>e.check(Lr(s,u)),e.gte=(s,u)=>e.check($t(s,u)),e.min=(s,u)=>e.check($t(s,u)),e.lt=(s,u)=>e.check(Fr(s,u)),e.lte=(s,u)=>e.check(Jt(s,u)),e.max=(s,u)=>e.check(Jt(s,u)),e.positive=s=>e.check(Lr(BigInt(0),s)),e.negative=s=>e.check(Fr(BigInt(0),s)),e.nonpositive=s=>e.check(Jt(BigInt(0),s)),e.nonnegative=s=>e.check($t(BigInt(0),s)),e.multipleOf=(s,u)=>e.check(Pn(s,u));let r=e._zod.bag;e.minValue=(o=r.minimum)!=null?o:null,e.maxValue=(n=r.maximum)!=null?n:null,e.format=(i=r.format)!=null?i:null});function oA(e){return np(Ma,e)}var dm=T("ZodBigIntFormat",(e,t)=>{nd.init(e,t),Ma.init(e,t)});function aA(e){return ap(dm,e)}function iA(e){return ip(dm,e)}var my=T("ZodSymbol",(e,t)=>{od.init(e,t),fe.init(e,t)});function sA(e){return sp(my,e)}var fy=T("ZodUndefined",(e,t)=>{ad.init(e,t),fe.init(e,t)});function lA(e){return lp(fy,e)}var gy=T("ZodNull",(e,t)=>{id.init(e,t),fe.init(e,t)});function hy(e){return up(gy,e)}var vy=T("ZodAny",(e,t)=>{sd.init(e,t),fe.init(e,t)});function uA(){return cp(vy)}var yy=T("ZodUnknown",(e,t)=>{ld.init(e,t),fe.init(e,t)});function uo(){return dp(yy)}var _y=T("ZodNever",(e,t)=>{ud.init(e,t),fe.init(e,t)});function pm(e){return pp(_y,e)}var by=T("ZodVoid",(e,t)=>{cd.init(e,t),fe.init(e,t)});function cA(e){return mp(by,e)}var Ls=T("ZodDate",(e,t)=>{dd.init(e,t),fe.init(e,t),e.min=(o,n)=>e.check($t(o,n)),e.max=(o,n)=>e.check(Jt(o,n));let r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function dA(e){return fp(Ls,e)}var xy=T("ZodArray",(e,t)=>{pd.init(e,t),fe.init(e,t),e.element=t.element,e.min=(r,o)=>e.check(fn(r,o)),e.nonempty=r=>e.check(fn(1,r)),e.max=(r,o)=>e.check(io(r,o)),e.length=(r,o)=>e.check(so(r,o)),e.unwrap=()=>e.element});function Zs(e,t){return wp(xy,e,t)}function pA(e){let t=e._zod.def.shape;return hm(Object.keys(t))}var qs=T("ZodObject",(e,t)=>{md.init(e,t),fe.init(e,t),K.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>hm(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:uo()}),e.loose=()=>e.clone({...e._zod.def,catchall:uo()}),e.strict=()=>e.clone({...e._zod.def,catchall:pm()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>K.extend(e,r),e.safeExtend=r=>K.safeExtend(e,r),e.merge=r=>K.merge(e,r),e.pick=r=>K.pick(e,r),e.omit=r=>K.omit(e,r),e.partial=(...r)=>K.partial(ym,e,r[0]),e.required=(...r)=>K.required(_m,e,r[0])});function mA(e,t){let r={type:"object",shape:e!=null?e:{},...K.normalizeParams(t)};return new qs(r)}function fA(e,t){return new qs({type:"object",shape:e,catchall:pm(),...K.normalizeParams(t)})}function gA(e,t){return new qs({type:"object",shape:e,catchall:uo(),...K.normalizeParams(t)})}var mm=T("ZodUnion",(e,t)=>{is.init(e,t),fe.init(e,t),e.options=t.options});function fm(e,t){return new mm({type:"union",options:e,...K.normalizeParams(t)})}var wy=T("ZodDiscriminatedUnion",(e,t)=>{mm.init(e,t),fd.init(e,t)});function hA(e,t,r){return new wy({type:"union",options:t,discriminator:e,...K.normalizeParams(r)})}var Sy=T("ZodIntersection",(e,t)=>{gd.init(e,t),fe.init(e,t)});function ky(e,t){return new Sy({type:"intersection",left:e,right:t})}var Iy=T("ZodTuple",(e,t)=>{ss.init(e,t),fe.init(e,t),e.rest=r=>e.clone({...e._zod.def,rest:r})});function Ty(e,t,r){let o=t instanceof ce,n=o?r:t,i=o?t:null;return new Iy({type:"tuple",items:e,rest:i,...K.normalizeParams(n)})}var gm=T("ZodRecord",(e,t)=>{hd.init(e,t),fe.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function $y(e,t,r){return new gm({type:"record",keyType:e,valueType:t,...K.normalizeParams(r)})}function vA(e,t,r){let o=vt(e);return o._zod.values=void 0,new gm({type:"record",keyType:o,valueType:t,...K.normalizeParams(r)})}var Ey=T("ZodMap",(e,t)=>{vd.init(e,t),fe.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function yA(e,t,r){return new Ey({type:"map",keyType:e,valueType:t,...K.normalizeParams(r)})}var Ay=T("ZodSet",(e,t)=>{yd.init(e,t),fe.init(e,t),e.min=(...r)=>e.check(On(...r)),e.nonempty=r=>e.check(On(1,r)),e.max=(...r)=>e.check(ao(...r)),e.size=(...r)=>e.check(ha(...r))});function _A(e,t){return new Ay({type:"set",valueType:e,...K.normalizeParams(t)})}var Pa=T("ZodEnum",(e,t)=>{_d.init(e,t),fe.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(o,n)=>{let i={};for(let s of o)if(r.has(s))i[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Pa({...t,checks:[],...K.normalizeParams(n),entries:i})},e.exclude=(o,n)=>{let i={...t.entries};for(let s of o)if(r.has(s))delete i[s];else throw new Error(`Key ${s} not found in enum`);return new Pa({...t,checks:[],...K.normalizeParams(n),entries:i})}});function hm(e,t){let r=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new Pa({type:"enum",entries:r,...K.normalizeParams(t)})}function bA(e,t){return new Pa({type:"enum",entries:e,...K.normalizeParams(t)})}var Cy=T("ZodLiteral",(e,t)=>{bd.init(e,t),fe.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function xA(e,t){return new Cy({type:"literal",values:Array.isArray(e)?e:[e],...K.normalizeParams(t)})}var Py=T("ZodFile",(e,t)=>{xd.init(e,t),fe.init(e,t),e.min=(r,o)=>e.check(On(r,o)),e.max=(r,o)=>e.check(ao(r,o)),e.mime=(r,o)=>e.check(Sa(Array.isArray(r)?r:[r],o))});function wA(e){return Sp(Py,e)}var Oy=T("ZodTransform",(e,t)=>{wd.init(e,t),fe.init(e,t),e._zod.parse=(r,o)=>{if(o.direction==="backward")throw new ln(e.constructor.name);r.addIssue=i=>{var s,u,c;if(typeof i=="string")r.issues.push(K.issue(i,r.value,t));else{let l=i;l.fatal&&(l.continue=!1),(s=l.code)!=null||(l.code="custom"),(u=l.input)!=null||(l.input=r.value),(c=l.inst)!=null||(l.inst=e),r.issues.push(K.issue(l))}};let n=t.transform(r.value,r);return n instanceof Promise?n.then(i=>(r.value=i,r)):(r.value=n,r)}});function vm(e){return new Oy({type:"transform",transform:e})}var ym=T("ZodOptional",(e,t)=>{Sd.init(e,t),fe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ds(e){return new ym({type:"optional",innerType:e})}var Ny=T("ZodNullable",(e,t)=>{kd.init(e,t),fe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function zs(e){return new Ny({type:"nullable",innerType:e})}function SA(e){return Ds(zs(e))}var Ry=T("ZodDefault",(e,t)=>{Id.init(e,t),fe.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function jy(e,t){return new Ry({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():K.shallowClone(t)}})}var My=T("ZodPrefault",(e,t)=>{Td.init(e,t),fe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Dy(e,t){return new My({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():K.shallowClone(t)}})}var _m=T("ZodNonOptional",(e,t)=>{$d.init(e,t),fe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function zy(e,t){return new _m({type:"nonoptional",innerType:e,...K.normalizeParams(t)})}var Uy=T("ZodSuccess",(e,t)=>{Ed.init(e,t),fe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function kA(e){return new Uy({type:"success",innerType:e})}var Fy=T("ZodCatch",(e,t)=>{Ad.init(e,t),fe.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Ly(e,t){return new Fy({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}var Zy=T("ZodNaN",(e,t)=>{Cd.init(e,t),fe.init(e,t)});function IA(e){return hp(Zy,e)}var bm=T("ZodPipe",(e,t)=>{Pd.init(e,t),fe.init(e,t),e.in=t.in,e.out=t.out});function Us(e,t){return new bm({type:"pipe",in:e,out:t})}var xm=T("ZodCodec",(e,t)=>{bm.init(e,t),da.init(e,t)});function TA(e,t,r){return new xm({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}var qy=T("ZodReadonly",(e,t)=>{Od.init(e,t),fe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Vy(e){return new qy({type:"readonly",innerType:e})}var Gy=T("ZodTemplateLiteral",(e,t)=>{Nd.init(e,t),fe.init(e,t)});function $A(e,t){return new Gy({type:"template_literal",parts:e,...K.normalizeParams(t)})}var Jy=T("ZodLazy",(e,t)=>{Md.init(e,t),fe.init(e,t),e.unwrap=()=>e._zod.def.getter()});function By(e){return new Jy({type:"lazy",getter:e})}var Hy=T("ZodPromise",(e,t)=>{jd.init(e,t),fe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function EA(e){return new Hy({type:"promise",innerType:e})}var Wy=T("ZodFunction",(e,t)=>{Rd.init(e,t),fe.init(e,t)});function AA(e){var t,r;return new Wy({type:"function",input:Array.isArray(e==null?void 0:e.input)?Ty(e==null?void 0:e.input):(t=e==null?void 0:e.input)!=null?t:Zs(uo()),output:(r=e==null?void 0:e.output)!=null?r:uo()})}var Vs=T("ZodCustom",(e,t)=>{Dd.init(e,t),fe.init(e,t)});function CA(e){let t=new Ue({check:"custom"});return t._zod.check=e,t}function PA(e,t){return kp(Vs,e!=null?e:(()=>!0),t)}function Ky(e,t={}){return Ip(Vs,e,t)}function Yy(e){return Tp(e)}var OA=$p,NA=Ep;function RA(e,t={error:`Input not instance of ${e.name}`}){let r=new Vs({type:"custom",check:"custom",fn:o=>o instanceof e,abort:!0,...K.normalizeParams(t)});return r._zod.bag.Class=e,r}var jA=(...e)=>Ap({Codec:xm,Boolean:ja,String:Oa},...e);function MA(e){let t=By(()=>fm([Jp(e),dy(),py(),hy(),Zs(t),$y(Jp(),t)]));return t}function DA(e,t){return Us(vm(e),t)}var zA={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function UA(e){nt({customError:e})}function FA(){return nt().customError}var wm;wm||(wm={});var Gs={};nn(Gs,{bigint:()=>VA,boolean:()=>qA,date:()=>GA,number:()=>ZA,string:()=>LA});function LA(e){return Ld(Oa,e)}function ZA(e){return Wd(Ra,e)}function qA(e){return rp(ja,e)}function VA(e){return op(Ma,e)}function GA(e){return gp(Ls,e)}nt(ls());var ye;(function(e){e.assertEqual=n=>{};function t(n){}e.assertIs=t;function r(n){throw new Error}e.assertNever=r,e.arrayToEnum=n=>{let i={};for(let s of n)i[s]=s;return i},e.getValidEnumValues=n=>{let i=e.objectKeys(n).filter(u=>typeof n[n[u]]!="number"),s={};for(let u of i)s[u]=n[u];return e.objectValues(s)},e.objectValues=n=>e.objectKeys(n).map(function(i){return n[i]}),e.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&i.push(s);return i},e.find=(n,i)=>{for(let s of n)if(i(s))return s},e.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function o(n,i=" | "){return n.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}e.joinValues=o,e.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(ye||(ye={}));var Xy;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(Xy||(Xy={}));var ne=ye.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Gr=e=>{switch(typeof e){case"undefined":return ne.undefined;case"string":return ne.string;case"number":return Number.isNaN(e)?ne.nan:ne.number;case"boolean":return ne.boolean;case"function":return ne.function;case"bigint":return ne.bigint;case"symbol":return ne.symbol;case"object":return Array.isArray(e)?ne.array:e===null?ne.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?ne.promise:typeof Map!="undefined"&&e instanceof Map?ne.map:typeof Set!="undefined"&&e instanceof Set?ne.set:typeof Date!="undefined"&&e instanceof Date?ne.date:ne.object;default:return ne.unknown}};var V=ye.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);var Mt=class e extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(i){return i.message},o={_errors:[]},n=i=>{for(let s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(n);else if(s.code==="invalid_return_type")n(s.returnTypeError);else if(s.code==="invalid_arguments")n(s.argumentsError);else if(s.path.length===0)o._errors.push(r(s));else{let u=o,c=0;for(;c<s.path.length;){let l=s.path[c];c===s.path.length-1?(u[l]=u[l]||{_errors:[]},u[l]._errors.push(r(s))):u[l]=u[l]||{_errors:[]},u=u[l],c++}}};return n(this),o}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ye.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r=Object.create(null),o=[];for(let n of this.issues)if(n.path.length>0){let i=n.path[0];r[i]=r[i]||[],r[i].push(t(n))}else o.push(t(n));return{formErrors:o,fieldErrors:r}}get formErrors(){return this.flatten()}};Mt.create=e=>new Mt(e);var JA=(e,t)=>{let r;switch(e.code){case V.invalid_type:e.received===ne.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case V.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,ye.jsonStringifyReplacer)}`;break;case V.unrecognized_keys:r=`Unrecognized key(s) in object: ${ye.joinValues(e.keys,", ")}`;break;case V.invalid_union:r="Invalid input";break;case V.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ye.joinValues(e.options)}`;break;case V.invalid_enum_value:r=`Invalid enum value. Expected ${ye.joinValues(e.options)}, received '${e.received}'`;break;case V.invalid_arguments:r="Invalid function arguments";break;case V.invalid_return_type:r="Invalid function return type";break;case V.invalid_date:r="Invalid date";break;case V.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:ye.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case V.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case V.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case V.custom:r="Invalid input";break;case V.invalid_intersection_types:r="Intersection results could not be merged";break;case V.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case V.not_finite:r="Number must be finite";break;default:r=t.defaultError,ye.assertNever(e)}return{message:r}},gn=JA;var BA=gn;function Da(){return BA}var Js=e=>{let{data:t,path:r,errorMaps:o,issueData:n}=e,i=[...r,...n.path||[]],s={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let u="",c=o.filter(l=>!!l).slice().reverse();for(let l of c)u=l(s,{data:t,defaultError:u}).message;return{...n,path:i,message:u}};function re(e,t){let r=Da(),o=Js({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===gn?void 0:gn].filter(n=>!!n)});e.common.issues.push(o)}var gt=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let o=[];for(let n of r){if(n.status==="aborted")return ue;n.status==="dirty"&&t.dirty(),o.push(n.value)}return{status:t.value,value:o}}static async mergeObjectAsync(t,r){let o=[];for(let n of r){let i=await n.key,s=await n.value;o.push({key:i,value:s})}return e.mergeObjectSync(t,o)}static mergeObjectSync(t,r){let o={};for(let n of r){let{key:i,value:s}=n;if(i.status==="aborted"||s.status==="aborted")return ue;i.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof s.value!="undefined"||n.alwaysSet)&&(o[i.value]=s.value)}return{status:t.value,value:o}}},ue=Object.freeze({status:"aborted"}),po=e=>({status:"dirty",value:e}),bt=e=>({status:"valid",value:e}),km=e=>e.status==="aborted",Im=e=>e.status==="dirty",Nn=e=>e.status==="valid",za=e=>typeof Promise!="undefined"&&e instanceof Promise;var ae;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(ae||(ae={}));var Bt=class{constructor(t,r,o,n){this._cachedPath=[],this.parent=t,this.data=r,this._path=o,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Qy=(e,t)=>{if(Nn(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Mt(e.common.issues);return this._error=r,this._error}}};function pe(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:o,description:n}=e;if(t&&(r||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:(s,u)=>{var l,d;let{message:c}=e;return s.code==="invalid_enum_value"?{message:c!=null?c:u.defaultError}:typeof u.data=="undefined"?{message:(l=c!=null?c:o)!=null?l:u.defaultError}:s.code!=="invalid_type"?{message:u.defaultError}:{message:(d=c!=null?c:r)!=null?d:u.defaultError}},description:n}}var he=class{get description(){return this._def.description}_getType(t){return Gr(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Gr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new gt,ctx:{common:t.parent.common,data:t.data,parsedType:Gr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(za(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let o=this.safeParse(t,r);if(o.success)return o.data;throw o.error}safeParse(t,r){var i;let o={common:{issues:[],async:(i=r==null?void 0:r.async)!=null?i:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Gr(t)},n=this._parseSync({data:t,path:o.path,parent:o});return Qy(o,n)}"~validate"(t){var o,n;let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Gr(t)};if(!this["~standard"].async)try{let i=this._parseSync({data:t,path:[],parent:r});return Nn(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(n=(o=i==null?void 0:i.message)==null?void 0:o.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>Nn(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){let o=await this.safeParseAsync(t,r);if(o.success)return o.data;throw o.error}async safeParseAsync(t,r){let o={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Gr(t)},n=this._parse({data:t,path:o.path,parent:o}),i=await(za(n)?n:Promise.resolve(n));return Qy(o,i)}refine(t,r){let o=n=>typeof r=="string"||typeof r=="undefined"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,i)=>{let s=t(n),u=()=>i.addIssue({code:V.custom,...o(n)});return typeof Promise!="undefined"&&s instanceof Promise?s.then(c=>c?!0:(u(),!1)):s?!0:(u(),!1)})}refinement(t,r){return this._refinement((o,n)=>t(o)?!0:(n.addIssue(typeof r=="function"?r(o,n):r),!1))}_refinement(t){return new tr({schema:this,typeName:I.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return er.create(this,this._def)}nullable(){return Hr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return vn.create(this)}promise(){return Rn.create(this,this._def)}or(t){return vo.create([this,t],this._def)}and(t){return yo.create(this,t,this._def)}transform(t){return new tr({...pe(this._def),schema:this,typeName:I.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new So({...pe(this._def),innerType:this,defaultValue:r,typeName:I.ZodDefault})}brand(){return new Bs({typeName:I.ZodBranded,type:this,...pe(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new ko({...pe(this._def),innerType:this,catchValue:r,typeName:I.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Hs.create(this,t)}readonly(){return Io.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},HA=/^c[^\s-]{8,}$/i,WA=/^[0-9a-z]+$/,KA=/^[0-9A-HJKMNP-TV-Z]{26}$/i,YA=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,XA=/^[a-z0-9_-]{21}$/i,QA=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,eC=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tC=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,rC="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Tm,nC=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,oC=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,aC=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,iC=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,sC=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,lC=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,e_="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",uC=new RegExp(`^${e_}$`);function t_(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function cC(e){return new RegExp(`^${t_(e)}$`)}function dC(e){let t=`${e_}T${t_(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function pC(e,t){return!!((t==="v4"||!t)&&nC.test(e)||(t==="v6"||!t)&&aC.test(e))}function mC(e,t){if(!QA.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let o=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(o));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||t&&n.alg!==t)}catch(r){return!1}}function fC(e,t){return!!((t==="v4"||!t)&&oC.test(e)||(t==="v6"||!t)&&iC.test(e))}var fo=class e extends he{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ne.string){let i=this._getOrReturnCtx(t);return re(i,{code:V.invalid_type,expected:ne.string,received:i.parsedType}),ue}let o=new gt,n;for(let i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(n=this._getOrReturnCtx(t,n),re(n,{code:V.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="max")t.data.length>i.value&&(n=this._getOrReturnCtx(t,n),re(n,{code:V.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="length"){let s=t.data.length>i.value,u=t.data.length<i.value;(s||u)&&(n=this._getOrReturnCtx(t,n),s?re(n,{code:V.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&re(n,{code:V.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),o.dirty())}else if(i.kind==="email")tC.test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"email",code:V.invalid_string,message:i.message}),o.dirty());else if(i.kind==="emoji")Tm||(Tm=new RegExp(rC,"u")),Tm.test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"emoji",code:V.invalid_string,message:i.message}),o.dirty());else if(i.kind==="uuid")YA.test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"uuid",code:V.invalid_string,message:i.message}),o.dirty());else if(i.kind==="nanoid")XA.test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"nanoid",code:V.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid")HA.test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"cuid",code:V.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid2")WA.test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"cuid2",code:V.invalid_string,message:i.message}),o.dirty());else if(i.kind==="ulid")KA.test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"ulid",code:V.invalid_string,message:i.message}),o.dirty());else if(i.kind==="url")try{new URL(t.data)}catch(s){n=this._getOrReturnCtx(t,n),re(n,{validation:"url",code:V.invalid_string,message:i.message}),o.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"regex",code:V.invalid_string,message:i.message}),o.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(t,n),re(n,{code:V.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),o.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(n=this._getOrReturnCtx(t,n),re(n,{code:V.invalid_string,validation:{startsWith:i.value},message:i.message}),o.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(n=this._getOrReturnCtx(t,n),re(n,{code:V.invalid_string,validation:{endsWith:i.value},message:i.message}),o.dirty()):i.kind==="datetime"?dC(i).test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{code:V.invalid_string,validation:"datetime",message:i.message}),o.dirty()):i.kind==="date"?uC.test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{code:V.invalid_string,validation:"date",message:i.message}),o.dirty()):i.kind==="time"?cC(i).test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{code:V.invalid_string,validation:"time",message:i.message}),o.dirty()):i.kind==="duration"?eC.test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"duration",code:V.invalid_string,message:i.message}),o.dirty()):i.kind==="ip"?pC(t.data,i.version)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"ip",code:V.invalid_string,message:i.message}),o.dirty()):i.kind==="jwt"?mC(t.data,i.alg)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"jwt",code:V.invalid_string,message:i.message}),o.dirty()):i.kind==="cidr"?fC(t.data,i.version)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"cidr",code:V.invalid_string,message:i.message}),o.dirty()):i.kind==="base64"?sC.test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"base64",code:V.invalid_string,message:i.message}),o.dirty()):i.kind==="base64url"?lC.test(t.data)||(n=this._getOrReturnCtx(t,n),re(n,{validation:"base64url",code:V.invalid_string,message:i.message}),o.dirty()):ye.assertNever(i);return{status:o.value,value:t.data}}_regex(t,r,o){return this.refinement(n=>t.test(n),{validation:r,code:V.invalid_string,...ae.errToObj(o)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...ae.errToObj(t)})}url(t){return this._addCheck({kind:"url",...ae.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...ae.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...ae.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...ae.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...ae.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...ae.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...ae.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...ae.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...ae.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...ae.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...ae.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...ae.errToObj(t)})}datetime(t){var r,o;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)=="undefined"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!=null?r:!1,local:(o=t==null?void 0:t.local)!=null?o:!1,...ae.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)=="undefined"?null:t==null?void 0:t.precision,...ae.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...ae.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...ae.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...ae.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...ae.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...ae.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...ae.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...ae.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...ae.errToObj(r)})}nonempty(t){return this.min(1,ae.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};fo.create=e=>{var t;return new fo({checks:[],typeName:I.ZodString,coerce:(t=e==null?void 0:e.coerce)!=null?t:!1,...pe(e)})};function gC(e,t){let r=(e.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,n=r>o?r:o,i=Number.parseInt(e.toFixed(n).replace(".","")),s=Number.parseInt(t.toFixed(n).replace(".",""));return i%s/10**n}var Ua=class e extends he{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ne.number){let i=this._getOrReturnCtx(t);return re(i,{code:V.invalid_type,expected:ne.number,received:i.parsedType}),ue}let o,n=new gt;for(let i of this._def.checks)i.kind==="int"?ye.isInteger(t.data)||(o=this._getOrReturnCtx(t,o),re(o,{code:V.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(o=this._getOrReturnCtx(t,o),re(o,{code:V.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(o=this._getOrReturnCtx(t,o),re(o,{code:V.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?gC(t.data,i.value)!==0&&(o=this._getOrReturnCtx(t,o),re(o,{code:V.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(o=this._getOrReturnCtx(t,o),re(o,{code:V.not_finite,message:i.message}),n.dirty()):ye.assertNever(i);return{status:n.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,ae.toString(r))}gt(t,r){return this.setLimit("min",t,!1,ae.toString(r))}lte(t,r){return this.setLimit("max",t,!0,ae.toString(r))}lt(t,r){return this.setLimit("max",t,!1,ae.toString(r))}setLimit(t,r,o,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:o,message:ae.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:ae.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ae.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ae.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ae.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ae.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:ae.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:ae.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ae.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ae.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ye.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(r===null||o.value>r)&&(r=o.value):o.kind==="max"&&(t===null||o.value<t)&&(t=o.value)}return Number.isFinite(r)&&Number.isFinite(t)}};Ua.create=e=>new Ua({checks:[],typeName:I.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...pe(e)});var Fa=class e extends he{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch(i){return this._getInvalidInput(t)}if(this._getType(t)!==ne.bigint)return this._getInvalidInput(t);let o,n=new gt;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(o=this._getOrReturnCtx(t,o),re(o,{code:V.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(o=this._getOrReturnCtx(t,o),re(o,{code:V.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(o=this._getOrReturnCtx(t,o),re(o,{code:V.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):ye.assertNever(i);return{status:n.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return re(r,{code:V.invalid_type,expected:ne.bigint,received:r.parsedType}),ue}gte(t,r){return this.setLimit("min",t,!0,ae.toString(r))}gt(t,r){return this.setLimit("min",t,!1,ae.toString(r))}lte(t,r){return this.setLimit("max",t,!0,ae.toString(r))}lt(t,r){return this.setLimit("max",t,!1,ae.toString(r))}setLimit(t,r,o,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:o,message:ae.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ae.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ae.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ae.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ae.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:ae.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Fa.create=e=>{var t;return new Fa({checks:[],typeName:I.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!=null?t:!1,...pe(e)})};var La=class extends he{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ne.boolean){let o=this._getOrReturnCtx(t);return re(o,{code:V.invalid_type,expected:ne.boolean,received:o.parsedType}),ue}return bt(t.data)}};La.create=e=>new La({typeName:I.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...pe(e)});var Za=class e extends he{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ne.date){let i=this._getOrReturnCtx(t);return re(i,{code:V.invalid_type,expected:ne.date,received:i.parsedType}),ue}if(Number.isNaN(t.data.getTime())){let i=this._getOrReturnCtx(t);return re(i,{code:V.invalid_date}),ue}let o=new gt,n;for(let i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(n=this._getOrReturnCtx(t,n),re(n,{code:V.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),o.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(n=this._getOrReturnCtx(t,n),re(n,{code:V.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),o.dirty()):ye.assertNever(i);return{status:o.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:ae.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:ae.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};Za.create=e=>new Za({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:I.ZodDate,...pe(e)});var qa=class extends he{_parse(t){if(this._getType(t)!==ne.symbol){let o=this._getOrReturnCtx(t);return re(o,{code:V.invalid_type,expected:ne.symbol,received:o.parsedType}),ue}return bt(t.data)}};qa.create=e=>new qa({typeName:I.ZodSymbol,...pe(e)});var go=class extends he{_parse(t){if(this._getType(t)!==ne.undefined){let o=this._getOrReturnCtx(t);return re(o,{code:V.invalid_type,expected:ne.undefined,received:o.parsedType}),ue}return bt(t.data)}};go.create=e=>new go({typeName:I.ZodUndefined,...pe(e)});var ho=class extends he{_parse(t){if(this._getType(t)!==ne.null){let o=this._getOrReturnCtx(t);return re(o,{code:V.invalid_type,expected:ne.null,received:o.parsedType}),ue}return bt(t.data)}};ho.create=e=>new ho({typeName:I.ZodNull,...pe(e)});var Va=class extends he{constructor(){super(...arguments),this._any=!0}_parse(t){return bt(t.data)}};Va.create=e=>new Va({typeName:I.ZodAny,...pe(e)});var hn=class extends he{constructor(){super(...arguments),this._unknown=!0}_parse(t){return bt(t.data)}};hn.create=e=>new hn({typeName:I.ZodUnknown,...pe(e)});var wr=class extends he{_parse(t){let r=this._getOrReturnCtx(t);return re(r,{code:V.invalid_type,expected:ne.never,received:r.parsedType}),ue}};wr.create=e=>new wr({typeName:I.ZodNever,...pe(e)});var Ga=class extends he{_parse(t){if(this._getType(t)!==ne.undefined){let o=this._getOrReturnCtx(t);return re(o,{code:V.invalid_type,expected:ne.void,received:o.parsedType}),ue}return bt(t.data)}};Ga.create=e=>new Ga({typeName:I.ZodVoid,...pe(e)});var vn=class e extends he{_parse(t){let{ctx:r,status:o}=this._processInputParams(t),n=this._def;if(r.parsedType!==ne.array)return re(r,{code:V.invalid_type,expected:ne.array,received:r.parsedType}),ue;if(n.exactLength!==null){let s=r.data.length>n.exactLength.value,u=r.data.length<n.exactLength.value;(s||u)&&(re(r,{code:s?V.too_big:V.too_small,minimum:u?n.exactLength.value:void 0,maximum:s?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),o.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(re(r,{code:V.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),o.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(re(r,{code:V.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),o.dirty()),r.common.async)return Promise.all([...r.data].map((s,u)=>n.type._parseAsync(new Bt(r,s,r.path,u)))).then(s=>gt.mergeArray(o,s));let i=[...r.data].map((s,u)=>n.type._parseSync(new Bt(r,s,r.path,u)));return gt.mergeArray(o,i)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:ae.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:ae.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:ae.toString(r)}})}nonempty(t){return this.min(1,t)}};vn.create=(e,t)=>new vn({type:e,minLength:null,maxLength:null,exactLength:null,typeName:I.ZodArray,...pe(t)});function mo(e){if(e instanceof Dt){let t={};for(let r in e.shape){let o=e.shape[r];t[r]=er.create(mo(o))}return new Dt({...e._def,shape:()=>t})}else return e instanceof vn?new vn({...e._def,type:mo(e.element)}):e instanceof er?er.create(mo(e.unwrap())):e instanceof Hr?Hr.create(mo(e.unwrap())):e instanceof Br?Br.create(e.items.map(t=>mo(t))):e}var Dt=class e extends he{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=ye.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==ne.object){let l=this._getOrReturnCtx(t);return re(l,{code:V.invalid_type,expected:ne.object,received:l.parsedType}),ue}let{status:o,ctx:n}=this._processInputParams(t),{shape:i,keys:s}=this._getCached(),u=[];if(!(this._def.catchall instanceof wr&&this._def.unknownKeys==="strip"))for(let l in n.data)s.includes(l)||u.push(l);let c=[];for(let l of s){let d=i[l],m=n.data[l];c.push({key:{status:"valid",value:l},value:d._parse(new Bt(n,m,n.path,l)),alwaysSet:l in n.data})}if(this._def.catchall instanceof wr){let l=this._def.unknownKeys;if(l==="passthrough")for(let d of u)c.push({key:{status:"valid",value:d},value:{status:"valid",value:n.data[d]}});else if(l==="strict")u.length>0&&(re(n,{code:V.unrecognized_keys,keys:u}),o.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let d of u){let m=n.data[d];c.push({key:{status:"valid",value:d},value:l._parse(new Bt(n,m,n.path,d)),alwaysSet:d in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let l=[];for(let d of c){let m=await d.key,p=await d.value;l.push({key:m,value:p,alwaysSet:d.alwaysSet})}return l}).then(l=>gt.mergeObjectSync(o,l)):gt.mergeObjectSync(o,c)}get shape(){return this._def.shape()}strict(t){return ae.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,o)=>{var i,s,u,c;let n=(u=(s=(i=this._def).errorMap)==null?void 0:s.call(i,r,o).message)!=null?u:o.defaultError;return r.code==="unrecognized_keys"?{message:(c=ae.errToObj(t).message)!=null?c:n}:{message:n}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:I.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};for(let o of ye.objectKeys(t))t[o]&&this.shape[o]&&(r[o]=this.shape[o]);return new e({...this._def,shape:()=>r})}omit(t){let r={};for(let o of ye.objectKeys(this.shape))t[o]||(r[o]=this.shape[o]);return new e({...this._def,shape:()=>r})}deepPartial(){return mo(this)}partial(t){let r={};for(let o of ye.objectKeys(this.shape)){let n=this.shape[o];t&&!t[o]?r[o]=n:r[o]=n.optional()}return new e({...this._def,shape:()=>r})}required(t){let r={};for(let o of ye.objectKeys(this.shape))if(t&&!t[o])r[o]=this.shape[o];else{let i=this.shape[o];for(;i instanceof er;)i=i._def.innerType;r[o]=i}return new e({...this._def,shape:()=>r})}keyof(){return r_(ye.objectKeys(this.shape))}};Dt.create=(e,t)=>new Dt({shape:()=>e,unknownKeys:"strip",catchall:wr.create(),typeName:I.ZodObject,...pe(t)});Dt.strictCreate=(e,t)=>new Dt({shape:()=>e,unknownKeys:"strict",catchall:wr.create(),typeName:I.ZodObject,...pe(t)});Dt.lazycreate=(e,t)=>new Dt({shape:e,unknownKeys:"strip",catchall:wr.create(),typeName:I.ZodObject,...pe(t)});var vo=class extends he{_parse(t){let{ctx:r}=this._processInputParams(t),o=this._def.options;function n(i){for(let u of i)if(u.result.status==="valid")return u.result;for(let u of i)if(u.result.status==="dirty")return r.common.issues.push(...u.ctx.common.issues),u.result;let s=i.map(u=>new Mt(u.ctx.common.issues));return re(r,{code:V.invalid_union,unionErrors:s}),ue}if(r.common.async)return Promise.all(o.map(async i=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(n);{let i,s=[];for(let c of o){let l={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:l});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:l}),l.common.issues.length&&s.push(l.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let u=s.map(c=>new Mt(c));return re(r,{code:V.invalid_union,unionErrors:u}),ue}}get options(){return this._def.options}};vo.create=(e,t)=>new vo({options:e,typeName:I.ZodUnion,...pe(t)});var Jr=e=>e instanceof _o?Jr(e.schema):e instanceof tr?Jr(e.innerType()):e instanceof bo?[e.value]:e instanceof xo?e.options:e instanceof wo?ye.objectValues(e.enum):e instanceof So?Jr(e._def.innerType):e instanceof go?[void 0]:e instanceof ho?[null]:e instanceof er?[void 0,...Jr(e.unwrap())]:e instanceof Hr?[null,...Jr(e.unwrap())]:e instanceof Bs||e instanceof Io?Jr(e.unwrap()):e instanceof ko?Jr(e._def.innerType):[],$m=class e extends he{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==ne.object)return re(r,{code:V.invalid_type,expected:ne.object,received:r.parsedType}),ue;let o=this.discriminator,n=r.data[o],i=this.optionsMap.get(n);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(re(r,{code:V.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),ue)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,o){let n=new Map;for(let i of r){let s=Jr(i.shape[t]);if(!s.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let u of s){if(n.has(u))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(u)}`);n.set(u,i)}}return new e({typeName:I.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:n,...pe(o)})}};function Em(e,t){let r=Gr(e),o=Gr(t);if(e===t)return{valid:!0,data:e};if(r===ne.object&&o===ne.object){let n=ye.objectKeys(t),i=ye.objectKeys(e).filter(u=>n.indexOf(u)!==-1),s={...e,...t};for(let u of i){let c=Em(e[u],t[u]);if(!c.valid)return{valid:!1};s[u]=c.data}return{valid:!0,data:s}}else if(r===ne.array&&o===ne.array){if(e.length!==t.length)return{valid:!1};let n=[];for(let i=0;i<e.length;i++){let s=e[i],u=t[i],c=Em(s,u);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return r===ne.date&&o===ne.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var yo=class extends he{_parse(t){let{status:r,ctx:o}=this._processInputParams(t),n=(i,s)=>{if(km(i)||km(s))return ue;let u=Em(i.value,s.value);return u.valid?((Im(i)||Im(s))&&r.dirty(),{status:r.value,value:u.data}):(re(o,{code:V.invalid_intersection_types}),ue)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([i,s])=>n(i,s)):n(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}};yo.create=(e,t,r)=>new yo({left:e,right:t,typeName:I.ZodIntersection,...pe(r)});var Br=class e extends he{_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==ne.array)return re(o,{code:V.invalid_type,expected:ne.array,received:o.parsedType}),ue;if(o.data.length<this._def.items.length)return re(o,{code:V.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ue;!this._def.rest&&o.data.length>this._def.items.length&&(re(o,{code:V.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...o.data].map((s,u)=>{let c=this._def.items[u]||this._def.rest;return c?c._parse(new Bt(o,s,o.path,u)):null}).filter(s=>!!s);return o.common.async?Promise.all(i).then(s=>gt.mergeArray(r,s)):gt.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};Br.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Br({items:e,typeName:I.ZodTuple,rest:null,...pe(t)})};var Am=class e extends he{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==ne.object)return re(o,{code:V.invalid_type,expected:ne.object,received:o.parsedType}),ue;let n=[],i=this._def.keyType,s=this._def.valueType;for(let u in o.data)n.push({key:i._parse(new Bt(o,u,o.path,u)),value:s._parse(new Bt(o,o.data[u],o.path,u)),alwaysSet:u in o.data});return o.common.async?gt.mergeObjectAsync(r,n):gt.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(t,r,o){return r instanceof he?new e({keyType:t,valueType:r,typeName:I.ZodRecord,...pe(o)}):new e({keyType:fo.create(),valueType:t,typeName:I.ZodRecord,...pe(r)})}},Ja=class extends he{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==ne.map)return re(o,{code:V.invalid_type,expected:ne.map,received:o.parsedType}),ue;let n=this._def.keyType,i=this._def.valueType,s=[...o.data.entries()].map(([u,c],l)=>({key:n._parse(new Bt(o,u,o.path,[l,"key"])),value:i._parse(new Bt(o,c,o.path,[l,"value"]))}));if(o.common.async){let u=new Map;return Promise.resolve().then(async()=>{for(let c of s){let l=await c.key,d=await c.value;if(l.status==="aborted"||d.status==="aborted")return ue;(l.status==="dirty"||d.status==="dirty")&&r.dirty(),u.set(l.value,d.value)}return{status:r.value,value:u}})}else{let u=new Map;for(let c of s){let l=c.key,d=c.value;if(l.status==="aborted"||d.status==="aborted")return ue;(l.status==="dirty"||d.status==="dirty")&&r.dirty(),u.set(l.value,d.value)}return{status:r.value,value:u}}}};Ja.create=(e,t,r)=>new Ja({valueType:t,keyType:e,typeName:I.ZodMap,...pe(r)});var Ba=class e extends he{_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.parsedType!==ne.set)return re(o,{code:V.invalid_type,expected:ne.set,received:o.parsedType}),ue;let n=this._def;n.minSize!==null&&o.data.size<n.minSize.value&&(re(o,{code:V.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&o.data.size>n.maxSize.value&&(re(o,{code:V.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let i=this._def.valueType;function s(c){let l=new Set;for(let d of c){if(d.status==="aborted")return ue;d.status==="dirty"&&r.dirty(),l.add(d.value)}return{status:r.value,value:l}}let u=[...o.data.values()].map((c,l)=>i._parse(new Bt(o,c,o.path,l)));return o.common.async?Promise.all(u).then(c=>s(c)):s(u)}min(t,r){return new e({...this._def,minSize:{value:t,message:ae.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:ae.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};Ba.create=(e,t)=>new Ba({valueType:e,minSize:null,maxSize:null,typeName:I.ZodSet,...pe(t)});var Cm=class e extends he{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==ne.function)return re(r,{code:V.invalid_type,expected:ne.function,received:r.parsedType}),ue;function o(u,c){return Js({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Da(),gn].filter(l=>!!l),issueData:{code:V.invalid_arguments,argumentsError:c}})}function n(u,c){return Js({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Da(),gn].filter(l=>!!l),issueData:{code:V.invalid_return_type,returnTypeError:c}})}let i={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof Rn){let u=this;return bt(async function(...c){let l=new Mt([]),d=await u._def.args.parseAsync(c,i).catch(g=>{throw l.addIssue(o(c,g)),l}),m=await Reflect.apply(s,this,d);return await u._def.returns._def.type.parseAsync(m,i).catch(g=>{throw l.addIssue(n(m,g)),l})})}else{let u=this;return bt(function(...c){let l=u._def.args.safeParse(c,i);if(!l.success)throw new Mt([o(c,l.error)]);let d=Reflect.apply(s,this,l.data),m=u._def.returns.safeParse(d,i);if(!m.success)throw new Mt([n(d,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:Br.create(t).rest(hn.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,o){return new e({args:t||Br.create([]).rest(hn.create()),returns:r||hn.create(),typeName:I.ZodFunction,...pe(o)})}},_o=class extends he{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};_o.create=(e,t)=>new _o({getter:e,typeName:I.ZodLazy,...pe(t)});var bo=class extends he{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return re(r,{received:r.data,code:V.invalid_literal,expected:this._def.value}),ue}return{status:"valid",value:t.data}}get value(){return this._def.value}};bo.create=(e,t)=>new bo({value:e,typeName:I.ZodLiteral,...pe(t)});function r_(e,t){return new xo({values:e,typeName:I.ZodEnum,...pe(t)})}var xo=class e extends he{_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),o=this._def.values;return re(r,{expected:ye.joinValues(o),received:r.parsedType,code:V.invalid_type}),ue}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){let r=this._getOrReturnCtx(t),o=this._def.values;return re(r,{received:r.data,code:V.invalid_enum_value,options:o}),ue}return bt(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(o=>!t.includes(o)),{...this._def,...r})}};xo.create=r_;var wo=class extends he{_parse(t){let r=ye.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(t);if(o.parsedType!==ne.string&&o.parsedType!==ne.number){let n=ye.objectValues(r);return re(o,{expected:ye.joinValues(n),received:o.parsedType,code:V.invalid_type}),ue}if(this._cache||(this._cache=new Set(ye.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){let n=ye.objectValues(r);return re(o,{received:o.data,code:V.invalid_enum_value,options:n}),ue}return bt(t.data)}get enum(){return this._def.values}};wo.create=(e,t)=>new wo({values:e,typeName:I.ZodNativeEnum,...pe(t)});var Rn=class extends he{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==ne.promise&&r.common.async===!1)return re(r,{code:V.invalid_type,expected:ne.promise,received:r.parsedType}),ue;let o=r.parsedType===ne.promise?r.data:Promise.resolve(r.data);return bt(o.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Rn.create=(e,t)=>new Rn({type:e,typeName:I.ZodPromise,...pe(t)});var tr=class extends he{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===I.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:o}=this._processInputParams(t),n=this._def.effect||null,i={addIssue:s=>{re(o,s),s.fatal?r.abort():r.dirty()},get path(){return o.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let s=n.transform(o.data,i);if(o.common.async)return Promise.resolve(s).then(async u=>{if(r.value==="aborted")return ue;let c=await this._def.schema._parseAsync({data:u,path:o.path,parent:o});return c.status==="aborted"?ue:c.status==="dirty"?po(c.value):r.value==="dirty"?po(c.value):c});{if(r.value==="aborted")return ue;let u=this._def.schema._parseSync({data:s,path:o.path,parent:o});return u.status==="aborted"?ue:u.status==="dirty"?po(u.value):r.value==="dirty"?po(u.value):u}}if(n.type==="refinement"){let s=u=>{let c=n.refinement(u,i);if(o.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(o.common.async===!1){let u=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return u.status==="aborted"?ue:(u.status==="dirty"&&r.dirty(),s(u.value),{status:r.value,value:u.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(u=>u.status==="aborted"?ue:(u.status==="dirty"&&r.dirty(),s(u.value).then(()=>({status:r.value,value:u.value}))))}if(n.type==="transform")if(o.common.async===!1){let s=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!Nn(s))return ue;let u=n.transform(s.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:u}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(s=>Nn(s)?Promise.resolve(n.transform(s.value,i)).then(u=>({status:r.value,value:u})):ue);ye.assertNever(n)}};tr.create=(e,t,r)=>new tr({schema:e,typeName:I.ZodEffects,effect:t,...pe(r)});tr.createWithPreprocess=(e,t,r)=>new tr({schema:t,effect:{type:"preprocess",transform:e},typeName:I.ZodEffects,...pe(r)});var er=class extends he{_parse(t){return this._getType(t)===ne.undefined?bt(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};er.create=(e,t)=>new er({innerType:e,typeName:I.ZodOptional,...pe(t)});var Hr=class extends he{_parse(t){return this._getType(t)===ne.null?bt(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Hr.create=(e,t)=>new Hr({innerType:e,typeName:I.ZodNullable,...pe(t)});var So=class extends he{_parse(t){let{ctx:r}=this._processInputParams(t),o=r.data;return r.parsedType===ne.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};So.create=(e,t)=>new So({innerType:e,typeName:I.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...pe(t)});var ko=class extends he{_parse(t){let{ctx:r}=this._processInputParams(t),o={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return za(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Mt(o.common.issues)},input:o.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Mt(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}};ko.create=(e,t)=>new ko({innerType:e,typeName:I.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...pe(t)});var Ha=class extends he{_parse(t){if(this._getType(t)!==ne.nan){let o=this._getOrReturnCtx(t);return re(o,{code:V.invalid_type,expected:ne.nan,received:o.parsedType}),ue}return{status:"valid",value:t.data}}};Ha.create=e=>new Ha({typeName:I.ZodNaN,...pe(e)});var Bs=class extends he{_parse(t){let{ctx:r}=this._processInputParams(t),o=r.data;return this._def.type._parse({data:o,path:r.path,parent:r})}unwrap(){return this._def.type}},Hs=class e extends he{_parse(t){let{status:r,ctx:o}=this._processInputParams(t);if(o.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return i.status==="aborted"?ue:i.status==="dirty"?(r.dirty(),po(i.value)):this._def.out._parseAsync({data:i.value,path:o.path,parent:o})})();{let n=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return n.status==="aborted"?ue:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:o.path,parent:o})}}static create(t,r){return new e({in:t,out:r,typeName:I.ZodPipeline})}},Io=class extends he{_parse(t){let r=this._def.innerType._parse(t),o=n=>(Nn(n)&&(n.value=Object.freeze(n.value)),n);return za(r)?r.then(n=>o(n)):o(r)}unwrap(){return this._def.innerType}};Io.create=(e,t)=>new Io({innerType:e,typeName:I.ZodReadonly,...pe(t)});var qZ={object:Dt.lazycreate},I;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(I||(I={}));var VZ=fo.create,GZ=Ua.create,JZ=Ha.create,BZ=Fa.create,HZ=La.create,WZ=Za.create,KZ=qa.create,YZ=go.create,XZ=ho.create,QZ=Va.create,eq=hn.create,tq=wr.create,rq=Ga.create,nq=vn.create,oq=Dt.create,aq=Dt.strictCreate,iq=vo.create,sq=$m.create,lq=yo.create,uq=Br.create,cq=Am.create,dq=Ja.create,pq=Ba.create,mq=Cm.create,fq=_o.create,gq=bo.create,hq=xo.create,vq=wo.create,yq=Rn.create,_q=tr.create,bq=er.create,xq=Hr.create,wq=tr.createWithPreprocess,Sq=Hs.create;var Ws=class extends Error{constructor(t,r){super(t),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function Pm(e){}function n_(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=Pm,onError:r=Pm,onRetry:o=Pm,onComment:n}=e,i="",s=!0,u,c="",l="";function d(v){let _=s?v.replace(/^\xEF\xBB\xBF/,""):v,[w,x]=vC(`${i}${_}`);for(let f of w)m(f);i=x,s=!1}function m(v){if(v===""){g();return}if(v.startsWith(":")){n&&n(v.slice(v.startsWith(": ")?2:1));return}let _=v.indexOf(":");if(_!==-1){let w=v.slice(0,_),x=v[_+1]===" "?2:1,f=v.slice(_+x);p(w,f,v);return}p(v,"",v)}function p(v,_,w){switch(v){case"event":l=_;break;case"data":c=`${c}${_}
`;break;case"id":u=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?o(parseInt(_,10)):r(new Ws(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:w}));break;default:r(new Ws(`Unknown field "${v.length>20?`${v.slice(0,20)}\u2026`:v}"`,{type:"unknown-field",field:v,value:_,line:w}));break}}function g(){c.length>0&&t({id:u,event:l||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),u=void 0,c="",l=""}function h(v={}){i&&v.consume&&m(i),s=!0,u=void 0,c="",l="",i=""}return{feed:d,reset:h}}function vC(e){let t=[],r="",o=0;for(;o<e.length;){let n=e.indexOf("\r",o),i=e.indexOf(`
`,o),s=-1;if(n!==-1&&i!==-1?s=Math.min(n,i):n!==-1?n===e.length-1?s=-1:s=n:i!==-1&&(s=i),s===-1){r=e.slice(o);break}else{let u=e.slice(o,s);t.push(u),o=s+1,e[o-1]==="\r"&&e[o]===`
`&&o++}}return[t,r]}var To=class extends TransformStream{constructor({onError:t,onRetry:r,onComment:o}={}){let n;super({start(i){n=n_({onEvent:s=>{i.enqueue(s)},onError(s){t==="terminate"?i.error(s):typeof t=="function"&&t(s)},onRetry:r,onComment:o})},transform(i){n.feed(i)}})}};function jn(...e){return e.reduce((t,r)=>({...t,...r!=null?r:{}}),{})}function Ka(e){return Object.fromEntries([...e.headers])}var yC=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:o="-"}={})=>{let n=()=>{let i=r.length,s=new Array(t);for(let u=0;u<t;u++)s[u]=r[Math.random()*i|0];return s.join("")};if(e==null)return n;if(r.includes(o))throw new _h({argument:"separator",message:`The separator "${o}" must not be part of the alphabet "${r}".`});return()=>`${e}${o}${n()}`},Dq=yC();function Wa(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var _C=["fetch failed","failed to fetch"];function s_({error:e,url:t,requestBodyValues:r}){if(Wa(e))return e;if(e instanceof TypeError&&_C.includes(e.message.toLowerCase())){let o=e.cause;if(o!=null)return new lt({message:`Cannot connect to API: ${o.message}`,cause:o,url:t,requestBodyValues:r,isRetryable:!0})}return e}function l_(e=globalThis){var t,r,o;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(o=(r=e.process)==null?void 0:r.versions)!=null&&o.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function bC(e){if(e==null)return{};let t={};if(e instanceof Headers)e.forEach((r,o)=>{t[o.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(let[r,o]of e)o!=null&&(t[r.toLowerCase()]=o)}return t}function Ys(e,...t){let r=new Headers(bC(e)),o=r.get("user-agent")||"";return r.set("user-agent",[o,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var u_="4.0.0-beta.43",xC=()=>globalThis.fetch,Mm=async({url:e,headers:t={},successfulResponseHandler:r,failedResponseHandler:o,abortSignal:n,fetch:i=xC()})=>{try{let s=await i(e,{method:"GET",headers:Ys(t,`ai-sdk/provider-utils/${u_}`,l_()),signal:n}),u=Ka(s);if(!s.ok){let c;try{c=await o({response:s,url:e,requestBodyValues:{}})}catch(l){throw Wa(l)||lt.isInstance(l)?l:new lt({message:"Failed to process error response",cause:l,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:{}})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:{}})}catch(c){throw c instanceof Error&&(Wa(c)||lt.isInstance(c))?c:new lt({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:{}})}}catch(s){throw s_({error:s,url:e,requestBodyValues:{}})}};function Ya({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process=="undefined")&&(e=process.env[t],!(e==null||typeof e!="string")))return e}var wC=/"__proto__"\s*:/,SC=/"constructor"\s*:/;function o_(e){let t=JSON.parse(e);return t===null||typeof t!="object"||wC.test(e)===!1&&SC.test(e)===!1?t:kC(t)}function kC(e){let t=[e];for(;t.length;){let r=t;t=[];for(let o of r){if(Object.prototype.hasOwnProperty.call(o,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let n in o){let i=o[n];i&&typeof i=="object"&&t.push(i)}}}return e}function c_(e){let{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch(r){return o_(e)}try{return o_(e)}finally{Error.stackTraceLimit=t}}var IC=e=>()=>e.toJsonSchema(),TC=e=>async()=>{try{let{JSONSchema:t}=await import("effect");return t.make(e)}catch(t){throw new Error("Failed to import module 'effect'")}},$C=e=>async()=>{try{let{toJsonSchema:t}=await import("@valibot/to-json-schema");return t(e)}catch(t){throw new Error("Failed to import module '@valibot/to-json-schema'")}},EC=Symbol("Let zodToJsonSchema decide on which parser to use"),a_={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},AC=e=>typeof e=="string"?{...a_,name:e}:{...a_,...e};function zt(){return{}}function CC(e,t){var r,o,n;let i={type:"array"};return(r=e.type)!=null&&r._def&&((n=(o=e.type)==null?void 0:o._def)==null?void 0:n.typeName)!==I.ZodAny&&(i.items=Pe(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(i.minItems=e.minLength.value),e.maxLength&&(i.maxItems=e.maxLength.value),e.exactLength&&(i.minItems=e.exactLength.value,i.maxItems=e.exactLength.value),i}function PC(e){let t={type:"integer",format:"int64"};if(!e.checks)return t;for(let r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function OC(){return{type:"boolean"}}function d_(e,t){return Pe(e.type._def,t)}var NC=(e,t)=>Pe(e.innerType._def,t);function p_(e,t,r){let o=r!=null?r:t.dateStrategy;if(Array.isArray(o))return{anyOf:o.map((n,i)=>p_(e,t,n))};switch(o){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return RC(e)}}var RC=e=>{let t={type:"integer",format:"unix-time"};for(let r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function jC(e,t){return{...Pe(e.innerType._def,t),default:e.defaultValue()}}function MC(e,t){return t.effectStrategy==="input"?Pe(e.schema._def,t):zt()}function DC(e){return{type:"string",enum:Array.from(e.values)}}var zC=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function UC(e,t){let r=[Pe(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Pe(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(n=>!!n),o=[];return r.forEach(n=>{if(zC(n))o.push(...n.allOf);else{let i=n;if("additionalProperties"in n&&n.additionalProperties===!1){let{additionalProperties:s,...u}=n;i=u}o.push(i)}}),o.length?{allOf:o}:void 0}function FC(e){let t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var Om=void 0,rr={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Om===void 0&&(Om=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Om),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function m_(e,t){let r={type:"string"};if(e.checks)for(let o of e.checks)switch(o.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value;break;case"email":switch(t.emailStrategy){case"format:email":nr(r,"email",o.message,t);break;case"format:idn-email":nr(r,"idn-email",o.message,t);break;case"pattern:zod":xt(r,rr.email,o.message,t);break}break;case"url":nr(r,"uri",o.message,t);break;case"uuid":nr(r,"uuid",o.message,t);break;case"regex":xt(r,o.regex,o.message,t);break;case"cuid":xt(r,rr.cuid,o.message,t);break;case"cuid2":xt(r,rr.cuid2,o.message,t);break;case"startsWith":xt(r,RegExp(`^${Nm(o.value,t)}`),o.message,t);break;case"endsWith":xt(r,RegExp(`${Nm(o.value,t)}$`),o.message,t);break;case"datetime":nr(r,"date-time",o.message,t);break;case"date":nr(r,"date",o.message,t);break;case"time":nr(r,"time",o.message,t);break;case"duration":nr(r,"duration",o.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value;break;case"includes":{xt(r,RegExp(Nm(o.value,t)),o.message,t);break}case"ip":{o.version!=="v6"&&nr(r,"ipv4",o.message,t),o.version!=="v4"&&nr(r,"ipv6",o.message,t);break}case"base64url":xt(r,rr.base64url,o.message,t);break;case"jwt":xt(r,rr.jwt,o.message,t);break;case"cidr":{o.version!=="v6"&&xt(r,rr.ipv4Cidr,o.message,t),o.version!=="v4"&&xt(r,rr.ipv6Cidr,o.message,t);break}case"emoji":xt(r,rr.emoji(),o.message,t);break;case"ulid":{xt(r,rr.ulid,o.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{nr(r,"binary",o.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{xt(r,rr.base64,o.message,t);break}}break}case"nanoid":xt(r,rr.nanoid,o.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function Nm(e,t){return t.patternStrategy==="escape"?ZC(e):e}var LC=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function ZC(e){let t="";for(let r=0;r<e.length;r++)LC.has(e[r])||(t+="\\"),t+=e[r];return t}function nr(e,t,r,o){var n;e.format||(n=e.anyOf)!=null&&n.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&o.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function xt(e,t,r,o){var n;e.pattern||(n=e.allOf)!=null&&n.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:i_(t,o),...r&&o.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=i_(t,o)}function i_(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;let o={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=o.i?e.source.toLowerCase():e.source,i="",s=!1,u=!1,c=!1;for(let l=0;l<n.length;l++){if(s){i+=n[l],s=!1;continue}if(o.i){if(u){if(n[l].match(/[a-z]/)){c?(i+=n[l],i+=`${n[l-2]}-${n[l]}`.toUpperCase(),c=!1):n[l+1]==="-"&&((r=n[l+2])!=null&&r.match(/[a-z]/))?(i+=n[l],c=!0):i+=`${n[l]}${n[l].toUpperCase()}`;continue}}else if(n[l].match(/[a-z]/)){i+=`[${n[l]}${n[l].toUpperCase()}]`;continue}}if(o.m){if(n[l]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[l]==="$"){i+=`($|(?=[\r
]))`;continue}}if(o.s&&n[l]==="."){i+=u?`${n[l]}\r
`:`[${n[l]}\r
]`;continue}i+=n[l],n[l]==="\\"?s=!0:u&&n[l]==="]"?u=!1:!u&&n[l]==="["&&(u=!0)}try{new RegExp(i)}catch(l){return e.source}return i}function f_(e,t){var r,o,n,i,s,u;let c={type:"object",additionalProperties:(r=Pe(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((o=e.keyType)==null?void 0:o._def.typeName)===I.ZodString&&((n=e.keyType._def.checks)!=null&&n.length)){let{type:l,...d}=m_(e.keyType._def,t);return{...c,propertyNames:d}}else{if(((i=e.keyType)==null?void 0:i._def.typeName)===I.ZodEnum)return{...c,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===I.ZodBranded&&e.keyType._def.type._def.typeName===I.ZodString&&((u=e.keyType._def.type._def.checks)!=null&&u.length)){let{type:l,...d}=d_(e.keyType._def,t);return{...c,propertyNames:d}}}return c}function qC(e,t){if(t.mapStrategy==="record")return f_(e,t);let r=Pe(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||zt(),o=Pe(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||zt();return{type:"array",maxItems:125,items:{type:"array",items:[r,o],minItems:2,maxItems:2}}}function VC(e){let t=e.values,o=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),n=Array.from(new Set(o.map(i=>typeof i)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:o}}function GC(){return{not:zt()}}function JC(){return{type:"null"}}var Rm={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function BC(e,t){let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(o=>o._def.typeName in Rm&&(!o._def.checks||!o._def.checks.length))){let o=r.reduce((n,i)=>{let s=Rm[i._def.typeName];return s&&!n.includes(s)?[...n,s]:n},[]);return{type:o.length>1?o:o[0]}}else if(r.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){let o=r.reduce((n,i)=>{let s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...n,s];case"bigint":return[...n,"integer"];case"object":if(i._def.value===null)return[...n,"null"];case"symbol":case"undefined":case"function":default:return n}},[]);if(o.length===r.length){let n=o.filter((i,s,u)=>u.indexOf(i)===s);return{type:n.length>1?n:n[0],enum:r.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(r.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((o,n)=>[...o,...n._def.values.filter(i=>!o.includes(i))],[])};return HC(e,t)}var HC=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((o,n)=>Pe(o._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(o=>!!o&&(!t.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return r.length?{anyOf:r}:void 0};function WC(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[Rm[e.innerType._def.typeName],"null"]};let r=Pe(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function KC(e){let t={type:"number"};if(!e.checks)return t;for(let r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function YC(e,t){let r={type:"object",properties:{}},o=[],n=e.shape();for(let s in n){let u=n[s];if(u===void 0||u._def===void 0)continue;let c=QC(u),l=Pe(u._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});l!==void 0&&(r.properties[s]=l,c||o.push(s))}o.length&&(r.required=o);let i=XC(e,t);return i!==void 0&&(r.additionalProperties=i),r}function XC(e,t){if(e.catchall._def.typeName!=="ZodNever")return Pe(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function QC(e){try{return e.isOptional()}catch(t){return!0}}var eP=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return Pe(e.innerType._def,t);let o=Pe(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return o?{anyOf:[{not:zt()},o]}:zt()},tP=(e,t)=>{if(t.pipeStrategy==="input")return Pe(e.in._def,t);if(t.pipeStrategy==="output")return Pe(e.out._def,t);let r=Pe(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),o=Pe(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,o].filter(n=>n!==void 0)}};function rP(e,t){return Pe(e.type._def,t)}function nP(e,t){let o={type:"array",uniqueItems:!0,items:Pe(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(o.minItems=e.minSize.value),e.maxSize&&(o.maxItems=e.maxSize.value),o}function oP(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,o)=>Pe(r._def,{...t,currentPath:[...t.currentPath,"items",`${o}`]})).reduce((r,o)=>o===void 0?r:[...r,o],[]),additionalItems:Pe(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,o)=>Pe(r._def,{...t,currentPath:[...t.currentPath,"items",`${o}`]})).reduce((r,o)=>o===void 0?r:[...r,o],[])}}function aP(){return{not:zt()}}function iP(){return zt()}var sP=(e,t)=>Pe(e.innerType._def,t),lP=(e,t,r)=>{switch(t){case I.ZodString:return m_(e,r);case I.ZodNumber:return KC(e);case I.ZodObject:return YC(e,r);case I.ZodBigInt:return PC(e);case I.ZodBoolean:return OC();case I.ZodDate:return p_(e,r);case I.ZodUndefined:return aP();case I.ZodNull:return JC();case I.ZodArray:return CC(e,r);case I.ZodUnion:case I.ZodDiscriminatedUnion:return BC(e,r);case I.ZodIntersection:return UC(e,r);case I.ZodTuple:return oP(e,r);case I.ZodRecord:return f_(e,r);case I.ZodLiteral:return FC(e);case I.ZodEnum:return DC(e);case I.ZodNativeEnum:return VC(e);case I.ZodNullable:return WC(e,r);case I.ZodOptional:return eP(e,r);case I.ZodMap:return qC(e,r);case I.ZodSet:return nP(e,r);case I.ZodLazy:return()=>e.getter()._def;case I.ZodPromise:return rP(e,r);case I.ZodNaN:case I.ZodNever:return GC();case I.ZodEffects:return MC(e,r);case I.ZodAny:return zt();case I.ZodUnknown:return iP();case I.ZodDefault:return jC(e,r);case I.ZodBranded:return d_(e,r);case I.ZodReadonly:return sP(e,r);case I.ZodCatch:return NC(e,r);case I.ZodPipeline:return tP(e,r);case I.ZodFunction:case I.ZodVoid:case I.ZodSymbol:return;default:return(o=>{})(t)}},uP=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function Pe(e,t,r=!1){var o;let n=t.seen.get(e);if(t.override){let c=(o=t.override)==null?void 0:o.call(t,e,t,n,r);if(c!==EC)return c}if(n&&!r){let c=cP(n,t);if(c!==void 0)return c}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let s=lP(e,e.typeName,t),u=typeof s=="function"?Pe(s(),t):s;if(u&&dP(e,t,u),t.postProcess){let c=t.postProcess(u,e,t);return i.jsonSchema=u,c}return i.jsonSchema=u,u}var cP=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:uP(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,o)=>t.currentPath[o]===r)||t.$refStrategy==="seen"?zt():void 0}},dP=(e,t,r)=>(e.description&&(r.description=e.description),r),pP=e=>{let t=AC(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([o,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,o],jsonSchema:void 0}]))}},mP=(e,t)=>{var r;let o=pP(t),n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[d,m])=>{var p;return{...l,[d]:(p=Pe(m._def,{...o,currentPath:[...o.basePath,o.definitionPath,d]},!0))!=null?p:zt()}},{}):void 0,i=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,s=(r=Pe(e._def,i===void 0?o:{...o,currentPath:[...o.basePath,o.definitionPath,i]},!1))!=null?r:zt(),u=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;u!==void 0&&(s.title=u);let c=i===void 0?n?{...s,[o.definitionPath]:n}:s:{$ref:[...o.$refStrategy==="relative"?[]:o.basePath,o.definitionPath,i].join("/"),[o.definitionPath]:{...n,[i]:s}};return c.$schema="http://json-schema.org/draft-07/schema#",c},jm=Symbol.for("vercel.ai.schema");function or(e){let t;return()=>(t==null&&(t=e()),t)}function Xs(e,{validate:t}={}){return{[jm]:!0,_type:void 0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function fP(e){return typeof e=="object"&&e!==null&&jm in e&&e[jm]===!0&&"jsonSchema"in e&&"validate"in e}function gP(e){return e==null?Xs({properties:{},additionalProperties:!1}):fP(e)?e:"~standard"in e?hP(e):e()}function hP(e){let t=e["~standard"].vendor;switch(t){case"zod":return Ht(e);case"arktype":return Ks(e,IC);case"effect":return Ks(e,TC);case"valibot":return Ks(e,$C);default:return Ks(e,()=>()=>{throw new Error(`Unsupported standard schema vendor: ${t}`)})}}function Ks(e,t){return Xs(t(e),{validate:async r=>{let o=await e["~standard"].validate(r);return"value"in o?{success:!0,value:o.value}:{success:!1,error:new sn({value:r,cause:o.issues})}}})}function vP(e,t){var r;let o=(r=t==null?void 0:t.useReferences)!=null?r:!1;return Xs(()=>mP(e,{$refStrategy:o?"root":"none"}),{validate:async n=>{let i=await e.safeParseAsync(n);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function yP(e,t){var r;let o=(r=t==null?void 0:t.useReferences)!=null?r:!1;return Xs(()=>Zr(e,{target:"draft-7",io:"output",reused:o?"ref":"inline"}),{validate:async n=>{let i=await qr(e,n);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function _P(e){return"_zod"in e}function Ht(e,t){return _P(e)?yP(e,t):vP(e,t)}async function bP({value:e,schema:t}){let r=await Mn({value:e,schema:t});if(!r.success)throw sn.wrap({value:e,cause:r.error});return r.value}async function Mn({value:e,schema:t}){let r=gP(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};let o=await r.validate(e);return o.success?{success:!0,value:o.value,rawValue:e}:{success:!1,error:sn.wrap({value:e,cause:o.error}),rawValue:e}}catch(o){return{success:!1,error:sn.wrap({value:e,cause:o}),rawValue:e}}}async function xP({text:e,schema:t}){try{let r=c_(e);return t==null?r:bP({value:r,schema:t})}catch(r){throw Ko.isInstance(r)||sn.isInstance(r)?r:new Ko({text:e,cause:r})}}async function g_({text:e,schema:t}){try{let r=c_(e);return t==null?{success:!0,value:r,rawValue:r}:await Mn({value:r,schema:t})}catch(r){return{success:!1,error:Ko.isInstance(r)?r:new Ko({text:e,cause:r}),rawValue:void 0}}}function wP({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new To).pipeThrough(new TransformStream({async transform({data:r},o){r!=="[DONE]"&&o.enqueue(await g_({text:r,schema:t}))}}))}var SP=()=>globalThis.fetch,Dn=async({url:e,headers:t,body:r,failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s})=>kP({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s});var kP=async({url:e,headers:t={},body:r,successfulResponseHandler:o,failedResponseHandler:n,abortSignal:i,fetch:s=SP()})=>{try{let u=await s(e,{method:"POST",headers:Ys(t,`ai-sdk/provider-utils/${u_}`,l_()),body:r.content,signal:i}),c=Ka(u);if(!u.ok){let l;try{l=await n({response:u,url:e,requestBodyValues:r.values})}catch(d){throw Wa(d)||lt.isInstance(d)?d:new lt({message:"Failed to process error response",cause:d,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:r.values})}throw l.value}try{return await o({response:u,url:e,requestBodyValues:r.values})}catch(l){throw l instanceof Error&&(Wa(l)||lt.isInstance(l))?l:new lt({message:"Failed to process successful response",cause:l,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:r.values})}}catch(u){throw s_({error:u,url:e,requestBodyValues:r.values})}};async function At(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Sr=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:o,url:n,requestBodyValues:i})=>{let s=await o.text(),u=Ka(o);if(s.trim()==="")return{responseHeaders:u,value:new lt({message:o.statusText,url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:u,responseBody:s,isRetryable:r==null?void 0:r(o)})};try{let c=await xP({text:s,schema:e});return{responseHeaders:u,value:new lt({message:t(c),url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:u,responseBody:s,data:c,isRetryable:r==null?void 0:r(o,c)})}}catch(c){return{responseHeaders:u,value:new lt({message:o.statusText,url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:u,responseBody:s,isRetryable:r==null?void 0:r(o)})}}},h_=e=>async({response:t})=>{let r=Ka(t);if(t.body==null)throw new gh({});return{responseHeaders:r,value:wP({stream:t.body,schema:e})}},Wr=e=>async({response:t,url:r,requestBodyValues:o})=>{let n=await t.text(),i=await g_({text:n,schema:e}),s=Ka(t);if(!i.success)throw new lt({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:n,url:r,requestBodyValues:o});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}};var{btoa:Wq,atob:Kq}=globalThis;function v_(e){return e==null?void 0:e.replace(/\/$/,"")}var bb=mr(Km(),1),xb=mr(Km(),1);var PO="vercel.ai.gateway.error",Ym=Symbol.for(PO),Z_,q_,Ut=class db extends(q_=Error,Z_=Ym,q_){constructor({message:t,statusCode:r=500,cause:o}){super(t),this[Z_]=!0,this.statusCode=r,this.cause=o}static isInstance(t){return db.hasMarker(t)}static hasMarker(t){return typeof t=="object"&&t!==null&&Ym in t&&t[Ym]===!0}},pb="GatewayAuthenticationError",OO=`vercel.ai.gateway.error.${pb}`,V_=Symbol.for(OO),G_,J_,rl=class mb extends(J_=Ut,G_=V_,J_){constructor({message:t="Authentication failed",statusCode:r=401,cause:o}={}){super({message:t,statusCode:r,cause:o}),this[G_]=!0,this.name=pb,this.type="authentication_error"}static isInstance(t){return Ut.hasMarker(t)&&V_ in t}static createContextualError({apiKeyProvided:t,oidcTokenProvided:r,message:o="Authentication failed",statusCode:n=401,cause:i}){let s;return t?s=`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:r?s=`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`:s=`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`,new mb({message:s,statusCode:n,cause:i})}},fb="GatewayInvalidRequestError",NO=`vercel.ai.gateway.error.${fb}`,B_=Symbol.for(NO),H_,W_,RO=class extends(W_=Ut,H_=B_,W_){constructor({message:e="Invalid request",statusCode:t=400,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[H_]=!0,this.name=fb,this.type="invalid_request_error"}static isInstance(e){return Ut.hasMarker(e)&&B_ in e}},gb="GatewayRateLimitError",jO=`vercel.ai.gateway.error.${gb}`,K_=Symbol.for(jO),Y_,X_,MO=class extends(X_=Ut,Y_=K_,X_){constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[Y_]=!0,this.name=gb,this.type="rate_limit_exceeded"}static isInstance(e){return Ut.hasMarker(e)&&K_ in e}},hb="GatewayModelNotFoundError",DO=`vercel.ai.gateway.error.${hb}`,Q_=Symbol.for(DO),zO=or(()=>Ht(a.object({modelId:a.string()}))),eb,tb,Xm=class extends(tb=Ut,eb=Q_,tb){constructor({message:e="Model not found",statusCode:t=404,modelId:r,cause:o}={}){super({message:e,statusCode:t,cause:o}),this[eb]=!0,this.name=hb,this.type="model_not_found",this.modelId=r}static isInstance(e){return Ut.hasMarker(e)&&Q_ in e}},vb="GatewayInternalServerError",UO=`vercel.ai.gateway.error.${vb}`,rb=Symbol.for(UO),nb,ob,ab=class extends(ob=Ut,nb=rb,ob){constructor({message:e="Internal server error",statusCode:t=500,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[nb]=!0,this.name=vb,this.type="internal_server_error"}static isInstance(e){return Ut.hasMarker(e)&&rb in e}},yb="GatewayResponseError",FO=`vercel.ai.gateway.error.${yb}`,ib=Symbol.for(FO),sb,lb,LO=class extends(lb=Ut,sb=ib,lb){constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:r,validationError:o,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[sb]=!0,this.name=yb,this.type="response_error",this.response=r,this.validationError=o}static isInstance(e){return Ut.hasMarker(e)&&ib in e}};async function ub({response:e,statusCode:t,defaultMessage:r="Gateway request failed",cause:o,authMethod:n}){let i=await Mn({value:e,schema:ZO});if(!i.success)return new LO({message:`Invalid error response format: ${r}`,statusCode:t,response:e,validationError:i.error,cause:o});let s=i.value,u=s.error.type,c=s.error.message;switch(u){case"authentication_error":return rl.createContextualError({apiKeyProvided:n==="api-key",oidcTokenProvided:n==="oidc",statusCode:t,cause:o});case"invalid_request_error":return new RO({message:c,statusCode:t,cause:o});case"rate_limit_exceeded":return new MO({message:c,statusCode:t,cause:o});case"model_not_found":{let l=await Mn({value:s.error.param,schema:zO});return new Xm({message:c,statusCode:t,modelId:l.success?l.value.modelId:void 0,cause:o})}case"internal_server_error":return new ab({message:c,statusCode:t,cause:o});default:return new ab({message:c,statusCode:t,cause:o})}}var ZO=or(()=>Ht(a.object({error:a.object({message:a.string(),type:a.string().nullish(),param:a.unknown().nullish(),code:a.union([a.string(),a.number()]).nullish()})})));function yn(e,t){var r;return Ut.isInstance(e)?e:lt.isInstance(e)?ub({response:qO(e),statusCode:(r=e.statusCode)!=null?r:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):ub({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:"Unknown Gateway error",cause:e,authMethod:t})}function qO(e){if(e.data!==void 0)return e.data;if(e.responseBody!=null)try{return JSON.parse(e.responseBody)}catch(t){return e.responseBody}return{}}var _b="ai-gateway-auth-method";async function Eo(e){let t=await Mn({value:e[_b],schema:VO});return t.success?t.value:void 0}var VO=or(()=>Ht(a.union([a.literal("api-key"),a.literal("oidc")]))),cb=class{constructor(e){this.config=e}async getAvailableModels(){try{let{value:e}=await Mm({url:`${this.config.baseURL}/config`,headers:await At(this.config.headers()),successfulResponseHandler:Wr(GO),failedResponseHandler:Sr({errorSchema:a.any(),errorToMessage:t=>t}),fetch:this.config.fetch});return e}catch(e){throw await yn(e)}}async getCredits(){try{let e=new URL(this.config.baseURL),{value:t}=await Mm({url:`${e.origin}/v1/credits`,headers:await At(this.config.headers()),successfulResponseHandler:Wr(JO),failedResponseHandler:Sr({errorSchema:a.any(),errorToMessage:r=>r}),fetch:this.config.fetch});return t}catch(e){throw await yn(e)}}},GO=or(()=>Ht(a.object({models:a.array(a.object({id:a.string(),name:a.string(),description:a.string().nullish(),pricing:a.object({input:a.string(),output:a.string(),input_cache_read:a.string().nullish(),input_cache_write:a.string().nullish()}).transform(({input:e,output:t,input_cache_read:r,input_cache_write:o})=>({input:e,output:t,...r?{cachedInputTokens:r}:{},...o?{cacheCreationInputTokens:o}:{}})).nullish(),specification:a.object({specificationVersion:a.literal("v3"),provider:a.string(),modelId:a.string()}),modelType:a.enum(["language","embedding","image"]).nullish()}))}))),JO=or(()=>Ht(a.object({balance:a.string(),total_used:a.string()}).transform(({balance:e,total_used:t})=>({balance:e,totalUsed:t})))),BO=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){let{abortSignal:t,...r}=e;return{args:this.maybeEncodeFileParts(r),warnings:[]}}async doGenerate(e){let{args:t,warnings:r}=await this.getArgs(e),{abortSignal:o}=e,n=await At(this.config.headers());try{let{responseHeaders:i,value:s,rawValue:u}=await Dn({url:this.getUrl(),headers:jn(n,e.headers,this.getModelConfigHeaders(this.modelId,!1),await At(this.config.o11yHeaders)),body:t,successfulResponseHandler:Wr(a.any()),failedResponseHandler:Sr({errorSchema:a.any(),errorToMessage:c=>c}),...o&&{abortSignal:o},fetch:this.config.fetch});return{...s,request:{body:t},response:{headers:i,body:u},warnings:r}}catch(i){throw await yn(i,await Eo(n))}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),{abortSignal:o}=e,n=await At(this.config.headers());try{let{value:i,responseHeaders:s}=await Dn({url:this.getUrl(),headers:jn(n,e.headers,this.getModelConfigHeaders(this.modelId,!0),await At(this.config.o11yHeaders)),body:t,successfulResponseHandler:h_(a.any()),failedResponseHandler:Sr({errorSchema:a.any(),errorToMessage:u=>u}),...o&&{abortSignal:o},fetch:this.config.fetch});return{stream:i.pipeThrough(new TransformStream({start(u){r.length>0&&u.enqueue({type:"stream-start",warnings:r})},transform(u,c){if(u.success){let l=u.value;if(l.type==="raw"&&!e.includeRawChunks)return;l.type==="response-metadata"&&l.timestamp&&typeof l.timestamp=="string"&&(l.timestamp=new Date(l.timestamp)),c.enqueue(l)}else c.error(u.error)}})),request:{body:t},response:{headers:s}}}catch(i){throw await yn(i,await Eo(n))}}isFilePart(e){return e&&typeof e=="object"&&"type"in e&&e.type==="file"}maybeEncodeFileParts(e){for(let t of e.prompt)for(let r of t.content)if(this.isFilePart(r)){let o=r;if(o.data instanceof Uint8Array){let n=Uint8Array.from(o.data),i=Buffer.from(n).toString("base64");o.data=new URL(`data:${o.mediaType||"application/octet-stream"};base64,${i}`)}}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"2","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},HO=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:o}){var n;let i=await At(this.config.headers());try{let{responseHeaders:s,value:u,rawValue:c}=await Dn({url:this.getUrl(),headers:jn(i,t!=null?t:{},this.getModelConfigHeaders(),await At(this.config.o11yHeaders)),body:{input:e.length===1?e[0]:e,...o?{providerOptions:o}:{}},successfulResponseHandler:Wr(WO),failedResponseHandler:Sr({errorSchema:a.any(),errorToMessage:l=>l}),...r&&{abortSignal:r},fetch:this.config.fetch});return{embeddings:u.embeddings,usage:(n=u.usage)!=null?n:void 0,providerMetadata:u.providerMetadata,response:{headers:s,body:c}}}catch(s){throw await yn(s,await Eo(i))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},WO=or(()=>Ht(a.object({embeddings:a.array(a.array(a.number())),usage:a.object({tokens:a.number()}).nullish(),providerMetadata:a.record(a.string(),a.record(a.string(),a.unknown())).optional()}))),KO=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.maxImagesPerCall=Number.MAX_SAFE_INTEGER}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:o,seed:n,providerOptions:i,headers:s,abortSignal:u}){var c;let l=await At(this.config.headers());try{let{responseHeaders:d,value:m,rawValue:p}=await Dn({url:this.getUrl(),headers:jn(l,s!=null?s:{},this.getModelConfigHeaders(),await At(this.config.o11yHeaders)),body:{prompt:e,n:t,...r&&{size:r},...o&&{aspectRatio:o},...n&&{seed:n},...i&&{providerOptions:i}},successfulResponseHandler:Wr(XO),failedResponseHandler:Sr({errorSchema:a.any(),errorToMessage:g=>g}),...u&&{abortSignal:u},fetch:this.config.fetch});return{images:m.images,warnings:(c=m.warnings)!=null?c:[],providerMetadata:m.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:d}}}catch(d){throw yn(d,await Eo(l))}}getUrl(){return`${this.config.baseURL}/image-model`}getModelConfigHeaders(){return{"ai-image-model-specification-version":"2","ai-model-id":this.modelId}}},YO=a.object({images:a.array(a.unknown()).optional()}).catchall(a.unknown()),XO=a.object({images:a.array(a.string()),warnings:a.array(a.object({type:a.literal("other"),message:a.string()})).optional(),providerMetadata:a.record(a.string(),YO).optional()});async function QO(){var e;return(e=(0,bb.getContext)().headers)==null?void 0:e["x-vercel-id"]}var eN="2.0.0-beta.72",tN="0.0.1";function rN(e={}){var t,r;let o=null,n=null,i=(t=e.metadataCacheRefreshMillis)!=null?t:1e3*60*5,s=0,u=(r=v_(e.baseURL))!=null?r:"https://ai-gateway.vercel.sh/v1/ai",c=async()=>{let h=await nN(e);if(h)return Ys({Authorization:`Bearer ${h.token}`,"ai-gateway-protocol-version":tN,[_b]:h.authMethod,...e.headers},`ai-sdk/gateway/${eN}`);throw rl.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},l=()=>{let h=Ya({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),v=Ya({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),_=Ya({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{let w=await QO();return{...h&&{"ai-o11y-deployment-id":h},...v&&{"ai-o11y-environment":v},..._&&{"ai-o11y-region":_},...w&&{"ai-o11y-request-id":w}}}},d=h=>new BO(h,{provider:"gateway",baseURL:u,headers:c,fetch:e.fetch,o11yHeaders:l()}),m=async()=>{var h,v,_;let w=(_=(v=(h=e._internal)==null?void 0:h.currentDate)==null?void 0:v.call(h).getTime())!=null?_:Date.now();return(!o||w-s>i)&&(s=w,o=new cb({baseURL:u,headers:c,fetch:e.fetch}).getAvailableModels().then(x=>(n=x,x)).catch(async x=>{throw await yn(x,await Eo(await c()))})),n?Promise.resolve(n):o},p=async()=>new cb({baseURL:u,headers:c,fetch:e.fetch}).getCredits().catch(async h=>{throw await yn(h,await Eo(await c()))}),g=function(h){if(new.target)throw new Error("The Gateway Provider model function cannot be called with the new keyword.");return d(h)};return g.specificationVersion="v3",g.getAvailableModels=m,g.getCredits=p,g.imageModel=h=>new KO(h,{provider:"gateway",baseURL:u,headers:c,fetch:e.fetch,o11yHeaders:l()}),g.languageModel=d,g.embeddingModel=h=>new HO(h,{provider:"gateway",baseURL:u,headers:c,fetch:e.fetch,o11yHeaders:l()}),g}var wb=rN();async function nN(e){let t=Ya({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(t)return{token:t,authMethod:"api-key"};try{return{token:await(0,xb.getVercelOidcToken)(),authMethod:"oidc"}}catch(r){return null}}var Yb="vercel.ai.error",oN=Symbol.for(Yb),Sb,kb,ie=class Xb extends(kb=Error,Sb=oN,kb){constructor({name:t,message:r,cause:o}){super(r),this[Sb]=!0,this.name=t,this.cause=o}static isInstance(t){return Xb.hasMarker(t,Yb)}static hasMarker(t,r){let o=Symbol.for(r);return t!=null&&typeof t=="object"&&o in t&&typeof t[o]=="boolean"&&t[o]===!0}},Qb="AI_APICallError",ex=`vercel.ai.error.${Qb}`,aN=Symbol.for(ex),Ib,Tb,tx=class extends(Tb=ie,Ib=aN,Tb){constructor({message:e,url:t,requestBodyValues:r,statusCode:o,responseHeaders:n,responseBody:i,cause:s,isRetryable:u=o!=null&&(o===408||o===409||o===429||o>=500),data:c}){super({name:Qb,message:e,cause:s}),this[Ib]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=o,this.responseHeaders=n,this.responseBody=i,this.isRetryable=u,this.data=c}static isInstance(e){return ie.hasMarker(e,ex)}},rx="AI_EmptyResponseBodyError",nx=`vercel.ai.error.${rx}`,iN=Symbol.for(nx),$b,Eb,NV=class extends(Eb=ie,$b=iN,Eb){constructor({message:e="Empty response body"}={}){super({name:rx,message:e}),this[$b]=!0}static isInstance(e){return ie.hasMarker(e,nx)}};function kr(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var ox="AI_InvalidArgumentError",ax=`vercel.ai.error.${ox}`,sN=Symbol.for(ax),Ab,Cb,ix=class extends(Cb=ie,Ab=sN,Cb){constructor({message:e,cause:t,argument:r}){super({name:ox,message:e,cause:t}),this[Ab]=!0,this.argument=r}static isInstance(e){return ie.hasMarker(e,ax)}},sx="AI_InvalidPromptError",lx=`vercel.ai.error.${sx}`,lN=Symbol.for(lx),Pb,Ob,Un=class extends(Ob=ie,Pb=lN,Ob){constructor({prompt:e,message:t,cause:r}){super({name:sx,message:`Invalid prompt: ${t}`,cause:r}),this[Pb]=!0,this.prompt=e}static isInstance(e){return ie.hasMarker(e,lx)}},ux="AI_InvalidResponseDataError",cx=`vercel.ai.error.${ux}`,uN=Symbol.for(cx),Nb,Rb,RV=class extends(Rb=ie,Nb=uN,Rb){constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:ux,message:t}),this[Nb]=!0,this.data=e}static isInstance(e){return ie.hasMarker(e,cx)}},dx="AI_JSONParseError",px=`vercel.ai.error.${dx}`,cN=Symbol.for(px),jb,Mb,ef=class extends(Mb=ie,jb=cN,Mb){constructor({text:e,cause:t}){super({name:dx,message:`JSON parsing failed: Text: ${e}.
Error message: ${kr(t)}`,cause:t}),this[jb]=!0,this.text=e}static isInstance(e){return ie.hasMarker(e,px)}},mx="AI_LoadAPIKeyError",fx=`vercel.ai.error.${mx}`,dN=Symbol.for(fx),Db,zb,jV=class extends(zb=ie,Db=dN,zb){constructor({message:e}){super({name:mx,message:e}),this[Db]=!0}static isInstance(e){return ie.hasMarker(e,fx)}},gx="AI_LoadSettingError",hx=`vercel.ai.error.${gx}`,pN=Symbol.for(hx),Ub,Fb,MV=class extends(Fb=ie,Ub=pN,Fb){constructor({message:e}){super({name:gx,message:e}),this[Ub]=!0}static isInstance(e){return ie.hasMarker(e,hx)}},vx="AI_NoContentGeneratedError",yx=`vercel.ai.error.${vx}`,mN=Symbol.for(yx),Lb,Zb,DV=class extends(Zb=ie,Lb=mN,Zb){constructor({message:e="No content generated."}={}){super({name:vx,message:e}),this[Lb]=!0}static isInstance(e){return ie.hasMarker(e,yx)}},_x="AI_NoSuchModelError",bx=`vercel.ai.error.${_x}`,fN=Symbol.for(bx),qb,Vb,zV=class extends(Vb=ie,qb=fN,Vb){constructor({errorName:e=_x,modelId:t,modelType:r,message:o=`No such ${r}: ${t}`}){super({name:e,message:o}),this[qb]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return ie.hasMarker(e,bx)}},xx="AI_TooManyEmbeddingValuesForCallError",wx=`vercel.ai.error.${xx}`,gN=Symbol.for(wx),Gb,Jb,UV=class extends(Jb=ie,Gb=gN,Jb){constructor(e){super({name:xx,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[Gb]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return ie.hasMarker(e,wx)}},Sx="AI_TypeValidationError",kx=`vercel.ai.error.${Sx}`,hN=Symbol.for(kx),Bb,Hb,Ir=class Qm extends(Hb=ie,Bb=hN,Hb){constructor({value:t,cause:r}){super({name:Sx,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${kr(r)}`,cause:r}),this[Bb]=!0,this.value=t}static isInstance(t){return ie.hasMarker(t,kx)}static wrap({value:t,cause:r}){return Qm.isInstance(r)&&r.value===t?r:new Qm({value:t,cause:r})}},Ix="AI_UnsupportedFunctionalityError",Tx=`vercel.ai.error.${Ix}`,vN=Symbol.for(Tx),Wb,Kb,FV=class extends(Kb=ie,Wb=vN,Kb){constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:Ix,message:t}),this[Wb]=!0,this.functionality=e}static isInstance(e){return ie.hasMarker(e,Tx)}};async function Px(e,t){if(e==null)return Promise.resolve();let r=t==null?void 0:t.abortSignal;return new Promise((o,n)=>{if(r!=null&&r.aborted){n($x());return}let i=setTimeout(()=>{s(),o()},e),s=()=>{clearTimeout(i),r==null||r.removeEventListener("abort",u)},u=()=>{s(),n($x())};r==null||r.addEventListener("abort",u)})}function $x(){return new DOMException("Delay was aborted","AbortError")}var Ao=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise?this._promise:(this._promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this._promise)}resolve(e){var t;this.status={type:"resolved",value:e},this._promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this._promise&&((t=this._reject)==null||t.call(this,e))}isResolved(){return this.status.type==="resolved"}isRejected(){return this.status.type==="rejected"}isPending(){return this.status.type==="pending"}};var Tr=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:o="-"}={})=>{let n=()=>{let i=r.length,s=new Array(t);for(let u=0;u<t;u++)s[u]=r[Math.random()*i|0];return s.join("")};if(e==null)return n;if(r.includes(o))throw new ix({argument:"separator",message:`The separator "${o}" must not be part of the alphabet "${r}".`});return()=>`${e}${o}${n()}`},yN=Tr();function Co(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function ol(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}function Ox(e=globalThis){var t,r,o;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(o=(r=e.process)==null?void 0:r.versions)!=null&&o.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function _N(e){if(e==null)return{};let t={};if(e instanceof Headers)e.forEach((r,o)=>{t[o.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(let[r,o]of e)o!=null&&(t[r.toLowerCase()]=o)}return t}function ei(e,...t){let r=new Headers(_N(e)),o=r.get("user-agent")||"";return r.set("user-agent",[o,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}function Nx({mediaType:e,url:t,supportedUrls:r}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(r).map(([o,n])=>{let i=o.toLowerCase();return i==="*"||i==="*/*"?{mediaTypePrefix:"",regexes:n}:{mediaTypePrefix:i.replace(/\*/,""),regexes:n}}).filter(({mediaTypePrefix:o})=>e.startsWith(o)).flatMap(({regexes:o})=>o).some(o=>o.test(t))}var bN=/"__proto__"\s*:/,xN=/"constructor"\s*:/;function Ex(e){let t=JSON.parse(e);return t===null||typeof t!="object"||bN.test(e)===!1&&xN.test(e)===!1?t:wN(t)}function wN(e){let t=[e];for(;t.length;){let r=t;t=[];for(let o of r){if(Object.prototype.hasOwnProperty.call(o,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let n in o){let i=o[n];i&&typeof i=="object"&&t.push(i)}}}return e}function SN(e){let{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch(r){return Ex(e)}try{return Ex(e)}finally{Error.stackTraceLimit=t}}var kN=e=>()=>e.toJsonSchema(),IN=e=>async()=>{try{let{JSONSchema:t}=await import("effect");return t.make(e)}catch(t){throw new Error("Failed to import module 'effect'")}},TN=e=>async()=>{try{let{toJsonSchema:t}=await import("@valibot/to-json-schema");return t(e)}catch(t){throw new Error("Failed to import module '@valibot/to-json-schema'")}},$N=Symbol("Let zodToJsonSchema decide on which parser to use"),Ax={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},EN=e=>typeof e=="string"?{...Ax,name:e}:{...Ax,...e};function Ft(){return{}}function AN(e,t){var r,o,n;let i={type:"array"};return(r=e.type)!=null&&r._def&&((n=(o=e.type)==null?void 0:o._def)==null?void 0:n.typeName)!==I.ZodAny&&(i.items=Oe(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(i.minItems=e.minLength.value),e.maxLength&&(i.maxItems=e.maxLength.value),e.exactLength&&(i.minItems=e.exactLength.value,i.maxItems=e.exactLength.value),i}function CN(e){let t={type:"integer",format:"int64"};if(!e.checks)return t;for(let r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function PN(){return{type:"boolean"}}function Rx(e,t){return Oe(e.type._def,t)}var ON=(e,t)=>Oe(e.innerType._def,t);function jx(e,t,r){let o=r!=null?r:t.dateStrategy;if(Array.isArray(o))return{anyOf:o.map((n,i)=>jx(e,t,n))};switch(o){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return NN(e)}}var NN=e=>{let t={type:"integer",format:"unix-time"};for(let r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function RN(e,t){return{...Oe(e.innerType._def,t),default:e.defaultValue()}}function jN(e,t){return t.effectStrategy==="input"?Oe(e.schema._def,t):Ft()}function MN(e){return{type:"string",enum:Array.from(e.values)}}var DN=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function zN(e,t){let r=[Oe(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Oe(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(n=>!!n),o=[];return r.forEach(n=>{if(DN(n))o.push(...n.allOf);else{let i=n;if("additionalProperties"in n&&n.additionalProperties===!1){let{additionalProperties:s,...u}=n;i=u}o.push(i)}}),o.length?{allOf:o}:void 0}function UN(e){let t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var tf=void 0,ar={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(tf===void 0&&(tf=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),tf),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Mx(e,t){let r={type:"string"};if(e.checks)for(let o of e.checks)switch(o.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value;break;case"email":switch(t.emailStrategy){case"format:email":ir(r,"email",o.message,t);break;case"format:idn-email":ir(r,"idn-email",o.message,t);break;case"pattern:zod":wt(r,ar.email,o.message,t);break}break;case"url":ir(r,"uri",o.message,t);break;case"uuid":ir(r,"uuid",o.message,t);break;case"regex":wt(r,o.regex,o.message,t);break;case"cuid":wt(r,ar.cuid,o.message,t);break;case"cuid2":wt(r,ar.cuid2,o.message,t);break;case"startsWith":wt(r,RegExp(`^${rf(o.value,t)}`),o.message,t);break;case"endsWith":wt(r,RegExp(`${rf(o.value,t)}$`),o.message,t);break;case"datetime":ir(r,"date-time",o.message,t);break;case"date":ir(r,"date",o.message,t);break;case"time":ir(r,"time",o.message,t);break;case"duration":ir(r,"duration",o.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value;break;case"includes":{wt(r,RegExp(rf(o.value,t)),o.message,t);break}case"ip":{o.version!=="v6"&&ir(r,"ipv4",o.message,t),o.version!=="v4"&&ir(r,"ipv6",o.message,t);break}case"base64url":wt(r,ar.base64url,o.message,t);break;case"jwt":wt(r,ar.jwt,o.message,t);break;case"cidr":{o.version!=="v6"&&wt(r,ar.ipv4Cidr,o.message,t),o.version!=="v4"&&wt(r,ar.ipv6Cidr,o.message,t);break}case"emoji":wt(r,ar.emoji(),o.message,t);break;case"ulid":{wt(r,ar.ulid,o.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{ir(r,"binary",o.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{wt(r,ar.base64,o.message,t);break}}break}case"nanoid":wt(r,ar.nanoid,o.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function rf(e,t){return t.patternStrategy==="escape"?LN(e):e}var FN=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function LN(e){let t="";for(let r=0;r<e.length;r++)FN.has(e[r])||(t+="\\"),t+=e[r];return t}function ir(e,t,r,o){var n;e.format||(n=e.anyOf)!=null&&n.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&o.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function wt(e,t,r,o){var n;e.pattern||(n=e.allOf)!=null&&n.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:Cx(t,o),...r&&o.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=Cx(t,o)}function Cx(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;let o={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=o.i?e.source.toLowerCase():e.source,i="",s=!1,u=!1,c=!1;for(let l=0;l<n.length;l++){if(s){i+=n[l],s=!1;continue}if(o.i){if(u){if(n[l].match(/[a-z]/)){c?(i+=n[l],i+=`${n[l-2]}-${n[l]}`.toUpperCase(),c=!1):n[l+1]==="-"&&((r=n[l+2])!=null&&r.match(/[a-z]/))?(i+=n[l],c=!0):i+=`${n[l]}${n[l].toUpperCase()}`;continue}}else if(n[l].match(/[a-z]/)){i+=`[${n[l]}${n[l].toUpperCase()}]`;continue}}if(o.m){if(n[l]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[l]==="$"){i+=`($|(?=[\r
]))`;continue}}if(o.s&&n[l]==="."){i+=u?`${n[l]}\r
`:`[${n[l]}\r
]`;continue}i+=n[l],n[l]==="\\"?s=!0:u&&n[l]==="]"?u=!1:!u&&n[l]==="["&&(u=!0)}try{new RegExp(i)}catch(l){return e.source}return i}function Dx(e,t){var r,o,n,i,s,u;let c={type:"object",additionalProperties:(r=Oe(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((o=e.keyType)==null?void 0:o._def.typeName)===I.ZodString&&((n=e.keyType._def.checks)!=null&&n.length)){let{type:l,...d}=Mx(e.keyType._def,t);return{...c,propertyNames:d}}else{if(((i=e.keyType)==null?void 0:i._def.typeName)===I.ZodEnum)return{...c,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===I.ZodBranded&&e.keyType._def.type._def.typeName===I.ZodString&&((u=e.keyType._def.type._def.checks)!=null&&u.length)){let{type:l,...d}=Rx(e.keyType._def,t);return{...c,propertyNames:d}}}return c}function ZN(e,t){if(t.mapStrategy==="record")return Dx(e,t);let r=Oe(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||Ft(),o=Oe(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||Ft();return{type:"array",maxItems:125,items:{type:"array",items:[r,o],minItems:2,maxItems:2}}}function qN(e){let t=e.values,o=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),n=Array.from(new Set(o.map(i=>typeof i)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:o}}function VN(){return{not:Ft()}}function GN(){return{type:"null"}}var nf={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function JN(e,t){let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(o=>o._def.typeName in nf&&(!o._def.checks||!o._def.checks.length))){let o=r.reduce((n,i)=>{let s=nf[i._def.typeName];return s&&!n.includes(s)?[...n,s]:n},[]);return{type:o.length>1?o:o[0]}}else if(r.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){let o=r.reduce((n,i)=>{let s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...n,s];case"bigint":return[...n,"integer"];case"object":if(i._def.value===null)return[...n,"null"];case"symbol":case"undefined":case"function":default:return n}},[]);if(o.length===r.length){let n=o.filter((i,s,u)=>u.indexOf(i)===s);return{type:n.length>1?n:n[0],enum:r.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(r.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((o,n)=>[...o,...n._def.values.filter(i=>!o.includes(i))],[])};return BN(e,t)}var BN=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((o,n)=>Oe(o._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(o=>!!o&&(!t.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return r.length?{anyOf:r}:void 0};function HN(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[nf[e.innerType._def.typeName],"null"]};let r=Oe(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function WN(e){let t={type:"number"};if(!e.checks)return t;for(let r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function KN(e,t){let r={type:"object",properties:{}},o=[],n=e.shape();for(let s in n){let u=n[s];if(u===void 0||u._def===void 0)continue;let c=XN(u),l=Oe(u._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});l!==void 0&&(r.properties[s]=l,c||o.push(s))}o.length&&(r.required=o);let i=YN(e,t);return i!==void 0&&(r.additionalProperties=i),r}function YN(e,t){if(e.catchall._def.typeName!=="ZodNever")return Oe(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function XN(e){try{return e.isOptional()}catch(t){return!0}}var QN=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return Oe(e.innerType._def,t);let o=Oe(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return o?{anyOf:[{not:Ft()},o]}:Ft()},eR=(e,t)=>{if(t.pipeStrategy==="input")return Oe(e.in._def,t);if(t.pipeStrategy==="output")return Oe(e.out._def,t);let r=Oe(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),o=Oe(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,o].filter(n=>n!==void 0)}};function tR(e,t){return Oe(e.type._def,t)}function rR(e,t){let o={type:"array",uniqueItems:!0,items:Oe(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(o.minItems=e.minSize.value),e.maxSize&&(o.maxItems=e.maxSize.value),o}function nR(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,o)=>Oe(r._def,{...t,currentPath:[...t.currentPath,"items",`${o}`]})).reduce((r,o)=>o===void 0?r:[...r,o],[]),additionalItems:Oe(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,o)=>Oe(r._def,{...t,currentPath:[...t.currentPath,"items",`${o}`]})).reduce((r,o)=>o===void 0?r:[...r,o],[])}}function oR(){return{not:Ft()}}function aR(){return Ft()}var iR=(e,t)=>Oe(e.innerType._def,t),sR=(e,t,r)=>{switch(t){case I.ZodString:return Mx(e,r);case I.ZodNumber:return WN(e);case I.ZodObject:return KN(e,r);case I.ZodBigInt:return CN(e);case I.ZodBoolean:return PN();case I.ZodDate:return jx(e,r);case I.ZodUndefined:return oR();case I.ZodNull:return GN();case I.ZodArray:return AN(e,r);case I.ZodUnion:case I.ZodDiscriminatedUnion:return JN(e,r);case I.ZodIntersection:return zN(e,r);case I.ZodTuple:return nR(e,r);case I.ZodRecord:return Dx(e,r);case I.ZodLiteral:return UN(e);case I.ZodEnum:return MN(e);case I.ZodNativeEnum:return qN(e);case I.ZodNullable:return HN(e,r);case I.ZodOptional:return QN(e,r);case I.ZodMap:return ZN(e,r);case I.ZodSet:return rR(e,r);case I.ZodLazy:return()=>e.getter()._def;case I.ZodPromise:return tR(e,r);case I.ZodNaN:case I.ZodNever:return VN();case I.ZodEffects:return jN(e,r);case I.ZodAny:return Ft();case I.ZodUnknown:return aR();case I.ZodDefault:return RN(e,r);case I.ZodBranded:return Rx(e,r);case I.ZodReadonly:return iR(e,r);case I.ZodCatch:return ON(e,r);case I.ZodPipeline:return eR(e,r);case I.ZodFunction:case I.ZodVoid:case I.ZodSymbol:return;default:return(o=>{})(t)}},lR=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function Oe(e,t,r=!1){var o;let n=t.seen.get(e);if(t.override){let c=(o=t.override)==null?void 0:o.call(t,e,t,n,r);if(c!==$N)return c}if(n&&!r){let c=uR(n,t);if(c!==void 0)return c}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let s=sR(e,e.typeName,t),u=typeof s=="function"?Oe(s(),t):s;if(u&&cR(e,t,u),t.postProcess){let c=t.postProcess(u,e,t);return i.jsonSchema=u,c}return i.jsonSchema=u,u}var uR=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:lR(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,o)=>t.currentPath[o]===r)||t.$refStrategy==="seen"?Ft():void 0}},cR=(e,t,r)=>(e.description&&(r.description=e.description),r),dR=e=>{let t=EN(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([o,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,o],jsonSchema:void 0}]))}},pR=(e,t)=>{var r;let o=dR(t),n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[d,m])=>{var p;return{...l,[d]:(p=Oe(m._def,{...o,currentPath:[...o.basePath,o.definitionPath,d]},!0))!=null?p:Ft()}},{}):void 0,i=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,s=(r=Oe(e._def,i===void 0?o:{...o,currentPath:[...o.basePath,o.definitionPath,i]},!1))!=null?r:Ft(),u=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;u!==void 0&&(s.title=u);let c=i===void 0?n?{...s,[o.definitionPath]:n}:s:{$ref:[...o.$refStrategy==="relative"?[]:o.basePath,o.definitionPath,i].join("/"),[o.definitionPath]:{...n,[i]:s}};return c.$schema="http://json-schema.org/draft-07/schema#",c},of=Symbol.for("vercel.ai.schema");function al(e){let t;return()=>(t==null&&(t=e()),t)}function ti(e,{validate:t}={}){return{[of]:!0,_type:void 0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function mR(e){return typeof e=="object"&&e!==null&&of in e&&e[of]===!0&&"jsonSchema"in e&&"validate"in e}function $r(e){return e==null?ti({properties:{},additionalProperties:!1}):mR(e)?e:"~standard"in e?fR(e):e()}function fR(e){let t=e["~standard"].vendor;switch(t){case"zod":return Er(e);case"arktype":return nl(e,kN);case"effect":return nl(e,IN);case"valibot":return nl(e,TN);default:return nl(e,()=>()=>{throw new Error(`Unsupported standard schema vendor: ${t}`)})}}function nl(e,t){return ti(t(e),{validate:async r=>{let o=await e["~standard"].validate(r);return"value"in o?{success:!0,value:o.value}:{success:!1,error:new Ir({value:r,cause:o.issues})}}})}function gR(e,t){var r;let o=(r=t==null?void 0:t.useReferences)!=null?r:!1;return ti(()=>pR(e,{$refStrategy:o?"root":"none"}),{validate:async n=>{let i=await e.safeParseAsync(n);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function hR(e,t){var r;let o=(r=t==null?void 0:t.useReferences)!=null?r:!1;return ti(()=>Zr(e,{target:"draft-7",io:"output",reused:o?"ref":"inline"}),{validate:async n=>{let i=await qr(e,n);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function vR(e){return"_zod"in e}function Er(e,t){return vR(e)?hR(e,t):gR(e,t)}async function il({value:e,schema:t}){let r=await Ar({value:e,schema:t});if(!r.success)throw Ir.wrap({value:e,cause:r.error});return r.value}async function Ar({value:e,schema:t}){let r=$r(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};let o=await r.validate(e);return o.success?{success:!0,value:o.value,rawValue:e}:{success:!1,error:Ir.wrap({value:e,cause:o.error}),rawValue:e}}catch(o){return{success:!1,error:Ir.wrap({value:e,cause:o}),rawValue:e}}}async function Wt({text:e,schema:t}){try{let r=SN(e);return t==null?{success:!0,value:r,rawValue:r}:await Ar({value:r,schema:t})}catch(r){return{success:!1,error:ef.isInstance(r)?r:new ef({text:e,cause:r}),rawValue:void 0}}}async function af(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var{btoa:yR,atob:_R}=globalThis;function Po(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=_R(t);return Uint8Array.from(r,o=>o.codePointAt(0))}function ri(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return yR(t)}function bR(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}async function*zx({execute:e,input:t,options:r}){let o=e(t,r);if(bR(o)){let n;for await(let i of o)n=i,yield{type:"preliminary",output:i};yield{type:"final",output:n}}else yield{type:"final",output:await o}}var Ux=typeof globalThis=="object"?globalThis:global;var Xr="1.9.0";var Fx=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function xR(e){var t=new Set([e]),r=new Set,o=e.match(Fx);if(!o)return function(){return!1};var n={major:+o[1],minor:+o[2],patch:+o[3],prerelease:o[4]};if(n.prerelease!=null)return function(c){return c===e};function i(u){return r.add(u),!1}function s(u){return t.add(u),!0}return function(c){if(t.has(c))return!0;if(r.has(c))return!1;var l=c.match(Fx);if(!l)return i(c);var d={major:+l[1],minor:+l[2],patch:+l[3],prerelease:l[4]};return d.prerelease!=null||n.major!==d.major?i(c):n.major===0?n.minor===d.minor&&n.patch<=d.patch?s(c):i(c):n.minor<=d.minor?s(c):i(c)}}var Lx=xR(Xr);var wR=Xr.split(".")[0],ni=Symbol.for("opentelemetry.js.api."+wR),oi=Ux;function Oo(e,t,r,o){var n;o===void 0&&(o=!1);var i=oi[ni]=(n=oi[ni])!==null&&n!==void 0?n:{version:Xr};if(!o&&i[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(s.stack||s.message),!1}if(i.version!==Xr){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+Xr);return r.error(s.stack||s.message),!1}return i[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+Xr+"."),!0}function Qr(e){var t,r,o=(t=oi[ni])===null||t===void 0?void 0:t.version;if(!(!o||!Lx(o)))return(r=oi[ni])===null||r===void 0?void 0:r[e]}function No(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Xr+".");var r=oi[ni];r&&delete r[e]}var SR=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){s={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return i},kR=function(e,t,r){if(r||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},Zx=(function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return ai("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return ai("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return ai("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return ai("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return ai("verbose",this._namespace,t)},e})();function ai(e,t,r){var o=Qr("diag");if(o)return r.unshift(t),o[e].apply(o,kR([],SR(r),!1))}var St;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(St||(St={}));function qx(e,t){e<St.NONE?e=St.NONE:e>St.ALL&&(e=St.ALL),t=t||{};function r(o,n){var i=t[o];return typeof i=="function"&&e>=n?i.bind(t):function(){}}return{error:r("error",St.ERROR),warn:r("warn",St.WARN),info:r("info",St.INFO),debug:r("debug",St.DEBUG),verbose:r("verbose",St.VERBOSE)}}var IR=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){s={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return i},TR=function(e,t,r){if(r||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},$R="diag",Ro=(function(){function e(){function t(n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var u=Qr("diag");if(u)return u[n].apply(u,TR([],IR(i),!1))}}var r=this,o=function(n,i){var s,u,c;if(i===void 0&&(i={logLevel:St.INFO}),n===r){var l=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((s=l.stack)!==null&&s!==void 0?s:l.message),!1}typeof i=="number"&&(i={logLevel:i});var d=Qr("diag"),m=qx((u=i.logLevel)!==null&&u!==void 0?u:St.INFO,n);if(d&&!i.suppressOverrideMessage){var p=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+p),m.warn("Current logger will overwrite one already registered from "+p)}return Oo("diag",m,r,!0)};r.setLogger=o,r.disable=function(){No($R,r)},r.createComponentLogger=function(n){return new Zx(n)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e})();function Vx(e){return Symbol.for(e)}var ER=(function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(o){return r._currentContext.get(o)},r.setValue=function(o,n){var i=new e(r._currentContext);return i._currentContext.set(o,n),i},r.deleteValue=function(o){var n=new e(r._currentContext);return n._currentContext.delete(o),n}}return e})(),Gx=new ER;var AR=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){s={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return i},CR=function(e,t,r){if(r||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},Jx=(function(){function e(){}return e.prototype.active=function(){return Gx},e.prototype.with=function(t,r,o){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];return r.call.apply(r,CR([o],AR(n),!1))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e})();var PR=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var o=r.call(e),n,i=[],s;try{for(;(t===void 0||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){s={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return i},OR=function(e,t,r){if(r||arguments.length===2)for(var o=0,n=t.length,i;o<n;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},sf="context",NR=new Jx,sl=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Oo(sf,t,Ro.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,o){for(var n,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(n=this._getContextManager()).with.apply(n,OR([t,r,o],PR(i),!1))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return Qr(sf)||NR},e.prototype.disable=function(){this._getContextManager().disable(),No(sf,Ro.instance())},e})();var ll;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(ll||(ll={}));var lf="0000000000000000",uf="00000000000000000000000000000000",Bx={traceId:uf,spanId:lf,traceFlags:ll.NONE};var _n=(function(){function e(t){t===void 0&&(t=Bx),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e})();var cf=Vx("OpenTelemetry Context Key SPAN");function ul(e){return e.getValue(cf)||void 0}function Hx(){return ul(sl.getInstance().active())}function ii(e,t){return e.setValue(cf,t)}function Wx(e){return e.deleteValue(cf)}function Kx(e,t){return ii(e,new _n(t))}function cl(e){var t;return(t=ul(e))===null||t===void 0?void 0:t.spanContext()}var RR=/^([0-9a-f]{32})$/i,jR=/^[0-9a-f]{16}$/i;function MR(e){return RR.test(e)&&e!==uf}function DR(e){return jR.test(e)&&e!==lf}function dl(e){return MR(e.traceId)&&DR(e.spanId)}function Yx(e){return new _n(e)}var df=sl.getInstance(),pl=(function(){function e(){}return e.prototype.startSpan=function(t,r,o){o===void 0&&(o=df.active());var n=!!(r!=null&&r.root);if(n)return new _n;var i=o&&cl(o);return zR(i)&&dl(i)?new _n(i):new _n},e.prototype.startActiveSpan=function(t,r,o,n){var i,s,u;if(!(arguments.length<2)){arguments.length===2?u=r:arguments.length===3?(i=r,u=o):(i=r,s=o,u=n);var c=s!=null?s:df.active(),l=this.startSpan(t,i,c),d=ii(c,l);return df.with(d,u,void 0,l)}},e})();function zR(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var UR=new pl,Xx=(function(){function e(t,r,o,n){this._provider=t,this.name=r,this.version=o,this.options=n}return e.prototype.startSpan=function(t,r,o){return this._getTracer().startSpan(t,r,o)},e.prototype.startActiveSpan=function(t,r,o,n){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):UR},e})();var Qx=(function(){function e(){}return e.prototype.getTracer=function(t,r,o){return new pl},e})();var FR=new Qx,pf=(function(){function e(){}return e.prototype.getTracer=function(t,r,o){var n;return(n=this.getDelegateTracer(t,r,o))!==null&&n!==void 0?n:new Xx(this,t,r,o)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:FR},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,o){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(t,r,o)},e})();var jo;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(jo||(jo={}));var mf="trace",ew=(function(){function e(){this._proxyTracerProvider=new pf,this.wrapSpanContext=Yx,this.isSpanContextValid=dl,this.deleteSpan=Wx,this.getSpan=ul,this.getActiveSpan=Hx,this.getSpanContext=cl,this.setSpan=ii,this.setSpanContext=Kx}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=Oo(mf,this._proxyTracerProvider,Ro.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return Qr(mf)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){No(mf,Ro.instance()),this._proxyTracerProvider=new pf},e})();var ff=ew.getInstance();var ZR=Object.defineProperty,qR=(e,t)=>{for(var r in t)ZR(e,r,{get:t[r],enumerable:!0})};var tw=!1,xf=e=>{if(e.warnings.length===0)return;let t=globalThis.AI_SDK_LOG_WARNINGS;if(t!==!1){if(typeof t=="function"){t(e);return}tw||(tw=!0);for(let r of e.warnings);}},dw="AI_InvalidArgumentError",pw=`vercel.ai.error.${dw}`,VR=Symbol.for(pw),mw,Cr=class extends ie{constructor({parameter:e,value:t,message:r}){super({name:dw,message:`Invalid argument for parameter ${e}: ${r}`}),this[mw]=!0,this.parameter=e,this.value=t}static isInstance(e){return ie.hasMarker(e,pw)}};mw=VR;var GR="AI_InvalidStreamPartError",JR=`vercel.ai.error.${GR}`,BR=Symbol.for(JR),HR;HR=BR;var fw="AI_InvalidToolInputError",gw=`vercel.ai.error.${fw}`,WR=Symbol.for(gw),hw,wf=class extends ie{constructor({toolInput:e,toolName:t,cause:r,message:o=`Invalid input for tool ${t}: ${kr(r)}`}){super({name:fw,message:o,cause:r}),this[hw]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return ie.hasMarker(e,gw)}};hw=WR;var KR="AI_NoImageGeneratedError",YR=`vercel.ai.error.${KR}`,XR=Symbol.for(YR),QR;QR=XR;var vw="AI_NoObjectGeneratedError",yw=`vercel.ai.error.${vw}`,ej=Symbol.for(yw),_w,bn=class extends ie{constructor({message:e="No object generated.",cause:t,text:r,response:o,usage:n,finishReason:i}){super({name:vw,message:e,cause:t}),this[_w]=!0,this.text=r,this.response=o,this.usage=n,this.finishReason=i}static isInstance(e){return ie.hasMarker(e,yw)}};_w=ej;var bw="AI_NoOutputGeneratedError",xw=`vercel.ai.error.${bw}`,tj=Symbol.for(xw),ww,Sw=class extends ie{constructor({message:e="No output generated.",cause:t}={}){super({name:bw,message:e,cause:t}),this[ww]=!0}static isInstance(e){return ie.hasMarker(e,xw)}};ww=tj;var kw="AI_NoSuchToolError",Iw=`vercel.ai.error.${kw}`,rj=Symbol.for(Iw),Tw,hf=class extends ie{constructor({toolName:e,availableTools:t=void 0,message:r=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:kw,message:r}),this[Tw]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return ie.hasMarker(e,Iw)}};Tw=rj;var $w="AI_ToolCallRepairError",Ew=`vercel.ai.error.${$w}`,nj=Symbol.for(Ew),Aw,oj=class extends ie{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${kr(e)}`}){super({name:$w,message:r,cause:e}),this[Aw]=!0,this.originalError=t}static isInstance(e){return ie.hasMarker(e,Ew)}};Aw=nj;var aj=class extends ie{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},ij="AI_InvalidDataContentError",sj=`vercel.ai.error.${ij}`,lj=Symbol.for(sj),uj;uj=lj;var Cw="AI_InvalidMessageRoleError",Pw=`vercel.ai.error.${Cw}`,cj=Symbol.for(Pw),Ow,dj=class extends ie{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:Cw,message:t}),this[Ow]=!0,this.role=e}static isInstance(e){return ie.hasMarker(e,Pw)}};Ow=cj;var pj="AI_MessageConversionError",mj=`vercel.ai.error.${pj}`,fj=Symbol.for(mj),gj;gj=fj;var Nw="AI_DownloadError",Rw=`vercel.ai.error.${Nw}`,hj=Symbol.for(Rw),jw,gf=class extends ie{constructor({url:e,statusCode:t,statusText:r,cause:o,message:n=o==null?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${o}`}){super({name:Nw,message:n,cause:o}),this[jw]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return ie.hasMarker(e,Rw)}};jw=hj;var Mw="AI_RetryError",Dw=`vercel.ai.error.${Mw}`,vj=Symbol.for(Dw),zw,rw=class extends ie{constructor({message:e,reason:t,errors:r}){super({name:Mw,message:e}),this[zw]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return ie.hasMarker(e,Dw)}};zw=vj;function yj({provider:e,modelId:t}){xf({warnings:[{type:"compatibility",feature:"specificationVersion",details:"Using v2 specification compatibility mode. Some features may not be available."}],provider:e,model:t})}function _j(e){return e.specificationVersion==="v3"?e:(yj({provider:e.provider,modelId:e.modelId}),new Proxy(e,{get(t,r){return r==="specificationVersion"?"v3":t[r]}}))}function gl(e){if(typeof e!="string"){if(e.specificationVersion!=="v3"&&e.specificationVersion!=="v2"){let t=e;throw new aj({version:t.specificationVersion,provider:t.provider,modelId:t.modelId})}return _j(e)}return bj().languageModel(e)}function bj(){var e;return(e=globalThis.AI_SDK_DEFAULT_PROVIDER)!=null?e:wb}var xj=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}];var wj=e=>{let t=typeof e=="string"?Po(e):e,r=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(r+10)};function Sj(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?wj(e):e}function kj({data:e,signatures:t}){let r=Sj(e),o=typeof r=="string"?Po(r.substring(0,Math.min(r.length,24))):r;for(let n of t)if(o.length>=n.bytesPrefix.length&&n.bytesPrefix.every((i,s)=>i===null||o[s]===i))return n.mediaType}var Uw="6.0.0-beta.134",Ij=async({url:e})=>{var t;let r=e.toString();try{let o=await fetch(r,{headers:ei({},`ai-sdk/${Uw}`,Ox())});if(!o.ok)throw new gf({url:r,statusCode:o.status,statusText:o.statusText});return{data:new Uint8Array(await o.arrayBuffer()),mediaType:(t=o.headers.get("content-type"))!=null?t:void 0}}catch(o){throw gf.isInstance(o)?o:new gf({url:r,cause:o})}},Tj=(e=Ij)=>t=>Promise.all(t.map(async r=>r.isUrlSupportedByModel?null:e(r)));function $j(e){try{let[t,r]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:r}}catch(t){return{mediaType:void 0,base64Content:void 0}}}var Fw=a.union([a.string(),a.instanceof(Uint8Array),a.instanceof(ArrayBuffer),a.custom(e=>{var t,r;return(r=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?r:!1},{message:"Must be a Buffer"})]);function Lw(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if(typeof e=="string")try{e=new URL(e)}catch(t){}if(e instanceof URL&&e.protocol==="data:"){let{mediaType:t,base64Content:r}=$j(e.toString());if(t==null||r==null)throw new ie({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:r,mediaType:t}}return{data:e,mediaType:void 0}}function Ej(e){return typeof e=="string"?e:e instanceof ArrayBuffer?ri(new Uint8Array(e)):ri(e)}async function Zw({prompt:e,supportedUrls:t,download:r=Tj()}){let o=await Cj(e.messages,r,t),n=[...e.system!=null?typeof e.system=="string"?[{role:"system",content:e.system}]:[{role:"system",content:e.system.content,providerOptions:e.system.providerOptions}]:[],...e.messages.map(s=>Aj({message:s,downloadedAssets:o}))],i=[];for(let s of n){if(s.role!=="tool"){i.push(s);continue}let u=i.at(-1);(u==null?void 0:u.role)==="tool"?u.content.push(...s.content):i.push(s)}return i}function Aj({message:e,downloadedAssets:t}){let r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerOptions:e.providerOptions};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"user",content:e.content.map(o=>Pj(o,t)).filter(o=>o.type!=="text"||o.text!==""),providerOptions:e.providerOptions};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"assistant",content:e.content.filter(o=>o.type!=="text"||o.text!==""||o.providerOptions!=null).filter(o=>o.type!=="tool-approval-request").map(o=>{let n=o.providerOptions;switch(o.type){case"file":{let{data:i,mediaType:s}=Lw(o.data);return{type:"file",data:i,filename:o.filename,mediaType:s!=null?s:o.mediaType,providerOptions:n}}case"reasoning":return{type:"reasoning",text:o.text,providerOptions:n};case"text":return{type:"text",text:o.text,providerOptions:n};case"tool-call":return{type:"tool-call",toolCallId:o.toolCallId,toolName:o.toolName,input:o.input,providerExecuted:o.providerExecuted,providerOptions:n};case"tool-result":return{type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,output:nw(o.output),providerOptions:n}}}),providerOptions:e.providerOptions};case"tool":return{role:"tool",content:e.content.filter(o=>o.type!=="tool-approval-response").map(o=>({type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,output:nw(o.output),providerOptions:o.providerOptions})),providerOptions:e.providerOptions};default:{let o=r;throw new dj({role:o})}}}async function Cj(e,t,r){let o=e.filter(i=>i.role==="user").map(i=>i.content).filter(i=>Array.isArray(i)).flat().filter(i=>i.type==="image"||i.type==="file").map(i=>{var s;let u=(s=i.mediaType)!=null?s:i.type==="image"?"image/*":void 0,c=i.type==="image"?i.image:i.data;if(typeof c=="string")try{c=new URL(c)}catch(l){}return{mediaType:u,data:c}}).filter(i=>i.data instanceof URL).map(i=>({url:i.data,isUrlSupportedByModel:i.mediaType!=null&&Nx({url:i.data.toString(),mediaType:i.mediaType,supportedUrls:r})})),n=await t(o);return Object.fromEntries(n.map((i,s)=>i==null?null:[o[s].url.toString(),{data:i.data,mediaType:i.mediaType}]).filter(i=>i!=null))}function Pj(e,t){var r;if(e.type==="text")return{type:"text",text:e.text,providerOptions:e.providerOptions};let o,n=e.type;switch(n){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${n}`)}let{data:i,mediaType:s}=Lw(o),u=s!=null?s:e.mediaType,c=i;if(c instanceof URL){let l=t[c.toString()];l&&(c=l.data,u!=null||(u=l.mediaType))}switch(n){case"image":return(c instanceof Uint8Array||typeof c=="string")&&(u=(r=kj({data:c,signatures:xj}))!=null?r:u),{type:"file",mediaType:u!=null?u:"image/*",filename:void 0,data:c,providerOptions:e.providerOptions};case"file":{if(u==null)throw new Error("Media type is missing for file part");return{type:"file",mediaType:u,filename:e.filename,data:c,providerOptions:e.providerOptions}}}}function nw(e){return e.type!=="content"?e:{type:"content",value:e.value.map(t=>t.type!=="media"?t:t.mediaType.startsWith("image/")?{type:"image-data",data:t.data,mediaType:t.mediaType}:{type:"file-data",data:t.data,mediaType:t.mediaType})}}function li({output:e,tool:t,errorMode:r}){return r==="text"?{type:"error-text",value:kr(e)}:r==="json"?{type:"error-json",value:ow(e)}:t!=null&&t.toModelOutput?t.toModelOutput(e):typeof e=="string"?{type:"text",value:e}:{type:"json",value:ow(e)}}function ow(e){return e===void 0?null:e}function vf({maxOutputTokens:e,temperature:t,topP:r,topK:o,presencePenalty:n,frequencyPenalty:i,seed:s,stopSequences:u}){if(e!=null){if(!Number.isInteger(e))throw new Cr({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be an integer"});if(e<1)throw new Cr({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Cr({parameter:"temperature",value:t,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new Cr({parameter:"topP",value:r,message:"topP must be a number"});if(o!=null&&typeof o!="number")throw new Cr({parameter:"topK",value:o,message:"topK must be a number"});if(n!=null&&typeof n!="number")throw new Cr({parameter:"presencePenalty",value:n,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Cr({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new Cr({parameter:"seed",value:s,message:"seed must be an integer"});return{maxOutputTokens:e,temperature:t,topP:r,topK:o,presencePenalty:n,frequencyPenalty:i,stopSequences:u,seed:s}}function Oj(e){return e!=null&&Object.keys(e).length>0}async function qw({tools:e,toolChoice:t,activeTools:r}){if(!Oj(e))return{tools:void 0,toolChoice:void 0};let o=r!=null?Object.entries(e).filter(([i])=>r.includes(i)):Object.entries(e),n=[];for(let[i,s]of o){let u=s.type;switch(u){case void 0:case"dynamic":case"function":n.push({type:"function",name:i,description:s.description,inputSchema:await $r(s.inputSchema).jsonSchema,...s.inputExamples!=null?{inputExamples:s.inputExamples}:{},providerOptions:s.providerOptions,...s.strict!=null?{strict:s.strict}:{}});break;case"provider":n.push({type:"provider",name:i,id:s.id,args:s.args});break;default:{let c=u;throw new Error(`Unsupported tool type: ${c}`)}}}return{tools:n,toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}}var ui=a.lazy(()=>a.union([a.null(),a.string(),a.number(),a.boolean(),a.record(a.string(),ui.optional()),a.array(ui)])),se=a.record(a.string(),a.record(a.string(),ui.optional())),Vw=a.object({type:a.literal("text"),text:a.string(),providerOptions:se.optional()}),Nj=a.object({type:a.literal("image"),image:a.union([Fw,a.instanceof(URL)]),mediaType:a.string().optional(),providerOptions:se.optional()}),Gw=a.object({type:a.literal("file"),data:a.union([Fw,a.instanceof(URL)]),filename:a.string().optional(),mediaType:a.string(),providerOptions:se.optional()}),Rj=a.object({type:a.literal("reasoning"),text:a.string(),providerOptions:se.optional()}),jj=a.object({type:a.literal("tool-call"),toolCallId:a.string(),toolName:a.string(),input:a.unknown(),providerOptions:se.optional(),providerExecuted:a.boolean().optional()}),Mj=a.discriminatedUnion("type",[a.object({type:a.literal("text"),value:a.string(),providerOptions:se.optional()}),a.object({type:a.literal("json"),value:ui,providerOptions:se.optional()}),a.object({type:a.literal("execution-denied"),reason:a.string().optional(),providerOptions:se.optional()}),a.object({type:a.literal("error-text"),value:a.string(),providerOptions:se.optional()}),a.object({type:a.literal("error-json"),value:ui,providerOptions:se.optional()}),a.object({type:a.literal("content"),value:a.array(a.union([a.object({type:a.literal("text"),text:a.string(),providerOptions:se.optional()}),a.object({type:a.literal("media"),data:a.string(),mediaType:a.string()}),a.object({type:a.literal("file-data"),data:a.string(),mediaType:a.string(),filename:a.string().optional(),providerOptions:se.optional()}),a.object({type:a.literal("file-url"),url:a.string(),providerOptions:se.optional()}),a.object({type:a.literal("file-id"),fileId:a.union([a.string(),a.record(a.string(),a.string())]),providerOptions:se.optional()}),a.object({type:a.literal("image-data"),data:a.string(),mediaType:a.string(),providerOptions:se.optional()}),a.object({type:a.literal("image-url"),url:a.string(),providerOptions:se.optional()}),a.object({type:a.literal("image-file-id"),fileId:a.union([a.string(),a.record(a.string(),a.string())]),providerOptions:se.optional()}),a.object({type:a.literal("custom"),providerOptions:se.optional()})]))})]),Jw=a.object({type:a.literal("tool-result"),toolCallId:a.string(),toolName:a.string(),output:Mj,providerOptions:se.optional()}),Dj=a.object({type:a.literal("tool-approval-request"),approvalId:a.string(),toolCallId:a.string()}),zj=a.object({type:a.literal("tool-approval-response"),approvalId:a.string(),approved:a.boolean(),reason:a.string().optional()}),Uj=a.object({role:a.literal("system"),content:a.string(),providerOptions:se.optional()}),Fj=a.object({role:a.literal("user"),content:a.union([a.string(),a.array(a.union([Vw,Nj,Gw]))]),providerOptions:se.optional()}),Lj=a.object({role:a.literal("assistant"),content:a.union([a.string(),a.array(a.union([Vw,Gw,Rj,jj,Jw,Dj]))]),providerOptions:se.optional()}),Zj=a.object({role:a.literal("tool"),content:a.array(a.union([Jw,zj])),providerOptions:se.optional()}),qj=a.union([Uj,Fj,Lj,Zj]);async function Bw(e){if(e.prompt==null&&e.messages==null)throw new Un({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Un({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string"&&"role"in e.system&&e.system.role!=="system")throw new Un({prompt:e,message:"system must be a string"});let t;if(e.prompt!=null&&typeof e.prompt=="string")t=[{role:"user",content:e.prompt}];else if(e.prompt!=null&&Array.isArray(e.prompt))t=e.prompt;else if(e.messages!=null)t=e.messages;else throw new Un({prompt:e,message:"prompt or messages must be defined"});if(t.length===0)throw new Un({prompt:e,message:"messages must not be empty"});let r=await Ar({value:t,schema:a.array(qj)});if(!r.success)throw new Un({prompt:e,message:"The messages do not match the ModelMessage[] schema.",cause:r.error});return{messages:t,system:e.system}}function Hw(e){return rl.isInstance(e)||Xm.isInstance(e)?new ie({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:e}):e}function ci({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function Ww({model:e,settings:t,telemetry:r,headers:o}){var n;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[s,u])=>(i[`ai.settings.${s}`]=u,i),{}),...Object.entries((n=r==null?void 0:r.metadata)!=null?n:{}).reduce((i,[s,u])=>(i[`ai.telemetry.metadata.${s}`]=u,i),{}),...Object.entries(o!=null?o:{}).reduce((i,[s,u])=>(u!==void 0&&(i[`ai.request.headers.${s}`]=u),i),{})}}var Vj={startSpan(){return ml},startActiveSpan(e,t,r,o){if(typeof t=="function")return t(ml);if(typeof r=="function")return r(ml);if(typeof o=="function")return o(ml)}},ml={spanContext(){return Gj},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},Gj={traceId:"",spanId:"",traceFlags:0};function Kw({isEnabled:e=!1,tracer:t}={}){return e?t||ff.getTracer("ai"):Vj}async function di({name:e,tracer:t,attributes:r,fn:o,endWhenDone:n=!0}){return t.startActiveSpan(e,{attributes:await r},async i=>{try{let s=await o(i);return n&&i.end(),s}catch(s){try{Yw(i,s)}finally{i.end()}throw s}})}function Yw(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:jo.ERROR,message:t.message})):e.setStatus({code:jo.ERROR})}async function Pr({telemetry:e,attributes:t}){if((e==null?void 0:e.isEnabled)!==!0)return{};let r={};for(let[o,n]of Object.entries(t))if(n!=null){if(typeof n=="object"&&"input"in n&&typeof n.input=="function"){if((e==null?void 0:e.recordInputs)===!1)continue;let i=await n.input();i!=null&&(r[o]=i);continue}if(typeof n=="object"&&"output"in n&&typeof n.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)continue;let i=await n.output();i!=null&&(r[o]=i);continue}r[o]=n}return r}function Xw(e){return JSON.stringify(e.map(t=>({...t,content:typeof t.content=="string"?t.content:t.content.map(r=>r.type==="file"?{...r,data:r.data instanceof Uint8Array?Ej(r.data):r.data}:r)})))}function Qw(e,t){return{inputTokens:si(e.inputTokens,t.inputTokens),outputTokens:si(e.outputTokens,t.outputTokens),totalTokens:si(e.totalTokens,t.totalTokens),reasoningTokens:si(e.reasoningTokens,t.reasoningTokens),cachedInputTokens:si(e.cachedInputTokens,t.cachedInputTokens)}}function si(e,t){return e==null&&t==null?void 0:(e!=null?e:0)+(t!=null?t:0)}function yf(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function Jj({error:e,exponentialBackoffDelay:t}){let r=e.responseHeaders;if(!r)return t;let o,n=r["retry-after-ms"];if(n){let s=parseFloat(n);Number.isNaN(s)||(o=s)}let i=r["retry-after"];if(i&&o===void 0){let s=parseFloat(i);Number.isNaN(s)?o=Date.parse(i)-Date.now():o=s*1e3}return o!=null&&!Number.isNaN(o)&&0<=o&&(o<60*1e3||o<t)?o:t}var Bj=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2,abortSignal:o}={})=>async n=>eS(n,{maxRetries:e,delayInMs:t,backoffFactor:r,abortSignal:o});async function eS(e,{maxRetries:t,delayInMs:r,backoffFactor:o,abortSignal:n},i=[]){try{return await e()}catch(s){if(ol(s)||t===0)throw s;let u=Co(s),c=[...i,s],l=c.length;if(l>t)throw new rw({message:`Failed after ${l} attempts. Last error: ${u}`,reason:"maxRetriesExceeded",errors:c});if(s instanceof Error&&tx.isInstance(s)&&s.isRetryable===!0&&l<=t)return await Px(Jj({error:s,exponentialBackoffDelay:r}),{abortSignal:n}),eS(e,{maxRetries:t,delayInMs:o*r,backoffFactor:o,abortSignal:n},c);throw l===1?s:new rw({message:`Failed after ${l} attempts with non-retryable error: '${u}'`,reason:"errorNotRetryable",errors:c})}}function tS({maxRetries:e,abortSignal:t}){if(e!=null){if(!Number.isInteger(e))throw new Cr({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Cr({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let r=e!=null?e:2;return{maxRetries:r,retry:Bj({maxRetries:r,abortSignal:t})}}function rS({messages:e}){let t=e.at(-1);if((t==null?void 0:t.role)!="tool")return{approvedToolApprovals:[],deniedToolApprovals:[]};let r={};for(let c of e)if(c.role==="assistant"&&typeof c.content!="string"){let l=c.content;for(let d of l)d.type==="tool-call"&&(r[d.toolCallId]=d)}let o={};for(let c of e)if(c.role==="assistant"&&typeof c.content!="string"){let l=c.content;for(let d of l)d.type==="tool-approval-request"&&(o[d.approvalId]=d)}let n={};for(let c of t.content)c.type==="tool-result"&&(n[c.toolCallId]=c);let i=[],s=[],u=t.content.filter(c=>c.type==="tool-approval-response");for(let c of u){let l=o[c.approvalId];if(n[l.toolCallId]!=null)continue;let d={approvalRequest:l,approvalResponse:c,toolCall:r[l.toolCallId]};c.approved?i.push(d):s.push(d)}return{approvedToolApprovals:i,deniedToolApprovals:s}}async function Sf({toolCall:e,tools:t,tracer:r,telemetry:o,messages:n,abortSignal:i,experimental_context:s,onPreliminaryToolResult:u}){let{toolName:c,toolCallId:l,input:d}=e,m=t==null?void 0:t[c];if((m==null?void 0:m.execute)!=null)return di({name:"ai.toolCall",attributes:Pr({telemetry:o,attributes:{...ci({operationId:"ai.toolCall",telemetry:o}),"ai.toolCall.name":c,"ai.toolCall.id":l,"ai.toolCall.args":{output:()=>JSON.stringify(d)}}}),tracer:r,fn:async p=>{let g;try{let h=zx({execute:m.execute.bind(m),input:d,options:{toolCallId:l,messages:n,abortSignal:i,experimental_context:s}});for await(let v of h)v.type==="preliminary"?u==null||u({...e,type:"tool-result",output:v.output,preliminary:!0}):g=v.output}catch(h){return Yw(p,h),{type:"tool-error",toolCallId:l,toolName:c,input:d,error:h,dynamic:m.type==="dynamic",...e.providerMetadata!=null?{providerMetadata:e.providerMetadata}:{}}}try{p.setAttributes(await Pr({telemetry:o,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(g)}}}))}catch(h){}return{type:"tool-result",toolCallId:l,toolName:c,input:d,output:g,dynamic:m.type==="dynamic",...e.providerMetadata!=null?{providerMetadata:e.providerMetadata}:{}}}})}function aw(e){let t=e.filter(r=>r.type==="text");if(t.length!==0)return t.map(r=>r.text).join("")}var nS=class{constructor({data:e,mediaType:t}){let r=e instanceof Uint8Array;this.base64Data=r?void 0:e,this.uint8ArrayData=r?e:void 0,this.mediaType=t}get base64(){return this.base64Data==null&&(this.base64Data=ri(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=Po(this.base64Data)),this.uint8ArrayData}},Hj=class extends nS{constructor(e){super(e),this.type="file"}};async function oS({tool:e,toolCall:t,messages:r,experimental_context:o}){return e.needsApproval==null?!1:typeof e.needsApproval=="boolean"?e.needsApproval:await e.needsApproval(t.input,{toolCallId:t.toolCallId,messages:r,experimental_context:o})}var Wj={};qR(Wj,{array:()=>Xj,choice:()=>Qj,json:()=>eM,object:()=>Yj,text:()=>hl});function Kj(e){let t=["ROOT"],r=-1,o=null;function n(c,l,d){switch(c){case'"':{r=l,t.pop(),t.push(d),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=l,o=l,t.pop(),t.push(d),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=l,t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"{":{r=l,t.pop(),t.push(d),t.push("INSIDE_OBJECT_START");break}case"[":{r=l,t.pop(),t.push(d),t.push("INSIDE_ARRAY_START");break}}}function i(c,l){switch(c){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=l,t.pop();break}}}function s(c,l){switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=l,t.pop();break}}}for(let c=0;c<e.length;c++){let l=e[c];switch(t[t.length-1]){case"ROOT":n(l,c,"FINISH");break;case"INSIDE_OBJECT_START":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{r=c,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(l){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{n(l,c,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(l,c);break}case"INSIDE_STRING":{switch(l){case'"':{t.pop(),r=c;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:r=c}break}case"INSIDE_ARRAY_START":{switch(l){case"]":{r=c,t.pop();break}default:{r=c,n(l,c,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=c,t.pop();break}default:{r=c;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{n(l,c,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),r=c;break}case"INSIDE_NUMBER":{switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=c;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(l,c),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(l,c);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(l,c);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(l,c);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{let m=e.substring(o,c+1);!"false".startsWith(m)&&!"true".startsWith(m)&&!"null".startsWith(m)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(l,c):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(l,c)):r=c;break}}}let u=e.slice(0,r+1);for(let c=t.length-1;c>=0;c--)switch(t[c]){case"INSIDE_STRING":{u+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{u+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{u+="]";break}case"INSIDE_LITERAL":{let d=e.substring(o,e.length);"true".startsWith(d)?u+="true".slice(d.length):"false".startsWith(d)?u+="false".slice(d.length):"null".startsWith(d)&&(u+="null".slice(d.length))}}return u}async function pi(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await Wt({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await Wt({text:Kj(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var hl=()=>({responseFormat:Promise.resolve({type:"text"}),async parseCompleteOutput({text:e}){return e},async parsePartialOutput({text:e}){return{partial:e}}}),Yj=({schema:e})=>{let t=$r(e);return{responseFormat:af(t.jsonSchema).then(r=>({type:"json",schema:r})),async parseCompleteOutput({text:r},o){let n=await Wt({text:r});if(!n.success)throw new bn({message:"No object generated: could not parse the response.",cause:n.error,text:r,response:o.response,usage:o.usage,finishReason:o.finishReason});let i=await Ar({value:n.value,schema:t});if(!i.success)throw new bn({message:"No object generated: response did not match schema.",cause:i.error,text:r,response:o.response,usage:o.usage,finishReason:o.finishReason});return i.value},async parsePartialOutput({text:r}){let o=await pi(r);switch(o.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:o.value}}}}},Xj=({element:e})=>{let t=$r(e);return{responseFormat:af(t.jsonSchema).then(r=>{let{$schema:o,...n}=r;return{type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:n}},required:["elements"],additionalProperties:!1}}}),async parseCompleteOutput({text:r},o){let n=await Wt({text:r});if(!n.success)throw new bn({message:"No object generated: could not parse the response.",cause:n.error,text:r,response:o.response,usage:o.usage,finishReason:o.finishReason});let i=n.value;if(i==null||typeof i!="object"||!("elements"in i)||!Array.isArray(i.elements))throw new bn({message:"No object generated: response did not match schema.",cause:new Ir({value:i,cause:"response must be an object with an elements array"}),text:r,response:o.response,usage:o.usage,finishReason:o.finishReason});for(let s of i.elements){let u=await Ar({value:s,schema:t});if(!u.success)throw new bn({message:"No object generated: response did not match schema.",cause:u.error,text:r,response:o.response,usage:o.usage,finishReason:o.finishReason})}return i.elements},async parsePartialOutput({text:r}){let o=await pi(r);switch(o.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{let n=o.value;if(n==null||typeof n!="object"||!("elements"in n)||!Array.isArray(n.elements))return;let i=o.state==="repaired-parse"&&n.elements.length>0?n.elements.slice(0,-1):n.elements,s=[];for(let u of i){let c=await Ar({value:u,schema:t});c.success&&s.push(c.value)}return{partial:s}}}}}},Qj=({options:e})=>({responseFormat:Promise.resolve({type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1}}),async parseCompleteOutput({text:t},r){let o=await Wt({text:t});if(!o.success)throw new bn({message:"No object generated: could not parse the response.",cause:o.error,text:t,response:r.response,usage:r.usage,finishReason:r.finishReason});let n=o.value;if(n==null||typeof n!="object"||!("result"in n)||typeof n.result!="string"||!e.includes(n.result))throw new bn({message:"No object generated: response did not match schema.",cause:new Ir({value:n,cause:"response must be an object that contains a choice value."}),text:t,response:r.response,usage:r.usage,finishReason:r.finishReason});return n.result},async parsePartialOutput({text:t}){let r=await pi(t);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{let o=r.value;if(o==null||typeof o!="object"||!("result"in o)||typeof o.result!="string")return;let n=e.filter(i=>i.startsWith(o.result));return r.state==="successful-parse"?n.includes(o.result)?{partial:o.result}:void 0:n.length===1?{partial:n[0]}:void 0}}}}),eM=()=>({responseFormat:Promise.resolve({type:"json"}),async parseCompleteOutput({text:e},t){let r=await Wt({text:e});if(!r.success)throw new bn({message:"No object generated: could not parse the response.",cause:r.error,text:e,response:t.response,usage:t.usage,finishReason:t.finishReason});return r.value},async parsePartialOutput({text:e}){let t=await pi(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return t.value===void 0?void 0:{partial:t.value}}}});async function aS({toolCall:e,tools:t,repairToolCall:r,system:o,messages:n}){var i;try{if(t==null){if(e.providerExecuted&&e.dynamic)return await iS(e);throw new hf({toolName:e.toolName})}try{return await iw({toolCall:e,tools:t})}catch(s){if(r==null||!(hf.isInstance(s)||wf.isInstance(s)))throw s;let u=null;try{u=await r({toolCall:e,tools:t,inputSchema:async({toolName:c})=>{let{inputSchema:l}=t[c];return await $r(l).jsonSchema},system:o,messages:n,error:s})}catch(c){throw new oj({cause:c,originalError:s})}if(u==null)throw s;return await iw({toolCall:u,tools:t})}}catch(s){let u=await Wt({text:e.input}),c=u.success?u.value:e.input;return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:c,dynamic:!0,invalid:!0,error:s,title:(i=t==null?void 0:t[e.toolName])==null?void 0:i.title,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}}async function iS(e){let t=e.input.trim()===""?{success:!0,value:{}}:await Wt({text:e.input});if(t.success===!1)throw new wf({toolName:e.toolName,toolInput:e.input,cause:t.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:t.value,providerExecuted:!0,dynamic:!0,providerMetadata:e.providerMetadata}}async function iw({toolCall:e,tools:t}){let r=e.toolName,o=t[r];if(o==null){if(e.providerExecuted&&e.dynamic)return await iS(e);throw new hf({toolName:e.toolName,availableTools:Object.keys(t)})}let n=$r(o.inputSchema),i=e.input.trim()===""?await Ar({value:{},schema:n}):await Wt({text:e.input,schema:n});if(i.success===!1)throw new wf({toolName:r,toolInput:e.input,cause:i.error});return o.type==="dynamic"?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:i.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0,title:o.title}:{type:"tool-call",toolCallId:e.toolCallId,toolName:r,input:i.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,title:o.title}}var sS=class{constructor({content:e,finishReason:t,usage:r,warnings:o,request:n,response:i,providerMetadata:s}){this.content=e,this.finishReason=t,this.usage=r,this.warnings=o,this.request=n,this.response=i,this.providerMetadata=s}get text(){return this.content.filter(e=>e.type==="text").map(e=>e.text).join("")}get reasoning(){return this.content.filter(e=>e.type==="reasoning")}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(e=>e.text).join("")}get files(){return this.content.filter(e=>e.type==="file").map(e=>e.file)}get sources(){return this.content.filter(e=>e.type==="source")}get toolCalls(){return this.content.filter(e=>e.type==="tool-call")}get staticToolCalls(){return this.toolCalls.filter(e=>e.dynamic!==!0)}get dynamicToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!0)}get toolResults(){return this.content.filter(e=>e.type==="tool-result")}get staticToolResults(){return this.toolResults.filter(e=>e.dynamic!==!0)}get dynamicToolResults(){return this.toolResults.filter(e=>e.dynamic===!0)}};function lS(e){return({steps:t})=>t.length===e}async function uS({stopConditions:e,steps:t}){return(await Promise.all(e.map(r=>r({steps:t})))).some(r=>r)}function _f({content:e,tools:t}){let r=[],o=e.filter(i=>i.type!=="source").filter(i=>(i.type!=="tool-result"||i.providerExecuted)&&(i.type!=="tool-error"||i.providerExecuted)).filter(i=>i.type!=="text"||i.text.length>0).map(i=>{switch(i.type){case"text":return{type:"text",text:i.text,providerOptions:i.providerMetadata};case"reasoning":return{type:"reasoning",text:i.text,providerOptions:i.providerMetadata};case"file":return{type:"file",data:i.file.base64,mediaType:i.file.mediaType,providerOptions:i.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:i.toolCallId,toolName:i.toolName,input:i.input,providerExecuted:i.providerExecuted,providerOptions:i.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:li({tool:t==null?void 0:t[i.toolName],output:i.output,errorMode:"none"}),providerExecuted:!0,providerOptions:i.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:li({tool:t==null?void 0:t[i.toolName],output:i.error,errorMode:"json"}),providerOptions:i.providerMetadata};case"tool-approval-request":return{type:"tool-approval-request",approvalId:i.approvalId,toolCallId:i.toolCall.toolCallId}}});o.length>0&&r.push({role:"assistant",content:o});let n=e.filter(i=>i.type==="tool-result"||i.type==="tool-error").filter(i=>!i.providerExecuted).map(i=>({type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:li({tool:t==null?void 0:t[i.toolName],output:i.type==="tool-result"?i.output:i.error,errorMode:i.type==="tool-error"?"text":"none"}),...i.providerMetadata!=null?{providerOptions:i.providerMetadata}:{}}));return n.length>0&&r.push({role:"tool",content:n}),r}var tM=Tr({prefix:"aitxt",size:24});async function kf({model:e,tools:t,toolChoice:r,system:o,prompt:n,messages:i,maxRetries:s,abortSignal:u,headers:c,stopWhen:l=lS(1),experimental_output:d,output:m=d,experimental_telemetry:p,providerOptions:g,experimental_activeTools:h,activeTools:v=h,experimental_prepareStep:_,prepareStep:w=_,experimental_repairToolCall:x,experimental_download:f,experimental_context:b,_internal:{generateId:y=tM,currentDate:k=()=>new Date}={},onStepFinish:$,onFinish:O,...L}){let F=gl(e),U=yf(l),{maxRetries:Z,retry:E}=tS({maxRetries:s,abortSignal:u}),z=vf(L),J=ei(c!=null?c:{},`ai/${Uw}`),B=Ww({model:F,telemetry:p,headers:J,settings:{...z,maxRetries:Z}}),D=await Bw({system:o,prompt:n,messages:i}),H=Kw(p);try{return await di({name:"ai.generateText",attributes:Pr({telemetry:p,attributes:{...ci({operationId:"ai.generateText",telemetry:p}),...B,"ai.model.provider":F.provider,"ai.model.id":F.modelId,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:n,messages:i})}}}),tracer:H,fn:async G=>{var C,Q,A,M,P,ee,te;let Y=D.messages,me=[],{approvedToolApprovals:qt,deniedToolApprovals:ge}=rS({messages:Y});if(ge.length>0||qt.length>0){let Ce=await sw({toolCalls:qt.map(q=>q.toolCall),tools:t,tracer:H,telemetry:p,messages:Y,abortSignal:u,experimental_context:b});me.push({role:"tool",content:[...Ce.map(q=>({type:"tool-result",toolCallId:q.toolCallId,toolName:q.toolName,output:li({tool:t==null?void 0:t[q.toolName],output:q.type==="tool-result"?q.output:q.error,errorMode:q.type==="tool-error"?"json":"none"})})),...ge.map(q=>({type:"tool-result",toolCallId:q.toolCall.toolCallId,toolName:q.toolCall.toolName,output:{type:"execution-denied",reason:q.approvalResponse.reason}}))]})}let It=vf(L),Xe,tt=[],Ae=[],Se=[];do{let Ce=[...Y,...me],q=await(w==null?void 0:w({model:F,steps:Se,stepNumber:Se.length,messages:Ce})),de=gl((C=q==null?void 0:q.model)!=null?C:F),Kt=await Zw({prompt:{system:(Q=q==null?void 0:q.system)!=null?Q:D.system,messages:(A=q==null?void 0:q.messages)!=null?A:Ce},supportedUrls:await de.supportedUrls,download:f}),{toolChoice:dr,tools:Ye}=await qw({tools:t,toolChoice:(M=q==null?void 0:q.toolChoice)!=null?M:r,activeTools:(P=q==null?void 0:q.activeTools)!=null?P:v});Xe=await E(()=>{var ke;return di({name:"ai.generateText.doGenerate",attributes:Pr({telemetry:p,attributes:{...ci({operationId:"ai.generateText.doGenerate",telemetry:p}),...B,"ai.model.provider":de.provider,"ai.model.id":de.modelId,"ai.prompt.messages":{input:()=>Xw(Kt)},"ai.prompt.tools":{input:()=>Ye==null?void 0:Ye.map(ot=>JSON.stringify(ot))},"ai.prompt.toolChoice":{input:()=>dr!=null?JSON.stringify(dr):void 0},"gen_ai.system":de.provider,"gen_ai.request.model":de.modelId,"gen_ai.request.frequency_penalty":L.frequencyPenalty,"gen_ai.request.max_tokens":L.maxOutputTokens,"gen_ai.request.presence_penalty":L.presencePenalty,"gen_ai.request.stop_sequences":L.stopSequences,"gen_ai.request.temperature":(ke=L.temperature)!=null?ke:void 0,"gen_ai.request.top_k":L.topK,"gen_ai.request.top_p":L.topP}}),tracer:H,fn:async ot=>{var Mr,qo,Ln,Zn,Ti,Vo,Go,Dr;let ut=await de.doGenerate({...It,tools:Ye,toolChoice:dr,responseFormat:await(m==null?void 0:m.responseFormat),prompt:Kt,providerOptions:g,abortSignal:u,headers:J}),rn={id:(qo=(Mr=ut.response)==null?void 0:Mr.id)!=null?qo:y(),timestamp:(Zn=(Ln=ut.response)==null?void 0:Ln.timestamp)!=null?Zn:k(),modelId:(Vo=(Ti=ut.response)==null?void 0:Ti.modelId)!=null?Vo:de.modelId,headers:(Go=ut.response)==null?void 0:Go.headers,body:(Dr=ut.response)==null?void 0:Dr.body};return ot.setAttributes(await Pr({telemetry:p,attributes:{"ai.response.finishReason":ut.finishReason,"ai.response.text":{output:()=>aw(ut.content)},"ai.response.toolCalls":{output:()=>{let $i=lw(ut.content);return $i==null?void 0:JSON.stringify($i)}},"ai.response.id":rn.id,"ai.response.model":rn.modelId,"ai.response.timestamp":rn.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(ut.providerMetadata),"ai.usage.promptTokens":ut.usage.inputTokens,"ai.usage.completionTokens":ut.usage.outputTokens,"gen_ai.response.finish_reasons":[ut.finishReason],"gen_ai.response.id":rn.id,"gen_ai.response.model":rn.modelId,"gen_ai.usage.input_tokens":ut.usage.inputTokens,"gen_ai.usage.output_tokens":ut.usage.outputTokens}})),{...ut,response:rn}}})});let Yt=await Promise.all(Xe.content.filter(ke=>ke.type==="tool-call").map(ke=>aS({toolCall:ke,tools:t,repairToolCall:x,system:o,messages:Ce}))),tn={};for(let ke of Yt){if(ke.invalid)continue;let ot=t==null?void 0:t[ke.toolName];ot!=null&&((ot==null?void 0:ot.onInputAvailable)!=null&&await ot.onInputAvailable({input:ke.input,toolCallId:ke.toolCallId,messages:Ce,abortSignal:u,experimental_context:b}),await oS({tool:ot,toolCall:ke,messages:Ce,experimental_context:b})&&(tn[ke.toolCallId]={type:"tool-approval-request",approvalId:y(),toolCall:ke}))}let Ii=Yt.filter(ke=>ke.invalid&&ke.dynamic);Ae=[];for(let ke of Ii)Ae.push({type:"tool-error",toolCallId:ke.toolCallId,toolName:ke.toolName,input:ke.input,error:Co(ke.error),dynamic:!0});tt=Yt.filter(ke=>!ke.providerExecuted),t!=null&&Ae.push(...await sw({toolCalls:tt.filter(ke=>!ke.invalid&&tn[ke.toolCallId]==null),tools:t,tracer:H,telemetry:p,messages:Ce,abortSignal:u,experimental_context:b}));let Lo=nM({content:Xe.content,toolCalls:Yt,toolOutputs:Ae,toolApprovalRequests:Object.values(tn)});me.push(..._f({content:Lo,tools:t}));let Zo=new sS({content:Lo,finishReason:Xe.finishReason,usage:Xe.usage,warnings:Xe.warnings,providerMetadata:Xe.providerMetadata,request:(ee=Xe.request)!=null?ee:{},response:{...Xe.response,messages:structuredClone(me)}});xf({warnings:(te=Xe.warnings)!=null?te:[],provider:de.provider,model:de.modelId}),Se.push(Zo),await($==null?void 0:$(Zo))}while(tt.length>0&&Ae.length===tt.length&&!await uS({stopConditions:U,steps:Se}));G.setAttributes(await Pr({telemetry:p,attributes:{"ai.response.finishReason":Xe.finishReason,"ai.response.text":{output:()=>aw(Xe.content)},"ai.response.toolCalls":{output:()=>{let Ce=lw(Xe.content);return Ce==null?void 0:JSON.stringify(Ce)}},"ai.response.providerMetadata":JSON.stringify(Xe.providerMetadata),"ai.usage.promptTokens":Xe.usage.inputTokens,"ai.usage.completionTokens":Xe.usage.outputTokens}}));let S=Se[Se.length-1],oe=Se.reduce((Ce,q)=>Qw(Ce,q.usage),{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0});await(O==null?void 0:O({finishReason:S.finishReason,usage:S.usage,content:S.content,text:S.text,reasoningText:S.reasoningText,reasoning:S.reasoning,files:S.files,sources:S.sources,toolCalls:S.toolCalls,staticToolCalls:S.staticToolCalls,dynamicToolCalls:S.dynamicToolCalls,toolResults:S.toolResults,staticToolResults:S.staticToolResults,dynamicToolResults:S.dynamicToolResults,request:S.request,response:S.response,warnings:S.warnings,providerMetadata:S.providerMetadata,steps:Se,totalUsage:oe}));let He;return S.finishReason==="stop"&&(He=await(m!=null?m:hl()).parseCompleteOutput({text:S.text},{response:S.response,usage:S.usage,finishReason:S.finishReason})),new rM({steps:Se,totalUsage:oe,output:He})}})}catch(G){throw Hw(G)}}async function sw({toolCalls:e,tools:t,tracer:r,telemetry:o,messages:n,abortSignal:i,experimental_context:s}){return(await Promise.all(e.map(async c=>Sf({toolCall:c,tools:t,tracer:r,telemetry:o,messages:n,abortSignal:i,experimental_context:s})))).filter(c=>c!=null)}var rM=class{constructor(e){this.steps=e.steps,this._output=e.output,this.totalUsage=e.totalUsage}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get experimental_output(){return this.output}get output(){if(this._output==null)throw new Sw;return this._output}};function lw(e){let t=e.filter(r=>r.type==="tool-call");if(t.length!==0)return t.map(r=>({toolCallId:r.toolCallId,toolName:r.toolName,input:r.input}))}function nM({content:e,toolCalls:t,toolOutputs:r,toolApprovalRequests:o}){return[...e.map(n=>{switch(n.type){case"text":case"reasoning":case"source":return n;case"file":return{type:"file",file:new nS(n),...n.providerMetadata!=null?{providerMetadata:n.providerMetadata}:{}};case"tool-call":return t.find(i=>i.toolCallId===n.toolCallId);case"tool-result":{let i=t.find(s=>s.toolCallId===n.toolCallId);if(i==null)throw new Error(`Tool call ${n.toolCallId} not found.`);return n.isError?{type:"tool-error",toolCallId:n.toolCallId,toolName:n.toolName,input:i.input,error:n.result,providerExecuted:!0,dynamic:i.dynamic}:{type:"tool-result",toolCallId:n.toolCallId,toolName:n.toolName,input:i.input,output:n.result,providerExecuted:!0,dynamic:i.dynamic}}}}),...r,...o]}function vl(e,t){let r=new Headers(e!=null?e:{});for(let[o,n]of Object.entries(t))r.has(o)||r.set(o,n);return r}function oM({status:e,statusText:t,headers:r,textStream:o}){return new Response(o.pipeThrough(new TextEncoderStream),{status:e!=null?e:200,statusText:t,headers:vl(r,{"content-type":"text/plain; charset=utf-8"})})}function cS({response:e,status:t,statusText:r,headers:o,stream:n}){e.writeHead(t!=null?t:200,r,o);let i=n.getReader();(async()=>{try{for(;;){let{done:u,value:c}=await i.read();if(u)break;e.write(c)||await new Promise(d=>{e.once("drain",d)})}}catch(u){throw u}finally{e.end()}})()}function aM({response:e,status:t,statusText:r,headers:o,textStream:n}){cS({response:e,status:t,statusText:r,headers:Object.fromEntries(vl(o,{"content-type":"text/plain; charset=utf-8"}).entries()),stream:n.pipeThrough(new TextEncoderStream)})}var dS=class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}},pS={"content-type":"text/event-stream","cache-control":"no-cache",connection:"keep-alive","x-vercel-ai-ui-message-stream":"v1","x-accel-buffering":"no"};function iM({status:e,statusText:t,headers:r,stream:o,consumeSseStream:n}){let i=o.pipeThrough(new dS);if(n){let[s,u]=i.tee();i=s,n({stream:u})}return new Response(i.pipeThrough(new TextEncoderStream),{status:e,statusText:t,headers:vl(r,pS)})}function sM({originalMessages:e,responseMessageId:t}){if(e==null)return;let r=e[e.length-1];return(r==null?void 0:r.role)==="assistant"?r.id:typeof t=="function"?t():t}var c5=al(()=>Er(a.union([a.strictObject({type:a.literal("text-start"),id:a.string(),providerMetadata:se.optional()}),a.strictObject({type:a.literal("text-delta"),id:a.string(),delta:a.string(),providerMetadata:se.optional()}),a.strictObject({type:a.literal("text-end"),id:a.string(),providerMetadata:se.optional()}),a.strictObject({type:a.literal("error"),errorText:a.string()}),a.strictObject({type:a.literal("tool-input-start"),toolCallId:a.string(),toolName:a.string(),providerExecuted:a.boolean().optional(),dynamic:a.boolean().optional(),title:a.string().optional()}),a.strictObject({type:a.literal("tool-input-delta"),toolCallId:a.string(),inputTextDelta:a.string()}),a.strictObject({type:a.literal("tool-input-available"),toolCallId:a.string(),toolName:a.string(),input:a.unknown(),providerExecuted:a.boolean().optional(),providerMetadata:se.optional(),dynamic:a.boolean().optional(),title:a.string().optional()}),a.strictObject({type:a.literal("tool-input-error"),toolCallId:a.string(),toolName:a.string(),input:a.unknown(),providerExecuted:a.boolean().optional(),providerMetadata:se.optional(),dynamic:a.boolean().optional(),errorText:a.string(),title:a.string().optional()}),a.strictObject({type:a.literal("tool-approval-request"),approvalId:a.string(),toolCallId:a.string()}),a.strictObject({type:a.literal("tool-output-available"),toolCallId:a.string(),output:a.unknown(),providerExecuted:a.boolean().optional(),dynamic:a.boolean().optional(),preliminary:a.boolean().optional()}),a.strictObject({type:a.literal("tool-output-error"),toolCallId:a.string(),errorText:a.string(),providerExecuted:a.boolean().optional(),dynamic:a.boolean().optional()}),a.strictObject({type:a.literal("tool-output-denied"),toolCallId:a.string()}),a.strictObject({type:a.literal("reasoning-start"),id:a.string(),providerMetadata:se.optional()}),a.strictObject({type:a.literal("reasoning-delta"),id:a.string(),delta:a.string(),providerMetadata:se.optional()}),a.strictObject({type:a.literal("reasoning-end"),id:a.string(),providerMetadata:se.optional()}),a.strictObject({type:a.literal("source-url"),sourceId:a.string(),url:a.string(),title:a.string().optional(),providerMetadata:se.optional()}),a.strictObject({type:a.literal("source-document"),sourceId:a.string(),mediaType:a.string(),title:a.string(),filename:a.string().optional(),providerMetadata:se.optional()}),a.strictObject({type:a.literal("file"),url:a.string(),mediaType:a.string(),providerMetadata:se.optional()}),a.strictObject({type:a.custom(e=>typeof e=="string"&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:a.string().optional(),data:a.unknown(),transient:a.boolean().optional()}),a.strictObject({type:a.literal("start-step")}),a.strictObject({type:a.literal("finish-step")}),a.strictObject({type:a.literal("start"),messageId:a.string().optional(),messageMetadata:a.unknown().optional()}),a.strictObject({type:a.literal("finish"),finishReason:a.enum(["stop","length","content-filter","tool-calls","error","other","unknown"]).optional(),messageMetadata:a.unknown().optional()}),a.strictObject({type:a.literal("abort")}),a.strictObject({type:a.literal("message-metadata"),messageMetadata:a.unknown()})])));function lM(e){return e.type.startsWith("data-")}function mS(e,t){if(e===void 0&&t===void 0)return;if(e===void 0)return t;if(t===void 0)return e;let r={...e};for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o)){let n=t[o];if(n===void 0)continue;let i=o in e?e[o]:void 0,s=n!==null&&typeof n=="object"&&!Array.isArray(n)&&!(n instanceof Date)&&!(n instanceof RegExp),u=i!=null&&typeof i=="object"&&!Array.isArray(i)&&!(i instanceof Date)&&!(i instanceof RegExp);s&&u?r[o]=mS(i,n):r[o]=n}return r}function bf(e){return e.type.startsWith("tool-")}function uM(e){return e.type==="dynamic-tool"}function cM(e){return bf(e)||uM(e)}function uw(e){return e.type.split("-").slice(1).join("-")}function dM({lastMessage:e,messageId:t}){return{message:(e==null?void 0:e.role)==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function pM({stream:e,messageMetadataSchema:t,dataPartSchemas:r,runUpdateMessageJob:o,onError:n,onToolCall:i,onData:s}){return e.pipeThrough(new TransformStream({async transform(u,c){await o(async({state:l,write:d})=>{var m,p,g,h;function v(f){let y=l.message.parts.filter(cM).find(k=>k.toolCallId===f);if(y==null)throw new Error(`no tool invocation found for tool call ${f}`);return y}function _(f){var b;let y=l.message.parts.find(O=>bf(O)&&O.toolCallId===f.toolCallId),k=f,$=y;y!=null?(y.state=f.state,$.input=k.input,$.output=k.output,$.errorText=k.errorText,$.rawInput=k.rawInput,$.preliminary=k.preliminary,f.title!==void 0&&($.title=f.title),$.providerExecuted=(b=k.providerExecuted)!=null?b:y.providerExecuted,k.providerMetadata!=null&&y.state==="input-available"&&(y.callProviderMetadata=k.providerMetadata)):l.message.parts.push({type:`tool-${f.toolName}`,toolCallId:f.toolCallId,state:f.state,title:f.title,input:k.input,output:k.output,rawInput:k.rawInput,errorText:k.errorText,providerExecuted:k.providerExecuted,preliminary:k.preliminary,...k.providerMetadata!=null?{callProviderMetadata:k.providerMetadata}:{}})}function w(f){var b,y;let k=l.message.parts.find(L=>L.type==="dynamic-tool"&&L.toolCallId===f.toolCallId),$=f,O=k;k!=null?(k.state=f.state,O.toolName=f.toolName,O.input=$.input,O.output=$.output,O.errorText=$.errorText,O.rawInput=(b=$.rawInput)!=null?b:O.rawInput,O.preliminary=$.preliminary,f.title!==void 0&&(O.title=f.title),O.providerExecuted=(y=$.providerExecuted)!=null?y:k.providerExecuted,$.providerMetadata!=null&&k.state==="input-available"&&(k.callProviderMetadata=$.providerMetadata)):l.message.parts.push({type:"dynamic-tool",toolName:f.toolName,toolCallId:f.toolCallId,state:f.state,input:$.input,output:$.output,errorText:$.errorText,preliminary:$.preliminary,providerExecuted:$.providerExecuted,title:f.title,...$.providerMetadata!=null?{callProviderMetadata:$.providerMetadata}:{}})}async function x(f){if(f!=null){let b=l.message.metadata!=null?mS(l.message.metadata,f):f;t!=null&&await il({value:b,schema:t}),l.message.metadata=b}}switch(u.type){case"text-start":{let f={type:"text",text:"",providerMetadata:u.providerMetadata,state:"streaming"};l.activeTextParts[u.id]=f,l.message.parts.push(f),d();break}case"text-delta":{let f=l.activeTextParts[u.id];f.text+=u.delta,f.providerMetadata=(m=u.providerMetadata)!=null?m:f.providerMetadata,d();break}case"text-end":{let f=l.activeTextParts[u.id];f.state="done",f.providerMetadata=(p=u.providerMetadata)!=null?p:f.providerMetadata,delete l.activeTextParts[u.id],d();break}case"reasoning-start":{let f={type:"reasoning",text:"",providerMetadata:u.providerMetadata,state:"streaming"};l.activeReasoningParts[u.id]=f,l.message.parts.push(f),d();break}case"reasoning-delta":{let f=l.activeReasoningParts[u.id];f.text+=u.delta,f.providerMetadata=(g=u.providerMetadata)!=null?g:f.providerMetadata,d();break}case"reasoning-end":{let f=l.activeReasoningParts[u.id];f.providerMetadata=(h=u.providerMetadata)!=null?h:f.providerMetadata,f.state="done",delete l.activeReasoningParts[u.id],d();break}case"file":{l.message.parts.push({type:"file",mediaType:u.mediaType,url:u.url}),d();break}case"source-url":{l.message.parts.push({type:"source-url",sourceId:u.sourceId,url:u.url,title:u.title,providerMetadata:u.providerMetadata}),d();break}case"source-document":{l.message.parts.push({type:"source-document",sourceId:u.sourceId,mediaType:u.mediaType,title:u.title,filename:u.filename,providerMetadata:u.providerMetadata}),d();break}case"tool-input-start":{let f=l.message.parts.filter(bf);l.partialToolCalls[u.toolCallId]={text:"",toolName:u.toolName,index:f.length,dynamic:u.dynamic,title:u.title},u.dynamic?w({toolCallId:u.toolCallId,toolName:u.toolName,state:"input-streaming",input:void 0,providerExecuted:u.providerExecuted,title:u.title}):_({toolCallId:u.toolCallId,toolName:u.toolName,state:"input-streaming",input:void 0,providerExecuted:u.providerExecuted,title:u.title}),d();break}case"tool-input-delta":{let f=l.partialToolCalls[u.toolCallId];f.text+=u.inputTextDelta;let{value:b}=await pi(f.text);f.dynamic?w({toolCallId:u.toolCallId,toolName:f.toolName,state:"input-streaming",input:b,title:f.title}):_({toolCallId:u.toolCallId,toolName:f.toolName,state:"input-streaming",input:b,title:f.title}),d();break}case"tool-input-available":{u.dynamic?w({toolCallId:u.toolCallId,toolName:u.toolName,state:"input-available",input:u.input,providerExecuted:u.providerExecuted,providerMetadata:u.providerMetadata,title:u.title}):_({toolCallId:u.toolCallId,toolName:u.toolName,state:"input-available",input:u.input,providerExecuted:u.providerExecuted,providerMetadata:u.providerMetadata,title:u.title}),d(),i&&!u.providerExecuted&&await i({toolCall:u});break}case"tool-input-error":{u.dynamic?w({toolCallId:u.toolCallId,toolName:u.toolName,state:"output-error",input:u.input,errorText:u.errorText,providerExecuted:u.providerExecuted,providerMetadata:u.providerMetadata}):_({toolCallId:u.toolCallId,toolName:u.toolName,state:"output-error",input:void 0,rawInput:u.input,errorText:u.errorText,providerExecuted:u.providerExecuted,providerMetadata:u.providerMetadata}),d();break}case"tool-approval-request":{let f=v(u.toolCallId);f.state="approval-requested",f.approval={id:u.approvalId},d();break}case"tool-output-denied":{let f=v(u.toolCallId);f.state="output-denied",d();break}case"tool-output-available":{let f=v(u.toolCallId);f.type==="dynamic-tool"?w({toolCallId:u.toolCallId,toolName:f.toolName,state:"output-available",input:f.input,output:u.output,preliminary:u.preliminary,providerExecuted:u.providerExecuted,title:f.title}):_({toolCallId:u.toolCallId,toolName:uw(f),state:"output-available",input:f.input,output:u.output,providerExecuted:u.providerExecuted,preliminary:u.preliminary,title:f.title}),d();break}case"tool-output-error":{let f=v(u.toolCallId);f.type==="dynamic-tool"?w({toolCallId:u.toolCallId,toolName:f.toolName,state:"output-error",input:f.input,errorText:u.errorText,providerExecuted:u.providerExecuted,title:f.title}):_({toolCallId:u.toolCallId,toolName:uw(f),state:"output-error",input:f.input,rawInput:f.rawInput,errorText:u.errorText,providerExecuted:u.providerExecuted,title:f.title}),d();break}case"start-step":{l.message.parts.push({type:"step-start"});break}case"finish-step":{l.activeTextParts={},l.activeReasoningParts={};break}case"start":{u.messageId!=null&&(l.message.id=u.messageId),await x(u.messageMetadata),(u.messageId!=null||u.messageMetadata!=null)&&d();break}case"finish":{u.finishReason!=null&&(l.finishReason=u.finishReason),await x(u.messageMetadata),u.messageMetadata!=null&&d();break}case"message-metadata":{await x(u.messageMetadata),u.messageMetadata!=null&&d();break}case"error":{n==null||n(new Error(u.errorText));break}default:if(lM(u)){(r==null?void 0:r[u.type])!=null&&await il({value:u.data,schema:r[u.type]});let f=u;if(f.transient){s==null||s(f);break}let b=f.id!=null?l.message.parts.find(y=>f.type===y.type&&f.id===y.id):void 0;b!=null?b.data=f.data:l.message.parts.push(f),s==null||s(f),d()}}c.enqueue(u)})}}))}function mM({messageId:e,originalMessages:t=[],onFinish:r,onError:o,stream:n}){let i=t==null?void 0:t[t.length-1];(i==null?void 0:i.role)!=="assistant"?i=void 0:e=i.id;let s=!1,u=n.pipeThrough(new TransformStream({transform(p,g){if(p.type==="start"){let h=p;h.messageId==null&&e!=null&&(h.messageId=e)}p.type==="abort"&&(s=!0),g.enqueue(p)}}));if(r==null)return u;let c=dM({lastMessage:i?structuredClone(i):void 0,messageId:e!=null?e:""}),l=async p=>{await p({state:c,write:()=>{}})},d=!1,m=async()=>{if(d||!r)return;d=!0;let p=c.message.id===(i==null?void 0:i.id);await r({isAborted:s,isContinuation:p,responseMessage:c.message,messages:[...p?t.slice(0,-1):t,c.message],finishReason:c.finishReason})};return pM({stream:u,runUpdateMessageJob:l,onError:o}).pipeThrough(new TransformStream({transform(p,g){g.enqueue(p)},async cancel(){await m()},async flush(){await m()}}))}function fM({response:e,status:t,statusText:r,headers:o,stream:n,consumeSseStream:i}){let s=n.pipeThrough(new dS);if(i){let[u,c]=s.tee();s=u,i({stream:c})}cS({response:e,status:t,statusText:r,headers:Object.fromEntries(vl(o,pS).entries()),stream:s.pipeThrough(new TextEncoderStream)})}function fl(e){let t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=function(){let r=this.getReader(),o=!1;async function n(i){var s;o=!0;try{i&&await((s=r.cancel)==null?void 0:s.call(r))}finally{try{r.releaseLock()}catch(u){}}}return{async next(){if(o)return{done:!0,value:void 0};let{done:i,value:s}=await r.read();return i?(await n(!0),{done:!0,value:void 0}):{done:!1,value:s}},async return(){return await n(!0),{done:!0,value:void 0}},async throw(i){throw await n(!0),i}}},t}async function gM({stream:e,onError:t}){let r=e.getReader();try{for(;;){let{done:o}=await r.read();if(o)break}}catch(o){t==null||t(o)}finally{r.releaseLock()}}function cw(){let e,t;return{promise:new Promise((o,n)=>{e=o,t=n}),resolve:e,reject:t}}function hM(){let e=[],t=null,r=!1,o=cw(),n=()=>{r=!0,o.resolve(),e.forEach(s=>s.cancel()),e=[],t==null||t.close()},i=async()=>{if(r&&e.length===0){t==null||t.close();return}if(e.length===0)return o=cw(),await o.promise,i();try{let{value:s,done:u}=await e[0].read();u?(e.shift(),e.length===0&&r?t==null||t.close():await i()):t==null||t.enqueue(s)}catch(s){t==null||t.error(s),e.shift(),n()}};return{stream:new ReadableStream({start(s){t=s},pull:i,async cancel(){for(let s of e)await s.cancel();e=[],r=!0}}),addStream:s=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");e.push(s.getReader()),o.resolve()},close:()=>{r=!0,o.resolve(),e.length===0&&(t==null||t.close())},terminate:n}}function vM(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}function yM({tools:e,generatorStream:t,tracer:r,telemetry:o,system:n,messages:i,abortSignal:s,repairToolCall:u,experimental_context:c,generateId:l}){let d=null,m=new ReadableStream({start(x){d=x}}),p=new Set,g=new Map,h=!1,v;function _(){h&&p.size===0&&(v!=null&&d.enqueue(v),d.close())}let w=new TransformStream({async transform(x,f){let b=x.type;switch(b){case"stream-start":case"text-start":case"text-delta":case"text-end":case"reasoning-start":case"reasoning-delta":case"reasoning-end":case"tool-input-start":case"tool-input-delta":case"tool-input-end":case"source":case"response-metadata":case"error":case"raw":{f.enqueue(x);break}case"file":{f.enqueue({type:"file",file:new Hj({data:x.data,mediaType:x.mediaType})});break}case"finish":{v={type:"finish",finishReason:x.finishReason,usage:x.usage,providerMetadata:x.providerMetadata};break}case"tool-call":{try{let y=await aS({toolCall:x,tools:e,repairToolCall:u,system:n,messages:i});if(f.enqueue(y),y.invalid){d.enqueue({type:"tool-error",toolCallId:y.toolCallId,toolName:y.toolName,input:y.input,error:Co(y.error),dynamic:!0,title:y.title});break}let k=e==null?void 0:e[y.toolName];if(k==null)break;if(k.onInputAvailable!=null&&await k.onInputAvailable({input:y.input,toolCallId:y.toolCallId,messages:i,abortSignal:s,experimental_context:c}),await oS({tool:k,toolCall:y,messages:i,experimental_context:c})){d.enqueue({type:"tool-approval-request",approvalId:l(),toolCall:y});break}if(g.set(y.toolCallId,y.input),k.execute!=null&&y.providerExecuted!==!0){let $=l();p.add($),Sf({toolCall:y,tools:e,tracer:r,telemetry:o,messages:i,abortSignal:s,experimental_context:c,onPreliminaryToolResult:O=>{d.enqueue(O)}}).then(O=>{d.enqueue(O),p.delete($),_()})}}catch(y){d.enqueue({type:"error",error:y})}break}case"tool-result":{let y=x.toolName;x.isError?d.enqueue({type:"tool-error",toolCallId:x.toolCallId,toolName:y,input:g.get(x.toolCallId),providerExecuted:!0,error:x.result,dynamic:x.dynamic}):f.enqueue({type:"tool-result",toolCallId:x.toolCallId,toolName:y,input:g.get(x.toolCallId),output:x.result,providerExecuted:!0,dynamic:x.dynamic});break}default:{let y=b;throw new Error(`Unhandled chunk type: ${y}`)}}},flush(){h=!0,_()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(w).pipeTo(new WritableStream({write(f){x.enqueue(f)},close(){}})),m.pipeTo(new WritableStream({write(f){x.enqueue(f)},close(){x.close()}}))])}})}var _M=Tr({prefix:"aitxt",size:24});function If({model:e,tools:t,toolChoice:r,system:o,prompt:n,messages:i,maxRetries:s,abortSignal:u,headers:c,stopWhen:l=lS(1),experimental_output:d,output:m=d,experimental_telemetry:p,prepareStep:g,providerOptions:h,experimental_activeTools:v,activeTools:_=v,experimental_repairToolCall:w,experimental_transform:x,experimental_download:f,includeRawChunks:b=!1,onChunk:y,onError:k=({error:J})=>{},onFinish:$,onAbort:O,onStepFinish:L,experimental_context:F,_internal:{now:U=vM,generateId:Z=_M,currentDate:E=()=>new Date}={},...z}){return new xM({model:gl(e),telemetry:p,headers:c,settings:z,maxRetries:s,abortSignal:u,system:o,prompt:n,messages:i,tools:t,toolChoice:r,transforms:yf(x),activeTools:_,repairToolCall:w,stopConditions:yf(l),output:m,providerOptions:h,prepareStep:g,includeRawChunks:b,onChunk:y,onError:k,onFinish:$,onAbort:O,onStepFinish:L,now:U,currentDate:E,generateId:Z,experimental_context:F,download:f})}function bM(e){let t,r="",o="",n,i="";function s({controller:u,partialOutput:c=void 0}){u.enqueue({part:{type:"text-delta",id:t,text:o,providerMetadata:n},partialOutput:c}),o=""}return new TransformStream({async transform(u,c){var l;if(u.type==="finish-step"&&o.length>0&&s({controller:c}),u.type!=="text-delta"&&u.type!=="text-start"&&u.type!=="text-end"){c.enqueue({part:u,partialOutput:void 0});return}if(t==null)t=u.id;else if(u.id!==t){c.enqueue({part:u,partialOutput:void 0});return}if(u.type==="text-start"){c.enqueue({part:u,partialOutput:void 0});return}if(u.type==="text-end"){o.length>0&&s({controller:c}),c.enqueue({part:u,partialOutput:void 0});return}r+=u.text,o+=u.text,n=(l=u.providerMetadata)!=null?l:n;let d=await e.parsePartialOutput({text:r});if(d!==void 0){let m=JSON.stringify(d.partial);m!==i&&(s({controller:c,partialOutput:d.partial}),i=m)}}})}var xM=class{constructor({model:e,telemetry:t,headers:r,settings:o,maxRetries:n,abortSignal:i,system:s,prompt:u,messages:c,tools:l,toolChoice:d,transforms:m,activeTools:p,repairToolCall:g,stopConditions:h,output:v,providerOptions:_,prepareStep:w,includeRawChunks:x,now:f,currentDate:b,generateId:y,onChunk:k,onError:$,onFinish:O,onAbort:L,onStepFinish:F,experimental_context:U,download:Z}){this._totalUsage=new Ao,this._finishReason=new Ao,this._steps=new Ao,this.outputSpecification=v,this.includeRawChunks=x,this.tools=l;let E,z=[],J=[],B,D,H={},G=[],C=[],Q,A={},M={},P=new TransformStream({async transform(Ae,Se){var S,oe,He,Ce;Se.enqueue(Ae);let{part:q}=Ae;if((q.type==="text-delta"||q.type==="reasoning-delta"||q.type==="source"||q.type==="tool-call"||q.type==="tool-result"||q.type==="tool-input-start"||q.type==="tool-input-delta"||q.type==="raw")&&await(k==null?void 0:k({chunk:q})),q.type==="error"&&await $({error:Hw(q.error)}),q.type==="text-start"&&(A[q.id]={type:"text",text:"",providerMetadata:q.providerMetadata},z.push(A[q.id])),q.type==="text-delta"){let de=A[q.id];if(de==null){Se.enqueue({part:{type:"error",error:`text part ${q.id} not found`},partialOutput:void 0});return}de.text+=q.text,de.providerMetadata=(S=q.providerMetadata)!=null?S:de.providerMetadata}if(q.type==="text-end"){let de=A[q.id];if(de==null){Se.enqueue({part:{type:"error",error:`text part ${q.id} not found`},partialOutput:void 0});return}de.providerMetadata=(oe=q.providerMetadata)!=null?oe:de.providerMetadata,delete A[q.id]}if(q.type==="reasoning-start"&&(M[q.id]={type:"reasoning",text:"",providerMetadata:q.providerMetadata},z.push(M[q.id])),q.type==="reasoning-delta"){let de=M[q.id];if(de==null){Se.enqueue({part:{type:"error",error:`reasoning part ${q.id} not found`},partialOutput:void 0});return}de.text+=q.text,de.providerMetadata=(He=q.providerMetadata)!=null?He:de.providerMetadata}if(q.type==="reasoning-end"){let de=M[q.id];if(de==null){Se.enqueue({part:{type:"error",error:`reasoning part ${q.id} not found`},partialOutput:void 0});return}de.providerMetadata=(Ce=q.providerMetadata)!=null?Ce:de.providerMetadata,delete M[q.id]}if(q.type==="file"&&z.push({type:"file",file:q.file}),q.type==="source"&&z.push(q),q.type==="tool-call"&&z.push(q),q.type==="tool-result"&&!q.preliminary&&z.push(q),q.type==="tool-approval-request"&&z.push(q),q.type==="tool-error"&&z.push(q),q.type==="start-step"&&(z=[],M={},A={},H=q.request,G=q.warnings),q.type==="finish-step"){let de=_f({content:z,tools:l}),Kt=new sS({content:z,finishReason:q.finishReason,usage:q.usage,warnings:G,request:H,response:{...q.response,messages:[...J,...de]},providerMetadata:q.providerMetadata});await(F==null?void 0:F(Kt)),xf({warnings:G,provider:e.provider,model:e.modelId}),C.push(Kt),J.push(...de),E.resolve()}q.type==="finish"&&(D=q.totalUsage,B=q.finishReason)},async flush(Ae){try{if(C.length===0){let He=new Sw({message:"No output generated. Check the stream for errors."});tt._finishReason.reject(He),tt._totalUsage.reject(He),tt._steps.reject(He);return}let Se=B!=null?B:"unknown",S=D!=null?D:{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0};tt._finishReason.resolve(Se),tt._totalUsage.resolve(S),tt._steps.resolve(C);let oe=C[C.length-1];await(O==null?void 0:O({finishReason:Se,totalUsage:S,usage:oe.usage,content:oe.content,text:oe.text,reasoningText:oe.reasoningText,reasoning:oe.reasoning,files:oe.files,sources:oe.sources,toolCalls:oe.toolCalls,staticToolCalls:oe.staticToolCalls,dynamicToolCalls:oe.dynamicToolCalls,toolResults:oe.toolResults,staticToolResults:oe.staticToolResults,dynamicToolResults:oe.dynamicToolResults,request:oe.request,response:oe.response,warnings:oe.warnings,providerMetadata:oe.providerMetadata,steps:C})),Q.setAttributes(await Pr({telemetry:t,attributes:{"ai.response.finishReason":Se,"ai.response.text":{output:()=>oe.text},"ai.response.toolCalls":{output:()=>{var He;return(He=oe.toolCalls)!=null&&He.length?JSON.stringify(oe.toolCalls):void 0}},"ai.response.providerMetadata":JSON.stringify(oe.providerMetadata),"ai.usage.inputTokens":S.inputTokens,"ai.usage.outputTokens":S.outputTokens,"ai.usage.totalTokens":S.totalTokens,"ai.usage.reasoningTokens":S.reasoningTokens,"ai.usage.cachedInputTokens":S.cachedInputTokens}}))}catch(Se){Ae.error(Se)}finally{Q.end()}}}),ee=hM();this.addStream=ee.addStream,this.closeStream=ee.close;let te=ee.stream.getReader(),Y=new ReadableStream({async start(Ae){Ae.enqueue({type:"start"})},async pull(Ae){function Se(){L==null||L({steps:C}),Ae.enqueue({type:"abort"}),Ae.close()}try{let{done:S,value:oe}=await te.read();if(S){Ae.close();return}if(i!=null&&i.aborted){Se();return}Ae.enqueue(oe)}catch(S){ol(S)&&(i!=null&&i.aborted)?Se():Ae.error(S)}},cancel(Ae){return ee.stream.cancel(Ae)}});for(let Ae of m)Y=Y.pipeThrough(Ae({tools:l,stopStream(){ee.terminate()}}));this.baseStream=Y.pipeThrough(bM(v!=null?v:hl())).pipeThrough(P);let{maxRetries:me,retry:qt}=tS({maxRetries:n,abortSignal:i}),ge=Kw(t),It=vf(o),Xe=Ww({model:e,telemetry:t,headers:r,settings:{...It,maxRetries:me}}),tt=this;di({name:"ai.streamText",attributes:Pr({telemetry:t,attributes:{...ci({operationId:"ai.streamText",telemetry:t}),...Xe,"ai.prompt":{input:()=>JSON.stringify({system:s,prompt:u,messages:c})}}}),tracer:ge,endWhenDone:!1,fn:async Ae=>{Q=Ae;let Se=await Bw({system:s,prompt:u,messages:c}),S=Se.messages,oe=[],{approvedToolApprovals:He,deniedToolApprovals:Ce}=rS({messages:S});if(Ce.length>0||He.length>0){let de,Kt=new ReadableStream({start(dr){de=dr}});tt.addStream(Kt);try{for(let Ye of Ce)de==null||de.enqueue({type:"tool-output-denied",toolCallId:Ye.toolCall.toolCallId,toolName:Ye.toolCall.toolName});let dr=[];await Promise.all(He.map(async Ye=>{let Yt=await Sf({toolCall:Ye.toolCall,tools:l,tracer:ge,telemetry:t,messages:S,abortSignal:i,experimental_context:U,onPreliminaryToolResult:tn=>{de==null||de.enqueue(tn)}});Yt!=null&&(de==null||de.enqueue(Yt),dr.push(Yt))})),oe.push({role:"tool",content:[...dr.map(Ye=>({type:"tool-result",toolCallId:Ye.toolCallId,toolName:Ye.toolName,output:li({tool:l==null?void 0:l[Ye.toolName],output:Ye.type==="tool-result"?Ye.output:Ye.error,errorMode:Ye.type==="tool-error"?"json":"none"})})),...Ce.map(Ye=>({type:"tool-result",toolCallId:Ye.toolCall.toolCallId,toolName:Ye.toolCall.toolName,output:{type:"execution-denied",reason:Ye.approvalResponse.reason}}))]})}finally{de==null||de.close()}}J.push(...oe);async function q({currentStep:de,responseMessages:Kt,usage:dr}){var Ye,Yt,tn,Ii,Lo;let Zo=tt.includeRawChunks;E=new Ao;let ke=[...S,...Kt],ot=await(w==null?void 0:w({model:e,steps:C,stepNumber:C.length,messages:ke})),Mr=gl((Ye=ot==null?void 0:ot.model)!=null?Ye:e),qo=await Zw({prompt:{system:(Yt=ot==null?void 0:ot.system)!=null?Yt:Se.system,messages:(tn=ot==null?void 0:ot.messages)!=null?tn:ke},supportedUrls:await Mr.supportedUrls,download:Z}),{toolChoice:Ln,tools:Zn}=await qw({tools:l,toolChoice:(Ii=ot==null?void 0:ot.toolChoice)!=null?Ii:d,activeTools:(Lo=ot==null?void 0:ot.activeTools)!=null?Lo:p}),{result:{stream:Ti,response:Vo,request:Go},doStreamSpan:Dr,startTimestampMs:ut}=await qt(()=>di({name:"ai.streamText.doStream",attributes:Pr({telemetry:t,attributes:{...ci({operationId:"ai.streamText.doStream",telemetry:t}),...Xe,"ai.model.provider":Mr.provider,"ai.model.id":Mr.modelId,"ai.prompt.messages":{input:()=>Xw(qo)},"ai.prompt.tools":{input:()=>Zn==null?void 0:Zn.map(le=>JSON.stringify(le))},"ai.prompt.toolChoice":{input:()=>Ln!=null?JSON.stringify(Ln):void 0},"gen_ai.system":Mr.provider,"gen_ai.request.model":Mr.modelId,"gen_ai.request.frequency_penalty":It.frequencyPenalty,"gen_ai.request.max_tokens":It.maxOutputTokens,"gen_ai.request.presence_penalty":It.presencePenalty,"gen_ai.request.stop_sequences":It.stopSequences,"gen_ai.request.temperature":It.temperature,"gen_ai.request.top_k":It.topK,"gen_ai.request.top_p":It.topP}}),tracer:ge,endWhenDone:!1,fn:async le=>({startTimestampMs:f(),doStreamSpan:le,result:await Mr.doStream({...It,tools:Zn,toolChoice:Ln,responseFormat:await(v==null?void 0:v.responseFormat),prompt:qo,providerOptions:_,abortSignal:i,headers:r,includeRawChunks:Zo})})})),rn=yM({tools:l,generatorStream:Ti,tracer:ge,telemetry:t,system:s,messages:ke,repairToolCall:g,abortSignal:i,experimental_context:U,generateId:y}),$i=Go!=null?Go:{},Ei=[],iu=[],su,lu={},qn="unknown",Xt={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},uu,ng=!0,pr={id:y(),timestamp:b(),modelId:e.modelId},og="";tt.addStream(rn.pipeThrough(new TransformStream({async transform(le,pt){var Jo,Bo,Ai,zr,ag;if(le.type==="stream-start"){su=le.warnings;return}if(ng){let mt=f()-ut;ng=!1,Dr.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":mt}),Dr.setAttributes({"ai.response.msToFirstChunk":mt}),pt.enqueue({type:"start-step",request:$i,warnings:su!=null?su:[]})}let ig=le.type;switch(ig){case"tool-approval-request":case"text-start":case"text-end":{pt.enqueue(le);break}case"text-delta":{le.delta.length>0&&(pt.enqueue({type:"text-delta",id:le.id,text:le.delta,providerMetadata:le.providerMetadata}),og+=le.delta);break}case"reasoning-start":case"reasoning-end":{pt.enqueue(le);break}case"reasoning-delta":{pt.enqueue({type:"reasoning-delta",id:le.id,text:le.delta,providerMetadata:le.providerMetadata});break}case"tool-call":{pt.enqueue(le),Ei.push(le);break}case"tool-result":{pt.enqueue(le),le.preliminary||iu.push(le);break}case"tool-error":{pt.enqueue(le),iu.push(le);break}case"response-metadata":{pr={id:(Jo=le.id)!=null?Jo:pr.id,timestamp:(Bo=le.timestamp)!=null?Bo:pr.timestamp,modelId:(Ai=le.modelId)!=null?Ai:pr.modelId};break}case"finish":{Xt=le.usage,qn=le.finishReason,uu=le.providerMetadata;let mt=f()-ut;Dr.addEvent("ai.stream.finish"),Dr.setAttributes({"ai.response.msToFinish":mt,"ai.response.avgOutputTokensPerSecond":1e3*((zr=Xt.outputTokens)!=null?zr:0)/mt});break}case"file":{pt.enqueue(le);break}case"source":{pt.enqueue(le);break}case"tool-input-start":{lu[le.id]=le.toolName;let mt=l==null?void 0:l[le.toolName];(mt==null?void 0:mt.onInputStart)!=null&&await mt.onInputStart({toolCallId:le.id,messages:ke,abortSignal:i,experimental_context:U}),pt.enqueue({...le,dynamic:(ag=le.dynamic)!=null?ag:(mt==null?void 0:mt.type)==="dynamic",title:mt==null?void 0:mt.title});break}case"tool-input-end":{delete lu[le.id],pt.enqueue(le);break}case"tool-input-delta":{let mt=lu[le.id],cu=l==null?void 0:l[mt];(cu==null?void 0:cu.onInputDelta)!=null&&await cu.onInputDelta({inputTextDelta:le.delta,toolCallId:le.id,messages:ke,abortSignal:i,experimental_context:U}),pt.enqueue(le);break}case"error":{pt.enqueue(le),qn="error";break}case"raw":{Zo&&pt.enqueue(le);break}default:{let mt=ig;throw new Error(`Unknown chunk type: ${mt}`)}}},async flush(le){let pt=Ei.length>0?JSON.stringify(Ei):void 0;try{Dr.setAttributes(await Pr({telemetry:t,attributes:{"ai.response.finishReason":qn,"ai.response.text":{output:()=>og},"ai.response.toolCalls":{output:()=>pt},"ai.response.id":pr.id,"ai.response.model":pr.modelId,"ai.response.timestamp":pr.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(uu),"ai.usage.inputTokens":Xt.inputTokens,"ai.usage.outputTokens":Xt.outputTokens,"ai.usage.totalTokens":Xt.totalTokens,"ai.usage.reasoningTokens":Xt.reasoningTokens,"ai.usage.cachedInputTokens":Xt.cachedInputTokens,"gen_ai.response.finish_reasons":[qn],"gen_ai.response.id":pr.id,"gen_ai.response.model":pr.modelId,"gen_ai.usage.input_tokens":Xt.inputTokens,"gen_ai.usage.output_tokens":Xt.outputTokens}}))}catch(zr){}finally{Dr.end()}le.enqueue({type:"finish-step",finishReason:qn,usage:Xt,providerMetadata:uu,response:{...pr,headers:Vo==null?void 0:Vo.headers}});let Jo=Qw(dr,Xt);await E.promise;let Bo=Ei.filter(zr=>zr.providerExecuted!==!0),Ai=iu.filter(zr=>zr.providerExecuted!==!0);if(Bo.length>0&&Ai.length===Bo.length&&!await uS({stopConditions:h,steps:C})){Kt.push(..._f({content:C[C.length-1].content,tools:l}));try{await q({currentStep:de+1,responseMessages:Kt,usage:Jo})}catch(zr){le.enqueue({type:"error",error:zr}),tt.closeStream()}}else le.enqueue({type:"finish",finishReason:qn,totalUsage:Jo}),tt.closeStream()}})))}await q({currentStep:0,responseMessages:oe,usage:{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0}})}}).catch(Ae=>{tt.addStream(new ReadableStream({start(Se){Se.enqueue({type:"error",error:Ae}),Se.close()}})),tt.closeStream()})}get steps(){return this.consumeStream(),this._steps.promise}get finalStep(){return this.steps.then(e=>e[e.length-1])}get content(){return this.finalStep.then(e=>e.content)}get warnings(){return this.finalStep.then(e=>e.warnings)}get providerMetadata(){return this.finalStep.then(e=>e.providerMetadata)}get text(){return this.finalStep.then(e=>e.text)}get reasoningText(){return this.finalStep.then(e=>e.reasoningText)}get reasoning(){return this.finalStep.then(e=>e.reasoning)}get sources(){return this.finalStep.then(e=>e.sources)}get files(){return this.finalStep.then(e=>e.files)}get toolCalls(){return this.finalStep.then(e=>e.toolCalls)}get staticToolCalls(){return this.finalStep.then(e=>e.staticToolCalls)}get dynamicToolCalls(){return this.finalStep.then(e=>e.dynamicToolCalls)}get toolResults(){return this.finalStep.then(e=>e.toolResults)}get staticToolResults(){return this.finalStep.then(e=>e.staticToolResults)}get dynamicToolResults(){return this.finalStep.then(e=>e.dynamicToolResults)}get usage(){return this.finalStep.then(e=>e.usage)}get request(){return this.finalStep.then(e=>e.request)}get response(){return this.finalStep.then(e=>e.response)}get totalUsage(){return this.consumeStream(),this._totalUsage.promise}get finishReason(){return this.consumeStream(),this._finishReason.promise}teeStream(){let[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return fl(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.text)}})))}get fullStream(){return fl(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await gM({stream:this.fullStream,onError:e==null?void 0:e.onError})}catch(r){(t=e==null?void 0:e.onError)==null||t.call(e,r)}}get experimental_partialOutputStream(){return this.partialOutputStream}get partialOutputStream(){return fl(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}get output(){return this.finalStep.then(e=>{var t;return((t=this.outputSpecification)!=null?t:hl()).parseCompleteOutput({text:e.text},{response:e.response,usage:e.usage,finishReason:e.finishReason})})}toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:r,messageMetadata:o,sendReasoning:n=!0,sendSources:i=!1,sendStart:s=!0,sendFinish:u=!0,onError:c=kr}={}){let l=t!=null?sM({originalMessages:e,responseMessageId:t}):void 0,d=p=>{var g;let h=(g=this.tools)==null?void 0:g[p.toolName];return h==null?p.dynamic:(h==null?void 0:h.type)==="dynamic"?!0:void 0},m=this.fullStream.pipeThrough(new TransformStream({transform:async(p,g)=>{let h=o==null?void 0:o({part:p}),v=p.type;switch(v){case"text-start":{g.enqueue({type:"text-start",id:p.id,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"text-delta":{g.enqueue({type:"text-delta",id:p.id,delta:p.text,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"text-end":{g.enqueue({type:"text-end",id:p.id,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"reasoning-start":{g.enqueue({type:"reasoning-start",id:p.id,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"reasoning-delta":{n&&g.enqueue({type:"reasoning-delta",id:p.id,delta:p.text,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"reasoning-end":{g.enqueue({type:"reasoning-end",id:p.id,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"file":{g.enqueue({type:"file",mediaType:p.file.mediaType,url:`data:${p.file.mediaType};base64,${p.file.base64}`});break}case"source":{i&&p.sourceType==="url"&&g.enqueue({type:"source-url",sourceId:p.id,url:p.url,title:p.title,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}}),i&&p.sourceType==="document"&&g.enqueue({type:"source-document",sourceId:p.id,mediaType:p.mediaType,title:p.title,filename:p.filename,...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{}});break}case"tool-input-start":{let _=d(p);g.enqueue({type:"tool-input-start",toolCallId:p.id,toolName:p.toolName,...p.providerExecuted!=null?{providerExecuted:p.providerExecuted}:{},..._!=null?{dynamic:_}:{},...p.title!=null?{title:p.title}:{}});break}case"tool-input-delta":{g.enqueue({type:"tool-input-delta",toolCallId:p.id,inputTextDelta:p.delta});break}case"tool-call":{let _=d(p);p.invalid?g.enqueue({type:"tool-input-error",toolCallId:p.toolCallId,toolName:p.toolName,input:p.input,...p.providerExecuted!=null?{providerExecuted:p.providerExecuted}:{},...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{},..._!=null?{dynamic:_}:{},errorText:c(p.error),...p.title!=null?{title:p.title}:{}}):g.enqueue({type:"tool-input-available",toolCallId:p.toolCallId,toolName:p.toolName,input:p.input,...p.providerExecuted!=null?{providerExecuted:p.providerExecuted}:{},...p.providerMetadata!=null?{providerMetadata:p.providerMetadata}:{},..._!=null?{dynamic:_}:{},...p.title!=null?{title:p.title}:{}});break}case"tool-approval-request":{g.enqueue({type:"tool-approval-request",approvalId:p.approvalId,toolCallId:p.toolCall.toolCallId});break}case"tool-result":{let _=d(p);g.enqueue({type:"tool-output-available",toolCallId:p.toolCallId,output:p.output,...p.providerExecuted!=null?{providerExecuted:p.providerExecuted}:{},...p.preliminary!=null?{preliminary:p.preliminary}:{},..._!=null?{dynamic:_}:{}});break}case"tool-error":{let _=d(p);g.enqueue({type:"tool-output-error",toolCallId:p.toolCallId,errorText:c(p.error),...p.providerExecuted!=null?{providerExecuted:p.providerExecuted}:{},..._!=null?{dynamic:_}:{}});break}case"tool-output-denied":{g.enqueue({type:"tool-output-denied",toolCallId:p.toolCallId});break}case"error":{g.enqueue({type:"error",errorText:c(p.error)});break}case"start-step":{g.enqueue({type:"start-step"});break}case"finish-step":{g.enqueue({type:"finish-step"});break}case"start":{s&&g.enqueue({type:"start",...h!=null?{messageMetadata:h}:{},...l!=null?{messageId:l}:{}});break}case"finish":{u&&g.enqueue({type:"finish",finishReason:p.finishReason,...h!=null?{messageMetadata:h}:{}});break}case"abort":{g.enqueue(p);break}case"tool-input-end":break;case"raw":break;default:{let _=v;throw new Error(`Unknown chunk type: ${_}`)}}h!=null&&v!=="start"&&v!=="finish"&&g.enqueue({type:"message-metadata",messageMetadata:h})}}));return fl(mM({stream:m,messageId:l!=null?l:t==null?void 0:t(),originalMessages:e,onFinish:r,onError:c}))}pipeUIMessageStreamToResponse(e,{originalMessages:t,generateMessageId:r,onFinish:o,messageMetadata:n,sendReasoning:i,sendSources:s,sendFinish:u,sendStart:c,onError:l,...d}={}){fM({response:e,stream:this.toUIMessageStream({originalMessages:t,generateMessageId:r,onFinish:o,messageMetadata:n,sendReasoning:i,sendSources:s,sendFinish:u,sendStart:c,onError:l}),...d})}pipeTextStreamToResponse(e,t){aM({response:e,textStream:this.textStream,...t})}toUIMessageStreamResponse({originalMessages:e,generateMessageId:t,onFinish:r,messageMetadata:o,sendReasoning:n,sendSources:i,sendFinish:s,sendStart:u,onError:c,...l}={}){return iM({stream:this.toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:r,messageMetadata:o,sendReasoning:n,sendSources:i,sendFinish:s,sendStart:u,onError:c}),...l})}toTextStreamResponse(e){return oM({textStream:this.textStream,...e})}};var f5=al(()=>Er(a.array(a.object({id:a.string(),role:a.enum(["system","user","assistant"]),metadata:a.unknown().optional(),parts:a.array(a.union([a.object({type:a.literal("text"),text:a.string(),state:a.enum(["streaming","done"]).optional(),providerMetadata:se.optional()}),a.object({type:a.literal("reasoning"),text:a.string(),state:a.enum(["streaming","done"]).optional(),providerMetadata:se.optional()}),a.object({type:a.literal("source-url"),sourceId:a.string(),url:a.string(),title:a.string().optional(),providerMetadata:se.optional()}),a.object({type:a.literal("source-document"),sourceId:a.string(),mediaType:a.string(),title:a.string(),filename:a.string().optional(),providerMetadata:se.optional()}),a.object({type:a.literal("file"),mediaType:a.string(),filename:a.string().optional(),url:a.string(),providerMetadata:se.optional()}),a.object({type:a.literal("step-start")}),a.object({type:a.string().startsWith("data-"),id:a.string().optional(),data:a.unknown()}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("input-streaming"),input:a.unknown().optional(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.never().optional(),approval:a.never().optional()}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("input-available"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:se.optional(),approval:a.never().optional()}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("approval-requested"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:se.optional(),approval:a.object({id:a.string(),approved:a.never().optional(),reason:a.never().optional()})}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("approval-responded"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:se.optional(),approval:a.object({id:a.string(),approved:a.boolean(),reason:a.string().optional()})}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("output-available"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.unknown(),errorText:a.never().optional(),callProviderMetadata:se.optional(),preliminary:a.boolean().optional(),approval:a.object({id:a.string(),approved:a.literal(!0),reason:a.string().optional()}).optional()}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("output-error"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.string(),callProviderMetadata:se.optional(),approval:a.object({id:a.string(),approved:a.literal(!0),reason:a.string().optional()}).optional()}),a.object({type:a.literal("dynamic-tool"),toolName:a.string(),toolCallId:a.string(),state:a.literal("output-denied"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:se.optional(),approval:a.object({id:a.string(),approved:a.literal(!1),reason:a.string().optional()})}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("input-streaming"),providerExecuted:a.boolean().optional(),input:a.unknown().optional(),output:a.never().optional(),errorText:a.never().optional(),approval:a.never().optional()}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("input-available"),providerExecuted:a.boolean().optional(),input:a.unknown(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:se.optional(),approval:a.never().optional()}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("approval-requested"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:se.optional(),approval:a.object({id:a.string(),approved:a.never().optional(),reason:a.never().optional()})}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("approval-responded"),input:a.unknown(),providerExecuted:a.boolean().optional(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:se.optional(),approval:a.object({id:a.string(),approved:a.boolean(),reason:a.string().optional()})}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("output-available"),providerExecuted:a.boolean().optional(),input:a.unknown(),output:a.unknown(),errorText:a.never().optional(),callProviderMetadata:se.optional(),preliminary:a.boolean().optional(),approval:a.object({id:a.string(),approved:a.literal(!0),reason:a.string().optional()}).optional()}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("output-error"),providerExecuted:a.boolean().optional(),input:a.unknown(),output:a.never().optional(),errorText:a.string(),callProviderMetadata:se.optional(),approval:a.object({id:a.string(),approved:a.literal(!0),reason:a.string().optional()}).optional()}),a.object({type:a.string().startsWith("tool-"),toolCallId:a.string(),state:a.literal("output-denied"),providerExecuted:a.boolean().optional(),input:a.unknown(),output:a.never().optional(),errorText:a.never().optional(),callProviderMetadata:se.optional(),approval:a.object({id:a.string(),approved:a.literal(!1),reason:a.string().optional()})})])).nonempty("Message must contain at least one part")})).nonempty("Messages array must not be empty")));var h5=Tr({prefix:"aiobj",size:24});var y5=Tr({prefix:"aiobj",size:24});var wM="AI_NoSuchProviderError",SM=`vercel.ai.error.${wM}`,kM=Symbol.for(SM),IM;IM=kM;var yl=class{constructor(t,r,o=!1,n=50){this.flushTimer=null;this.bufferedText="";this.editor=t,this.currentCursor=r,this.setAtCursor=o,this.flushInterval=n}startBuffering(){this.flushTimer||(this.flushTimer=setInterval(()=>this.flush(),this.flushInterval))}appendText(t){this.bufferedText+=t}flush(){if(this.bufferedText.length!==0){if(this.setAtCursor)this.editor.replaceSelection(this.bufferedText);else{this.editor.replaceRange(this.bufferedText,this.currentCursor);let r=this.editor.posToOffset(this.currentCursor)+this.bufferedText.length;this.currentCursor=this.editor.offsetToPos(r),this.editor.setCursor(this.currentCursor)}this.bufferedText=""}}stopBuffering(){this.flushTimer&&(clearInterval(this.flushTimer),this.flushTimer=null),this.flush()}getCursor(){return this.currentCursor}setCursor(t){this.currentCursor=t}updateCursorAfterInsert(t,r){let n=this.editor.posToOffset(r)+t.length;this.currentCursor=this.editor.offsetToPos(n)}getBufferedText(){return this.bufferedText}reset(t){this.bufferedText="",this.currentCursor=t}};var Ct=class{constructor(){this.inferTitleFromMessages=async(t,r,o)=>{try{if(r.length<2)return this.notificationService.showWarning("Not enough messages to infer title. Minimum 2 messages."),"";let n=`Infer title from the summary of the content of these messages. The title **cannot** contain any of the following characters: colon (:), back slash (\\), forward slash (/), asterisk (*), question mark (?), double quote ("), less than (<), greater than (>), or pipe (|) as these are invalid in file names. Just return the title. Write the title in ${o.inferTitleLanguage}. 
Messages:${at}${JSON.stringify(r)}`,i=this.getDefaultConfig(),s={...i,...o};s.model||(s.model=i.model),s.url||(s.url=i.url);try{let u=await this.callNonStreamingAPI(t,[{role:ct,content:n}],s,o);return u.fullString||u}catch(u){return""}}catch(n){return this.showNoTitleInferredNotification(),""}};this.notificationService=new ft,this.errorService=new _r(this.notificationService),this.apiService=new Wn(this.errorService,this.notificationService),this.apiAuthService=new yr(this.notificationService),this.apiResponseParser=new an(this.notificationService)}handleTitleTruncationError(t,r){let o=t.editor,n=o.lastLine(),i=o.getLine(n).length,s={line:n,ch:i};o.setCursor(s);let c=`
---
${"#".repeat(2)+" "}${Cg}
`;o.replaceRange(c+r+`
`,s)}isTruncationError(t){return t.includes(Ag)}async callAIAPI(t,r={},o,n,i,s,u,c,l){let d={...this.getDefaultConfig(),...r};return c&&(d.url=n),r.stream&&i?this.callStreamingAPI(u,t,d,i,o,s,c,l):this.callNonStreamingAPI(u,t,d,c,this.provider,l)}async inferTitle(t,r,o,n){try{if(!t.file)throw new Error("No active file found");let i=this.getApiKeyFromSettings(r),s=await this.inferTitleFromMessages(i,o,r),u="";if(typeof s=="string"){if(this.isTruncationError(s))return this.handleTitleTruncationError(t,s),this.showNoTitleInferredNotification(),"";u=s}else if(s&&typeof s=="object"){let l=s.fullString||"";if(this.isTruncationError(l))return this.handleTitleTruncationError(t,l),this.showNoTitleInferredNotification(),"";u=l}return u&&u.trim().length>0?(await n.writeInferredTitle(t,u.trim()),u.trim()):(this.showNoTitleInferredNotification(),"")}catch(i){return this.showNoTitleInferredNotification(),""}}showNoTitleInferredNotification(){var t;(t=this.notificationService)==null||t.showWarning("Could not infer title. The file name was not changed.")}stopStreaming(){var t;(t=this.apiService)==null||t.stopStreaming()}getApiEndpoint(t){return`${t.url}${ug[this.serviceType]}`}extractModelName(t){let r=t.indexOf("@");return r!==-1?t.slice(r+1):t}addPluginSystemMessage(t,r){return this.supportsSystemField()?t:[{role:this.getSystemMessageRole(),content:r.pluginSystemMessage},...t]}processSystemCommands(t,r){return!r||r.length===0||this.supportsSystemField()?t:[...r.map(n=>({role:this.getSystemMessageRole(),content:n})),...t]}handleApiCallError(t,r,o=!1){if(!!o)throw t;return this.errorService.handleApiError(t,this.serviceType,{returnForChat:!0,showNotification:!0,context:{model:r.model,url:r.url}})}async callAiSdkGenerateText(t,r,o,n,i){var l;let s=o.map(d=>({role:d.role,content:d.content})),u={model:t,messages:s};n&&Object.keys(n).length>0&&(u.tools=n);let c=await kf(u);if(i&&c.toolCalls&&c.toolCalls.length>0){let d=await i.handleToolCalls(c.toolCalls,r),{contextMessages:m}=await i.processToolResults(c.toolCalls,d,r),p=[...s];return(l=c.text)!=null&&l.trim()&&p.push({role:"assistant",content:c.text}),p.push(...m),{fullString:(await kf({model:t,messages:p})).text,model:r}}return{fullString:c.text,model:r}}async callAiSdkStreamText(t,r,o,n,i,s,u,c,l){try{let d=o.map(y=>({role:y.role,content:y.content})),m=this.apiResponseParser.insertAssistantHeader(i,s,r),p=new AbortController;this.apiService.setAbortController(p);let g=u?m.initialCursor:m.newCursor,h=new yl(i,g,u);h.startBuffering();let v={model:t,messages:d,abortSignal:p.signal};c&&Object.keys(c).length>0&&(v.tools=c);let _=If(v),{textStream:w}=_,x="";try{for await(let y of w){if(this.apiService.wasAborted())break;x+=y,h.appendText(y)}}finally{h.stopBuffering()}let f=await _;if(l&&f.toolCalls){let y=await f.toolCalls;if(y&&y.length>0){let k=`

_[Tool approval required...]_
`,$=h.getCursor();i.replaceRange(k,$),h.updateCursorAfterInsert(k,$);let O=await l.handleToolCalls(y,r),{contextMessages:L}=await l.processToolResults(y,O,r),F=h.getCursor();i.replaceRange("",{line:F.line-1,ch:0},F),h.setCursor({line:F.line-1,ch:0});let U=[...d];U.push({role:"assistant",content:x}),U.push(...L);let Z=If({model:t,messages:U}),E=h.getCursor();h.reset(E),h.startBuffering();try{for await(let z of Z.textStream){if(this.apiService.wasAborted())break;x+=z,h.appendText(z)}}finally{h.stopBuffering()}}}let b=h.getCursor();return u||i.setCursor(b),{fullString:x,mode:"streaming",wasAborted:this.apiService.wasAborted()}}catch(d){return{fullString:`Error: ${d}`,mode:"streaming"}}}},fS=(e,t)=>{if(!t)return;let r=[["openai@",Ie],["anthropic@",Ze],["gemini@",qe],["ollama@",Me],["lmstudio@",Le],["openrouter@",Ee],["local@",Me]];for(let[n,i]of r)if(t.startsWith(n))return i;let o=t.toLowerCase();return o.includes("claude")?Ze:o.includes("gemini")?qe:o.includes("gpt")||o.startsWith("o1")||o.startsWith("o3")||o.startsWith("o4")?Ie:Ie},gS=e=>{let t=rt(e.openrouterApiKey),r=rt(e.apiKey),o=rt(e.anthropicApiKey),n=rt(e.geminiApiKey);return r?Ie:o?Ze:n?qe:t?Ee:null};var VS="vercel.ai.error",TM=Symbol.for(VS),hS,vS,Ge=class GS extends(vS=Error,hS=TM,vS){constructor({name:t,message:r,cause:o}){super(r),this[hS]=!0,this.name=t,this.cause=o}static isInstance(t){return GS.hasMarker(t,VS)}static hasMarker(t,r){let o=Symbol.for(r);return t!=null&&typeof t=="object"&&o in t&&typeof t[o]=="boolean"&&t[o]===!0}},JS="AI_APICallError",BS=`vercel.ai.error.${JS}`,$M=Symbol.for(BS),yS,_S,dt=class extends(_S=Ge,yS=$M,_S){constructor({message:e,url:t,requestBodyValues:r,statusCode:o,responseHeaders:n,responseBody:i,cause:s,isRetryable:u=o!=null&&(o===408||o===409||o===429||o>=500),data:c}){super({name:JS,message:e,cause:s}),this[yS]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=o,this.responseHeaders=n,this.responseBody=i,this.isRetryable=u,this.data=c}static isInstance(e){return Ge.hasMarker(e,BS)}},HS="AI_EmptyResponseBodyError",WS=`vercel.ai.error.${HS}`,EM=Symbol.for(WS),bS,xS,KS=class extends(xS=Ge,bS=EM,xS){constructor({message:e="Empty response body"}={}){super({name:HS,message:e}),this[bS]=!0}static isInstance(e){return Ge.hasMarker(e,WS)}};function YS(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var XS="AI_InvalidArgumentError",QS=`vercel.ai.error.${XS}`,AM=Symbol.for(QS),wS,SS,_l=class extends(SS=Ge,wS=AM,SS){constructor({message:e,cause:t,argument:r}){super({name:XS,message:e,cause:t}),this[wS]=!0,this.argument=r}static isInstance(e){return Ge.hasMarker(e,QS)}},ek="AI_InvalidPromptError",tk=`vercel.ai.error.${ek}`,CM=Symbol.for(tk),kS,IS,bl=class extends(IS=Ge,kS=CM,IS){constructor({prompt:e,message:t,cause:r}){super({name:ek,message:`Invalid prompt: ${t}`,cause:r}),this[kS]=!0,this.prompt=e}static isInstance(e){return Ge.hasMarker(e,tk)}},rk="AI_InvalidResponseDataError",nk=`vercel.ai.error.${rk}`,PM=Symbol.for(nk),TS,$S,Fn=class extends($S=Ge,TS=PM,$S){constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:rk,message:t}),this[TS]=!0,this.data=e}static isInstance(e){return Ge.hasMarker(e,nk)}},ok="AI_JSONParseError",ak=`vercel.ai.error.${ok}`,OM=Symbol.for(ak),ES,AS,mi=class extends(AS=Ge,ES=OM,AS){constructor({text:e,cause:t}){super({name:ok,message:`JSON parsing failed: Text: ${e}.
Error message: ${YS(t)}`,cause:t}),this[ES]=!0,this.text=e}static isInstance(e){return Ge.hasMarker(e,ak)}},ik="AI_LoadAPIKeyError",sk=`vercel.ai.error.${ik}`,NM=Symbol.for(sk),CS,PS,fi=class extends(PS=Ge,CS=NM,PS){constructor({message:e}){super({name:ik,message:e}),this[CS]=!0}static isInstance(e){return Ge.hasMarker(e,sk)}},lk="AI_LoadSettingError",uk=`vercel.ai.error.${lk}`,RM=Symbol.for(uk),OS,NS,B5=class extends(NS=Ge,OS=RM,NS){constructor({message:e}){super({name:lk,message:e}),this[OS]=!0}static isInstance(e){return Ge.hasMarker(e,uk)}},ck="AI_NoContentGeneratedError",dk=`vercel.ai.error.${ck}`,jM=Symbol.for(dk),RS,jS,H5=class extends(jS=Ge,RS=jM,jS){constructor({message:e="No content generated."}={}){super({name:ck,message:e}),this[RS]=!0}static isInstance(e){return Ge.hasMarker(e,dk)}},pk="AI_NoSuchModelError",mk=`vercel.ai.error.${pk}`,MM=Symbol.for(mk),MS,DS,$f=class extends(DS=Ge,MS=MM,DS){constructor({errorName:e=pk,modelId:t,modelType:r,message:o=`No such ${r}: ${t}`}){super({name:e,message:o}),this[MS]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return Ge.hasMarker(e,mk)}},fk="AI_TooManyEmbeddingValuesForCallError",gk=`vercel.ai.error.${fk}`,DM=Symbol.for(gk),zS,US,Mo=class extends(US=Ge,zS=DM,US){constructor(e){super({name:fk,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[zS]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Ge.hasMarker(e,gk)}},hk="AI_TypeValidationError",vk=`vercel.ai.error.${hk}`,zM=Symbol.for(vk),FS,LS,xn=class Tf extends(LS=Ge,FS=zM,LS){constructor({value:t,cause:r}){super({name:hk,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${YS(r)}`,cause:r}),this[FS]=!0,this.value=t}static isInstance(t){return Ge.hasMarker(t,vk)}static wrap({value:t,cause:r}){return Tf.isInstance(r)&&r.value===t?r:new Tf({value:t,cause:r})}},yk="AI_UnsupportedFunctionalityError",_k=`vercel.ai.error.${yk}`,UM=Symbol.for(_k),ZS,qS,xe=class extends(qS=Ge,ZS=UM,qS){constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:yk,message:t}),this[ZS]=!0,this.functionality=e}static isInstance(e){return Ge.hasMarker(e,_k)}};function _e(...e){return e.reduce((t,r)=>({...t,...r!=null?r:{}}),{})}function wl({tools:e=[],providerToolNames:t}){let r={},o={};for(let n of e)if(n.type==="provider"&&n.id in t){let i=t[n.id];r[n.name]=i,o[i]=n.name}return{toProviderToolName:n=>{var i;return(i=r[n])!=null?i:n},toCustomToolName:n=>{var i;return(i=o[n])!=null?i:n}}}function gi(e){return Object.fromEntries([...e.headers])}var FM=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:o="-"}={})=>{let n=()=>{let i=r.length,s=new Array(t);for(let u=0;u<t;u++)s[u]=r[Math.random()*i|0];return s.join("")};if(e==null)return n;if(r.includes(o))throw new _l({argument:"separator",message:`The separator "${o}" must not be part of the alphabet "${r}".`});return()=>`${e}${o}${n()}`},ze=FM();function Cf(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var LM=["fetch failed","failed to fetch"];function ZM({error:e,url:t,requestBodyValues:r}){if(Cf(e))return e;if(e instanceof TypeError&&LM.includes(e.message.toLowerCase())){let o=e.cause;if(o!=null)return new dt({message:`Cannot connect to API: ${o.message}`,cause:o,url:t,requestBodyValues:r,isRetryable:!0})}return e}function qM(e=globalThis){var t,r,o;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(o=(r=e.process)==null?void 0:r.versions)!=null&&o.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function VM(e){if(e==null)return{};let t={};if(e instanceof Headers)e.forEach((r,o)=>{t[o.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(let[r,o]of e)o!=null&&(t[r.toLowerCase()]=o)}return t}function en(e,...t){let r=new Headers(VM(e)),o=r.get("user-agent")||"";return r.set("user-agent",[o,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var GM="4.0.0-beta.44";function Sl(e){return e!=null}function Do({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:o}){if(typeof e=="string")return e;if(e!=null)throw new fi({message:`${o} API key must be a string.`});if(typeof process=="undefined")throw new fi({message:`${o} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=process.env[t],e==null)throw new fi({message:`${o} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new fi({message:`${o} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function kl({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process=="undefined")&&(e=process.env[t],!(e==null||typeof e!="string")))return e}function Sk(e){var t;let[r,o=""]=e.toLowerCase().split("/");return(t={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[o])!=null?t:o}var JM=/"__proto__"\s*:/,BM=/"constructor"\s*:/;function bk(e){let t=JSON.parse(e);return t===null||typeof t!="object"||JM.test(e)===!1&&BM.test(e)===!1?t:HM(t)}function HM(e){let t=[e];for(;t.length;){let r=t;t=[];for(let o of r){if(Object.prototype.hasOwnProperty.call(o,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let n in o){let i=o[n];i&&typeof i=="object"&&t.push(i)}}}return e}function Nf(e){let{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch(r){return bk(e)}try{return bk(e)}finally{Error.stackTraceLimit=t}}var WM=e=>()=>e.toJsonSchema(),KM=e=>async()=>{try{let{JSONSchema:t}=await import("effect");return t.make(e)}catch(t){throw new Error("Failed to import module 'effect'")}},YM=e=>async()=>{try{let{toJsonSchema:t}=await import("@valibot/to-json-schema");return t(e)}catch(t){throw new Error("Failed to import module '@valibot/to-json-schema'")}},XM=Symbol("Let zodToJsonSchema decide on which parser to use"),xk={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},QM=e=>typeof e=="string"?{...xk,name:e}:{...xk,...e};function Lt(){return{}}function eD(e,t){var r,o,n;let i={type:"array"};return(r=e.type)!=null&&r._def&&((n=(o=e.type)==null?void 0:o._def)==null?void 0:n.typeName)!==I.ZodAny&&(i.items=Ne(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(i.minItems=e.minLength.value),e.maxLength&&(i.maxItems=e.maxLength.value),e.exactLength&&(i.minItems=e.exactLength.value,i.maxItems=e.exactLength.value),i}function tD(e){let t={type:"integer",format:"int64"};if(!e.checks)return t;for(let r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function rD(){return{type:"boolean"}}function kk(e,t){return Ne(e.type._def,t)}var nD=(e,t)=>Ne(e.innerType._def,t);function Ik(e,t,r){let o=r!=null?r:t.dateStrategy;if(Array.isArray(o))return{anyOf:o.map((n,i)=>Ik(e,t,n))};switch(o){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return oD(e)}}var oD=e=>{let t={type:"integer",format:"unix-time"};for(let r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function aD(e,t){return{...Ne(e.innerType._def,t),default:e.defaultValue()}}function iD(e,t){return t.effectStrategy==="input"?Ne(e.schema._def,t):Lt()}function sD(e){return{type:"string",enum:Array.from(e.values)}}var lD=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function uD(e,t){let r=[Ne(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Ne(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(n=>!!n),o=[];return r.forEach(n=>{if(lD(n))o.push(...n.allOf);else{let i=n;if("additionalProperties"in n&&n.additionalProperties===!1){let{additionalProperties:s,...u}=n;i=u}o.push(i)}}),o.length?{allOf:o}:void 0}function cD(e){let t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var Ef=void 0,sr={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Ef===void 0&&(Ef=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ef),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Tk(e,t){let r={type:"string"};if(e.checks)for(let o of e.checks)switch(o.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value;break;case"email":switch(t.emailStrategy){case"format:email":lr(r,"email",o.message,t);break;case"format:idn-email":lr(r,"idn-email",o.message,t);break;case"pattern:zod":kt(r,sr.email,o.message,t);break}break;case"url":lr(r,"uri",o.message,t);break;case"uuid":lr(r,"uuid",o.message,t);break;case"regex":kt(r,o.regex,o.message,t);break;case"cuid":kt(r,sr.cuid,o.message,t);break;case"cuid2":kt(r,sr.cuid2,o.message,t);break;case"startsWith":kt(r,RegExp(`^${Af(o.value,t)}`),o.message,t);break;case"endsWith":kt(r,RegExp(`${Af(o.value,t)}$`),o.message,t);break;case"datetime":lr(r,"date-time",o.message,t);break;case"date":lr(r,"date",o.message,t);break;case"time":lr(r,"time",o.message,t);break;case"duration":lr(r,"duration",o.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,o.value):o.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,o.value):o.value;break;case"includes":{kt(r,RegExp(Af(o.value,t)),o.message,t);break}case"ip":{o.version!=="v6"&&lr(r,"ipv4",o.message,t),o.version!=="v4"&&lr(r,"ipv6",o.message,t);break}case"base64url":kt(r,sr.base64url,o.message,t);break;case"jwt":kt(r,sr.jwt,o.message,t);break;case"cidr":{o.version!=="v6"&&kt(r,sr.ipv4Cidr,o.message,t),o.version!=="v4"&&kt(r,sr.ipv6Cidr,o.message,t);break}case"emoji":kt(r,sr.emoji(),o.message,t);break;case"ulid":{kt(r,sr.ulid,o.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{lr(r,"binary",o.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{kt(r,sr.base64,o.message,t);break}}break}case"nanoid":kt(r,sr.nanoid,o.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}function Af(e,t){return t.patternStrategy==="escape"?pD(e):e}var dD=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function pD(e){let t="";for(let r=0;r<e.length;r++)dD.has(e[r])||(t+="\\"),t+=e[r];return t}function lr(e,t,r,o){var n;e.format||(n=e.anyOf)!=null&&n.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&o.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function kt(e,t,r,o){var n;e.pattern||(n=e.allOf)!=null&&n.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:wk(t,o),...r&&o.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=wk(t,o)}function wk(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;let o={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=o.i?e.source.toLowerCase():e.source,i="",s=!1,u=!1,c=!1;for(let l=0;l<n.length;l++){if(s){i+=n[l],s=!1;continue}if(o.i){if(u){if(n[l].match(/[a-z]/)){c?(i+=n[l],i+=`${n[l-2]}-${n[l]}`.toUpperCase(),c=!1):n[l+1]==="-"&&((r=n[l+2])!=null&&r.match(/[a-z]/))?(i+=n[l],c=!0):i+=`${n[l]}${n[l].toUpperCase()}`;continue}}else if(n[l].match(/[a-z]/)){i+=`[${n[l]}${n[l].toUpperCase()}]`;continue}}if(o.m){if(n[l]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[l]==="$"){i+=`($|(?=[\r
]))`;continue}}if(o.s&&n[l]==="."){i+=u?`${n[l]}\r
`:`[${n[l]}\r
]`;continue}i+=n[l],n[l]==="\\"?s=!0:u&&n[l]==="]"?u=!1:!u&&n[l]==="["&&(u=!0)}try{new RegExp(i)}catch(l){return e.source}return i}function $k(e,t){var r,o,n,i,s,u;let c={type:"object",additionalProperties:(r=Ne(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((o=e.keyType)==null?void 0:o._def.typeName)===I.ZodString&&((n=e.keyType._def.checks)!=null&&n.length)){let{type:l,...d}=Tk(e.keyType._def,t);return{...c,propertyNames:d}}else{if(((i=e.keyType)==null?void 0:i._def.typeName)===I.ZodEnum)return{...c,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===I.ZodBranded&&e.keyType._def.type._def.typeName===I.ZodString&&((u=e.keyType._def.type._def.checks)!=null&&u.length)){let{type:l,...d}=kk(e.keyType._def,t);return{...c,propertyNames:d}}}return c}function mD(e,t){if(t.mapStrategy==="record")return $k(e,t);let r=Ne(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||Lt(),o=Ne(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||Lt();return{type:"array",maxItems:125,items:{type:"array",items:[r,o],minItems:2,maxItems:2}}}function fD(e){let t=e.values,o=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),n=Array.from(new Set(o.map(i=>typeof i)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:o}}function gD(){return{not:Lt()}}function hD(){return{type:"null"}}var Pf={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function vD(e,t){let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(o=>o._def.typeName in Pf&&(!o._def.checks||!o._def.checks.length))){let o=r.reduce((n,i)=>{let s=Pf[i._def.typeName];return s&&!n.includes(s)?[...n,s]:n},[]);return{type:o.length>1?o:o[0]}}else if(r.every(o=>o._def.typeName==="ZodLiteral"&&!o.description)){let o=r.reduce((n,i)=>{let s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...n,s];case"bigint":return[...n,"integer"];case"object":if(i._def.value===null)return[...n,"null"];case"symbol":case"undefined":case"function":default:return n}},[]);if(o.length===r.length){let n=o.filter((i,s,u)=>u.indexOf(i)===s);return{type:n.length>1?n:n[0],enum:r.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(r.every(o=>o._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((o,n)=>[...o,...n._def.values.filter(i=>!o.includes(i))],[])};return yD(e,t)}var yD=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((o,n)=>Ne(o._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(o=>!!o&&(!t.strictUnions||typeof o=="object"&&Object.keys(o).length>0));return r.length?{anyOf:r}:void 0};function _D(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[Pf[e.innerType._def.typeName],"null"]};let r=Ne(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function bD(e){let t={type:"number"};if(!e.checks)return t;for(let r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function xD(e,t){let r={type:"object",properties:{}},o=[],n=e.shape();for(let s in n){let u=n[s];if(u===void 0||u._def===void 0)continue;let c=SD(u),l=Ne(u._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});l!==void 0&&(r.properties[s]=l,c||o.push(s))}o.length&&(r.required=o);let i=wD(e,t);return i!==void 0&&(r.additionalProperties=i),r}function wD(e,t){if(e.catchall._def.typeName!=="ZodNever")return Ne(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function SD(e){try{return e.isOptional()}catch(t){return!0}}var kD=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return Ne(e.innerType._def,t);let o=Ne(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return o?{anyOf:[{not:Lt()},o]}:Lt()},ID=(e,t)=>{if(t.pipeStrategy==="input")return Ne(e.in._def,t);if(t.pipeStrategy==="output")return Ne(e.out._def,t);let r=Ne(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),o=Ne(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,o].filter(n=>n!==void 0)}};function TD(e,t){return Ne(e.type._def,t)}function $D(e,t){let o={type:"array",uniqueItems:!0,items:Ne(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(o.minItems=e.minSize.value),e.maxSize&&(o.maxItems=e.maxSize.value),o}function ED(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,o)=>Ne(r._def,{...t,currentPath:[...t.currentPath,"items",`${o}`]})).reduce((r,o)=>o===void 0?r:[...r,o],[]),additionalItems:Ne(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,o)=>Ne(r._def,{...t,currentPath:[...t.currentPath,"items",`${o}`]})).reduce((r,o)=>o===void 0?r:[...r,o],[])}}function AD(){return{not:Lt()}}function CD(){return Lt()}var PD=(e,t)=>Ne(e.innerType._def,t),OD=(e,t,r)=>{switch(t){case I.ZodString:return Tk(e,r);case I.ZodNumber:return bD(e);case I.ZodObject:return xD(e,r);case I.ZodBigInt:return tD(e);case I.ZodBoolean:return rD();case I.ZodDate:return Ik(e,r);case I.ZodUndefined:return AD();case I.ZodNull:return hD();case I.ZodArray:return eD(e,r);case I.ZodUnion:case I.ZodDiscriminatedUnion:return vD(e,r);case I.ZodIntersection:return uD(e,r);case I.ZodTuple:return ED(e,r);case I.ZodRecord:return $k(e,r);case I.ZodLiteral:return cD(e);case I.ZodEnum:return sD(e);case I.ZodNativeEnum:return fD(e);case I.ZodNullable:return _D(e,r);case I.ZodOptional:return kD(e,r);case I.ZodMap:return mD(e,r);case I.ZodSet:return $D(e,r);case I.ZodLazy:return()=>e.getter()._def;case I.ZodPromise:return TD(e,r);case I.ZodNaN:case I.ZodNever:return gD();case I.ZodEffects:return iD(e,r);case I.ZodAny:return Lt();case I.ZodUnknown:return CD();case I.ZodDefault:return aD(e,r);case I.ZodBranded:return kk(e,r);case I.ZodReadonly:return PD(e,r);case I.ZodCatch:return nD(e,r);case I.ZodPipeline:return ID(e,r);case I.ZodFunction:case I.ZodVoid:case I.ZodSymbol:return;default:return(o=>{})(t)}},ND=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function Ne(e,t,r=!1){var o;let n=t.seen.get(e);if(t.override){let c=(o=t.override)==null?void 0:o.call(t,e,t,n,r);if(c!==XM)return c}if(n&&!r){let c=RD(n,t);if(c!==void 0)return c}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let s=OD(e,e.typeName,t),u=typeof s=="function"?Ne(s(),t):s;if(u&&jD(e,t,u),t.postProcess){let c=t.postProcess(u,e,t);return i.jsonSchema=u,c}return i.jsonSchema=u,u}var RD=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:ND(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,o)=>t.currentPath[o]===r)||t.$refStrategy==="seen"?Lt():void 0}},jD=(e,t,r)=>(e.description&&(r.description=e.description),r),MD=e=>{let t=QM(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([o,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,o],jsonSchema:void 0}]))}},DD=(e,t)=>{var r;let o=MD(t),n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[d,m])=>{var p;return{...l,[d]:(p=Ne(m._def,{...o,currentPath:[...o.basePath,o.definitionPath,d]},!0))!=null?p:Lt()}},{}):void 0,i=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,s=(r=Ne(e._def,i===void 0?o:{...o,currentPath:[...o.basePath,o.definitionPath,i]},!1))!=null?r:Lt(),u=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;u!==void 0&&(s.title=u);let c=i===void 0?n?{...s,[o.definitionPath]:n}:s:{$ref:[...o.$refStrategy==="relative"?[]:o.basePath,o.definitionPath,i].join("/"),[o.definitionPath]:{...n,[i]:s}};return c.$schema="http://json-schema.org/draft-07/schema#",c},Of=Symbol.for("vercel.ai.schema");function j(e){let t;return()=>(t==null&&(t=e()),t)}function Il(e,{validate:t}={}){return{[Of]:!0,_type:void 0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function zD(e){return typeof e=="object"&&e!==null&&Of in e&&e[Of]===!0&&"jsonSchema"in e&&"validate"in e}function UD(e){return e==null?Il({properties:{},additionalProperties:!1}):zD(e)?e:"~standard"in e?FD(e):e()}function FD(e){let t=e["~standard"].vendor;switch(t){case"zod":return R(e);case"arktype":return xl(e,WM);case"effect":return xl(e,KM);case"valibot":return xl(e,YM);default:return xl(e,()=>()=>{throw new Error(`Unsupported standard schema vendor: ${t}`)})}}function xl(e,t){return Il(t(e),{validate:async r=>{let o=await e["~standard"].validate(r);return"value"in o?{success:!0,value:o.value}:{success:!1,error:new xn({value:r,cause:o.issues})}}})}function LD(e,t){var r;let o=(r=t==null?void 0:t.useReferences)!=null?r:!1;return Il(()=>DD(e,{$refStrategy:o?"root":"none"}),{validate:async n=>{let i=await e.safeParseAsync(n);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function ZD(e,t){var r;let o=(r=t==null?void 0:t.useReferences)!=null?r:!1;return Il(()=>Zr(e,{target:"draft-7",io:"output",reused:o?"ref":"inline"}),{validate:async n=>{let i=await qr(e,n);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}function qD(e){return"_zod"in e}function R(e,t){return qD(e)?ZD(e,t):LD(e,t)}async function We({value:e,schema:t}){let r=await Rf({value:e,schema:t});if(!r.success)throw xn.wrap({value:e,cause:r.error});return r.value}async function Rf({value:e,schema:t}){let r=UD(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};let o=await r.validate(e);return o.success?{success:!0,value:o.value,rawValue:e}:{success:!1,error:xn.wrap({value:e,cause:o.error}),rawValue:e}}catch(o){return{success:!1,error:xn.wrap({value:e,cause:o}),rawValue:e}}}async function VD({text:e,schema:t}){try{let r=Nf(e);return t==null?r:We({value:r,schema:t})}catch(r){throw mi.isInstance(r)||xn.isInstance(r)?r:new mi({text:e,cause:r})}}async function Ek({text:e,schema:t}){try{let r=Nf(e);return t==null?{success:!0,value:r,rawValue:r}:await Rf({value:r,schema:t})}catch(r){return{success:!1,error:mi.isInstance(r)?r:new mi({text:e,cause:r}),rawValue:void 0}}}function zo(e){try{return Nf(e),!0}catch(t){return!1}}function GD({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new To).pipeThrough(new TransformStream({async transform({data:r},o){r!=="[DONE]"&&o.enqueue(await Ek({text:r,schema:t}))}}))}async function we({provider:e,providerOptions:t,schema:r}){if((t==null?void 0:t[e])==null)return;let o=await Rf({value:t[e],schema:r});if(!o.success)throw new _l({argument:"providerOptions",message:`invalid ${e} provider options`,cause:o.error});return o.value}var JD=()=>globalThis.fetch,be=async({url:e,headers:t,body:r,failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s})=>Ck({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s}),Ak=async({url:e,headers:t,formData:r,failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s})=>Ck({url:e,headers:t,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s}),Ck=async({url:e,headers:t={},body:r,successfulResponseHandler:o,failedResponseHandler:n,abortSignal:i,fetch:s=JD()})=>{try{let u=await s(e,{method:"POST",headers:en(t,`ai-sdk/provider-utils/${GM}`,qM()),body:r.content,signal:i}),c=gi(u);if(!u.ok){let l;try{l=await n({response:u,url:e,requestBodyValues:r.values})}catch(d){throw Cf(d)||dt.isInstance(d)?d:new dt({message:"Failed to process error response",cause:d,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:r.values})}throw l.value}try{return await o({response:u,url:e,requestBodyValues:r.values})}catch(l){throw l instanceof Error&&(Cf(l)||dt.isInstance(l))?l:new dt({message:"Failed to process successful response",cause:l,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:r.values})}}catch(u){throw ZM({error:u,url:e,requestBodyValues:r.values})}};function Je({id:e,inputSchema:t}){return({execute:r,outputSchema:o,needsApproval:n,toModelOutput:i,onInputStart:s,onInputDelta:u,onInputAvailable:c,...l})=>({type:"provider",id:e,args:l,inputSchema:t,outputSchema:o,execute:r,needsApproval:n,toModelOutput:i,onInputStart:s,onInputDelta:u,onInputAvailable:c})}function Te({id:e,inputSchema:t,outputSchema:r}){return({execute:o,needsApproval:n,toModelOutput:i,onInputStart:s,onInputDelta:u,onInputAvailable:c,...l})=>({type:"provider",id:e,args:l,inputSchema:t,outputSchema:r,execute:o,needsApproval:n,toModelOutput:i,onInputStart:s,onInputDelta:u,onInputAvailable:c})}async function Or(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Pt=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:o,url:n,requestBodyValues:i})=>{let s=await o.text(),u=gi(o);if(s.trim()==="")return{responseHeaders:u,value:new dt({message:o.statusText,url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:u,responseBody:s,isRetryable:r==null?void 0:r(o)})};try{let c=await VD({text:s,schema:e});return{responseHeaders:u,value:new dt({message:t(c),url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:u,responseBody:s,data:c,isRetryable:r==null?void 0:r(o,c)})}}catch(c){return{responseHeaders:u,value:new dt({message:o.statusText,url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:u,responseBody:s,isRetryable:r==null?void 0:r(o)})}}},Ot=e=>async({response:t})=>{let r=gi(t);if(t.body==null)throw new KS({});return{responseHeaders:r,value:GD({stream:t.body,schema:e})}},Re=e=>async({response:t,url:r,requestBodyValues:o})=>{let n=await t.text(),i=await Ek({text:n,schema:e}),s=gi(t);if(!i.success)throw new dt({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:n,url:r,requestBodyValues:o});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},Pk=()=>async({response:e,url:t,requestBodyValues:r})=>{let o=gi(e);if(!e.body)throw new dt({message:"Response body is empty",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:o,responseBody:void 0});try{let n=await e.arrayBuffer();return{responseHeaders:o,value:new Uint8Array(n)}}catch(n){throw new dt({message:"Failed to read response as array buffer",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:o,responseBody:void 0,cause:n})}};var{btoa:BD,atob:HD}=globalThis;function Ok(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=HD(t);return Uint8Array.from(r,o=>o.codePointAt(0))}function WD(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return BD(t)}function ht(e){return e instanceof Uint8Array?WD(e):e}function wn(e){return e==null?void 0:e.replace(/\/$/,"")}var Mf=a.object({error:a.object({message:a.string(),type:a.string().nullish(),param:a.any().nullish(),code:a.union([a.string(),a.number()]).nullish()})}),Nr=Pt({errorSchema:Mf,errorToMessage:e=>e.error.message});function Zk(e){let t=e.startsWith("o3")||e.startsWith("o4-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-chat"),r=e.startsWith("gpt-4")||e.startsWith("gpt-5-mini")||e.startsWith("gpt-5")&&!e.startsWith("gpt-5-nano")&&!e.startsWith("gpt-5-chat")||e.startsWith("o3")||e.startsWith("o4-mini"),o=!(e.startsWith("gpt-3")||e.startsWith("gpt-4")||e.startsWith("chatgpt-4o")||e.startsWith("gpt-5-chat")),n=e.startsWith("gpt-5.1");return{supportsFlexProcessing:t,supportsPriorityProcessing:r,isReasoningModel:o,systemMessageMode:o?"developer":"system",supportsNonReasoningParameters:n}}function KD({prompt:e,systemMessageMode:t="system"}){var r;let o=[],n=[];for(let{role:i,content:s}of e)switch(i){case"system":{switch(t){case"system":{o.push({role:"system",content:s});break}case"developer":{o.push({role:"developer",content:s});break}case"remove":{n.push({type:"other",message:"system messages are removed for this model"});break}default:{let u=t;throw new Error(`Unsupported system message mode: ${u}`)}}break}case"user":{if(s.length===1&&s[0].type==="text"){o.push({role:"user",content:s[0].text});break}o.push({role:"user",content:s.map((u,c)=>{var l,d,m;switch(u.type){case"text":return{type:"text",text:u.text};case"file":if(u.mediaType.startsWith("image/")){let p=u.mediaType==="image/*"?"image/jpeg":u.mediaType;return{type:"image_url",image_url:{url:u.data instanceof URL?u.data.toString():`data:${p};base64,${ht(u.data)}`,detail:(d=(l=u.providerOptions)==null?void 0:l.openai)==null?void 0:d.imageDetail}}}else if(u.mediaType.startsWith("audio/")){if(u.data instanceof URL)throw new xe({functionality:"audio file parts with URLs"});switch(u.mediaType){case"audio/wav":return{type:"input_audio",input_audio:{data:ht(u.data),format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:ht(u.data),format:"mp3"}};default:throw new xe({functionality:`audio content parts with media type ${u.mediaType}`})}}else if(u.mediaType==="application/pdf"){if(u.data instanceof URL)throw new xe({functionality:"PDF file parts with URLs"});return{type:"file",file:typeof u.data=="string"&&u.data.startsWith("file-")?{file_id:u.data}:{filename:(m=u.filename)!=null?m:`part-${c}.pdf`,file_data:`data:application/pdf;base64,${ht(u.data)}`}}}else throw new xe({functionality:`file part media type ${u.mediaType}`})}})});break}case"assistant":{let u="",c=[];for(let l of s)switch(l.type){case"text":{u+=l.text;break}case"tool-call":{c.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.input)}});break}}o.push({role:"assistant",content:u,tool_calls:c.length>0?c:void 0});break}case"tool":{for(let u of s){let c=u.output,l;switch(c.type){case"text":case"error-text":l=c.value;break;case"execution-denied":l=(r=c.reason)!=null?r:"Tool execution denied.";break;case"content":case"json":case"error-json":l=JSON.stringify(c.value);break}o.push({role:"tool",tool_call_id:u.toolCallId,content:l})}break}default:{let u=i;throw new Error(`Unsupported role: ${u}`)}}return{messages:o,warnings:n}}function jf({id:e,model:t,created:r}){return{id:e!=null?e:void 0,modelId:t!=null?t:void 0,timestamp:r?new Date(r*1e3):void 0}}function Nk(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var YD=j(()=>R(a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({message:a.object({role:a.literal("assistant").nullish(),content:a.string().nullish(),tool_calls:a.array(a.object({id:a.string().nullish(),type:a.literal("function"),function:a.object({name:a.string(),arguments:a.string()})})).nullish(),annotations:a.array(a.object({type:a.literal("url_citation"),start_index:a.number(),end_index:a.number(),url:a.string(),title:a.string()})).nullish()}),index:a.number(),logprobs:a.object({content:a.array(a.object({token:a.string(),logprob:a.number(),top_logprobs:a.array(a.object({token:a.string(),logprob:a.number()}))})).nullish()}).nullish(),finish_reason:a.string().nullish()})),usage:a.object({prompt_tokens:a.number().nullish(),completion_tokens:a.number().nullish(),total_tokens:a.number().nullish(),prompt_tokens_details:a.object({cached_tokens:a.number().nullish()}).nullish(),completion_tokens_details:a.object({reasoning_tokens:a.number().nullish(),accepted_prediction_tokens:a.number().nullish(),rejected_prediction_tokens:a.number().nullish()}).nullish()}).nullish()}))),XD=j(()=>R(a.union([a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({delta:a.object({role:a.enum(["assistant"]).nullish(),content:a.string().nullish(),tool_calls:a.array(a.object({index:a.number(),id:a.string().nullish(),type:a.literal("function").nullish(),function:a.object({name:a.string().nullish(),arguments:a.string().nullish()})})).nullish(),annotations:a.array(a.object({type:a.literal("url_citation"),start_index:a.number(),end_index:a.number(),url:a.string(),title:a.string()})).nullish()}).nullish(),logprobs:a.object({content:a.array(a.object({token:a.string(),logprob:a.number(),top_logprobs:a.array(a.object({token:a.string(),logprob:a.number()}))})).nullish()}).nullish(),finish_reason:a.string().nullish(),index:a.number()})),usage:a.object({prompt_tokens:a.number().nullish(),completion_tokens:a.number().nullish(),total_tokens:a.number().nullish(),prompt_tokens_details:a.object({cached_tokens:a.number().nullish()}).nullish(),completion_tokens_details:a.object({reasoning_tokens:a.number().nullish(),accepted_prediction_tokens:a.number().nullish(),rejected_prediction_tokens:a.number().nullish()}).nullish()}).nullish()}),Mf]))),QD=j(()=>R(a.object({logitBias:a.record(a.coerce.number(),a.number()).optional(),logprobs:a.union([a.boolean(),a.number()]).optional(),parallelToolCalls:a.boolean().optional(),user:a.string().optional(),reasoningEffort:a.enum(["none","minimal","low","medium","high"]).optional(),maxCompletionTokens:a.number().optional(),store:a.boolean().optional(),metadata:a.record(a.string().max(64),a.string().max(512)).optional(),prediction:a.record(a.string(),a.any()).optional(),serviceTier:a.enum(["auto","flex","priority","default"]).optional(),strictJsonSchema:a.boolean().optional(),textVerbosity:a.enum(["low","medium","high"]).optional(),promptCacheKey:a.string().optional(),promptCacheRetention:a.enum(["in_memory","24h"]).optional(),safetyIdentifier:a.string().optional()})));function e1({tools:e,toolChoice:t}){e=e!=null&&e.length?e:void 0;let r=[];if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:r};let o=[];for(let i of e)switch(i.type){case"function":o.push({type:"function",function:{name:i.name,description:i.description,parameters:i.inputSchema,...i.strict!=null?{strict:i.strict}:{}}});break;default:r.push({type:"unsupported",feature:`tool type: ${i.type}`});break}if(t==null)return{tools:o,toolChoice:void 0,toolWarnings:r};let n=t.type;switch(n){case"auto":case"none":case"required":return{tools:o,toolChoice:n,toolWarnings:r};case"tool":return{tools:o,toolChoice:{type:"function",function:{name:t.toolName}},toolWarnings:r};default:{let i=n;throw new xe({functionality:`tool choice type: ${i}`})}}}var t1=class{constructor(e,t){this.specificationVersion="v3",this.supportedUrls={"image/*":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,topK:n,frequencyPenalty:i,presencePenalty:s,stopSequences:u,responseFormat:c,seed:l,tools:d,toolChoice:m,providerOptions:p}){var g,h,v;let _=[],w=(g=await we({provider:"openai",providerOptions:p,schema:QD}))!=null?g:{},x=Zk(this.modelId);n!=null&&_.push({type:"unsupported",feature:"topK"});let{messages:f,warnings:b}=KD({prompt:e,systemMessageMode:x.systemMessageMode});_.push(...b);let y=(h=w.strictJsonSchema)!=null?h:!0,k={model:this.modelId,logit_bias:w.logitBias,logprobs:w.logprobs===!0||typeof w.logprobs=="number"?!0:void 0,top_logprobs:typeof w.logprobs=="number"?w.logprobs:typeof w.logprobs=="boolean"&&w.logprobs?0:void 0,user:w.user,parallel_tool_calls:w.parallelToolCalls,max_tokens:t,temperature:r,top_p:o,frequency_penalty:i,presence_penalty:s,response_format:(c==null?void 0:c.type)==="json"?c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:y,name:(v=c.name)!=null?v:"response",description:c.description}}:{type:"json_object"}:void 0,stop:u,seed:l,verbosity:w.textVerbosity,max_completion_tokens:w.maxCompletionTokens,store:w.store,metadata:w.metadata,prediction:w.prediction,reasoning_effort:w.reasoningEffort,service_tier:w.serviceTier,prompt_cache_key:w.promptCacheKey,prompt_cache_retention:w.promptCacheRetention,safety_identifier:w.safetyIdentifier,messages:f};x.isReasoningModel?((w.reasoningEffort!=="none"||!x.supportsNonReasoningParameters)&&(k.temperature!=null&&(k.temperature=void 0,_.push({type:"unsupported",feature:"temperature",details:"temperature is not supported for reasoning models"})),k.top_p!=null&&(k.top_p=void 0,_.push({type:"unsupported",feature:"topP",details:"topP is not supported for reasoning models"})),k.logprobs!=null&&(k.logprobs=void 0,_.push({type:"other",message:"logprobs is not supported for reasoning models"}))),k.frequency_penalty!=null&&(k.frequency_penalty=void 0,_.push({type:"unsupported",feature:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),k.presence_penalty!=null&&(k.presence_penalty=void 0,_.push({type:"unsupported",feature:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),k.logit_bias!=null&&(k.logit_bias=void 0,_.push({type:"other",message:"logitBias is not supported for reasoning models"})),k.top_logprobs!=null&&(k.top_logprobs=void 0,_.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),k.max_tokens!=null&&(k.max_completion_tokens==null&&(k.max_completion_tokens=k.max_tokens),k.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&k.temperature!=null&&(k.temperature=void 0,_.push({type:"unsupported",feature:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),w.serviceTier==="flex"&&!x.supportsFlexProcessing&&(_.push({type:"unsupported",feature:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),k.service_tier=void 0),w.serviceTier==="priority"&&!x.supportsPriorityProcessing&&(_.push({type:"unsupported",feature:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),k.service_tier=void 0);let{tools:$,toolChoice:O,toolWarnings:L}=e1({tools:d,toolChoice:m});return{args:{...k,tools:$,tool_choice:O},warnings:[..._,...L]}}async doGenerate(e){var t,r,o,n,i,s,u,c,l,d,m,p,g,h;let{args:v,warnings:_}=await this.getArgs(e),{responseHeaders:w,value:x,rawValue:f}=await be({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:v,failedResponseHandler:Nr,successfulResponseHandler:Re(YD),abortSignal:e.abortSignal,fetch:this.config.fetch}),b=x.choices[0],y=[],k=b.message.content;k!=null&&k.length>0&&y.push({type:"text",text:k});for(let F of(t=b.message.tool_calls)!=null?t:[])y.push({type:"tool-call",toolCallId:(r=F.id)!=null?r:ze(),toolName:F.function.name,input:F.function.arguments});for(let F of(o=b.message.annotations)!=null?o:[])y.push({type:"source",sourceType:"url",id:ze(),url:F.url,title:F.title});let $=(n=x.usage)==null?void 0:n.completion_tokens_details,O=(i=x.usage)==null?void 0:i.prompt_tokens_details,L={openai:{}};return($==null?void 0:$.accepted_prediction_tokens)!=null&&(L.openai.acceptedPredictionTokens=$==null?void 0:$.accepted_prediction_tokens),($==null?void 0:$.rejected_prediction_tokens)!=null&&(L.openai.rejectedPredictionTokens=$==null?void 0:$.rejected_prediction_tokens),((s=b.logprobs)==null?void 0:s.content)!=null&&(L.openai.logprobs=b.logprobs.content),{content:y,finishReason:Nk(b.finish_reason),usage:{inputTokens:(c=(u=x.usage)==null?void 0:u.prompt_tokens)!=null?c:void 0,outputTokens:(d=(l=x.usage)==null?void 0:l.completion_tokens)!=null?d:void 0,totalTokens:(p=(m=x.usage)==null?void 0:m.total_tokens)!=null?p:void 0,reasoningTokens:(g=$==null?void 0:$.reasoning_tokens)!=null?g:void 0,cachedInputTokens:(h=O==null?void 0:O.cached_tokens)!=null?h:void 0},request:{body:v},response:{...jf(x),headers:w,body:f},warnings:_,providerMetadata:L}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),o={...t,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:n,value:i}=await be({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:o,failedResponseHandler:Nr,successfulResponseHandler:Ot(XD),abortSignal:e.abortSignal,fetch:this.config.fetch}),s=[],u="unknown",c={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},l=!1,d=!1,m={openai:{}};return{stream:i.pipeThrough(new TransformStream({start(p){p.enqueue({type:"stream-start",warnings:r})},transform(p,g){var h,v,_,w,x,f,b,y,k,$,O,L,F,U,Z,E,z,J,B,D,H,G,C,Q;if(e.includeRawChunks&&g.enqueue({type:"raw",rawValue:p.rawValue}),!p.success){u="error",g.enqueue({type:"error",error:p.error});return}let A=p.value;if("error"in A){u="error",g.enqueue({type:"error",error:A.error});return}if(!l){let ee=jf(A);Object.values(ee).some(Boolean)&&(l=!0,g.enqueue({type:"response-metadata",...jf(A)}))}A.usage!=null&&(c.inputTokens=(h=A.usage.prompt_tokens)!=null?h:void 0,c.outputTokens=(v=A.usage.completion_tokens)!=null?v:void 0,c.totalTokens=(_=A.usage.total_tokens)!=null?_:void 0,c.reasoningTokens=(x=(w=A.usage.completion_tokens_details)==null?void 0:w.reasoning_tokens)!=null?x:void 0,c.cachedInputTokens=(b=(f=A.usage.prompt_tokens_details)==null?void 0:f.cached_tokens)!=null?b:void 0,((y=A.usage.completion_tokens_details)==null?void 0:y.accepted_prediction_tokens)!=null&&(m.openai.acceptedPredictionTokens=(k=A.usage.completion_tokens_details)==null?void 0:k.accepted_prediction_tokens),(($=A.usage.completion_tokens_details)==null?void 0:$.rejected_prediction_tokens)!=null&&(m.openai.rejectedPredictionTokens=(O=A.usage.completion_tokens_details)==null?void 0:O.rejected_prediction_tokens));let M=A.choices[0];if((M==null?void 0:M.finish_reason)!=null&&(u=Nk(M.finish_reason)),((L=M==null?void 0:M.logprobs)==null?void 0:L.content)!=null&&(m.openai.logprobs=M.logprobs.content),(M==null?void 0:M.delta)==null)return;let P=M.delta;if(P.content!=null&&(d||(g.enqueue({type:"text-start",id:"0"}),d=!0),g.enqueue({type:"text-delta",id:"0",delta:P.content})),P.tool_calls!=null)for(let ee of P.tool_calls){let te=ee.index;if(s[te]==null){if(ee.type!=="function")throw new Fn({data:ee,message:"Expected 'function' type."});if(ee.id==null)throw new Fn({data:ee,message:"Expected 'id' to be a string."});if(((F=ee.function)==null?void 0:F.name)==null)throw new Fn({data:ee,message:"Expected 'function.name' to be a string."});g.enqueue({type:"tool-input-start",id:ee.id,toolName:ee.function.name}),s[te]={id:ee.id,type:"function",function:{name:ee.function.name,arguments:(U=ee.function.arguments)!=null?U:""},hasFinished:!1};let me=s[te];((Z=me.function)==null?void 0:Z.name)!=null&&((E=me.function)==null?void 0:E.arguments)!=null&&(me.function.arguments.length>0&&g.enqueue({type:"tool-input-delta",id:me.id,delta:me.function.arguments}),zo(me.function.arguments)&&(g.enqueue({type:"tool-input-end",id:me.id}),g.enqueue({type:"tool-call",toolCallId:(z=me.id)!=null?z:ze(),toolName:me.function.name,input:me.function.arguments}),me.hasFinished=!0));continue}let Y=s[te];Y.hasFinished||(((J=ee.function)==null?void 0:J.arguments)!=null&&(Y.function.arguments+=(D=(B=ee.function)==null?void 0:B.arguments)!=null?D:""),g.enqueue({type:"tool-input-delta",id:Y.id,delta:(H=ee.function.arguments)!=null?H:""}),((G=Y.function)==null?void 0:G.name)!=null&&((C=Y.function)==null?void 0:C.arguments)!=null&&zo(Y.function.arguments)&&(g.enqueue({type:"tool-input-end",id:Y.id}),g.enqueue({type:"tool-call",toolCallId:(Q=Y.id)!=null?Q:ze(),toolName:Y.function.name,input:Y.function.arguments}),Y.hasFinished=!0))}if(P.annotations!=null)for(let ee of P.annotations)g.enqueue({type:"source",sourceType:"url",id:ze(),url:ee.url,title:ee.title})},flush(p){d&&p.enqueue({type:"text-end",id:"0"}),p.enqueue({type:"finish",finishReason:u,usage:c,...m!=null?{providerMetadata:m}:{}})}})),request:{body:o},response:{headers:n}}}};function r1({prompt:e,user:t="user",assistant:r="assistant"}){let o="";e[0].role==="system"&&(o+=`${e[0].content}

`,e=e.slice(1));for(let{role:n,content:i}of e)switch(n){case"system":throw new bl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let s=i.map(u=>{switch(u.type){case"text":return u.text}}).filter(Boolean).join("");o+=`${t}:
${s}

`;break}case"assistant":{let s=i.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new xe({functionality:"tool-call messages"})}}).join("");o+=`${r}:
${s}

`;break}case"tool":throw new xe({functionality:"tool messages"});default:{let s=n;throw new Error(`Unsupported role: ${s}`)}}return o+=`${r}:
`,{prompt:o,stopSequences:[`
${t}:`]}}function Rk({id:e,model:t,created:r}){return{id:e!=null?e:void 0,modelId:t!=null?t:void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function jk(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var n1=j(()=>R(a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({text:a.string(),finish_reason:a.string(),logprobs:a.object({tokens:a.array(a.string()),token_logprobs:a.array(a.number()),top_logprobs:a.array(a.record(a.string(),a.number())).nullish()}).nullish()})),usage:a.object({prompt_tokens:a.number(),completion_tokens:a.number(),total_tokens:a.number()}).nullish()}))),o1=j(()=>R(a.union([a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({text:a.string(),finish_reason:a.string().nullish(),index:a.number(),logprobs:a.object({tokens:a.array(a.string()),token_logprobs:a.array(a.number()),top_logprobs:a.array(a.record(a.string(),a.number())).nullish()}).nullish()})),usage:a.object({prompt_tokens:a.number(),completion_tokens:a.number(),total_tokens:a.number()}).nullish()}),Mf]))),Mk=j(()=>R(a.object({echo:a.boolean().optional(),logitBias:a.record(a.string(),a.number()).optional(),suffix:a.string().optional(),user:a.string().optional(),logprobs:a.union([a.boolean(),a.number()]).optional()}))),a1=class{constructor(e,t){this.specificationVersion="v3",this.supportedUrls={},this.modelId=e,this.config=t}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get provider(){return this.config.provider}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,topK:n,frequencyPenalty:i,presencePenalty:s,stopSequences:u,responseFormat:c,tools:l,toolChoice:d,seed:m,providerOptions:p}){let g=[],h={...await we({provider:"openai",providerOptions:p,schema:Mk}),...await we({provider:this.providerOptionsName,providerOptions:p,schema:Mk})};n!=null&&g.push({type:"unsupported",feature:"topK"}),l!=null&&l.length&&g.push({type:"unsupported",feature:"tools"}),d!=null&&g.push({type:"unsupported",feature:"toolChoice"}),c!=null&&c.type!=="text"&&g.push({type:"unsupported",feature:"responseFormat",details:"JSON response format is not supported."});let{prompt:v,stopSequences:_}=r1({prompt:e}),w=[..._!=null?_:[],...u!=null?u:[]];return{args:{model:this.modelId,echo:h.echo,logit_bias:h.logitBias,logprobs:(h==null?void 0:h.logprobs)===!0?0:(h==null?void 0:h.logprobs)===!1||h==null?void 0:h.logprobs,suffix:h.suffix,user:h.user,max_tokens:t,temperature:r,top_p:o,frequency_penalty:i,presence_penalty:s,seed:m,prompt:v,stop:w.length>0?w:void 0},warnings:g}}async doGenerate(e){var t,r,o;let{args:n,warnings:i}=await this.getArgs(e),{responseHeaders:s,value:u,rawValue:c}=await be({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:n,failedResponseHandler:Nr,successfulResponseHandler:Re(n1),abortSignal:e.abortSignal,fetch:this.config.fetch}),l=u.choices[0],d={openai:{}};return l.logprobs!=null&&(d.openai.logprobs=l.logprobs),{content:[{type:"text",text:l.text}],usage:{inputTokens:(t=u.usage)==null?void 0:t.prompt_tokens,outputTokens:(r=u.usage)==null?void 0:r.completion_tokens,totalTokens:(o=u.usage)==null?void 0:o.total_tokens},finishReason:jk(l.finish_reason),request:{body:n},response:{...Rk(u),headers:s,body:c},providerMetadata:d,warnings:i}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),o={...t,stream:!0,stream_options:{include_usage:!0}},{responseHeaders:n,value:i}=await be({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:o,failedResponseHandler:Nr,successfulResponseHandler:Ot(o1),abortSignal:e.abortSignal,fetch:this.config.fetch}),s="unknown",u={openai:{}},c={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},l=!0;return{stream:i.pipeThrough(new TransformStream({start(d){d.enqueue({type:"stream-start",warnings:r})},transform(d,m){if(e.includeRawChunks&&m.enqueue({type:"raw",rawValue:d.rawValue}),!d.success){s="error",m.enqueue({type:"error",error:d.error});return}let p=d.value;if("error"in p){s="error",m.enqueue({type:"error",error:p.error});return}l&&(l=!1,m.enqueue({type:"response-metadata",...Rk(p)}),m.enqueue({type:"text-start",id:"0"})),p.usage!=null&&(c.inputTokens=p.usage.prompt_tokens,c.outputTokens=p.usage.completion_tokens,c.totalTokens=p.usage.total_tokens);let g=p.choices[0];(g==null?void 0:g.finish_reason)!=null&&(s=jk(g.finish_reason)),(g==null?void 0:g.logprobs)!=null&&(u.openai.logprobs=g.logprobs),(g==null?void 0:g.text)!=null&&g.text.length>0&&m.enqueue({type:"text-delta",id:"0",delta:g.text})},flush(d){l||d.enqueue({type:"text-end",id:"0"}),d.enqueue({type:"finish",finishReason:s,providerMetadata:u,usage:c})}})),request:{body:o},response:{headers:n}}}},i1=j(()=>R(a.object({dimensions:a.number().optional(),user:a.string().optional()}))),s1=j(()=>R(a.object({data:a.array(a.object({embedding:a.array(a.number())})),usage:a.object({prompt_tokens:a.number()}).nullish()}))),l1=class{constructor(e,t){this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:o}){var n;if(e.length>this.maxEmbeddingsPerCall)throw new Mo({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let i=(n=await we({provider:"openai",providerOptions:o,schema:i1}))!=null?n:{},{responseHeaders:s,value:u,rawValue:c}=await be({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:_e(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:i.dimensions,user:i.user},failedResponseHandler:Nr,successfulResponseHandler:Re(s1),abortSignal:r,fetch:this.config.fetch});return{warnings:[],embeddings:u.data.map(l=>l.embedding),usage:u.usage?{tokens:u.usage.prompt_tokens}:void 0,response:{headers:s,body:c}}}},u1=j(()=>R(a.object({created:a.number().nullish(),data:a.array(a.object({b64_json:a.string(),revised_prompt:a.string().nullish()})),background:a.string().nullish(),output_format:a.string().nullish(),size:a.string().nullish(),quality:a.string().nullish(),usage:a.object({input_tokens:a.number().nullish(),output_tokens:a.number().nullish(),total_tokens:a.number().nullish(),input_tokens_details:a.object({image_tokens:a.number().nullish(),text_tokens:a.number().nullish()}).nullish()}).nullish()}))),c1={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10,"gpt-image-1-mini":10},d1=new Set(["gpt-image-1","gpt-image-1-mini"]),p1=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3"}get maxImagesPerCall(){var e;return(e=c1[this.modelId])!=null?e:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:o,seed:n,providerOptions:i,headers:s,abortSignal:u}){var c,l,d,m,p,g,h;let v=[];o!=null&&v.push({type:"unsupported",feature:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),n!=null&&v.push({type:"unsupported",feature:"seed"});let _=(d=(l=(c=this.config._internal)==null?void 0:c.currentDate)==null?void 0:l.call(c))!=null?d:new Date,{value:w,responseHeaders:x}=await be({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:_e(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:r,...(m=i.openai)!=null?m:{},...d1.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:Nr,successfulResponseHandler:Re(u1),abortSignal:u,fetch:this.config.fetch});return{images:w.data.map(f=>f.b64_json),warnings:v,usage:w.usage!=null?{inputTokens:(p=w.usage.input_tokens)!=null?p:void 0,outputTokens:(g=w.usage.output_tokens)!=null?g:void 0,totalTokens:(h=w.usage.total_tokens)!=null?h:void 0}:void 0,response:{timestamp:_,modelId:this.modelId,headers:x},providerMetadata:{openai:{images:w.data.map(f=>{var b,y,k,$,O;return{...f.revised_prompt?{revisedPrompt:f.revised_prompt}:{},created:(b=w.created)!=null?b:void 0,size:(y=w.size)!=null?y:void 0,quality:(k=w.quality)!=null?k:void 0,background:($=w.background)!=null?$:void 0,outputFormat:(O=w.output_format)!=null?O:void 0}})}}}}},m1=j(()=>R(a.object({callId:a.string(),operation:a.discriminatedUnion("type",[a.object({type:a.literal("create_file"),path:a.string(),diff:a.string()}),a.object({type:a.literal("delete_file"),path:a.string()}),a.object({type:a.literal("update_file"),path:a.string(),diff:a.string()})])}))),qk=j(()=>R(a.object({status:a.enum(["completed","failed"]),output:a.string().optional()}))),XJ=j(()=>R(a.object({}))),f1=Te({id:"openai.apply_patch",inputSchema:m1,outputSchema:qk}),g1=f1,h1=j(()=>R(a.object({code:a.string().nullish(),containerId:a.string()}))),v1=j(()=>R(a.object({outputs:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("logs"),logs:a.string()}),a.object({type:a.literal("image"),url:a.string()})])).nullish()}))),y1=j(()=>R(a.object({container:a.union([a.string(),a.object({fileIds:a.array(a.string()).optional()})]).optional()}))),_1=Te({id:"openai.code_interpreter",inputSchema:h1,outputSchema:v1}),b1=(e={})=>_1(e),Vk=a.object({key:a.string(),type:a.enum(["eq","ne","gt","gte","lt","lte"]),value:a.union([a.string(),a.number(),a.boolean()])}),Gk=a.object({type:a.enum(["and","or"]),filters:a.array(a.union([Vk,a.lazy(()=>Gk)]))}),x1=j(()=>R(a.object({vectorStoreIds:a.array(a.string()),maxNumResults:a.number().optional(),ranking:a.object({ranker:a.string().optional(),scoreThreshold:a.number().optional()}).optional(),filters:a.union([Vk,Gk]).optional()}))),w1=j(()=>R(a.object({queries:a.array(a.string()),results:a.array(a.object({attributes:a.record(a.string(),a.unknown()),fileId:a.string(),filename:a.string(),score:a.number(),text:a.string()})).nullable()}))),S1=Te({id:"openai.file_search",inputSchema:a.object({}),outputSchema:w1}),k1=j(()=>R(a.object({background:a.enum(["auto","opaque","transparent"]).optional(),inputFidelity:a.enum(["low","high"]).optional(),inputImageMask:a.object({fileId:a.string().optional(),imageUrl:a.string().optional()}).optional(),model:a.string().optional(),moderation:a.enum(["auto"]).optional(),outputCompression:a.number().int().min(0).max(100).optional(),outputFormat:a.enum(["png","jpeg","webp"]).optional(),partialImages:a.number().int().min(0).max(3).optional(),quality:a.enum(["auto","low","medium","high"]).optional(),size:a.enum(["1024x1024","1024x1536","1536x1024","auto"]).optional()}).strict())),I1=j(()=>R(a.object({}))),T1=j(()=>R(a.object({result:a.string()}))),$1=Te({id:"openai.image_generation",inputSchema:I1,outputSchema:T1}),E1=(e={})=>$1(e),Jk=j(()=>R(a.object({action:a.object({type:a.literal("exec"),command:a.array(a.string()),timeoutMs:a.number().optional(),user:a.string().optional(),workingDirectory:a.string().optional(),env:a.record(a.string(),a.string()).optional()})}))),Bk=j(()=>R(a.object({output:a.string()}))),A1=Te({id:"openai.local_shell",inputSchema:Jk,outputSchema:Bk}),Hk=j(()=>R(a.object({action:a.object({commands:a.array(a.string()),timeoutMs:a.number().optional(),maxOutputLength:a.number().optional()})}))),Wk=j(()=>R(a.object({output:a.array(a.object({stdout:a.string(),stderr:a.string(),outcome:a.discriminatedUnion("type",[a.object({type:a.literal("timeout")}),a.object({type:a.literal("exit"),exitCode:a.number()})])}))}))),C1=Te({id:"openai.shell",inputSchema:Hk,outputSchema:Wk}),P1=j(()=>R(a.object({externalWebAccess:a.boolean().optional(),filters:a.object({allowedDomains:a.array(a.string()).optional()}).optional(),searchContextSize:a.enum(["low","medium","high"]).optional(),userLocation:a.object({type:a.literal("approximate"),country:a.string().optional(),city:a.string().optional(),region:a.string().optional(),timezone:a.string().optional()}).optional()}))),O1=j(()=>R(a.object({}))),N1=j(()=>R(a.object({action:a.discriminatedUnion("type",[a.object({type:a.literal("search"),query:a.string().optional()}),a.object({type:a.literal("openPage"),url:a.string().nullish()}),a.object({type:a.literal("find"),url:a.string().nullish(),pattern:a.string().nullish()})]),sources:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("url"),url:a.string()}),a.object({type:a.literal("api"),name:a.string()})])).optional()}))),R1=Te({id:"openai.web_search",inputSchema:O1,outputSchema:N1}),j1=(e={})=>R1(e),M1=j(()=>R(a.object({searchContextSize:a.enum(["low","medium","high"]).optional(),userLocation:a.object({type:a.literal("approximate"),country:a.string().optional(),city:a.string().optional(),region:a.string().optional(),timezone:a.string().optional()}).optional()}))),D1=j(()=>R(a.object({}))),z1=j(()=>R(a.object({action:a.discriminatedUnion("type",[a.object({type:a.literal("search"),query:a.string().optional()}),a.object({type:a.literal("openPage"),url:a.string().nullish()}),a.object({type:a.literal("find"),url:a.string().nullish(),pattern:a.string().nullish()})])}))),U1=Te({id:"openai.web_search_preview",inputSchema:D1,outputSchema:z1}),Uo=a.lazy(()=>a.union([a.string(),a.number(),a.boolean(),a.null(),a.array(Uo),a.record(a.string(),Uo)])),F1=j(()=>R(a.object({serverLabel:a.string(),allowedTools:a.union([a.array(a.string()),a.object({readOnly:a.boolean().optional(),toolNames:a.array(a.string()).optional()})]).optional(),authorization:a.string().optional(),connectorId:a.string().optional(),headers:a.record(a.string(),a.string()).optional(),serverDescription:a.string().optional(),serverUrl:a.string().optional()}).refine(e=>e.serverUrl!=null||e.connectorId!=null,"One of serverUrl or connectorId must be provided."))),L1=j(()=>R(a.object({}))),Z1=j(()=>R(a.discriminatedUnion("type",[a.object({type:a.literal("call"),serverLabel:a.string(),name:a.string(),arguments:a.string(),output:a.string().nullable().optional(),error:a.union([a.string(),Uo]).optional()}),a.object({type:a.literal("listTools"),serverLabel:a.string(),tools:a.array(a.object({name:a.string(),description:a.string().optional(),inputSchema:Uo,annotations:a.record(a.string(),Uo).optional()})),error:a.union([a.string(),Uo]).optional()}),a.object({type:a.literal("approvalRequest"),serverLabel:a.string(),name:a.string(),arguments:a.string(),approvalRequestId:a.string()})]))),q1=Te({id:"openai.mcp",inputSchema:L1,outputSchema:Z1}),V1=e=>q1(e),G1={applyPatch:g1,codeInterpreter:b1,fileSearch:S1,imageGeneration:E1,localShell:A1,shell:C1,webSearchPreview:U1,webSearch:j1,mcp:V1};function Dk(e,t){return t?t.some(r=>e.startsWith(r)):!1}async function J1({prompt:e,toolNameMapping:t,systemMessageMode:r,fileIdPrefixes:o,store:n,hasLocalShellTool:i=!1,hasShellTool:s=!1,hasApplyPatchTool:u=!1}){var c,l,d,m,p;let g=[],h=[];for(let{role:v,content:_}of e)switch(v){case"system":{switch(r){case"system":{g.push({role:"system",content:_});break}case"developer":{g.push({role:"developer",content:_});break}case"remove":{h.push({type:"other",message:"system messages are removed for this model"});break}default:{let w=r;throw new Error(`Unsupported system message mode: ${w}`)}}break}case"user":{g.push({role:"user",content:_.map((w,x)=>{var f,b,y;switch(w.type){case"text":return{type:"input_text",text:w.text};case"file":if(w.mediaType.startsWith("image/")){let k=w.mediaType==="image/*"?"image/jpeg":w.mediaType;return{type:"input_image",...w.data instanceof URL?{image_url:w.data.toString()}:typeof w.data=="string"&&Dk(w.data,o)?{file_id:w.data}:{image_url:`data:${k};base64,${ht(w.data)}`},detail:(b=(f=w.providerOptions)==null?void 0:f.openai)==null?void 0:b.imageDetail}}else{if(w.mediaType==="application/pdf")return w.data instanceof URL?{type:"input_file",file_url:w.data.toString()}:{type:"input_file",...typeof w.data=="string"&&Dk(w.data,o)?{file_id:w.data}:{filename:(y=w.filename)!=null?y:`part-${x}.pdf`,file_data:`data:application/pdf;base64,${ht(w.data)}`}};throw new xe({functionality:`file part media type ${w.mediaType}`})}}})});break}case"assistant":{let w={};for(let x of _)switch(x.type){case"text":{let f=(l=(c=x.providerOptions)==null?void 0:c.openai)==null?void 0:l.itemId;if(n&&f!=null){g.push({type:"item_reference",id:f});break}g.push({role:"assistant",content:[{type:"output_text",text:x.text}],id:f});break}case"tool-call":{if(x.providerExecuted)break;let f=(m=(d=x.providerOptions)==null?void 0:d.openai)==null?void 0:m.itemId;if(n&&f!=null){g.push({type:"item_reference",id:f});break}let b=t.toProviderToolName(x.toolName);if(i&&b==="local_shell"){let y=await We({value:x.input,schema:Jk});g.push({type:"local_shell_call",call_id:x.toolCallId,id:f,action:{type:"exec",command:y.action.command,timeout_ms:y.action.timeoutMs,user:y.action.user,working_directory:y.action.workingDirectory,env:y.action.env}});break}if(s&&b==="shell"){let y=await We({value:x.input,schema:Hk});g.push({type:"shell_call",call_id:x.toolCallId,id:f,status:"completed",action:{commands:y.action.commands,timeout_ms:y.action.timeoutMs,max_output_length:y.action.maxOutputLength}});break}g.push({type:"function_call",call_id:x.toolCallId,name:b,arguments:JSON.stringify(x.input),id:f});break}case"tool-result":{n?g.push({type:"item_reference",id:x.toolCallId}):h.push({type:"other",message:`Results for OpenAI tool ${x.toolName} are not sent to the API when store is false`});break}case"reasoning":{let f=await we({provider:"openai",providerOptions:x.providerOptions,schema:B1}),b=f==null?void 0:f.itemId;if(b!=null){let y=w[b];if(n)y===void 0&&(g.push({type:"item_reference",id:b}),w[b]={type:"reasoning",id:b,summary:[]});else{let k=[];x.text.length>0?k.push({type:"summary_text",text:x.text}):y!==void 0&&h.push({type:"other",message:`Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(x)}.`}),y===void 0?(w[b]={type:"reasoning",id:b,encrypted_content:f==null?void 0:f.reasoningEncryptedContent,summary:k},g.push(w[b])):(y.summary.push(...k),(f==null?void 0:f.reasoningEncryptedContent)!=null&&(y.encrypted_content=f.reasoningEncryptedContent))}}else h.push({type:"other",message:`Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(x)}.`});break}}break}case"tool":{for(let w of _){let x=w.output,f=t.toProviderToolName(w.toolName);if(i&&f==="local_shell"&&x.type==="json"){let y=await We({value:x.value,schema:Bk});g.push({type:"local_shell_call_output",call_id:w.toolCallId,output:y.output});break}if(s&&f==="shell"&&x.type==="json"){let y=await We({value:x.value,schema:Wk});g.push({type:"shell_call_output",call_id:w.toolCallId,output:y.output.map(k=>({stdout:k.stdout,stderr:k.stderr,outcome:k.outcome.type==="timeout"?{type:"timeout"}:{type:"exit",exit_code:k.outcome.exitCode}}))});break}if(u&&w.toolName==="apply_patch"&&x.type==="json"){let y=await We({value:x.value,schema:qk});g.push({type:"apply_patch_call_output",call_id:w.toolCallId,status:y.status,output:y.output});break}let b;switch(x.type){case"text":case"error-text":b=x.value;break;case"execution-denied":b=(p=x.reason)!=null?p:"Tool execution denied.";break;case"json":case"error-json":b=JSON.stringify(x.value);break;case"content":b=x.value.map(y=>{var k;switch(y.type){case"text":return{type:"input_text",text:y.text};case"image-data":return{type:"input_image",image_url:`data:${y.mediaType};base64,${y.data}`};case"file-data":return{type:"input_file",filename:(k=y.filename)!=null?k:"data",file_data:`data:${y.mediaType};base64,${y.data}`};default:{h.push({type:"other",message:`unsupported tool content part type: ${y.type}`});return}}}).filter(Sl);break}g.push({type:"function_call_output",call_id:w.toolCallId,output:b})}break}default:{let w=v;throw new Error(`Unsupported role: ${w}`)}}return{input:g,warnings:h}}var B1=a.object({itemId:a.string().nullish(),reasoningEncryptedContent:a.string().nullish()});function zk({finishReason:e,hasFunctionCall:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}var H1=j(()=>R(a.union([a.object({type:a.literal("response.output_text.delta"),item_id:a.string(),delta:a.string(),logprobs:a.array(a.object({token:a.string(),logprob:a.number(),top_logprobs:a.array(a.object({token:a.string(),logprob:a.number()}))})).nullish()}),a.object({type:a.enum(["response.completed","response.incomplete"]),response:a.object({incomplete_details:a.object({reason:a.string()}).nullish(),usage:a.object({input_tokens:a.number(),input_tokens_details:a.object({cached_tokens:a.number().nullish()}).nullish(),output_tokens:a.number(),output_tokens_details:a.object({reasoning_tokens:a.number().nullish()}).nullish()}),service_tier:a.string().nullish()})}),a.object({type:a.literal("response.created"),response:a.object({id:a.string(),created_at:a.number(),model:a.string(),service_tier:a.string().nullish()})}),a.object({type:a.literal("response.output_item.added"),output_index:a.number(),item:a.discriminatedUnion("type",[a.object({type:a.literal("message"),id:a.string()}),a.object({type:a.literal("reasoning"),id:a.string(),encrypted_content:a.string().nullish()}),a.object({type:a.literal("function_call"),id:a.string(),call_id:a.string(),name:a.string(),arguments:a.string()}),a.object({type:a.literal("web_search_call"),id:a.string(),status:a.string()}),a.object({type:a.literal("computer_call"),id:a.string(),status:a.string()}),a.object({type:a.literal("file_search_call"),id:a.string()}),a.object({type:a.literal("image_generation_call"),id:a.string()}),a.object({type:a.literal("code_interpreter_call"),id:a.string(),container_id:a.string(),code:a.string().nullable(),outputs:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("logs"),logs:a.string()}),a.object({type:a.literal("image"),url:a.string()})])).nullable(),status:a.string()}),a.object({type:a.literal("mcp_call"),id:a.string(),status:a.string()}),a.object({type:a.literal("mcp_list_tools"),id:a.string()}),a.object({type:a.literal("mcp_approval_request"),id:a.string()}),a.object({type:a.literal("apply_patch_call"),id:a.string(),call_id:a.string(),status:a.enum(["in_progress","completed"]),operation:a.discriminatedUnion("type",[a.object({type:a.literal("create_file"),path:a.string(),diff:a.string()}),a.object({type:a.literal("delete_file"),path:a.string()}),a.object({type:a.literal("update_file"),path:a.string(),diff:a.string()})])}),a.object({type:a.literal("shell_call"),id:a.string(),call_id:a.string(),status:a.enum(["in_progress","completed","incomplete"]),action:a.object({commands:a.array(a.string())})})])}),a.object({type:a.literal("response.output_item.done"),output_index:a.number(),item:a.discriminatedUnion("type",[a.object({type:a.literal("message"),id:a.string()}),a.object({type:a.literal("reasoning"),id:a.string(),encrypted_content:a.string().nullish()}),a.object({type:a.literal("function_call"),id:a.string(),call_id:a.string(),name:a.string(),arguments:a.string(),status:a.literal("completed")}),a.object({type:a.literal("code_interpreter_call"),id:a.string(),code:a.string().nullable(),container_id:a.string(),outputs:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("logs"),logs:a.string()}),a.object({type:a.literal("image"),url:a.string()})])).nullable()}),a.object({type:a.literal("image_generation_call"),id:a.string(),result:a.string()}),a.object({type:a.literal("web_search_call"),id:a.string(),status:a.string(),action:a.discriminatedUnion("type",[a.object({type:a.literal("search"),query:a.string().nullish(),sources:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("url"),url:a.string()}),a.object({type:a.literal("api"),name:a.string()})])).nullish()}),a.object({type:a.literal("open_page"),url:a.string().nullish()}),a.object({type:a.literal("find"),url:a.string().nullish(),pattern:a.string().nullish()})])}),a.object({type:a.literal("file_search_call"),id:a.string(),queries:a.array(a.string()),results:a.array(a.object({attributes:a.record(a.string(),a.union([a.string(),a.number(),a.boolean()])),file_id:a.string(),filename:a.string(),score:a.number(),text:a.string()})).nullish()}),a.object({type:a.literal("local_shell_call"),id:a.string(),call_id:a.string(),action:a.object({type:a.literal("exec"),command:a.array(a.string()),timeout_ms:a.number().optional(),user:a.string().optional(),working_directory:a.string().optional(),env:a.record(a.string(),a.string()).optional()})}),a.object({type:a.literal("computer_call"),id:a.string(),status:a.literal("completed")}),a.object({type:a.literal("mcp_call"),id:a.string(),status:a.string(),arguments:a.string(),name:a.string(),server_label:a.string(),output:a.string().nullish(),error:a.union([a.string(),a.object({type:a.string().optional(),code:a.union([a.number(),a.string()]).optional(),message:a.string().optional()}).loose()]).nullish()}),a.object({type:a.literal("mcp_list_tools"),id:a.string(),server_label:a.string(),tools:a.array(a.object({name:a.string(),description:a.string().optional(),input_schema:a.any(),annotations:a.record(a.string(),a.unknown()).optional()})),error:a.union([a.string(),a.object({type:a.string().optional(),code:a.union([a.number(),a.string()]).optional(),message:a.string().optional()}).loose()]).optional()}),a.object({type:a.literal("mcp_approval_request"),id:a.string(),server_label:a.string(),name:a.string(),arguments:a.string(),approval_request_id:a.string()}),a.object({type:a.literal("apply_patch_call"),id:a.string(),call_id:a.string(),status:a.enum(["in_progress","completed"]),operation:a.discriminatedUnion("type",[a.object({type:a.literal("create_file"),path:a.string(),diff:a.string()}),a.object({type:a.literal("delete_file"),path:a.string()}),a.object({type:a.literal("update_file"),path:a.string(),diff:a.string()})])}),a.object({type:a.literal("shell_call"),id:a.string(),call_id:a.string(),status:a.enum(["in_progress","completed","incomplete"]),action:a.object({commands:a.array(a.string())})})])}),a.object({type:a.literal("response.function_call_arguments.delta"),item_id:a.string(),output_index:a.number(),delta:a.string()}),a.object({type:a.literal("response.image_generation_call.partial_image"),item_id:a.string(),output_index:a.number(),partial_image_b64:a.string()}),a.object({type:a.literal("response.code_interpreter_call_code.delta"),item_id:a.string(),output_index:a.number(),delta:a.string()}),a.object({type:a.literal("response.code_interpreter_call_code.done"),item_id:a.string(),output_index:a.number(),code:a.string()}),a.object({type:a.literal("response.output_text.annotation.added"),annotation:a.discriminatedUnion("type",[a.object({type:a.literal("url_citation"),start_index:a.number(),end_index:a.number(),url:a.string(),title:a.string()}),a.object({type:a.literal("file_citation"),file_id:a.string(),filename:a.string().nullish(),index:a.number().nullish(),start_index:a.number().nullish(),end_index:a.number().nullish(),quote:a.string().nullish()}),a.object({type:a.literal("container_file_citation"),container_id:a.string(),file_id:a.string(),filename:a.string().nullish(),start_index:a.number().nullish(),end_index:a.number().nullish(),index:a.number().nullish()}),a.object({type:a.literal("file_path"),file_id:a.string(),index:a.number().nullish()})])}),a.object({type:a.literal("response.reasoning_summary_part.added"),item_id:a.string(),summary_index:a.number()}),a.object({type:a.literal("response.reasoning_summary_text.delta"),item_id:a.string(),summary_index:a.number(),delta:a.string()}),a.object({type:a.literal("response.reasoning_summary_part.done"),item_id:a.string(),summary_index:a.number()}),a.object({type:a.literal("error"),sequence_number:a.number(),error:a.object({type:a.string(),code:a.string(),message:a.string(),param:a.string().nullish()})}),a.object({type:a.string()}).loose().transform(e=>({type:"unknown_chunk",message:e.type}))]))),W1=j(()=>R(a.object({id:a.string().optional(),created_at:a.number().optional(),error:a.object({message:a.string(),type:a.string(),param:a.string().nullish(),code:a.string()}).nullish(),model:a.string().optional(),output:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("message"),role:a.literal("assistant"),id:a.string(),content:a.array(a.object({type:a.literal("output_text"),text:a.string(),logprobs:a.array(a.object({token:a.string(),logprob:a.number(),top_logprobs:a.array(a.object({token:a.string(),logprob:a.number()}))})).nullish(),annotations:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("url_citation"),start_index:a.number(),end_index:a.number(),url:a.string(),title:a.string()}),a.object({type:a.literal("file_citation"),file_id:a.string(),filename:a.string().nullish(),index:a.number().nullish(),start_index:a.number().nullish(),end_index:a.number().nullish(),quote:a.string().nullish()}),a.object({type:a.literal("container_file_citation"),container_id:a.string(),file_id:a.string(),filename:a.string().nullish(),start_index:a.number().nullish(),end_index:a.number().nullish(),index:a.number().nullish()}),a.object({type:a.literal("file_path"),file_id:a.string(),index:a.number().nullish()})]))}))}),a.object({type:a.literal("web_search_call"),id:a.string(),status:a.string(),action:a.discriminatedUnion("type",[a.object({type:a.literal("search"),query:a.string().nullish(),sources:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("url"),url:a.string()}),a.object({type:a.literal("api"),name:a.string()})])).nullish()}),a.object({type:a.literal("open_page"),url:a.string().nullish()}),a.object({type:a.literal("find"),url:a.string().nullish(),pattern:a.string().nullish()})])}),a.object({type:a.literal("file_search_call"),id:a.string(),queries:a.array(a.string()),results:a.array(a.object({attributes:a.record(a.string(),a.union([a.string(),a.number(),a.boolean()])),file_id:a.string(),filename:a.string(),score:a.number(),text:a.string()})).nullish()}),a.object({type:a.literal("code_interpreter_call"),id:a.string(),code:a.string().nullable(),container_id:a.string(),outputs:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("logs"),logs:a.string()}),a.object({type:a.literal("image"),url:a.string()})])).nullable()}),a.object({type:a.literal("image_generation_call"),id:a.string(),result:a.string()}),a.object({type:a.literal("local_shell_call"),id:a.string(),call_id:a.string(),action:a.object({type:a.literal("exec"),command:a.array(a.string()),timeout_ms:a.number().optional(),user:a.string().optional(),working_directory:a.string().optional(),env:a.record(a.string(),a.string()).optional()})}),a.object({type:a.literal("function_call"),call_id:a.string(),name:a.string(),arguments:a.string(),id:a.string()}),a.object({type:a.literal("computer_call"),id:a.string(),status:a.string().optional()}),a.object({type:a.literal("reasoning"),id:a.string(),encrypted_content:a.string().nullish(),summary:a.array(a.object({type:a.literal("summary_text"),text:a.string()}))}),a.object({type:a.literal("mcp_call"),id:a.string(),status:a.string(),arguments:a.string(),name:a.string(),server_label:a.string(),output:a.string().nullish(),error:a.union([a.string(),a.object({type:a.string().optional(),code:a.union([a.number(),a.string()]).optional(),message:a.string().optional()}).loose()]).nullish()}),a.object({type:a.literal("mcp_list_tools"),id:a.string(),server_label:a.string(),tools:a.array(a.object({name:a.string(),description:a.string().optional(),input_schema:a.any(),annotations:a.record(a.string(),a.unknown()).optional()})),error:a.union([a.string(),a.object({type:a.string().optional(),code:a.union([a.number(),a.string()]).optional(),message:a.string().optional()}).loose()]).optional()}),a.object({type:a.literal("mcp_approval_request"),id:a.string(),server_label:a.string(),name:a.string(),arguments:a.string(),approval_request_id:a.string()}),a.object({type:a.literal("apply_patch_call"),id:a.string(),call_id:a.string(),status:a.enum(["in_progress","completed"]),operation:a.discriminatedUnion("type",[a.object({type:a.literal("create_file"),path:a.string(),diff:a.string()}),a.object({type:a.literal("delete_file"),path:a.string()}),a.object({type:a.literal("update_file"),path:a.string(),diff:a.string()})])}),a.object({type:a.literal("shell_call"),id:a.string(),call_id:a.string(),status:a.enum(["in_progress","completed","incomplete"]),action:a.object({commands:a.array(a.string())})})])).optional(),service_tier:a.string().nullish(),incomplete_details:a.object({reason:a.string()}).nullish(),usage:a.object({input_tokens:a.number(),input_tokens_details:a.object({cached_tokens:a.number().nullish()}).nullish(),output_tokens:a.number(),output_tokens_details:a.object({reasoning_tokens:a.number().nullish()}).nullish()}).optional()}))),Kk=20,K1=["o1","o1-2024-12-17","o3","o3-2025-04-16","o3-deep-research","o3-deep-research-2025-06-26","o3-mini","o3-mini-2025-01-31","o4-mini","o4-mini-2025-04-16","o4-mini-deep-research","o4-mini-deep-research-2025-06-26","codex-mini-latest","computer-use-preview","gpt-5","gpt-5-2025-08-07","gpt-5-codex","gpt-5-mini","gpt-5-mini-2025-08-07","gpt-5-nano","gpt-5-nano-2025-08-07","gpt-5-pro","gpt-5-pro-2025-10-06","gpt-5.1","gpt-5.1-chat-latest","gpt-5.1-codex-mini","gpt-5.1-codex"],kB=["gpt-4.1","gpt-4.1-2025-04-14","gpt-4.1-mini","gpt-4.1-mini-2025-04-14","gpt-4.1-nano","gpt-4.1-nano-2025-04-14","gpt-4o","gpt-4o-2024-05-13","gpt-4o-2024-08-06","gpt-4o-2024-11-20","gpt-4o-audio-preview","gpt-4o-audio-preview-2024-10-01","gpt-4o-audio-preview-2024-12-17","gpt-4o-search-preview","gpt-4o-search-preview-2025-03-11","gpt-4o-mini-search-preview","gpt-4o-mini-search-preview-2025-03-11","gpt-4o-mini","gpt-4o-mini-2024-07-18","gpt-4-turbo","gpt-4-turbo-2024-04-09","gpt-4-turbo-preview","gpt-4-0125-preview","gpt-4-1106-preview","gpt-4","gpt-4-0613","gpt-4.5-preview","gpt-4.5-preview-2025-02-27","gpt-3.5-turbo-0125","gpt-3.5-turbo","gpt-3.5-turbo-1106","chatgpt-4o-latest","gpt-5-chat-latest",...K1],Y1=j(()=>R(a.object({conversation:a.string().nullish(),include:a.array(a.enum(["reasoning.encrypted_content","file_search_call.results","message.output_text.logprobs"])).nullish(),instructions:a.string().nullish(),logprobs:a.union([a.boolean(),a.number().min(1).max(Kk)]).optional(),maxToolCalls:a.number().nullish(),metadata:a.any().nullish(),parallelToolCalls:a.boolean().nullish(),previousResponseId:a.string().nullish(),promptCacheKey:a.string().nullish(),promptCacheRetention:a.enum(["in_memory","24h"]).nullish(),reasoningEffort:a.string().nullish(),reasoningSummary:a.string().nullish(),safetyIdentifier:a.string().nullish(),serviceTier:a.enum(["auto","flex","priority","default"]).nullish(),store:a.boolean().nullish(),strictJsonSchema:a.boolean().nullish(),textVerbosity:a.enum(["low","medium","high"]).nullish(),truncation:a.enum(["auto","disabled"]).nullish(),user:a.string().nullish()})));async function X1({tools:e,toolChoice:t}){e=e!=null&&e.length?e:void 0;let r=[];if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:r};let o=[];for(let i of e)switch(i.type){case"function":o.push({type:"function",name:i.name,description:i.description,parameters:i.inputSchema,...i.strict!=null?{strict:i.strict}:{}});break;case"provider":{switch(i.id){case"openai.file_search":{let s=await We({value:i.args,schema:x1});o.push({type:"file_search",vector_store_ids:s.vectorStoreIds,max_num_results:s.maxNumResults,ranking_options:s.ranking?{ranker:s.ranking.ranker,score_threshold:s.ranking.scoreThreshold}:void 0,filters:s.filters});break}case"openai.local_shell":{o.push({type:"local_shell"});break}case"openai.shell":{o.push({type:"shell"});break}case"openai.apply_patch":{o.push({type:"apply_patch"});break}case"openai.web_search_preview":{let s=await We({value:i.args,schema:M1});o.push({type:"web_search_preview",search_context_size:s.searchContextSize,user_location:s.userLocation});break}case"openai.web_search":{let s=await We({value:i.args,schema:P1});o.push({type:"web_search",filters:s.filters!=null?{allowed_domains:s.filters.allowedDomains}:void 0,external_web_access:s.externalWebAccess,search_context_size:s.searchContextSize,user_location:s.userLocation});break}case"openai.code_interpreter":{let s=await We({value:i.args,schema:y1});o.push({type:"code_interpreter",container:s.container==null?{type:"auto",file_ids:void 0}:typeof s.container=="string"?s.container:{type:"auto",file_ids:s.container.fileIds}});break}case"openai.image_generation":{let s=await We({value:i.args,schema:k1});o.push({type:"image_generation",background:s.background,input_fidelity:s.inputFidelity,input_image_mask:s.inputImageMask?{file_id:s.inputImageMask.fileId,image_url:s.inputImageMask.imageUrl}:void 0,model:s.model,moderation:s.moderation,partial_images:s.partialImages,quality:s.quality,output_compression:s.outputCompression,output_format:s.outputFormat,size:s.size});break}case"openai.mcp":{let s=await We({value:i.args,schema:F1});o.push({type:"mcp",server_label:s.serverLabel,allowed_tools:Array.isArray(s.allowedTools)?s.allowedTools:s.allowedTools?{read_only:s.allowedTools.readOnly,tool_names:s.allowedTools.toolNames}:void 0,authorization:s.authorization,connector_id:s.connectorId,headers:s.headers,require_approval:"never",server_description:s.serverDescription,server_url:s.serverUrl});break}}break}default:r.push({type:"unsupported",feature:`function tool ${i}`});break}if(t==null)return{tools:o,toolChoice:void 0,toolWarnings:r};let n=t.type;switch(n){case"auto":case"none":case"required":return{tools:o,toolChoice:n,toolWarnings:r};case"tool":return{tools:o,toolChoice:t.toolName==="code_interpreter"||t.toolName==="file_search"||t.toolName==="image_generation"||t.toolName==="web_search_preview"||t.toolName==="web_search"||t.toolName==="mcp"||t.toolName==="apply_patch"?{type:t.toolName}:{type:"function",name:t.toolName},toolWarnings:r};default:{let i=n;throw new xe({functionality:`tool choice type: ${i}`})}}}var Q1=class{constructor(e,t){this.specificationVersion="v3",this.supportedUrls={"image/*":[/^https?:\/\/.*$/],"application/pdf":[/^https?:\/\/.*$/]},this.modelId=e,this.config=t}get provider(){return this.config.provider}async getArgs({maxOutputTokens:e,temperature:t,stopSequences:r,topP:o,topK:n,presencePenalty:i,frequencyPenalty:s,seed:u,prompt:c,providerOptions:l,tools:d,toolChoice:m,responseFormat:p}){var g,h,v,_;let w=[],x=Zk(this.modelId);n!=null&&w.push({type:"unsupported",feature:"topK"}),u!=null&&w.push({type:"unsupported",feature:"seed"}),i!=null&&w.push({type:"unsupported",feature:"presencePenalty"}),s!=null&&w.push({type:"unsupported",feature:"frequencyPenalty"}),r!=null&&w.push({type:"unsupported",feature:"stopSequences"});let f=await we({provider:"openai",providerOptions:l,schema:Y1});f!=null&&f.conversation&&(f!=null&&f.previousResponseId)&&w.push({type:"unsupported",feature:"conversation",details:"conversation and previousResponseId cannot be used together"});let b=wl({tools:d,providerToolNames:{"openai.code_interpreter":"code_interpreter","openai.file_search":"file_search","openai.image_generation":"image_generation","openai.local_shell":"local_shell","openai.shell":"shell","openai.web_search":"web_search","openai.web_search_preview":"web_search_preview","openai.mcp":"mcp","openai.apply_patch":"apply_patch"}}),{input:y,warnings:k}=await J1({prompt:c,toolNameMapping:b,systemMessageMode:x.systemMessageMode,fileIdPrefixes:this.config.fileIdPrefixes,store:(g=f==null?void 0:f.store)!=null?g:!0,hasLocalShellTool:F("openai.local_shell"),hasShellTool:F("openai.shell"),hasApplyPatchTool:F("openai.apply_patch")});w.push(...k);let $=(h=f==null?void 0:f.strictJsonSchema)!=null?h:!0,O=f==null?void 0:f.include;function L(H){O==null?O=[H]:O.includes(H)||(O=[...O,H])}function F(H){return(d==null?void 0:d.find(G=>G.type==="provider"&&G.id===H))!=null}let U=typeof(f==null?void 0:f.logprobs)=="number"?f==null?void 0:f.logprobs:(f==null?void 0:f.logprobs)===!0?Kk:void 0;U&&L("message.output_text.logprobs");let Z=(v=d==null?void 0:d.find(H=>H.type==="provider"&&(H.id==="openai.web_search"||H.id==="openai.web_search_preview")))==null?void 0:v.name;Z&&L("web_search_call.action.sources"),F("openai.code_interpreter")&&L("code_interpreter_call.outputs");let E=f==null?void 0:f.store;E===!1&&x.isReasoningModel&&L("reasoning.encrypted_content");let z={model:this.modelId,input:y,temperature:t,top_p:o,max_output_tokens:e,...((p==null?void 0:p.type)==="json"||(f==null?void 0:f.textVerbosity))&&{text:{...(p==null?void 0:p.type)==="json"&&{format:p.schema!=null?{type:"json_schema",strict:$,name:(_=p.name)!=null?_:"response",description:p.description,schema:p.schema}:{type:"json_object"}},...(f==null?void 0:f.textVerbosity)&&{verbosity:f.textVerbosity}}},conversation:f==null?void 0:f.conversation,max_tool_calls:f==null?void 0:f.maxToolCalls,metadata:f==null?void 0:f.metadata,parallel_tool_calls:f==null?void 0:f.parallelToolCalls,previous_response_id:f==null?void 0:f.previousResponseId,store:E,user:f==null?void 0:f.user,instructions:f==null?void 0:f.instructions,service_tier:f==null?void 0:f.serviceTier,include:O,prompt_cache_key:f==null?void 0:f.promptCacheKey,prompt_cache_retention:f==null?void 0:f.promptCacheRetention,safety_identifier:f==null?void 0:f.safetyIdentifier,top_logprobs:U,truncation:f==null?void 0:f.truncation,...x.isReasoningModel&&((f==null?void 0:f.reasoningEffort)!=null||(f==null?void 0:f.reasoningSummary)!=null)&&{reasoning:{...(f==null?void 0:f.reasoningEffort)!=null&&{effort:f.reasoningEffort},...(f==null?void 0:f.reasoningSummary)!=null&&{summary:f.reasoningSummary}}}};x.isReasoningModel?(f==null?void 0:f.reasoningEffort)==="none"&&x.supportsNonReasoningParameters||(z.temperature!=null&&(z.temperature=void 0,w.push({type:"unsupported",feature:"temperature",details:"temperature is not supported for reasoning models"})),z.top_p!=null&&(z.top_p=void 0,w.push({type:"unsupported",feature:"topP",details:"topP is not supported for reasoning models"}))):((f==null?void 0:f.reasoningEffort)!=null&&w.push({type:"unsupported",feature:"reasoningEffort",details:"reasoningEffort is not supported for non-reasoning models"}),(f==null?void 0:f.reasoningSummary)!=null&&w.push({type:"unsupported",feature:"reasoningSummary",details:"reasoningSummary is not supported for non-reasoning models"})),(f==null?void 0:f.serviceTier)==="flex"&&!x.supportsFlexProcessing&&(w.push({type:"unsupported",feature:"serviceTier",details:"flex processing is only available for o3, o4-mini, and gpt-5 models"}),delete z.service_tier),(f==null?void 0:f.serviceTier)==="priority"&&!x.supportsPriorityProcessing&&(w.push({type:"unsupported",feature:"serviceTier",details:"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported"}),delete z.service_tier);let{tools:J,toolChoice:B,toolWarnings:D}=await X1({tools:d,toolChoice:m});return{webSearchToolName:Z,args:{...z,tools:J,tool_choice:B},warnings:[...w,...D],store:E,toolNameMapping:b}}async doGenerate(e){var t,r,o,n,i,s,u,c,l,d,m,p,g,h,v,_,w,x,f,b,y,k,$,O,L,F,U,Z;let{args:E,warnings:z,webSearchToolName:J,toolNameMapping:B}=await this.getArgs(e),D=this.config.url({path:"/responses",modelId:this.modelId}),H=this.config.provider.replace(".responses",""),{responseHeaders:G,value:C,rawValue:Q}=await be({url:D,headers:_e(this.config.headers(),e.headers),body:E,failedResponseHandler:Nr,successfulResponseHandler:Re(W1),abortSignal:e.abortSignal,fetch:this.config.fetch});if(C.error)throw new dt({message:C.error.message,url:D,requestBodyValues:E,statusCode:400,responseHeaders:G,responseBody:Q,isRetryable:!1});let A=[],M=[],P=!1;for(let Y of C.output)switch(Y.type){case"reasoning":{Y.summary.length===0&&Y.summary.push({type:"summary_text",text:""});for(let me of Y.summary)A.push({type:"reasoning",text:me.text,providerMetadata:{[H]:{itemId:Y.id,reasoningEncryptedContent:(t=Y.encrypted_content)!=null?t:null}}});break}case"image_generation_call":{A.push({type:"tool-call",toolCallId:Y.id,toolName:B.toCustomToolName("image_generation"),input:"{}",providerExecuted:!0}),A.push({type:"tool-result",toolCallId:Y.id,toolName:B.toCustomToolName("image_generation"),result:{result:Y.result}});break}case"local_shell_call":{A.push({type:"tool-call",toolCallId:Y.call_id,toolName:B.toCustomToolName("local_shell"),input:JSON.stringify({action:Y.action}),providerMetadata:{[H]:{itemId:Y.id}}});break}case"shell_call":{A.push({type:"tool-call",toolCallId:Y.call_id,toolName:B.toCustomToolName("shell"),input:JSON.stringify({action:{commands:Y.action.commands}}),providerMetadata:{[H]:{itemId:Y.id}}});break}case"message":{for(let me of Y.content){(o=(r=e.providerOptions)==null?void 0:r.openai)!=null&&o.logprobs&&me.logprobs&&M.push(me.logprobs);let qt={itemId:Y.id,...me.annotations.length>0&&{annotations:me.annotations}};A.push({type:"text",text:me.text,providerMetadata:{[H]:qt}});for(let ge of me.annotations)ge.type==="url_citation"?A.push({type:"source",sourceType:"url",id:(s=(i=(n=this.config).generateId)==null?void 0:i.call(n))!=null?s:ze(),url:ge.url,title:ge.title}):ge.type==="file_citation"?A.push({type:"source",sourceType:"document",id:(l=(c=(u=this.config).generateId)==null?void 0:c.call(u))!=null?l:ze(),mediaType:"text/plain",title:(m=(d=ge.quote)!=null?d:ge.filename)!=null?m:"Document",filename:(p=ge.filename)!=null?p:ge.file_id,...ge.file_id?{providerMetadata:{[H]:{fileId:ge.file_id}}}:{}}):ge.type==="container_file_citation"?A.push({type:"source",sourceType:"document",id:(v=(h=(g=this.config).generateId)==null?void 0:h.call(g))!=null?v:ze(),mediaType:"text/plain",title:(w=(_=ge.filename)!=null?_:ge.file_id)!=null?w:"Document",filename:(x=ge.filename)!=null?x:ge.file_id,providerMetadata:{[H]:{fileId:ge.file_id,containerId:ge.container_id,...ge.index!=null?{index:ge.index}:{}}}}):ge.type==="file_path"&&A.push({type:"source",sourceType:"document",id:(y=(b=(f=this.config).generateId)==null?void 0:b.call(f))!=null?y:ze(),mediaType:"application/octet-stream",title:ge.file_id,filename:ge.file_id,providerMetadata:{[H]:{fileId:ge.file_id,...ge.index!=null?{index:ge.index}:{}}}})}break}case"function_call":{P=!0,A.push({type:"tool-call",toolCallId:Y.call_id,toolName:Y.name,input:Y.arguments,providerMetadata:{[H]:{itemId:Y.id}}});break}case"web_search_call":{A.push({type:"tool-call",toolCallId:Y.id,toolName:B.toCustomToolName(J!=null?J:"web_search"),input:JSON.stringify({}),providerExecuted:!0}),A.push({type:"tool-result",toolCallId:Y.id,toolName:B.toCustomToolName(J!=null?J:"web_search"),result:Fk(Y.action)});break}case"mcp_call":{A.push({type:"tool-call",toolCallId:Y.id,toolName:B.toCustomToolName("mcp"),input:JSON.stringify({}),providerExecuted:!0}),A.push({type:"tool-result",toolCallId:Y.id,toolName:B.toCustomToolName("mcp"),result:{type:"call",serverLabel:Y.server_label,name:Y.name,arguments:Y.arguments,...Y.output!=null?{output:Y.output}:{},...Y.error!=null?{error:Y.error}:{}}});break}case"mcp_list_tools":{A.push({type:"tool-call",toolCallId:Y.id,toolName:B.toCustomToolName("mcp"),input:JSON.stringify({}),providerExecuted:!0}),A.push({type:"tool-result",toolCallId:Y.id,toolName:B.toCustomToolName("mcp"),result:{type:"listTools",serverLabel:Y.server_label,tools:Y.tools.map(me=>{var qt,ge;return{name:me.name,description:(qt=me.description)!=null?qt:void 0,inputSchema:me.input_schema,annotations:(ge=me.annotations)!=null?ge:void 0}}),...Y.error!=null?{error:Y.error}:{}}});break}case"mcp_approval_request":{A.push({type:"tool-call",toolCallId:Y.id,toolName:B.toCustomToolName("mcp"),input:JSON.stringify({}),providerExecuted:!0}),A.push({type:"tool-result",toolCallId:Y.id,toolName:B.toCustomToolName("mcp"),result:{type:"approvalRequest",serverLabel:Y.server_label,name:Y.name,arguments:Y.arguments,approvalRequestId:Y.approval_request_id}});break}case"computer_call":{A.push({type:"tool-call",toolCallId:Y.id,toolName:B.toCustomToolName("computer_use"),input:"",providerExecuted:!0}),A.push({type:"tool-result",toolCallId:Y.id,toolName:B.toCustomToolName("computer_use"),result:{type:"computer_use_tool_result",status:Y.status||"completed"}});break}case"file_search_call":{A.push({type:"tool-call",toolCallId:Y.id,toolName:B.toCustomToolName("file_search"),input:"{}",providerExecuted:!0}),A.push({type:"tool-result",toolCallId:Y.id,toolName:B.toCustomToolName("file_search"),result:{queries:Y.queries,results:($=(k=Y.results)==null?void 0:k.map(me=>({attributes:me.attributes,fileId:me.file_id,filename:me.filename,score:me.score,text:me.text})))!=null?$:null}});break}case"code_interpreter_call":{A.push({type:"tool-call",toolCallId:Y.id,toolName:B.toCustomToolName("code_interpreter"),input:JSON.stringify({code:Y.code,containerId:Y.container_id}),providerExecuted:!0}),A.push({type:"tool-result",toolCallId:Y.id,toolName:B.toCustomToolName("code_interpreter"),result:{outputs:Y.outputs}});break}case"apply_patch_call":{A.push({type:"tool-call",toolCallId:Y.call_id,toolName:B.toCustomToolName("apply_patch"),input:JSON.stringify({callId:Y.call_id,operation:Y.operation}),providerMetadata:{[H]:{itemId:Y.id}}});break}}let ee={[H]:{responseId:C.id}};M.length>0&&(ee[H].logprobs=M),typeof C.service_tier=="string"&&(ee[H].serviceTier=C.service_tier);let te=C.usage;return{content:A,finishReason:zk({finishReason:(O=C.incomplete_details)==null?void 0:O.reason,hasFunctionCall:P}),usage:{inputTokens:te.input_tokens,outputTokens:te.output_tokens,totalTokens:te.input_tokens+te.output_tokens,reasoningTokens:(F=(L=te.output_tokens_details)==null?void 0:L.reasoning_tokens)!=null?F:void 0,cachedInputTokens:(Z=(U=te.input_tokens_details)==null?void 0:U.cached_tokens)!=null?Z:void 0},request:{body:E},response:{id:C.id,timestamp:new Date(C.created_at*1e3),modelId:C.model,headers:G,body:Q},providerMetadata:ee,warnings:z}}async doStream(e){let{args:t,warnings:r,webSearchToolName:o,toolNameMapping:n,store:i}=await this.getArgs(e),{responseHeaders:s,value:u}=await be({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:Nr,successfulResponseHandler:Ot(H1),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=this,l=this.config.provider.replace(".responses",""),d="unknown",m={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},p=[],g=null,h={},v=[],_=!1,w={},x;return{stream:u.pipeThrough(new TransformStream({start(f){f.enqueue({type:"stream-start",warnings:r})},transform(f,b){var y,k,$,O,L,F,U,Z,E,z,J,B,D,H,G,C,Q,A,M,P,ee,te,Y,me,qt,ge,It,Xe,tt,Ae,Se;if(e.includeRawChunks&&b.enqueue({type:"raw",rawValue:f.rawValue}),!f.success){d="error",b.enqueue({type:"error",error:f.error});return}let S=f.value;if(Uk(S))S.item.type==="function_call"?(h[S.output_index]={toolName:S.item.name,toolCallId:S.item.call_id},b.enqueue({type:"tool-input-start",id:S.item.call_id,toolName:S.item.name})):S.item.type==="web_search_call"?(h[S.output_index]={toolName:n.toCustomToolName(o!=null?o:"web_search"),toolCallId:S.item.id},b.enqueue({type:"tool-input-start",id:S.item.id,toolName:n.toCustomToolName(o!=null?o:"web_search"),providerExecuted:!0}),b.enqueue({type:"tool-input-end",id:S.item.id}),b.enqueue({type:"tool-call",toolCallId:S.item.id,toolName:n.toCustomToolName(o!=null?o:"web_search"),input:JSON.stringify({}),providerExecuted:!0})):S.item.type==="computer_call"?(h[S.output_index]={toolName:n.toCustomToolName("computer_use"),toolCallId:S.item.id},b.enqueue({type:"tool-input-start",id:S.item.id,toolName:n.toCustomToolName("computer_use"),providerExecuted:!0})):S.item.type==="code_interpreter_call"?(h[S.output_index]={toolName:n.toCustomToolName("code_interpreter"),toolCallId:S.item.id,codeInterpreter:{containerId:S.item.container_id}},b.enqueue({type:"tool-input-start",id:S.item.id,toolName:n.toCustomToolName("code_interpreter"),providerExecuted:!0}),b.enqueue({type:"tool-input-delta",id:S.item.id,delta:`{"containerId":"${S.item.container_id}","code":"`})):S.item.type==="file_search_call"?b.enqueue({type:"tool-call",toolCallId:S.item.id,toolName:n.toCustomToolName("file_search"),input:"{}",providerExecuted:!0}):S.item.type==="image_generation_call"?b.enqueue({type:"tool-call",toolCallId:S.item.id,toolName:n.toCustomToolName("image_generation"),input:"{}",providerExecuted:!0}):S.item.type==="mcp_call"||S.item.type==="mcp_list_tools"||S.item.type==="mcp_approval_request"?b.enqueue({type:"tool-call",toolCallId:S.item.id,toolName:n.toCustomToolName("mcp"),input:"{}",providerExecuted:!0}):S.item.type==="apply_patch_call"?(h[S.output_index]={toolName:n.toCustomToolName("apply_patch"),toolCallId:S.item.call_id},S.item.status==="completed"&&b.enqueue({type:"tool-call",toolCallId:S.item.call_id,toolName:n.toCustomToolName("apply_patch"),input:JSON.stringify({callId:S.item.call_id,operation:S.item.operation}),providerMetadata:{[l]:{itemId:S.item.id}}})):S.item.type==="shell_call"?h[S.output_index]={toolName:n.toCustomToolName("shell"),toolCallId:S.item.call_id}:S.item.type==="message"?(v.splice(0,v.length),b.enqueue({type:"text-start",id:S.item.id,providerMetadata:{[l]:{itemId:S.item.id}}})):Uk(S)&&S.item.type==="reasoning"&&(w[S.item.id]={encryptedContent:S.item.encrypted_content,summaryParts:{0:"active"}},b.enqueue({type:"reasoning-start",id:`${S.item.id}:0`,providerMetadata:{[l]:{itemId:S.item.id,reasoningEncryptedContent:(y=S.item.encrypted_content)!=null?y:null}}}));else if(tz(S)){if(S.item.type==="message")b.enqueue({type:"text-end",id:S.item.id,providerMetadata:{[l]:{itemId:S.item.id,...v.length>0&&{annotations:v}}}});else if(S.item.type==="function_call")h[S.output_index]=void 0,_=!0,b.enqueue({type:"tool-input-end",id:S.item.call_id}),b.enqueue({type:"tool-call",toolCallId:S.item.call_id,toolName:S.item.name,input:S.item.arguments,providerMetadata:{[l]:{itemId:S.item.id}}});else if(S.item.type==="web_search_call")h[S.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:S.item.id,toolName:n.toCustomToolName(o!=null?o:"web_search"),result:Fk(S.item.action)});else if(S.item.type==="computer_call")h[S.output_index]=void 0,b.enqueue({type:"tool-input-end",id:S.item.id}),b.enqueue({type:"tool-call",toolCallId:S.item.id,toolName:n.toCustomToolName("computer_use"),input:"",providerExecuted:!0}),b.enqueue({type:"tool-result",toolCallId:S.item.id,toolName:n.toCustomToolName("computer_use"),result:{type:"computer_use_tool_result",status:S.item.status||"completed"}});else if(S.item.type==="file_search_call")h[S.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:S.item.id,toolName:n.toCustomToolName("file_search"),result:{queries:S.item.queries,results:($=(k=S.item.results)==null?void 0:k.map(oe=>({attributes:oe.attributes,fileId:oe.file_id,filename:oe.filename,score:oe.score,text:oe.text})))!=null?$:null}});else if(S.item.type==="code_interpreter_call")h[S.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:S.item.id,toolName:n.toCustomToolName("code_interpreter"),result:{outputs:S.item.outputs}});else if(S.item.type==="image_generation_call")b.enqueue({type:"tool-result",toolCallId:S.item.id,toolName:n.toCustomToolName("image_generation"),result:{result:S.item.result}});else if(S.item.type==="mcp_call")h[S.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:S.item.id,toolName:n.toCustomToolName("mcp"),result:{type:"call",serverLabel:S.item.server_label,name:S.item.name,arguments:S.item.arguments,...S.item.output!=null?{output:S.item.output}:{},...S.item.error!=null?{error:S.item.error}:{}}});else if(S.item.type==="mcp_list_tools")h[S.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:S.item.id,toolName:n.toCustomToolName("mcp"),result:{type:"listTools",serverLabel:S.item.server_label,tools:S.item.tools.map(oe=>{var He,Ce;return{name:oe.name,description:(He=oe.description)!=null?He:void 0,inputSchema:oe.input_schema,annotations:(Ce=oe.annotations)!=null?Ce:void 0}}),...S.item.error!=null?{error:S.item.error}:{}}});else if(S.item.type==="apply_patch_call")h[S.output_index]=void 0,S.item.status==="completed"&&b.enqueue({type:"tool-call",toolCallId:S.item.call_id,toolName:n.toCustomToolName("apply_patch"),input:JSON.stringify({callId:S.item.call_id,operation:S.item.operation}),providerMetadata:{[l]:{itemId:S.item.id}}});else if(S.item.type==="mcp_approval_request")h[S.output_index]=void 0,b.enqueue({type:"tool-result",toolCallId:S.item.id,toolName:n.toCustomToolName("mcp"),result:{type:"approvalRequest",serverLabel:S.item.server_label,name:S.item.name,arguments:S.item.arguments,approvalRequestId:S.item.approval_request_id}});else if(S.item.type==="local_shell_call")h[S.output_index]=void 0,b.enqueue({type:"tool-call",toolCallId:S.item.call_id,toolName:n.toCustomToolName("local_shell"),input:JSON.stringify({action:{type:"exec",command:S.item.action.command,timeoutMs:S.item.action.timeout_ms,user:S.item.action.user,workingDirectory:S.item.action.working_directory,env:S.item.action.env}}),providerMetadata:{[l]:{itemId:S.item.id}}});else if(S.item.type==="shell_call")h[S.output_index]=void 0,b.enqueue({type:"tool-call",toolCallId:S.item.call_id,toolName:n.toCustomToolName("shell"),input:JSON.stringify({action:{commands:S.item.action.commands}}),providerMetadata:{[l]:{itemId:S.item.id}}});else if(S.item.type==="reasoning"){let oe=w[S.item.id],He=Object.entries(oe.summaryParts).filter(([Ce,q])=>q==="active"||q==="can-conclude").map(([Ce])=>Ce);for(let Ce of He)b.enqueue({type:"reasoning-end",id:`${S.item.id}:${Ce}`,providerMetadata:{[l]:{itemId:S.item.id,reasoningEncryptedContent:(O=S.item.encrypted_content)!=null?O:null}}});delete w[S.item.id]}}else if(oz(S)){let oe=h[S.output_index];oe!=null&&b.enqueue({type:"tool-input-delta",id:oe.toolCallId,delta:S.delta})}else if(az(S))b.enqueue({type:"tool-result",toolCallId:S.item_id,toolName:n.toCustomToolName("image_generation"),result:{result:S.partial_image_b64},preliminary:!0});else if(iz(S)){let oe=h[S.output_index];oe!=null&&b.enqueue({type:"tool-input-delta",id:oe.toolCallId,delta:JSON.stringify(S.delta).slice(1,-1)})}else if(sz(S)){let oe=h[S.output_index];oe!=null&&(b.enqueue({type:"tool-input-delta",id:oe.toolCallId,delta:'"}'}),b.enqueue({type:"tool-input-end",id:oe.toolCallId}),b.enqueue({type:"tool-call",toolCallId:oe.toolCallId,toolName:n.toCustomToolName("code_interpreter"),input:JSON.stringify({code:S.code,containerId:oe.codeInterpreter.containerId}),providerExecuted:!0}))}else if(nz(S))g=S.response.id,b.enqueue({type:"response-metadata",id:S.response.id,timestamp:new Date(S.response.created_at*1e3),modelId:S.response.model});else if(ez(S))b.enqueue({type:"text-delta",id:S.item_id,delta:S.delta}),(F=(L=e.providerOptions)==null?void 0:L.openai)!=null&&F.logprobs&&S.logprobs&&p.push(S.logprobs);else if(S.type==="response.reasoning_summary_part.added"){if(S.summary_index>0){let oe=w[S.item_id];oe.summaryParts[S.summary_index]="active";for(let He of Object.keys(oe.summaryParts))oe.summaryParts[He]==="can-conclude"&&(b.enqueue({type:"reasoning-end",id:`${S.item_id}:${He}`,providerMetadata:{[l]:{itemId:S.item_id}}}),oe.summaryParts[He]="concluded");b.enqueue({type:"reasoning-start",id:`${S.item_id}:${S.summary_index}`,providerMetadata:{[l]:{itemId:S.item_id,reasoningEncryptedContent:(Z=(U=w[S.item_id])==null?void 0:U.encryptedContent)!=null?Z:null}}})}}else S.type==="response.reasoning_summary_text.delta"?b.enqueue({type:"reasoning-delta",id:`${S.item_id}:${S.summary_index}`,delta:S.delta,providerMetadata:{[l]:{itemId:S.item_id}}}):S.type==="response.reasoning_summary_part.done"?i?(b.enqueue({type:"reasoning-end",id:`${S.item_id}:${S.summary_index}`,providerMetadata:{[l]:{itemId:S.item_id}}}),w[S.item_id].summaryParts[S.summary_index]="concluded"):w[S.item_id].summaryParts[S.summary_index]="can-conclude":rz(S)?(d=zk({finishReason:(E=S.response.incomplete_details)==null?void 0:E.reason,hasFunctionCall:_}),m.inputTokens=S.response.usage.input_tokens,m.outputTokens=S.response.usage.output_tokens,m.totalTokens=S.response.usage.input_tokens+S.response.usage.output_tokens,m.reasoningTokens=(J=(z=S.response.usage.output_tokens_details)==null?void 0:z.reasoning_tokens)!=null?J:void 0,m.cachedInputTokens=(D=(B=S.response.usage.input_tokens_details)==null?void 0:B.cached_tokens)!=null?D:void 0,typeof S.response.service_tier=="string"&&(x=S.response.service_tier)):lz(S)?(v.push(S.annotation),S.annotation.type==="url_citation"?b.enqueue({type:"source",sourceType:"url",id:(C=(G=(H=c.config).generateId)==null?void 0:G.call(H))!=null?C:ze(),url:S.annotation.url,title:S.annotation.title}):S.annotation.type==="file_citation"?b.enqueue({type:"source",sourceType:"document",id:(M=(A=(Q=c.config).generateId)==null?void 0:A.call(Q))!=null?M:ze(),mediaType:"text/plain",title:(ee=(P=S.annotation.quote)!=null?P:S.annotation.filename)!=null?ee:"Document",filename:(te=S.annotation.filename)!=null?te:S.annotation.file_id,...S.annotation.file_id?{providerMetadata:{[l]:{fileId:S.annotation.file_id}}}:{}}):S.annotation.type==="container_file_citation"?b.enqueue({type:"source",sourceType:"document",id:(qt=(me=(Y=c.config).generateId)==null?void 0:me.call(Y))!=null?qt:ze(),mediaType:"text/plain",title:(It=(ge=S.annotation.filename)!=null?ge:S.annotation.file_id)!=null?It:"Document",filename:(Xe=S.annotation.filename)!=null?Xe:S.annotation.file_id,providerMetadata:{[l]:{fileId:S.annotation.file_id,containerId:S.annotation.container_id,...S.annotation.index!=null?{index:S.annotation.index}:{}}}}):S.annotation.type==="file_path"&&b.enqueue({type:"source",sourceType:"document",id:(Se=(Ae=(tt=c.config).generateId)==null?void 0:Ae.call(tt))!=null?Se:ze(),mediaType:"application/octet-stream",title:S.annotation.file_id,filename:S.annotation.file_id,providerMetadata:{[l]:{fileId:S.annotation.file_id,...S.annotation.index!=null?{index:S.annotation.index}:{}}}})):uz(S)&&b.enqueue({type:"error",error:S})},flush(f){let b={[l]:{responseId:g}};p.length>0&&(b[l].logprobs=p),x!==void 0&&(b[l].serviceTier=x),f.enqueue({type:"finish",finishReason:d,usage:m,providerMetadata:b})}})),request:{body:t},response:{headers:s}}}};function ez(e){return e.type==="response.output_text.delta"}function tz(e){return e.type==="response.output_item.done"}function rz(e){return e.type==="response.completed"||e.type==="response.incomplete"}function nz(e){return e.type==="response.created"}function oz(e){return e.type==="response.function_call_arguments.delta"}function az(e){return e.type==="response.image_generation_call.partial_image"}function iz(e){return e.type==="response.code_interpreter_call_code.delta"}function sz(e){return e.type==="response.code_interpreter_call_code.done"}function Uk(e){return e.type==="response.output_item.added"}function lz(e){return e.type==="response.output_text.annotation.added"}function uz(e){return e.type==="error"}function Fk(e){var t;switch(e.type){case"search":return{action:{type:"search",query:(t=e.query)!=null?t:void 0},...e.sources!=null&&{sources:e.sources}};case"open_page":return{action:{type:"openPage",url:e.url}};case"find":return{action:{type:"find",url:e.url,pattern:e.pattern}}}}var cz=j(()=>R(a.object({instructions:a.string().nullish(),speed:a.number().min(.25).max(4).default(1).nullish()}))),dz=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3"}get provider(){return this.config.provider}async getArgs({text:e,voice:t="alloy",outputFormat:r="mp3",speed:o,instructions:n,language:i,providerOptions:s}){let u=[],c=await we({provider:"openai",providerOptions:s,schema:cz}),l={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:o,instructions:n};if(r&&(["mp3","opus","aac","flac","wav","pcm"].includes(r)?l.response_format=r:u.push({type:"unsupported",feature:"outputFormat",details:`Unsupported output format: ${r}. Using mp3 instead.`})),c){let d={};for(let m in d){let p=d[m];p!==void 0&&(l[m]=p)}}return i&&u.push({type:"unsupported",feature:"language",details:`OpenAI speech models do not support language selection. Language parameter "${i}" was ignored.`}),{requestBody:l,warnings:u}}async doGenerate(e){var t,r,o;let n=(o=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?o:new Date,{requestBody:i,warnings:s}=await this.getArgs(e),{value:u,responseHeaders:c,rawValue:l}=await be({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:i,failedResponseHandler:Nr,successfulResponseHandler:Pk(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:u,warnings:s,request:{body:JSON.stringify(i)},response:{timestamp:n,modelId:this.modelId,headers:c,body:l}}}},pz=j(()=>R(a.object({text:a.string(),language:a.string().nullish(),duration:a.number().nullish(),words:a.array(a.object({word:a.string(),start:a.number(),end:a.number()})).nullish(),segments:a.array(a.object({id:a.number(),seek:a.number(),start:a.number(),end:a.number(),text:a.string(),tokens:a.array(a.number()),temperature:a.number(),avg_logprob:a.number(),compression_ratio:a.number(),no_speech_prob:a.number()})).nullish()}))),mz=j(()=>R(a.object({include:a.array(a.string()).optional(),language:a.string().optional(),prompt:a.string().optional(),temperature:a.number().min(0).max(1).default(0).optional(),timestampGranularities:a.array(a.enum(["word","segment"])).default(["segment"]).optional()}))),Lk={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},fz=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3"}get provider(){return this.config.provider}async getArgs({audio:e,mediaType:t,providerOptions:r}){let o=[],n=await we({provider:"openai",providerOptions:r,schema:mz}),i=new FormData,s=e instanceof Uint8Array?new Blob([e]):new Blob([Ok(e)]);i.append("model",this.modelId);let u=Sk(t);if(i.append("file",new File([s],"audio",{type:t}),`audio.${u}`),n){let c={include:n.include,language:n.language,prompt:n.prompt,response_format:["gpt-4o-transcribe","gpt-4o-mini-transcribe"].includes(this.modelId)?"json":"verbose_json",temperature:n.temperature,timestamp_granularities:n.timestampGranularities};for(let[l,d]of Object.entries(c))if(d!=null)if(Array.isArray(d))for(let m of d)i.append(`${l}[]`,String(m));else i.append(l,String(d))}return{formData:i,warnings:o}}async doGenerate(e){var t,r,o,n,i,s,u,c;let l=(o=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?o:new Date,{formData:d,warnings:m}=await this.getArgs(e),{value:p,responseHeaders:g,rawValue:h}=await Ak({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),formData:d,failedResponseHandler:Nr,successfulResponseHandler:Re(pz),abortSignal:e.abortSignal,fetch:this.config.fetch}),v=p.language!=null&&p.language in Lk?Lk[p.language]:void 0;return{text:p.text,segments:(u=(s=(n=p.segments)==null?void 0:n.map(_=>({text:_.text,startSecond:_.start,endSecond:_.end})))!=null?s:(i=p.words)==null?void 0:i.map(_=>({text:_.word,startSecond:_.start,endSecond:_.end})))!=null?u:[],language:v,durationInSeconds:(c=p.duration)!=null?c:void 0,warnings:m,response:{timestamp:l,modelId:this.modelId,headers:g,body:h}}}},gz="3.0.0-beta.87";function Df(e={}){var t,r;let o=(t=wn(kl({settingValue:e.baseURL,environmentVariableName:"OPENAI_BASE_URL"})))!=null?t:"https://api.openai.com/v1",n=(r=e.name)!=null?r:"openai",i=()=>en({Authorization:`Bearer ${Do({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers},`ai-sdk/openai/${gz}`),s=v=>new t1(v,{provider:`${n}.chat`,url:({path:_})=>`${o}${_}`,headers:i,fetch:e.fetch}),u=v=>new a1(v,{provider:`${n}.completion`,url:({path:_})=>`${o}${_}`,headers:i,fetch:e.fetch}),c=v=>new l1(v,{provider:`${n}.embedding`,url:({path:_})=>`${o}${_}`,headers:i,fetch:e.fetch}),l=v=>new p1(v,{provider:`${n}.image`,url:({path:_})=>`${o}${_}`,headers:i,fetch:e.fetch}),d=v=>new fz(v,{provider:`${n}.transcription`,url:({path:_})=>`${o}${_}`,headers:i,fetch:e.fetch}),m=v=>new dz(v,{provider:`${n}.speech`,url:({path:_})=>`${o}${_}`,headers:i,fetch:e.fetch}),p=v=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return g(v)},g=v=>new Q1(v,{provider:`${n}.responses`,url:({path:_})=>`${o}${_}`,headers:i,fetch:e.fetch,fileIdPrefixes:["file-"]}),h=function(v){return p(v)};return h.specificationVersion="v3",h.languageModel=p,h.chat=s,h.completion=u,h.responses=g,h.embedding=c,h.embeddingModel=c,h.image=l,h.imageModel=l,h.transcription=d,h.transcriptionModel=d,h.speech=m,h.speechModel=m,h.tools=G1,h}var jB=Df();var $e={apiKey:"",aiService:Ie,frequency_penalty:0,max_tokens:400,model:"openai@gpt-4.1-mini",presence_penalty:0,stream:!0,system_commands:null,tags:[],temperature:.7,title:"Untitled",top_p:1,url:"https://api.openai.com"},Tl=class extends Ct{constructor(){super();this.serviceType=Ie}getDefaultConfig(){return $e}getApiKeyFromSettings(r){return this.apiAuthService.getApiKey(r,Ie)}async fetchAvailableModels(r,o){try{if(!o||!rt(o))return[];let n=this.apiAuthService.createAuthHeaders(o,Ie);return(await this.apiService.makeGetRequest(`${r}/v1/models`,n,Ie)).data.filter(s=>(s.id.includes("o3")||s.id.includes("o4")||s.id.includes("o1")||s.id.includes("gpt-4")||s.id.includes("gpt-5")||s.id.includes("gpt-3"))&&!s.id.includes("audio")&&!s.id.includes("transcribe")&&!s.id.includes("realtime")&&!s.id.includes("o1-pro")&&!s.id.includes("tts")).sort((s,u)=>s.id<u.id?1:s.id>u.id?-1:0).map(s=>`openai@${s.id}`)}catch(n){return[]}}getSystemMessageRole(){return gu}supportsSystemField(){return!1}ensureProvider(r,o){let n=this.apiService.createFetchAdapter();this.provider=Df({apiKey:r,baseURL:`${o.url}/v1`,fetch:n})}async callStreamingAPI(r,o,n,i,s,u,c,l){this.ensureProvider(r,n);let d=this.extractModelName(n.model),m=l==null?void 0:l.getToolsForRequest(c);return this.callAiSdkStreamText(this.provider(d),d,o,n,i,s,u,m,l)}async callNonStreamingAPI(r,o,n,i,s,u){this.ensureProvider(r,n);let c=this.extractModelName(n.model),l=u==null?void 0:u.getToolsForRequest(i);return this.callAiSdkGenerateText(this.provider(c),c,o,l,u)}};function hi(e){var t,r;return(r=(t=e==null?void 0:e.providerOptions)==null?void 0:t.openaiCompatible)!=null?r:{}}function hz(e){var t;let r=[];for(let{role:o,content:n,...i}of e){let s=hi({...i});switch(o){case"system":{r.push({role:"system",content:n,...s});break}case"user":{if(n.length===1&&n[0].type==="text"){r.push({role:"user",content:n[0].text,...hi(n[0])});break}r.push({role:"user",content:n.map(u=>{let c=hi(u);switch(u.type){case"text":return{type:"text",text:u.text,...c};case"file":if(u.mediaType.startsWith("image/")){let l=u.mediaType==="image/*"?"image/jpeg":u.mediaType;return{type:"image_url",image_url:{url:u.data instanceof URL?u.data.toString():`data:${l};base64,${ht(u.data)}`},...c}}else throw new xe({functionality:`file part media type ${u.mediaType}`})}}),...s});break}case"assistant":{let u="",c=[];for(let l of n){let d=hi(l);switch(l.type){case"text":{u+=l.text;break}case"tool-call":{c.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.input)},...d});break}}}r.push({role:"assistant",content:u,tool_calls:c.length>0?c:void 0,...s});break}case"tool":{for(let u of n){let c=u.output,l;switch(c.type){case"text":case"error-text":l=c.value;break;case"execution-denied":l=(t=c.reason)!=null?t:"Tool execution denied.";break;case"content":case"json":case"error-json":l=JSON.stringify(c.value);break}let d=hi(u);r.push({role:"tool",tool_call_id:u.toolCallId,content:l,...d})}break}default:{let u=o;throw new Error(`Unsupported role: ${u}`)}}}return r}function Yk({id:e,model:t,created:r}){return{id:e!=null?e:void 0,modelId:t!=null?t:void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function Xk(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var zf=a.object({user:a.string().optional(),reasoningEffort:a.string().optional(),textVerbosity:a.string().optional()}),vz=a.object({error:a.object({message:a.string(),type:a.string().nullish(),param:a.any().nullish(),code:a.union([a.string(),a.number()]).nullish()})}),$l={errorSchema:vz,errorToMessage:e=>e.error.message};function yz({tools:e,toolChoice:t}){e=e!=null&&e.length?e:void 0;let r=[];if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:r};let o=[];for(let i of e)i.type==="provider"?r.push({type:"unsupported",feature:`provider-defined tool ${i.id}`}):o.push({type:"function",function:{name:i.name,description:i.description,parameters:i.inputSchema,...i.strict!=null?{strict:i.strict}:{}}});if(t==null)return{tools:o,toolChoice:void 0,toolWarnings:r};let n=t.type;switch(n){case"auto":case"none":case"required":return{tools:o,toolChoice:n,toolWarnings:r};case"tool":return{tools:o,toolChoice:{type:"function",function:{name:t.toolName}},toolWarnings:r};default:{let i=n;throw new xe({functionality:`tool choice type: ${i}`})}}}var _z=class{constructor(e,t){this.specificationVersion="v3";var r,o;this.modelId=e,this.config=t;let n=(r=t.errorStructure)!=null?r:$l;this.chunkSchema=xz(n.errorSchema),this.failedResponseHandler=Pt(n),this.supportsStructuredOutputs=(o=t.supportsStructuredOutputs)!=null?o:!1}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,topK:n,frequencyPenalty:i,presencePenalty:s,providerOptions:u,stopSequences:c,responseFormat:l,seed:d,toolChoice:m,tools:p}){var g,h,v,_;let w=[],x=Object.assign((g=await we({provider:"openai-compatible",providerOptions:u,schema:zf}))!=null?g:{},(h=await we({provider:this.providerOptionsName,providerOptions:u,schema:zf}))!=null?h:{});n!=null&&w.push({type:"unsupported",feature:"topK"}),(l==null?void 0:l.type)==="json"&&l.schema!=null&&!this.supportsStructuredOutputs&&w.push({type:"unsupported",feature:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});let{tools:f,toolChoice:b,toolWarnings:y}=yz({tools:p,toolChoice:m});return{args:{model:this.modelId,user:x.user,max_tokens:t,temperature:r,top_p:o,frequency_penalty:i,presence_penalty:s,response_format:(l==null?void 0:l.type)==="json"?this.supportsStructuredOutputs===!0&&l.schema!=null?{type:"json_schema",json_schema:{schema:l.schema,name:(v=l.name)!=null?v:"response",description:l.description}}:{type:"json_object"}:void 0,stop:c,seed:d,...Object.fromEntries(Object.entries((_=u==null?void 0:u[this.providerOptionsName])!=null?_:{}).filter(([k])=>!Object.keys(zf.shape).includes(k))),reasoning_effort:x.reasoningEffort,verbosity:x.textVerbosity,messages:hz(e),tools:f,tool_choice:b},warnings:[...w,...y]}}async doGenerate(e){var t,r,o,n,i,s,u,c,l,d,m,p,g,h,v,_,w;let{args:x,warnings:f}=await this.getArgs({...e}),b=JSON.stringify(x),{responseHeaders:y,value:k,rawValue:$}=await be({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:x,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Re(bz),abortSignal:e.abortSignal,fetch:this.config.fetch}),O=k.choices[0],L=[],F=O.message.content;F!=null&&F.length>0&&L.push({type:"text",text:F});let U=(t=O.message.reasoning_content)!=null?t:O.message.reasoning;if(U!=null&&U.length>0&&L.push({type:"reasoning",text:U}),O.message.tool_calls!=null)for(let z of O.message.tool_calls)L.push({type:"tool-call",toolCallId:(r=z.id)!=null?r:ze(),toolName:z.function.name,input:z.function.arguments});let Z={[this.providerOptionsName]:{},...await((n=(o=this.config.metadataExtractor)==null?void 0:o.extractMetadata)==null?void 0:n.call(o,{parsedBody:$}))},E=(i=k.usage)==null?void 0:i.completion_tokens_details;return(E==null?void 0:E.accepted_prediction_tokens)!=null&&(Z[this.providerOptionsName].acceptedPredictionTokens=E==null?void 0:E.accepted_prediction_tokens),(E==null?void 0:E.rejected_prediction_tokens)!=null&&(Z[this.providerOptionsName].rejectedPredictionTokens=E==null?void 0:E.rejected_prediction_tokens),{content:L,finishReason:Xk(O.finish_reason),usage:{inputTokens:(u=(s=k.usage)==null?void 0:s.prompt_tokens)!=null?u:void 0,outputTokens:(l=(c=k.usage)==null?void 0:c.completion_tokens)!=null?l:void 0,totalTokens:(m=(d=k.usage)==null?void 0:d.total_tokens)!=null?m:void 0,reasoningTokens:(h=(g=(p=k.usage)==null?void 0:p.completion_tokens_details)==null?void 0:g.reasoning_tokens)!=null?h:void 0,cachedInputTokens:(w=(_=(v=k.usage)==null?void 0:v.prompt_tokens_details)==null?void 0:_.cached_tokens)!=null?w:void 0},providerMetadata:Z,request:{body:b},response:{...Yk(k),headers:y,body:$},warnings:f}}async doStream(e){var t;let{args:r,warnings:o}=await this.getArgs({...e}),n={...r,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:s,value:u}=await be({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:n,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Ot(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=[],l="unknown",d={completionTokens:void 0,completionTokensDetails:{reasoningTokens:void 0,acceptedPredictionTokens:void 0,rejectedPredictionTokens:void 0},promptTokens:void 0,promptTokensDetails:{cachedTokens:void 0},totalTokens:void 0},m=!0,p=this.providerOptionsName,g=!1,h=!1;return{stream:u.pipeThrough(new TransformStream({start(v){v.enqueue({type:"stream-start",warnings:o})},transform(v,_){var w,x,f,b,y,k,$,O,L,F,U,Z,E;if(e.includeRawChunks&&_.enqueue({type:"raw",rawValue:v.rawValue}),!v.success){l="error",_.enqueue({type:"error",error:v.error});return}let z=v.value;if(i==null||i.processChunk(v.rawValue),"error"in z){l="error",_.enqueue({type:"error",error:z.error.message});return}if(m&&(m=!1,_.enqueue({type:"response-metadata",...Yk(z)})),z.usage!=null){let{prompt_tokens:H,completion_tokens:G,total_tokens:C,prompt_tokens_details:Q,completion_tokens_details:A}=z.usage;d.promptTokens=H!=null?H:void 0,d.completionTokens=G!=null?G:void 0,d.totalTokens=C!=null?C:void 0,(A==null?void 0:A.reasoning_tokens)!=null&&(d.completionTokensDetails.reasoningTokens=A==null?void 0:A.reasoning_tokens),(A==null?void 0:A.accepted_prediction_tokens)!=null&&(d.completionTokensDetails.acceptedPredictionTokens=A==null?void 0:A.accepted_prediction_tokens),(A==null?void 0:A.rejected_prediction_tokens)!=null&&(d.completionTokensDetails.rejectedPredictionTokens=A==null?void 0:A.rejected_prediction_tokens),(Q==null?void 0:Q.cached_tokens)!=null&&(d.promptTokensDetails.cachedTokens=Q==null?void 0:Q.cached_tokens)}let J=z.choices[0];if((J==null?void 0:J.finish_reason)!=null&&(l=Xk(J.finish_reason)),(J==null?void 0:J.delta)==null)return;let B=J.delta,D=(w=B.reasoning_content)!=null?w:B.reasoning;if(D&&(g||(_.enqueue({type:"reasoning-start",id:"reasoning-0"}),g=!0),_.enqueue({type:"reasoning-delta",id:"reasoning-0",delta:D})),B.content&&(h||(_.enqueue({type:"text-start",id:"txt-0"}),h=!0),_.enqueue({type:"text-delta",id:"txt-0",delta:B.content})),B.tool_calls!=null)for(let H of B.tool_calls){let G=H.index;if(c[G]==null){if(H.id==null)throw new Fn({data:H,message:"Expected 'id' to be a string."});if(((x=H.function)==null?void 0:x.name)==null)throw new Fn({data:H,message:"Expected 'function.name' to be a string."});_.enqueue({type:"tool-input-start",id:H.id,toolName:H.function.name}),c[G]={id:H.id,type:"function",function:{name:H.function.name,arguments:(f=H.function.arguments)!=null?f:""},hasFinished:!1};let Q=c[G];((b=Q.function)==null?void 0:b.name)!=null&&((y=Q.function)==null?void 0:y.arguments)!=null&&(Q.function.arguments.length>0&&_.enqueue({type:"tool-input-delta",id:Q.id,delta:Q.function.arguments}),zo(Q.function.arguments)&&(_.enqueue({type:"tool-input-end",id:Q.id}),_.enqueue({type:"tool-call",toolCallId:(k=Q.id)!=null?k:ze(),toolName:Q.function.name,input:Q.function.arguments}),Q.hasFinished=!0));continue}let C=c[G];C.hasFinished||((($=H.function)==null?void 0:$.arguments)!=null&&(C.function.arguments+=(L=(O=H.function)==null?void 0:O.arguments)!=null?L:""),_.enqueue({type:"tool-input-delta",id:C.id,delta:(F=H.function.arguments)!=null?F:""}),((U=C.function)==null?void 0:U.name)!=null&&((Z=C.function)==null?void 0:Z.arguments)!=null&&zo(C.function.arguments)&&(_.enqueue({type:"tool-input-end",id:C.id}),_.enqueue({type:"tool-call",toolCallId:(E=C.id)!=null?E:ze(),toolName:C.function.name,input:C.function.arguments}),C.hasFinished=!0))}},flush(v){var _,w,x,f,b,y;g&&v.enqueue({type:"reasoning-end",id:"reasoning-0"}),h&&v.enqueue({type:"text-end",id:"txt-0"});for(let $ of c.filter(O=>!O.hasFinished))v.enqueue({type:"tool-input-end",id:$.id}),v.enqueue({type:"tool-call",toolCallId:(_=$.id)!=null?_:ze(),toolName:$.function.name,input:$.function.arguments});let k={[p]:{},...i==null?void 0:i.buildMetadata()};d.completionTokensDetails.acceptedPredictionTokens!=null&&(k[p].acceptedPredictionTokens=d.completionTokensDetails.acceptedPredictionTokens),d.completionTokensDetails.rejectedPredictionTokens!=null&&(k[p].rejectedPredictionTokens=d.completionTokensDetails.rejectedPredictionTokens),v.enqueue({type:"finish",finishReason:l,usage:{inputTokens:(w=d.promptTokens)!=null?w:void 0,outputTokens:(x=d.completionTokens)!=null?x:void 0,totalTokens:(f=d.totalTokens)!=null?f:void 0,reasoningTokens:(b=d.completionTokensDetails.reasoningTokens)!=null?b:void 0,cachedInputTokens:(y=d.promptTokensDetails.cachedTokens)!=null?y:void 0},providerMetadata:k})}})),request:{body:n},response:{headers:s}}}},rI=a.object({prompt_tokens:a.number().nullish(),completion_tokens:a.number().nullish(),total_tokens:a.number().nullish(),prompt_tokens_details:a.object({cached_tokens:a.number().nullish()}).nullish(),completion_tokens_details:a.object({reasoning_tokens:a.number().nullish(),accepted_prediction_tokens:a.number().nullish(),rejected_prediction_tokens:a.number().nullish()}).nullish()}).nullish(),bz=a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({message:a.object({role:a.literal("assistant").nullish(),content:a.string().nullish(),reasoning_content:a.string().nullish(),reasoning:a.string().nullish(),tool_calls:a.array(a.object({id:a.string().nullish(),function:a.object({name:a.string(),arguments:a.string()})})).nullish()}),finish_reason:a.string().nullish()})),usage:rI}),xz=e=>a.union([a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({delta:a.object({role:a.enum(["assistant"]).nullish(),content:a.string().nullish(),reasoning_content:a.string().nullish(),reasoning:a.string().nullish(),tool_calls:a.array(a.object({index:a.number(),id:a.string().nullish(),function:a.object({name:a.string().nullish(),arguments:a.string().nullish()})})).nullish()}).nullish(),finish_reason:a.string().nullish()})),usage:rI}),e]);function wz({prompt:e,user:t="user",assistant:r="assistant"}){let o="";e[0].role==="system"&&(o+=`${e[0].content}

`,e=e.slice(1));for(let{role:n,content:i}of e)switch(n){case"system":throw new bl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{let s=i.map(u=>{switch(u.type){case"text":return u.text}}).filter(Boolean).join("");o+=`${t}:
${s}

`;break}case"assistant":{let s=i.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new xe({functionality:"tool-call messages"})}}).join("");o+=`${r}:
${s}

`;break}case"tool":throw new xe({functionality:"tool messages"});default:{let s=n;throw new Error(`Unsupported role: ${s}`)}}return o+=`${r}:
`,{prompt:o,stopSequences:[`
${t}:`]}}function Qk({id:e,model:t,created:r}){return{id:e!=null?e:void 0,modelId:t!=null?t:void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function eI(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Sz=a.object({echo:a.boolean().optional(),logitBias:a.record(a.string(),a.number()).optional(),suffix:a.string().optional(),user:a.string().optional()}),kz=class{constructor(e,t){this.specificationVersion="v3";var r;this.modelId=e,this.config=t;let o=(r=t.errorStructure)!=null?r:$l;this.chunkSchema=Tz(o.errorSchema),this.failedResponseHandler=Pt(o)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,topK:n,frequencyPenalty:i,presencePenalty:s,stopSequences:u,responseFormat:c,seed:l,providerOptions:d,tools:m,toolChoice:p}){var g;let h=[],v=(g=await we({provider:this.providerOptionsName,providerOptions:d,schema:Sz}))!=null?g:{};n!=null&&h.push({type:"unsupported",feature:"topK"}),m!=null&&m.length&&h.push({type:"unsupported",feature:"tools"}),p!=null&&h.push({type:"unsupported",feature:"toolChoice"}),c!=null&&c.type!=="text"&&h.push({type:"unsupported",feature:"responseFormat",details:"JSON response format is not supported."});let{prompt:_,stopSequences:w}=wz({prompt:e}),x=[...w!=null?w:[],...u!=null?u:[]];return{args:{model:this.modelId,echo:v.echo,logit_bias:v.logitBias,suffix:v.suffix,user:v.user,max_tokens:t,temperature:r,top_p:o,frequency_penalty:i,presence_penalty:s,seed:l,...d==null?void 0:d[this.providerOptionsName],prompt:_,stop:x.length>0?x:void 0},warnings:h}}async doGenerate(e){var t,r,o,n,i,s;let{args:u,warnings:c}=await this.getArgs(e),{responseHeaders:l,value:d,rawValue:m}=await be({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:u,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Re(Iz),abortSignal:e.abortSignal,fetch:this.config.fetch}),p=d.choices[0],g=[];return p.text!=null&&p.text.length>0&&g.push({type:"text",text:p.text}),{content:g,usage:{inputTokens:(r=(t=d.usage)==null?void 0:t.prompt_tokens)!=null?r:void 0,outputTokens:(n=(o=d.usage)==null?void 0:o.completion_tokens)!=null?n:void 0,totalTokens:(s=(i=d.usage)==null?void 0:i.total_tokens)!=null?s:void 0},finishReason:eI(p.finish_reason),request:{body:u},response:{...Qk(d),headers:l,body:m},warnings:c}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),o={...t,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},{responseHeaders:n,value:i}=await be({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_e(this.config.headers(),e.headers),body:o,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Ot(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),s="unknown",u={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},c=!0;return{stream:i.pipeThrough(new TransformStream({start(l){l.enqueue({type:"stream-start",warnings:r})},transform(l,d){var m,p,g;if(e.includeRawChunks&&d.enqueue({type:"raw",rawValue:l.rawValue}),!l.success){s="error",d.enqueue({type:"error",error:l.error});return}let h=l.value;if("error"in h){s="error",d.enqueue({type:"error",error:h.error});return}c&&(c=!1,d.enqueue({type:"response-metadata",...Qk(h)}),d.enqueue({type:"text-start",id:"0"})),h.usage!=null&&(u.inputTokens=(m=h.usage.prompt_tokens)!=null?m:void 0,u.outputTokens=(p=h.usage.completion_tokens)!=null?p:void 0,u.totalTokens=(g=h.usage.total_tokens)!=null?g:void 0);let v=h.choices[0];(v==null?void 0:v.finish_reason)!=null&&(s=eI(v.finish_reason)),(v==null?void 0:v.text)!=null&&d.enqueue({type:"text-delta",id:"0",delta:v.text})},flush(l){c||l.enqueue({type:"text-end",id:"0"}),l.enqueue({type:"finish",finishReason:s,usage:u})}})),request:{body:o},response:{headers:n}}}},nI=a.object({prompt_tokens:a.number(),completion_tokens:a.number(),total_tokens:a.number()}),Iz=a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({text:a.string(),finish_reason:a.string()})),usage:nI.nullish()}),Tz=e=>a.union([a.object({id:a.string().nullish(),created:a.number().nullish(),model:a.string().nullish(),choices:a.array(a.object({text:a.string(),finish_reason:a.string().nullish(),index:a.number()})),usage:nI.nullish()}),e]),tI=a.object({dimensions:a.number().optional(),user:a.string().optional()}),$z=class{constructor(e,t){this.specificationVersion="v3",this.modelId=e,this.config=t}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:o}){var n,i,s;let u=Object.assign((n=await we({provider:"openai-compatible",providerOptions:o,schema:tI}))!=null?n:{},(i=await we({provider:this.providerOptionsName,providerOptions:o,schema:tI}))!=null?i:{});if(e.length>this.maxEmbeddingsPerCall)throw new Mo({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let{responseHeaders:c,value:l,rawValue:d}=await be({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:_e(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:u.dimensions,user:u.user},failedResponseHandler:Pt((s=this.config.errorStructure)!=null?s:$l),successfulResponseHandler:Re(Ez),abortSignal:r,fetch:this.config.fetch});return{warnings:[],embeddings:l.data.map(m=>m.embedding),usage:l.usage?{tokens:l.usage.prompt_tokens}:void 0,providerMetadata:l.providerMetadata,response:{headers:c,body:d}}}},Ez=a.object({data:a.array(a.object({embedding:a.array(a.number())})),usage:a.object({prompt_tokens:a.number()}).nullish(),providerMetadata:a.record(a.string(),a.record(a.string(),a.any())).optional()}),Az=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.maxImagesPerCall=10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:o,seed:n,providerOptions:i,headers:s,abortSignal:u}){var c,l,d,m,p;let g=[];o!=null&&g.push({type:"unsupported",feature:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),n!=null&&g.push({type:"unsupported",feature:"seed"});let h=(d=(l=(c=this.config._internal)==null?void 0:c.currentDate)==null?void 0:l.call(c))!=null?d:new Date,{value:v,responseHeaders:_}=await be({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:_e(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:r,...(m=i.openai)!=null?m:{},response_format:"b64_json"},failedResponseHandler:Pt((p=this.config.errorStructure)!=null?p:$l),successfulResponseHandler:Re(Cz),abortSignal:u,fetch:this.config.fetch});return{images:v.data.map(w=>w.b64_json),warnings:g,response:{timestamp:h,modelId:this.modelId,headers:_}}}},Cz=a.object({data:a.array(a.object({b64_json:a.string()}))}),Pz="2.0.0-beta.45";function Fo(e){let t=wn(e.baseURL),r=e.name,o={...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers},n=()=>en(o,`ai-sdk/openai-compatible/${Pz}`),i=p=>({provider:`${r}.${p}`,url:({path:g})=>{let h=new URL(`${t}${g}`);return e.queryParams&&(h.search=new URLSearchParams(e.queryParams).toString()),h.toString()},headers:n,fetch:e.fetch}),s=p=>u(p),u=p=>new _z(p,{...i("chat"),includeUsage:e.includeUsage,supportsStructuredOutputs:e.supportsStructuredOutputs}),c=p=>new kz(p,{...i("completion"),includeUsage:e.includeUsage}),l=p=>new $z(p,{...i("embedding")}),d=p=>new Az(p,i("image")),m=p=>s(p);return m.specificationVersion="v3",m.languageModel=s,m.chatModel=u,m.completionModel=c,m.embeddingModel=l,m.imageModel=d,m}var Zt={aiService:Me,model:"",url:"http://localhost:11434",stream:!0,title:"Untitled",system_commands:null},El=class extends Ct{constructor(){super();this.serviceType=Me;this.provider=Fo({name:"ollama",baseURL:Zt.url})}getDefaultConfig(){return Zt}getApiKeyFromSettings(r){return this.apiAuthService.getApiKey(r,Me)}async fetchAvailableModels(r){try{let o={"Content-Type":"application/json"};return(await this.apiService.makeGetRequest(`${r}/api/tags`,o,Me)).models.sort((s,u)=>s.name<u.name?1:s.name>u.name?-1:0).map(s=>`ollama@${s.name}`)}catch(o){return[]}}getSystemMessageRole(){return hr}supportsSystemField(){return!1}ensureProvider(r,o){let n=this.apiService.createFetchAdapter();this.provider=Fo({name:"ollama",apiKey:r||"ollama",baseURL:`${o.url}/v1`,fetch:n})}async callStreamingAPI(r,o,n,i,s,u,c,l){this.ensureProvider(r,n);let d=this.extractModelName(n.model),m=l==null?void 0:l.getToolsForRequest(c);return this.callAiSdkStreamText(this.provider(d),d,o,n,i,s,u,m,l)}async callNonStreamingAPI(r,o,n,i,s,u){this.ensureProvider(r,n);let c=this.extractModelName(n.model),l=u==null?void 0:u.getToolsForRequest(i);return this.callAiSdkGenerateText(this.provider(c),c,o,l,u)}};var Oz=Object.defineProperty,Nz=Object.defineProperties,Rz=Object.getOwnPropertyDescriptors,oI=Object.getOwnPropertySymbols,jz=Object.prototype.hasOwnProperty,Mz=Object.prototype.propertyIsEnumerable,aI=(e,t,r)=>t in e?Oz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,je=(e,t)=>{for(var r in t||(t={}))jz.call(t,r)&&aI(e,r,t[r]);if(oI)for(var r of oI(t))Mz.call(t,r)&&aI(e,r,t[r]);return e},Pl=(e,t)=>Nz(e,Rz(t)),cI="vercel.ai.error",Dz=Symbol.for(cI),dI,zz=class pI extends Error{constructor({name:t,message:r,cause:o}){super(r),this[dI]=!0,this.name=t,this.cause=o}static isInstance(t){return pI.hasMarker(t,cI)}static hasMarker(t,r){let o=Symbol.for(r);return t!=null&&typeof t=="object"&&o in t&&typeof t[o]=="boolean"&&t[o]===!0}};dI=Dz;var it=zz,mI="AI_APICallError",fI=`vercel.ai.error.${mI}`,Uz=Symbol.for(fI),gI,cr=class extends it{constructor({message:e,url:t,requestBodyValues:r,statusCode:o,responseHeaders:n,responseBody:i,cause:s,isRetryable:u=o!=null&&(o===408||o===409||o===429||o>=500),data:c}){super({name:mI,message:e,cause:s}),this[gI]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=o,this.responseHeaders=n,this.responseBody=i,this.isRetryable=u,this.data=c}static isInstance(e){return it.hasMarker(e,fI)}};gI=Uz;var hI="AI_EmptyResponseBodyError",vI=`vercel.ai.error.${hI}`,Fz=Symbol.for(vI),yI,Lz=class extends it{constructor({message:e="Empty response body"}={}){super({name:hI,message:e}),this[yI]=!0}static isInstance(e){return it.hasMarker(e,vI)}};yI=Fz;function _I(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var bI="AI_InvalidArgumentError",xI=`vercel.ai.error.${bI}`,Zz=Symbol.for(xI),wI,SI=class extends it{constructor({message:e,cause:t,argument:r}){super({name:bI,message:e,cause:t}),this[wI]=!0,this.argument=r}static isInstance(e){return it.hasMarker(e,xI)}};wI=Zz;var kI="AI_InvalidPromptError",II=`vercel.ai.error.${kI}`,qz=Symbol.for(II),TI,Vz=class extends it{constructor({prompt:e,message:t,cause:r}){super({name:kI,message:`Invalid prompt: ${t}`,cause:r}),this[TI]=!0,this.prompt=e}static isInstance(e){return it.hasMarker(e,II)}};TI=qz;var $I="AI_InvalidResponseDataError",EI=`vercel.ai.error.${$I}`,Gz=Symbol.for(EI),AI,vi=class extends it{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:$I,message:t}),this[AI]=!0,this.data=e}static isInstance(e){return it.hasMarker(e,EI)}};AI=Gz;var CI="AI_JSONParseError",PI=`vercel.ai.error.${CI}`,Jz=Symbol.for(PI),OI,Ol=class extends it{constructor({text:e,cause:t}){super({name:CI,message:`JSON parsing failed: Text: ${e}.
Error message: ${_I(t)}`,cause:t}),this[OI]=!0,this.text=e}static isInstance(e){return it.hasMarker(e,PI)}};OI=Jz;var NI="AI_LoadAPIKeyError",RI=`vercel.ai.error.${NI}`,Bz=Symbol.for(RI),jI,Al=class extends it{constructor({message:e}){super({name:NI,message:e}),this[jI]=!0}static isInstance(e){return it.hasMarker(e,RI)}};jI=Bz;var Hz="AI_LoadSettingError",Wz=`vercel.ai.error.${Hz}`,Kz=Symbol.for(Wz),Yz;Yz=Kz;var MI="AI_NoContentGeneratedError",DI=`vercel.ai.error.${MI}`,Xz=Symbol.for(DI),zI,UI=class extends it{constructor({message:e="No content generated."}={}){super({name:MI,message:e}),this[zI]=!0}static isInstance(e){return it.hasMarker(e,DI)}};zI=Xz;var Qz="AI_NoSuchModelError",e4=`vercel.ai.error.${Qz}`,t4=Symbol.for(e4),r4;r4=t4;var n4="AI_TooManyEmbeddingValuesForCallError",o4=`vercel.ai.error.${n4}`,a4=Symbol.for(o4),i4;i4=a4;var FI="AI_TypeValidationError",LI=`vercel.ai.error.${FI}`,s4=Symbol.for(LI),ZI,l4=class Zf extends it{constructor({value:t,cause:r}){super({name:FI,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${_I(r)}`,cause:r}),this[ZI]=!0,this.value=t}static isInstance(t){return it.hasMarker(t,LI)}static wrap({value:t,cause:r}){return Zf.isInstance(r)&&r.value===t?r:new Zf({value:t,cause:r})}};ZI=s4;var yi=l4,qI="AI_UnsupportedFunctionalityError",VI=`vercel.ai.error.${qI}`,u4=Symbol.for(VI),GI,kn=class extends it{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:qI,message:t}),this[GI]=!0,this.functionality=e}static isInstance(e){return it.hasMarker(e,VI)}};GI=u4;var iI=class extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}};function Uf(e){}function c4(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=Uf,onError:r=Uf,onRetry:o=Uf,onComment:n}=e,i="",s=!0,u,c="",l="";function d(v){let _=s?v.replace(/^\xEF\xBB\xBF/,""):v,[w,x]=d4(`${i}${_}`);for(let f of w)m(f);i=x,s=!1}function m(v){if(v===""){g();return}if(v.startsWith(":")){n&&n(v.slice(v.startsWith(": ")?2:1));return}let _=v.indexOf(":");if(_!==-1){let w=v.slice(0,_),x=v[_+1]===" "?2:1,f=v.slice(_+x);p(w,f,v);return}p(v,"",v)}function p(v,_,w){switch(v){case"event":l=_;break;case"data":c=`${c}${_}
`;break;case"id":u=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?o(parseInt(_,10)):r(new iI(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:w}));break;default:r(new iI(`Unknown field "${v.length>20?`${v.slice(0,20)}\u2026`:v}"`,{type:"unknown-field",field:v,value:_,line:w}));break}}function g(){c.length>0&&t({id:u,event:l||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),u=void 0,c="",l=""}function h(v={}){i&&v.consume&&m(i),s=!0,u=void 0,c="",l="",i=""}return{feed:d,reset:h}}function d4(e){let t=[],r="",o=0;for(;o<e.length;){let n=e.indexOf("\r",o),i=e.indexOf(`
`,o),s=-1;if(n!==-1&&i!==-1?s=Math.min(n,i):n!==-1?s=n:i!==-1&&(s=i),s===-1){r=e.slice(o);break}else{let u=e.slice(o,s);t.push(u),o=s+1,e[o-1]==="\r"&&e[o]===`
`&&o++}}return[t,r]}var p4=class extends TransformStream{constructor({onError:e,onRetry:t,onComment:r}={}){let o;super({start(n){o=c4({onEvent:i=>{n.enqueue(i)},onError(i){e==="terminate"?n.error(i):typeof e=="function"&&e(i)},onRetry:t,onComment:r})},transform(n){o.feed(n)}})}};var NH=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function _i(...e){return e.reduce((t,r)=>je(je({},t),r!=null?r:{}),{})}function Rl(e){return Object.fromEntries([...e.headers])}var m4=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:o="-"}={})=>{let n=()=>{let i=r.length,s=new Array(t);for(let u=0;u<t;u++)s[u]=r[Math.random()*i|0];return s.join("")};if(e==null)return n;if(r.includes(o))throw new SI({argument:"separator",message:`The separator "${o}" must not be part of the alphabet "${r}".`});return()=>`${e}${o}${n()}`},ur=m4();function qf(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var f4=["fetch failed","failed to fetch"];function g4({error:e,url:t,requestBodyValues:r}){if(qf(e))return e;if(e instanceof TypeError&&f4.includes(e.message.toLowerCase())){let o=e.cause;if(o!=null)return new cr({message:`Cannot connect to API: ${o.message}`,cause:o,url:t,requestBodyValues:r,isRetryable:!0})}return e}function h4(e){return Object.fromEntries(Object.entries(e).filter(([t,r])=>r!=null))}function v4({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:o}){if(typeof e=="string")return e;if(e!=null)throw new Al({message:`${o} API key must be a string.`});if(typeof process=="undefined")throw new Al({message:`${o} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=process.env[t],e==null)throw new Al({message:`${o} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Al({message:`${o} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var y4=/"__proto__"\s*:/,_4=/"constructor"\s*:/;function b4(e){let t=JSON.parse(e);return t===null||typeof t!="object"||y4.test(e)===!1&&_4.test(e)===!1?t:x4(t)}function x4(e){let t=[e];for(;t.length;){let r=t;t=[];for(let o of r){if(Object.prototype.hasOwnProperty.call(o,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(let n in o){let i=o[n];i&&typeof i=="object"&&t.push(i)}}}return e}function Bf(e){let{stackTraceLimit:t}=Error;Error.stackTraceLimit=0;try{return b4(e)}finally{Error.stackTraceLimit=t}}var Vf=Symbol.for("vercel.ai.validator");function w4(e){return{[Vf]:!0,validate:e}}function S4(e){return typeof e=="object"&&e!==null&&Vf in e&&e[Vf]===!0&&"validate"in e}function k4(e){return S4(e)?e:I4(e)}function I4(e){return w4(async t=>{let r=await e["~standard"].validate(t);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new yi({value:t,cause:r.issues})}})}async function T4({value:e,schema:t}){let r=await JI({value:e,schema:t});if(!r.success)throw yi.wrap({value:e,cause:r.error});return r.value}async function JI({value:e,schema:t}){let r=k4(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};let o=await r.validate(e);return o.success?{success:!0,value:o.value,rawValue:e}:{success:!1,error:yi.wrap({value:e,cause:o.error}),rawValue:e}}catch(o){return{success:!1,error:yi.wrap({value:e,cause:o}),rawValue:e}}}async function $4({text:e,schema:t}){try{let r=Bf(e);return t==null?r:T4({value:r,schema:t})}catch(r){throw Ol.isInstance(r)||yi.isInstance(r)?r:new Ol({text:e,cause:r})}}async function BI({text:e,schema:t}){try{let r=Bf(e);return t==null?{success:!0,value:r,rawValue:r}:await JI({value:r,schema:t})}catch(r){return{success:!1,error:Ol.isInstance(r)?r:new Ol({text:e,cause:r}),rawValue:void 0}}}function Ff(e){try{return Bf(e),!0}catch(t){return!1}}function E4({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new p4).pipeThrough(new TransformStream({async transform({data:r},o){r!=="[DONE]"&&o.enqueue(await BI({text:r,schema:t}))}}))}var A4=()=>globalThis.fetch,bi=async({url:e,headers:t,body:r,failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s})=>C4({url:e,headers:je({"Content-Type":"application/json"},t),body:{content:JSON.stringify(r),values:r},failedResponseHandler:o,successfulResponseHandler:n,abortSignal:i,fetch:s}),C4=async({url:e,headers:t={},body:r,successfulResponseHandler:o,failedResponseHandler:n,abortSignal:i,fetch:s=A4()})=>{try{let u=await s(e,{method:"POST",headers:h4(t),body:r.content,signal:i}),c=Rl(u);if(!u.ok){let l;try{l=await n({response:u,url:e,requestBodyValues:r.values})}catch(d){throw qf(d)||cr.isInstance(d)?d:new cr({message:"Failed to process error response",cause:d,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:r.values})}throw l.value}try{return await o({response:u,url:e,requestBodyValues:r.values})}catch(l){throw l instanceof Error&&(qf(l)||cr.isInstance(l))?l:new cr({message:"Failed to process successful response",cause:l,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:r.values})}}catch(u){throw g4({error:u,url:e,requestBodyValues:r.values})}},P4=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:o,url:n,requestBodyValues:i})=>{let s=await o.text(),u=Rl(o);if(s.trim()==="")return{responseHeaders:u,value:new cr({message:o.statusText,url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:u,responseBody:s,isRetryable:r==null?void 0:r(o)})};try{let c=await $4({text:s,schema:e});return{responseHeaders:u,value:new cr({message:t(c),url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:u,responseBody:s,data:c,isRetryable:r==null?void 0:r(o,c)})}}catch(c){return{responseHeaders:u,value:new cr({message:o.statusText,url:n,requestBodyValues:i,statusCode:o.status,responseHeaders:u,responseBody:s,isRetryable:r==null?void 0:r(o)})}}},HI=e=>async({response:t})=>{let r=Rl(t);if(t.body==null)throw new Lz({});return{responseHeaders:r,value:E4({stream:t.body,schema:e})}},Hf=e=>async({response:t,url:r,requestBodyValues:o})=>{let n=await t.text(),i=await BI({text:n,schema:e}),s=Rl(t);if(!i.success)throw new cr({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:n,url:r,requestBodyValues:o});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}};var{btoa:O4,atob:RH}=globalThis;function N4(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return O4(t)}function R4(e){return e==null?void 0:e.replace(/\/$/,"")}function Lf(e){return e!=null}var WI=(e=>(e.Unknown="unknown",e.OpenAIResponsesV1="openai-responses-v1",e.XAIResponsesV1="xai-responses-v1",e.AnthropicClaudeV1="anthropic-claude-v1",e.GoogleGeminiV1="google-gemini-v1",e))(WI||{}),Wf=a.object({id:a.string().nullish(),format:a.enum(WI).nullish(),index:a.number().optional()}).loose(),j4=a.object({type:a.literal("reasoning.summary"),summary:a.string()}).extend(Wf.shape),M4=a.object({type:a.literal("reasoning.encrypted"),data:a.string()}).extend(Wf.shape),D4=a.object({type:a.literal("reasoning.text"),text:a.string().nullish(),signature:a.string().nullish()}).extend(Wf.shape),Kf=a.union([j4,M4,D4]),Cl=a.union([Kf,a.unknown().transform(()=>null)]),Yf=a.array(Cl).transform(e=>e.filter(t=>!!t)),MH=a.union([a.object({delta:a.object({reasoning_details:a.array(Cl)})}).transform(e=>e.delta.reasoning_details.filter(Lf)),a.object({message:a.object({reasoning_details:a.array(Cl)})}).transform(e=>e.message.reasoning_details.filter(Lf)),a.object({text:a.string(),reasoning_details:a.array(Cl)}).transform(e=>e.reasoning_details.filter(Lf))]),jl=a.object({error:a.object({code:a.union([a.string(),a.number()]).nullable().optional().default(null),message:a.string(),type:a.string().nullable().optional().default(null),param:a.any().nullable().optional().default(null)}).passthrough()}).passthrough(),xi=P4({errorSchema:jl,errorToMessage:e=>e.error.message}),KI=a.object({type:a.literal("file"),file:a.object({hash:a.string(),name:a.string(),content:a.array(a.object({type:a.string(),text:a.string().optional()}).passthrough()).optional()}).passthrough()}),z4=a.object({provider:a.string(),reasoning_details:a.array(Kf).optional(),annotations:a.array(KI).optional(),usage:a.object({promptTokens:a.number(),promptTokensDetails:a.object({cachedTokens:a.number()}).passthrough().optional(),completionTokens:a.number(),completionTokensDetails:a.object({reasoningTokens:a.number()}).passthrough().optional(),totalTokens:a.number(),cost:a.number().optional(),costDetails:a.object({upstreamInferenceCost:a.number()}).passthrough().optional()}).passthrough()}).passthrough(),sI=a.object({openrouter:a.object({reasoning_details:a.array(Kf).optional(),annotations:a.array(KI).optional()}).optional()}).optional();function Nl(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}function Xf({url:e,protocols:t}){try{let r=new URL(e);return t.has(r.protocol)}catch(r){return!1}}function Gf({part:e,defaultMediaType:t}){var r,o;if(e.data instanceof Uint8Array){let i=N4(e.data);return`data:${(r=e.mediaType)!=null?r:t};base64,${i}`}let n=e.data.toString();return Xf({url:n,protocols:new Set(["http:","https:"])})||n.startsWith("data:")?n:`data:${(o=e.mediaType)!=null?o:t};base64,${n}`}function lI(e,t){var r;let o=e.match(/^data:([^;]+)/);return o&&(r=o[1])!=null?r:t}function Jf(e){let t=e.match(/^data:[^;]*;base64,(.+)$/);return t?t[1]:e}function U4(e){let t=Gf({part:e,defaultMediaType:"audio/mpeg"});if(Xf({url:t,protocols:new Set(["http:","https:"])}))throw new Error(`Audio files cannot be provided as URLs.

OpenRouter requires audio to be base64-encoded. Please:
1. Download the audio file locally
2. Read it as a Buffer or Uint8Array
3. Pass it as the data parameter

The AI SDK will automatically handle base64 encoding.

Learn more: https://openrouter.ai/docs/features/multimodal/audio`);let r=Jf(t),o=e.mediaType||"audio/mpeg",n=o.replace("audio/","");if(n==="mpeg"||n==="mp3"?n="mp3":(n==="x-wav"||n==="wave"||n==="wav")&&(n="wav"),n!=="mp3"&&n!=="wav")throw new Error(`Unsupported audio format: "${o}"

OpenRouter only supports MP3 and WAV audio formats.
\u2022 For MP3: use "audio/mpeg" or "audio/mp3"
\u2022 For WAV: use "audio/wav" or "audio/x-wav"

Learn more: https://openrouter.ai/docs/features/multimodal/audio`);return{data:r,format:n}}function Sn(e){var t,r,o;let n=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(o=(r=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?r:n==null?void 0:n.cacheControl)!=null?o:n==null?void 0:n.cache_control}function F4(e){var t,r,o,n,i,s,u,c,l,d;let m=[];for(let{role:p,content:g,providerOptions:h}of e)switch(p){case"system":{m.push({role:"system",content:g,cache_control:Sn(h)});break}case"user":{if(g.length===1&&((t=g[0])==null?void 0:t.type)==="text"){let w=(r=Sn(h))!=null?r:Sn(g[0].providerOptions),x=w?[{type:"text",text:g[0].text,cache_control:w}]:g[0].text;m.push({role:"user",content:x});break}let v=Sn(h),_=g.map(w=>{var x,f,b,y,k,$,O;let L=(x=Sn(w.providerOptions))!=null?x:v;switch(w.type){case"text":return{type:"text",text:w.text,cache_control:L};case"file":{if((f=w.mediaType)!=null&&f.startsWith("image/"))return{type:"image_url",image_url:{url:Gf({part:w,defaultMediaType:"image/jpeg"})},cache_control:L};if((b=w.mediaType)!=null&&b.startsWith("audio/"))return{type:"input_audio",input_audio:U4(w),cache_control:L};let F=String((O=($=(k=(y=w.providerOptions)==null?void 0:y.openrouter)==null?void 0:k.filename)!=null?$:w.filename)!=null?O:""),U=Gf({part:w,defaultMediaType:"application/pdf"});return Xf({url:U,protocols:new Set(["http:","https:"])})?{type:"file",file:{filename:F,file_data:U}}:{type:"file",file:{filename:F,file_data:U},cache_control:L}}default:return{type:"text",text:"",cache_control:L}}});m.push({role:"user",content:_});break}case"assistant":{let v="",_="",w=[],x=[];for(let $ of g)switch($.type){case"text":{v+=$.text;break}case"tool-call":{let O=(o=$.providerOptions)==null?void 0:o.openrouter;O!=null&&O.reasoning_details&&Array.isArray(O.reasoning_details)&&x.push(...O.reasoning_details),w.push({id:$.toolCallId,type:"function",function:{name:$.toolName,arguments:JSON.stringify($.input)}});break}case"reasoning":{_+=$.text;let O=sI.safeParse($.providerOptions);O.success&&((i=(n=O.data)==null?void 0:n.openrouter)!=null&&i.reasoning_details)&&x.push(...O.data.openrouter.reasoning_details);break}case"file":break;default:break}let f=sI.safeParse(h),b=f.success?(u=(s=f.data)==null?void 0:s.openrouter)==null?void 0:u.reasoning_details:void 0,y=f.success?(l=(c=f.data)==null?void 0:c.openrouter)==null?void 0:l.annotations:void 0,k=b&&Array.isArray(b)&&b.length>0?b:x.length>0?x:void 0;m.push({role:"assistant",content:v,tool_calls:w.length>0?w:void 0,reasoning:_||void 0,reasoning_details:k,annotations:y,cache_control:Sn(h)});break}case"tool":{for(let v of g){let _=L4(v);m.push({role:"tool",tool_call_id:v.toolCallId,content:_,cache_control:(d=Sn(h))!=null?d:Sn(v.providerOptions)})}break}default:break}return m}function L4(e){return e.output.type==="text"?e.output.value:JSON.stringify(e.output.value)}var FH=a.union([a.literal("auto"),a.literal("none"),a.literal("required"),a.object({type:a.literal("function"),function:a.object({name:a.string()})})]);function Z4(e){switch(e.type){case"auto":case"none":case"required":return e.type;case"tool":return{type:"function",function:{name:e.toolName}};default:throw new SI({argument:"toolChoice",message:`Invalid tool choice type: ${JSON.stringify(e)}`})}}var q4=a.object({type:a.literal("image_url"),image_url:a.object({url:a.string()}).passthrough()}).passthrough(),V4=a.union([q4,a.unknown().transform(()=>null)]),YI=a.array(V4).transform(e=>e.filter(t=>!!t)),XI=a.object({id:a.string().optional(),model:a.string().optional(),provider:a.string().optional(),usage:a.object({prompt_tokens:a.number(),prompt_tokens_details:a.object({cached_tokens:a.number()}).passthrough().nullish(),completion_tokens:a.number(),completion_tokens_details:a.object({reasoning_tokens:a.number()}).passthrough().nullish(),total_tokens:a.number(),cost:a.number().optional(),cost_details:a.object({upstream_inference_cost:a.number().nullish()}).passthrough().nullish()}).passthrough().nullish()}).passthrough(),G4=a.union([XI.extend({choices:a.array(a.object({message:a.object({role:a.literal("assistant"),content:a.string().nullable().optional(),reasoning:a.string().nullable().optional(),reasoning_details:Yf.nullish(),images:YI.nullish(),tool_calls:a.array(a.object({id:a.string().optional().nullable(),type:a.literal("function"),function:a.object({name:a.string(),arguments:a.string()}).passthrough()}).passthrough()).optional(),annotations:a.array(a.union([a.object({type:a.literal("url_citation"),url_citation:a.object({end_index:a.number(),start_index:a.number(),title:a.string(),url:a.string(),content:a.string().optional()}).passthrough()}).passthrough(),a.object({type:a.literal("file_annotation"),file_annotation:a.object({file_id:a.string(),quote:a.string().optional()}).passthrough()}).passthrough(),a.object({type:a.literal("file"),file:a.object({hash:a.string(),name:a.string(),content:a.array(a.object({type:a.string(),text:a.string().optional()}).passthrough()).optional()}).passthrough()}).passthrough()])).nullish()}).passthrough(),index:a.number().nullish(),logprobs:a.object({content:a.array(a.object({token:a.string(),logprob:a.number(),top_logprobs:a.array(a.object({token:a.string(),logprob:a.number()}).passthrough())}).passthrough()).nullable()}).passthrough().nullable().optional(),finish_reason:a.string().optional().nullable()}).passthrough())}),jl.extend({user_id:a.string().optional()})]),J4=a.union([XI.extend({choices:a.array(a.object({delta:a.object({role:a.enum(["assistant"]).optional(),content:a.string().nullish(),reasoning:a.string().nullish().optional(),reasoning_details:Yf.nullish(),images:YI.nullish(),tool_calls:a.array(a.object({index:a.number().nullish(),id:a.string().nullish(),type:a.literal("function").optional(),function:a.object({name:a.string().nullish(),arguments:a.string().nullish()}).passthrough()}).passthrough()).nullish(),annotations:a.array(a.union([a.object({type:a.literal("url_citation"),url_citation:a.object({end_index:a.number(),start_index:a.number(),title:a.string(),url:a.string(),content:a.string().optional()}).passthrough()}).passthrough(),a.object({type:a.literal("file_annotation"),file_annotation:a.object({file_id:a.string(),quote:a.string().optional()}).passthrough()}).passthrough(),a.object({type:a.literal("file"),file:a.object({hash:a.string(),name:a.string(),content:a.array(a.object({type:a.string(),text:a.string().optional()}).passthrough()).optional()}).passthrough()}).passthrough()])).nullish()}).passthrough().nullish(),logprobs:a.object({content:a.array(a.object({token:a.string(),logprob:a.number(),top_logprobs:a.array(a.object({token:a.string(),logprob:a.number()}).passthrough())}).passthrough()).nullable()}).passthrough().nullish(),finish_reason:a.string().nullable().optional(),index:a.number().nullish()}).passthrough())}),jl]),B4=class{constructor(e,t,r){this.specificationVersion="v2",this.provider="openrouter",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!0,this.supportedUrls={"image/*":[/^data:image\/[a-zA-Z]+;base64,/,/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i],"application/*":[/^data:application\//,/^https?:\/\/.+$/]},this.modelId=e,this.settings=t,this.config=r}getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,frequencyPenalty:n,presencePenalty:i,seed:s,stopSequences:u,responseFormat:c,topK:l,tools:d,toolChoice:m}){var p;let g=je(je({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:t,temperature:r,top_p:o,frequency_penalty:n,presence_penalty:i,seed:s,stop:u,response_format:(c==null?void 0:c.type)==="json"?c.schema!=null?{type:"json_schema",json_schema:je({schema:c.schema,strict:!0,name:(p=c.name)!=null?p:"response"},c.description&&{description:c.description})}:{type:"json_object"}:void 0,top_k:l,messages:F4(e),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning,usage:this.settings.usage,plugins:this.settings.plugins,web_search_options:this.settings.web_search_options,provider:this.settings.provider,debug:this.settings.debug},this.config.extraBody),this.settings.extraBody);if(d&&d.length>0){let h=d.filter(v=>v.type==="function").map(v=>({type:"function",function:{name:v.name,description:v.description,parameters:v.inputSchema}}));return Pl(je({},g),{tools:h,tool_choice:m?Z4(m):void 0})}return g}async doGenerate(e){var t,r,o,n,i,s,u,c,l,d,m,p,g,h,v,_,w,x,f,b,y,k,$;let L=(e.providerOptions||{}).openrouter||{},F=je(je({},this.getArgs(e)),L),{value:U,responseHeaders:Z}=await bi({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_i(this.config.headers(),e.headers),body:F,failedResponseHandler:xi,successfulResponseHandler:Hf(G4),abortSignal:e.abortSignal,fetch:this.config.fetch});if("error"in U){let C=U.error;throw new cr({message:C.message,url:this.config.url({path:"/chat/completions",modelId:this.modelId}),requestBodyValues:F,statusCode:200,responseHeaders:Z,data:C})}let E=U,z=E.choices[0];if(!z)throw new UI({message:"No choice in response"});let J=E.usage?{inputTokens:(t=E.usage.prompt_tokens)!=null?t:0,outputTokens:(r=E.usage.completion_tokens)!=null?r:0,totalTokens:((o=E.usage.prompt_tokens)!=null?o:0)+((n=E.usage.completion_tokens)!=null?n:0),reasoningTokens:(s=(i=E.usage.completion_tokens_details)==null?void 0:i.reasoning_tokens)!=null?s:0,cachedInputTokens:(c=(u=E.usage.prompt_tokens_details)==null?void 0:u.cached_tokens)!=null?c:0}:{inputTokens:0,outputTokens:0,totalTokens:0,reasoningTokens:0,cachedInputTokens:0},B=(l=z.message.reasoning_details)!=null?l:[],D=B.length>0?B.map(C=>{switch(C.type){case"reasoning.text":{if(C.text)return{type:"reasoning",text:C.text,providerMetadata:{openrouter:{reasoning_details:[C]}}};break}case"reasoning.summary":{if(C.summary)return{type:"reasoning",text:C.summary,providerMetadata:{openrouter:{reasoning_details:[C]}}};break}case"reasoning.encrypted":{if(C.data)return{type:"reasoning",text:"[REDACTED]",providerMetadata:{openrouter:{reasoning_details:[C]}}};break}default:}return null}).filter(C=>C!==null):z.message.reasoning?[{type:"reasoning",text:z.message.reasoning}]:[],H=[];if(H.push(...D),z.message.content&&H.push({type:"text",text:z.message.content}),z.message.tool_calls)for(let C of z.message.tool_calls)H.push({type:"tool-call",toolCallId:(d=C.id)!=null?d:ur(),toolName:C.function.name,input:C.function.arguments,providerMetadata:{openrouter:{reasoning_details:B}}});if(z.message.images)for(let C of z.message.images)H.push({type:"file",mediaType:lI(C.image_url.url,"image/jpeg"),data:Jf(C.image_url.url)});if(z.message.annotations)for(let C of z.message.annotations)C.type==="url_citation"&&H.push({type:"source",sourceType:"url",id:C.url_citation.url,url:C.url_citation.url,title:C.url_citation.title,providerMetadata:{openrouter:{content:C.url_citation.content||""}}});let G=(m=z.message.annotations)==null?void 0:m.filter(C=>C.type==="file");return{content:H,finishReason:Nl(z.finish_reason),usage:J,warnings:[],providerMetadata:{openrouter:z4.parse({provider:(p=E.provider)!=null?p:"",reasoning_details:(g=z.message.reasoning_details)!=null?g:[],annotations:G&&G.length>0?G:void 0,usage:je(je(je({promptTokens:(h=J.inputTokens)!=null?h:0,completionTokens:(v=J.outputTokens)!=null?v:0,totalTokens:(_=J.totalTokens)!=null?_:0,cost:(w=E.usage)==null?void 0:w.cost},((f=(x=E.usage)==null?void 0:x.prompt_tokens_details)==null?void 0:f.cached_tokens)!=null?{promptTokensDetails:{cachedTokens:E.usage.prompt_tokens_details.cached_tokens}}:{}),((y=(b=E.usage)==null?void 0:b.completion_tokens_details)==null?void 0:y.reasoning_tokens)!=null?{completionTokensDetails:{reasoningTokens:E.usage.completion_tokens_details.reasoning_tokens}}:{}),(($=(k=E.usage)==null?void 0:k.cost_details)==null?void 0:$.upstream_inference_cost)!=null?{costDetails:{upstreamInferenceCost:E.usage.cost_details.upstream_inference_cost}}:{})})},request:{body:F},response:{id:E.id,modelId:E.model,headers:Z}}}async doStream(e){var t;let o=(e.providerOptions||{}).openrouter||{},n=je(je({},this.getArgs(e)),o),{value:i,responseHeaders:s}=await bi({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:_i(this.config.headers(),e.headers),body:Pl(je({},n),{stream:!0,stream_options:this.config.compatibility==="strict"?je({include_usage:!0},(t=this.settings.usage)!=null&&t.include?{include_usage:!0}:{}):void 0}),failedResponseHandler:xi,successfulResponseHandler:HI(J4),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=[],c="other",l={inputTokens:Number.NaN,outputTokens:Number.NaN,totalTokens:Number.NaN,reasoningTokens:Number.NaN,cachedInputTokens:Number.NaN},d={},m=[],p=!1,g=!1,h,v,_,w;return{stream:i.pipeThrough(new TransformStream({transform(x,f){var b,y,k,$,O,L,F,U,Z,E,z,J,B,D,H;if(!x.success){c="error",f.enqueue({type:"error",error:x.error});return}let G=x.value;if("error"in G){c="error",f.enqueue({type:"error",error:G.error});return}if(G.provider&&(w=G.provider),G.id&&(_=G.id,f.enqueue({type:"response-metadata",id:G.id})),G.model&&f.enqueue({type:"response-metadata",modelId:G.model}),G.usage!=null){if(l.inputTokens=G.usage.prompt_tokens,l.outputTokens=G.usage.completion_tokens,l.totalTokens=G.usage.prompt_tokens+G.usage.completion_tokens,d.promptTokens=G.usage.prompt_tokens,G.usage.prompt_tokens_details){let P=(b=G.usage.prompt_tokens_details.cached_tokens)!=null?b:0;l.cachedInputTokens=P,d.promptTokensDetails={cachedTokens:P}}if(d.completionTokens=G.usage.completion_tokens,G.usage.completion_tokens_details){let P=(y=G.usage.completion_tokens_details.reasoning_tokens)!=null?y:0;l.reasoningTokens=P,d.completionTokensDetails={reasoningTokens:P}}d.cost=G.usage.cost,d.totalTokens=G.usage.total_tokens;let M=(k=G.usage.cost_details)==null?void 0:k.upstream_inference_cost;M!=null&&(d.costDetails={upstreamInferenceCost:M})}let C=G.choices[0];if((C==null?void 0:C.finish_reason)!=null&&(c=Nl(C.finish_reason)),(C==null?void 0:C.delta)==null)return;let Q=C.delta,A=(M,P)=>{g||(v=_||ur(),f.enqueue({providerMetadata:P,type:"reasoning-start",id:v}),g=!0),f.enqueue({providerMetadata:P,type:"reasoning-delta",delta:M,id:v||ur()})};if(Q.reasoning_details&&Q.reasoning_details.length>0){for(let P of Q.reasoning_details)if(P.type==="reasoning.text"){let ee=m[m.length-1];(ee==null?void 0:ee.type)==="reasoning.text"?(ee.text=(ee.text||"")+(P.text||""),ee.signature=ee.signature||P.signature,ee.format=ee.format||P.format):m.push(je({},P))}else m.push(P);let M={openrouter:{reasoning_details:Q.reasoning_details}};for(let P of Q.reasoning_details)switch(P.type){case"reasoning.text":{P.text&&A(P.text,M);break}case"reasoning.encrypted":{P.data&&A("[REDACTED]",M);break}case"reasoning.summary":{P.summary&&A(P.summary,M);break}default:break}}else Q.reasoning&&A(Q.reasoning);if(Q.content&&(g&&!p&&(f.enqueue({type:"reasoning-end",id:v||ur()}),g=!1),p||(h=_||ur(),f.enqueue({type:"text-start",id:h}),p=!0),f.enqueue({type:"text-delta",delta:Q.content,id:h||ur()})),Q.annotations)for(let M of Q.annotations)M.type==="url_citation"&&f.enqueue({type:"source",sourceType:"url",id:M.url_citation.url,url:M.url_citation.url,title:M.url_citation.title,providerMetadata:{openrouter:{content:M.url_citation.content||""}}});if(Q.tool_calls!=null)for(let M of Q.tool_calls){let P=($=M.index)!=null?$:u.length-1;if(u[P]==null){if(M.type!=="function")throw new vi({data:M,message:"Expected 'function' type."});if(M.id==null)throw new vi({data:M,message:"Expected 'id' to be a string."});if(((O=M.function)==null?void 0:O.name)==null)throw new vi({data:M,message:"Expected 'function.name' to be a string."});u[P]={id:M.id,type:"function",function:{name:M.function.name,arguments:(L=M.function.arguments)!=null?L:""},inputStarted:!1,sent:!1};let te=u[P];if(te==null)throw new vi({data:{index:P,toolCallsLength:u.length},message:`Tool call at index ${P} is missing after creation.`});((F=te.function)==null?void 0:F.name)!=null&&((U=te.function)==null?void 0:U.arguments)!=null&&Ff(te.function.arguments)&&(te.inputStarted=!0,f.enqueue({type:"tool-input-start",id:te.id,toolName:te.function.name}),f.enqueue({type:"tool-input-delta",id:te.id,delta:te.function.arguments}),f.enqueue({type:"tool-input-end",id:te.id}),f.enqueue({type:"tool-call",toolCallId:te.id,toolName:te.function.name,input:te.function.arguments,providerMetadata:{openrouter:{reasoning_details:m}}}),te.sent=!0);continue}let ee=u[P];if(ee==null)throw new vi({data:{index:P,toolCallsLength:u.length,toolCallDelta:M},message:`Tool call at index ${P} is missing during merge.`});ee.inputStarted||(ee.inputStarted=!0,f.enqueue({type:"tool-input-start",id:ee.id,toolName:ee.function.name})),((Z=M.function)==null?void 0:Z.arguments)!=null&&(ee.function.arguments+=(z=(E=M.function)==null?void 0:E.arguments)!=null?z:""),f.enqueue({type:"tool-input-delta",id:ee.id,delta:(J=M.function.arguments)!=null?J:""}),((B=ee.function)==null?void 0:B.name)!=null&&((D=ee.function)==null?void 0:D.arguments)!=null&&Ff(ee.function.arguments)&&(f.enqueue({type:"tool-call",toolCallId:(H=ee.id)!=null?H:ur(),toolName:ee.function.name,input:ee.function.arguments,providerMetadata:{openrouter:{reasoning_details:m}}}),ee.sent=!0)}if(Q.images!=null)for(let M of Q.images)f.enqueue({type:"file",mediaType:lI(M.image_url.url,"image/jpeg"),data:Jf(M.image_url.url)})},flush(x){var f;if(c==="tool-calls")for(let y of u)y&&!y.sent&&(x.enqueue({type:"tool-call",toolCallId:(f=y.id)!=null?f:ur(),toolName:y.function.name,input:Ff(y.function.arguments)?y.function.arguments:"{}",providerMetadata:{openrouter:{reasoning_details:m}}}),y.sent=!0);g&&x.enqueue({type:"reasoning-end",id:v||ur()}),p&&x.enqueue({type:"text-end",id:h||ur()});let b={usage:d};w!==void 0&&(b.provider=w),m.length>0&&(b.reasoning_details=m),x.enqueue({type:"finish",finishReason:c,usage:l,providerMetadata:{openrouter:b}})}})),warnings:[],request:{body:n},response:{headers:s}}}};function H4({prompt:e,inputFormat:t,user:r="user",assistant:o="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let n="";e[0]&&e[0].role==="system"&&(n+=`${e[0].content}

`,e=e.slice(1));for(let{role:i,content:s}of e)switch(i){case"system":throw new Vz({message:`Unexpected system message in prompt: ${s}`,prompt:e});case"user":{let u=s.map(c=>{switch(c.type){case"text":return c.text;case"file":throw new kn({functionality:"file attachments"});default:return""}}).join("");n+=`${r}:
${u}

`;break}case"assistant":{let u=s.map(c=>{switch(c.type){case"text":return c.text;case"tool-call":throw new kn({functionality:"tool-call messages"});case"tool-result":throw new kn({functionality:"tool-result messages"});case"reasoning":throw new kn({functionality:"reasoning messages"});case"file":throw new kn({functionality:"file attachments"});default:return""}}).join("");n+=`${o}:
${u}

`;break}case"tool":throw new kn({functionality:"tool messages"});default:break}return n+=`${o}:
`,{prompt:n}}var uI=a.union([a.object({id:a.string().optional(),model:a.string().optional(),choices:a.array(a.object({text:a.string(),reasoning:a.string().nullish().optional(),reasoning_details:Yf.nullish(),finish_reason:a.string().nullish(),index:a.number().nullish(),logprobs:a.object({tokens:a.array(a.string()),token_logprobs:a.array(a.number()),top_logprobs:a.array(a.record(a.string(),a.number())).nullable()}).passthrough().nullable().optional()}).passthrough()),usage:a.object({prompt_tokens:a.number(),prompt_tokens_details:a.object({cached_tokens:a.number()}).passthrough().nullish(),completion_tokens:a.number(),completion_tokens_details:a.object({reasoning_tokens:a.number()}).passthrough().nullish(),total_tokens:a.number(),cost:a.number().optional(),cost_details:a.object({upstream_inference_cost:a.number().nullish()}).passthrough().nullish()}).passthrough().nullish()}).passthrough(),jl]),W4=class{constructor(e,t,r){this.specificationVersion="v2",this.provider="openrouter",this.supportsImageUrls=!0,this.supportedUrls={"image/*":[/^data:image\/[a-zA-Z]+;base64,/,/^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i],"text/*":[/^data:text\//,/^https?:\/\/.+$/],"application/*":[/^data:application\//,/^https?:\/\/.+$/]},this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=r}getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,frequencyPenalty:n,presencePenalty:i,seed:s,responseFormat:u,topK:c,stopSequences:l,tools:d,toolChoice:m}){let{prompt:p}=H4({prompt:e,inputFormat:"prompt"});if(d!=null&&d.length)throw new kn({functionality:"tools"});if(m)throw new kn({functionality:"toolChoice"});return je(je({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:t,temperature:r,top_p:o,frequency_penalty:n,presence_penalty:i,seed:s,stop:l,response_format:u,top_k:c,prompt:p,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody)}async doGenerate(e){var t,r,o,n,i,s,u,c,l,d,m,p,g,h,v;let w=(e.providerOptions||{}).openrouter||{},x=je(je({},this.getArgs(e)),w),{value:f,responseHeaders:b}=await bi({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_i(this.config.headers(),e.headers),body:x,failedResponseHandler:xi,successfulResponseHandler:Hf(uI),abortSignal:e.abortSignal,fetch:this.config.fetch});if("error"in f){let k=f.error;throw new cr({message:k.message,url:this.config.url({path:"/completions",modelId:this.modelId}),requestBodyValues:x,statusCode:200,responseHeaders:b,data:k})}let y=f.choices[0];if(!y)throw new UI({message:"No choice in OpenRouter completion response"});return{content:[{type:"text",text:(t=y.text)!=null?t:""}],finishReason:Nl(y.finish_reason),usage:{inputTokens:(o=(r=f.usage)==null?void 0:r.prompt_tokens)!=null?o:0,outputTokens:(i=(n=f.usage)==null?void 0:n.completion_tokens)!=null?i:0,totalTokens:((u=(s=f.usage)==null?void 0:s.prompt_tokens)!=null?u:0)+((l=(c=f.usage)==null?void 0:c.completion_tokens)!=null?l:0),reasoningTokens:(p=(m=(d=f.usage)==null?void 0:d.completion_tokens_details)==null?void 0:m.reasoning_tokens)!=null?p:0,cachedInputTokens:(v=(h=(g=f.usage)==null?void 0:g.prompt_tokens_details)==null?void 0:h.cached_tokens)!=null?v:0},warnings:[],response:{headers:b}}}async doStream(e){let r=(e.providerOptions||{}).openrouter||{},o=je(je({},this.getArgs(e)),r),{value:n,responseHeaders:i}=await bi({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:_i(this.config.headers(),e.headers),body:Pl(je({},o),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:xi,successfulResponseHandler:HI(uI),abortSignal:e.abortSignal,fetch:this.config.fetch}),s="other",u={inputTokens:Number.NaN,outputTokens:Number.NaN,totalTokens:Number.NaN,reasoningTokens:Number.NaN,cachedInputTokens:Number.NaN},c={};return{stream:n.pipeThrough(new TransformStream({transform(l,d){var m,p,g;if(!l.success){s="error",d.enqueue({type:"error",error:l.error});return}let h=l.value;if("error"in h){s="error",d.enqueue({type:"error",error:h.error});return}if(h.usage!=null){if(u.inputTokens=h.usage.prompt_tokens,u.outputTokens=h.usage.completion_tokens,u.totalTokens=h.usage.prompt_tokens+h.usage.completion_tokens,c.promptTokens=h.usage.prompt_tokens,h.usage.prompt_tokens_details){let w=(m=h.usage.prompt_tokens_details.cached_tokens)!=null?m:0;u.cachedInputTokens=w,c.promptTokensDetails={cachedTokens:w}}if(c.completionTokens=h.usage.completion_tokens,h.usage.completion_tokens_details){let w=(p=h.usage.completion_tokens_details.reasoning_tokens)!=null?p:0;u.reasoningTokens=w,c.completionTokensDetails={reasoningTokens:w}}c.cost=h.usage.cost,c.totalTokens=h.usage.total_tokens;let _=(g=h.usage.cost_details)==null?void 0:g.upstream_inference_cost;_!=null&&(c.costDetails={upstreamInferenceCost:_})}let v=h.choices[0];(v==null?void 0:v.finish_reason)!=null&&(s=Nl(v.finish_reason)),(v==null?void 0:v.text)!=null&&d.enqueue({type:"text-delta",delta:v.text,id:ur()})},flush(l){l.enqueue({type:"finish",finishReason:s,usage:u,providerMetadata:{openrouter:{usage:c}}})}})),response:{headers:i}}}},K4=a.object({prompt_tokens:a.number(),total_tokens:a.number(),cost:a.number().optional()}),Y4=a.object({object:a.literal("embedding"),embedding:a.array(a.number()),index:a.number().optional()}),X4=a.object({id:a.string().optional(),object:a.literal("list"),data:a.array(Y4),model:a.string(),usage:K4.optional()}),Q4=class{constructor(e,t,r){this.specificationVersion="v2",this.provider="openrouter",this.maxEmbeddingsPerCall=void 0,this.supportsParallelCalls=!0,this.modelId=e,this.settings=t,this.config=r}async doEmbed(e){var t;let{values:r,abortSignal:o,headers:n}=e,i=je(je({model:this.modelId,input:r,user:this.settings.user,provider:this.settings.provider},this.config.extraBody),this.settings.extraBody),{value:s,responseHeaders:u}=await bi({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:_i(this.config.headers(),n),body:i,failedResponseHandler:xi,successfulResponseHandler:Hf(X4),abortSignal:o,fetch:this.config.fetch});return{embeddings:s.data.map(c=>c.embedding),usage:s.usage?{tokens:s.usage.prompt_tokens}:void 0,providerMetadata:(t=s.usage)!=null&&t.cost?{openrouter:{usage:{cost:s.usage.cost}}}:void 0,response:{headers:u,body:s}}}};function eU(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==null))}function tU(e,...t){let r=eU(e!=null?e:{}),n=[r["user-agent"]||"",...t].filter(Boolean).join(" ");return Pl(je({},r),{"user-agent":n})}var rU="1.4.1";function Ml(e={}){var t,r,o;let n=(r=R4((t=e.baseURL)!=null?t:e.baseUrl))!=null?r:"https://openrouter.ai/api/v1",i=(o=e.compatibility)!=null?o:"compatible",s=()=>tU(je(je({Authorization:`Bearer ${v4({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),e.api_keys&&Object.keys(e.api_keys).length>0&&{"X-Provider-API-Keys":JSON.stringify(e.api_keys)}),`ai-sdk/openrouter/${rU}`),u=(p,g={})=>new B4(p,g,{provider:"openrouter.chat",url:({path:h})=>`${n}${h}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),c=(p,g={})=>new W4(p,g,{provider:"openrouter.completion",url:({path:h})=>`${n}${h}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),l=(p,g={})=>new Q4(p,g,{provider:"openrouter.embedding",url:({path:h})=>`${n}${h}`,headers:s,fetch:e.fetch,extraBody:e.extraBody}),d=(p,g)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return p==="openai/gpt-3.5-turbo-instruct"?c(p,g):u(p,g)},m=(p,g)=>d(p,g);return m.languageModel=d,m.chat=u,m.completion=c,m.textEmbeddingModel=l,m.embedding=l,m}var GH=Ml({compatibility:"strict"});var Be={apiKey:"",aiService:Ee,frequency_penalty:.5,max_tokens:400,model:"openrouter@openai/gpt-4.1-mini",openrouterApiKey:"",presence_penalty:.5,stream:!0,system_commands:null,tags:[],temperature:.7,title:"Untitled",top_p:1,url:"https://openrouter.ai"},Dl=class extends Ct{constructor(){super();this.serviceType=Ee;this.provider=Ml()}getDefaultConfig(){return Be}getApiKeyFromSettings(r){return this.apiAuthService.getApiKey(r,Ee)}async fetchAvailableModels(r,o){try{if(!o||!rt(o))return[];let n=this.apiAuthService.createAuthHeaders(o,Ee);return(await this.apiService.makeGetRequest(`${r}/api/v1/models`,n,Ee)).data.sort((s,u)=>s.id<u.id?1:s.id>u.id?-1:0).map(s=>`${Ee}@${s.id}`)}catch(n){return[]}}getSystemMessageRole(){return hr}supportsSystemField(){return!1}ensureProvider(r){let o=this.apiService.createFetchAdapter();this.provider=Ml({apiKey:r,fetch:o})}async callStreamingAPI(r,o,n,i,s,u,c,l){this.ensureProvider(r);let d=this.extractModelName(n.model),m=l==null?void 0:l.getToolsForRequest(c);return this.callAiSdkStreamText(this.provider(d),d,o,n,i,s,u,m,l)}async callNonStreamingAPI(r,o,n,i,s,u){this.ensureProvider(r);let c=this.extractModelName(n.model),l=u==null?void 0:u.getToolsForRequest(i);return this.callAiSdkGenerateText(this.provider(c),c,o,l,u)}};var Qe={aiService:Le,frequency_penalty:0,max_tokens:400,model:"",presence_penalty:0,stream:!0,system_commands:null,tags:[],temperature:.7,title:"Untitled",top_p:1,url:"http://localhost:1234"},zl=class extends Ct{constructor(){super();this.serviceType=Le;this.provider=Fo({name:"lmstudio",baseURL:Qe.url})}getDefaultConfig(){return Qe}getApiKeyFromSettings(r){return this.apiAuthService.getApiKey(r,Le)}async fetchAvailableModels(r,o){try{let n=o&&rt(o)?this.apiAuthService.createAuthHeaders(o,Le):{"Content-Type":"application/json"};return(await this.apiService.makeGetRequest(`${r}/v1/models`,n,Le)).data.filter(s=>!s.id.includes("embedding")&&!s.id.includes("audio")&&!s.id.includes("transcribe")&&!s.id.includes("tts")).sort((s,u)=>s.id<u.id?1:s.id>u.id?-1:0).map(s=>`lmstudio@${s.id}`)}catch(n){return[]}}getSystemMessageRole(){return hr}supportsSystemField(){return!1}ensureProvider(r,o){let n=this.apiService.createFetchAdapter();this.provider=Fo({name:"lmstudio",apiKey:r||"lmstudio",baseURL:`${o.url}/v1`,fetch:n})}async callStreamingAPI(r,o,n,i,s,u,c,l){this.ensureProvider(r,n);let d=this.extractModelName(n.model),m=l==null?void 0:l.getToolsForRequest(c);return this.callAiSdkStreamText(this.provider(d),d,o,n,i,s,u,m,l)}async callNonStreamingAPI(r,o,n,i,s,u){this.ensureProvider(r,n);let c=this.extractModelName(n.model),l=u==null?void 0:u.getToolsForRequest(i);return this.callAiSdkGenerateText(this.provider(c),c,o,l,u)}};var uT=require("obsidian");var nU="3.0.0-beta.76",oU=j(()=>R(a.object({type:a.literal("error"),error:a.object({type:a.string(),message:a.string()})}))),QI=Pt({errorSchema:oU,errorToMessage:e=>e.error.message}),aU=j(()=>R(a.object({type:a.literal("message"),id:a.string().nullish(),model:a.string().nullish(),content:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("text"),text:a.string(),citations:a.array(a.discriminatedUnion("type",[a.object({type:a.literal("web_search_result_location"),cited_text:a.string(),url:a.string(),title:a.string(),encrypted_index:a.string()}),a.object({type:a.literal("page_location"),cited_text:a.string(),document_index:a.number(),document_title:a.string().nullable(),start_page_number:a.number(),end_page_number:a.number()}),a.object({type:a.literal("char_location"),cited_text:a.string(),document_index:a.number(),document_title:a.string().nullable(),start_char_index:a.number(),end_char_index:a.number()})])).optional()}),a.object({type:a.literal("thinking"),thinking:a.string(),signature:a.string()}),a.object({type:a.literal("redacted_thinking"),data:a.string()}),a.object({type:a.literal("tool_use"),id:a.string(),name:a.string(),input:a.unknown()}),a.object({type:a.literal("server_tool_use"),id:a.string(),name:a.string(),input:a.record(a.string(),a.unknown()).nullish()}),a.object({type:a.literal("mcp_tool_use"),id:a.string(),name:a.string(),input:a.unknown(),server_name:a.string()}),a.object({type:a.literal("mcp_tool_result"),tool_use_id:a.string(),is_error:a.boolean(),content:a.array(a.union([a.string(),a.object({type:a.literal("text"),text:a.string()})]))}),a.object({type:a.literal("web_fetch_tool_result"),tool_use_id:a.string(),content:a.union([a.object({type:a.literal("web_fetch_result"),url:a.string(),retrieved_at:a.string(),content:a.object({type:a.literal("document"),title:a.string().nullable(),citations:a.object({enabled:a.boolean()}).optional(),source:a.object({type:a.literal("text"),media_type:a.string(),data:a.string()})})}),a.object({type:a.literal("web_fetch_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("web_search_tool_result"),tool_use_id:a.string(),content:a.union([a.array(a.object({type:a.literal("web_search_result"),url:a.string(),title:a.string(),encrypted_content:a.string(),page_age:a.string().nullish()})),a.object({type:a.literal("web_search_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("code_execution_tool_result"),tool_use_id:a.string(),content:a.union([a.object({type:a.literal("code_execution_result"),stdout:a.string(),stderr:a.string(),return_code:a.number()}),a.object({type:a.literal("code_execution_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("bash_code_execution_tool_result"),tool_use_id:a.string(),content:a.discriminatedUnion("type",[a.object({type:a.literal("bash_code_execution_result"),content:a.array(a.object({type:a.literal("bash_code_execution_output"),file_id:a.string()})),stdout:a.string(),stderr:a.string(),return_code:a.number()}),a.object({type:a.literal("bash_code_execution_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("text_editor_code_execution_tool_result"),tool_use_id:a.string(),content:a.discriminatedUnion("type",[a.object({type:a.literal("text_editor_code_execution_tool_result_error"),error_code:a.string()}),a.object({type:a.literal("text_editor_code_execution_view_result"),content:a.string(),file_type:a.string(),num_lines:a.number().nullable(),start_line:a.number().nullable(),total_lines:a.number().nullable()}),a.object({type:a.literal("text_editor_code_execution_create_result"),is_file_update:a.boolean()}),a.object({type:a.literal("text_editor_code_execution_str_replace_result"),lines:a.array(a.string()).nullable(),new_lines:a.number().nullable(),new_start:a.number().nullable(),old_lines:a.number().nullable(),old_start:a.number().nullable()})])}),a.object({type:a.literal("tool_search_tool_result"),tool_use_id:a.string(),content:a.union([a.object({type:a.literal("tool_search_tool_search_result"),tool_references:a.array(a.object({type:a.literal("tool_reference"),tool_name:a.string()}))}),a.object({type:a.literal("tool_search_tool_result_error"),error_code:a.string()})])})])),stop_reason:a.string().nullish(),stop_sequence:a.string().nullish(),usage:a.looseObject({input_tokens:a.number(),output_tokens:a.number(),cache_creation_input_tokens:a.number().nullish(),cache_read_input_tokens:a.number().nullish()}),container:a.object({expires_at:a.string(),id:a.string(),skills:a.array(a.object({type:a.union([a.literal("anthropic"),a.literal("custom")]),skill_id:a.string(),version:a.string()})).nullish()}).nullish()}))),iU=j(()=>R(a.discriminatedUnion("type",[a.object({type:a.literal("message_start"),message:a.object({id:a.string().nullish(),model:a.string().nullish(),usage:a.looseObject({input_tokens:a.number(),cache_creation_input_tokens:a.number().nullish(),cache_read_input_tokens:a.number().nullish()})})}),a.object({type:a.literal("content_block_start"),index:a.number(),content_block:a.discriminatedUnion("type",[a.object({type:a.literal("text"),text:a.string()}),a.object({type:a.literal("thinking"),thinking:a.string()}),a.object({type:a.literal("tool_use"),id:a.string(),name:a.string()}),a.object({type:a.literal("redacted_thinking"),data:a.string()}),a.object({type:a.literal("server_tool_use"),id:a.string(),name:a.string(),input:a.record(a.string(),a.unknown()).nullish()}),a.object({type:a.literal("mcp_tool_use"),id:a.string(),name:a.string(),input:a.unknown(),server_name:a.string()}),a.object({type:a.literal("mcp_tool_result"),tool_use_id:a.string(),is_error:a.boolean(),content:a.array(a.union([a.string(),a.object({type:a.literal("text"),text:a.string()})]))}),a.object({type:a.literal("web_fetch_tool_result"),tool_use_id:a.string(),content:a.union([a.object({type:a.literal("web_fetch_result"),url:a.string(),retrieved_at:a.string(),content:a.object({type:a.literal("document"),title:a.string().nullable(),citations:a.object({enabled:a.boolean()}).optional(),source:a.object({type:a.literal("text"),media_type:a.string(),data:a.string()})})}),a.object({type:a.literal("web_fetch_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("web_search_tool_result"),tool_use_id:a.string(),content:a.union([a.array(a.object({type:a.literal("web_search_result"),url:a.string(),title:a.string(),encrypted_content:a.string(),page_age:a.string().nullish()})),a.object({type:a.literal("web_search_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("code_execution_tool_result"),tool_use_id:a.string(),content:a.union([a.object({type:a.literal("code_execution_result"),stdout:a.string(),stderr:a.string(),return_code:a.number()}),a.object({type:a.literal("code_execution_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("bash_code_execution_tool_result"),tool_use_id:a.string(),content:a.discriminatedUnion("type",[a.object({type:a.literal("bash_code_execution_result"),content:a.array(a.object({type:a.literal("bash_code_execution_output"),file_id:a.string()})),stdout:a.string(),stderr:a.string(),return_code:a.number()}),a.object({type:a.literal("bash_code_execution_tool_result_error"),error_code:a.string()})])}),a.object({type:a.literal("text_editor_code_execution_tool_result"),tool_use_id:a.string(),content:a.discriminatedUnion("type",[a.object({type:a.literal("text_editor_code_execution_tool_result_error"),error_code:a.string()}),a.object({type:a.literal("text_editor_code_execution_view_result"),content:a.string(),file_type:a.string(),num_lines:a.number().nullable(),start_line:a.number().nullable(),total_lines:a.number().nullable()}),a.object({type:a.literal("text_editor_code_execution_create_result"),is_file_update:a.boolean()}),a.object({type:a.literal("text_editor_code_execution_str_replace_result"),lines:a.array(a.string()).nullable(),new_lines:a.number().nullable(),new_start:a.number().nullable(),old_lines:a.number().nullable(),old_start:a.number().nullable()})])}),a.object({type:a.literal("tool_search_tool_result"),tool_use_id:a.string(),content:a.union([a.object({type:a.literal("tool_search_tool_search_result"),tool_references:a.array(a.object({type:a.literal("tool_reference"),tool_name:a.string()}))}),a.object({type:a.literal("tool_search_tool_result_error"),error_code:a.string()})])})])}),a.object({type:a.literal("content_block_delta"),index:a.number(),delta:a.discriminatedUnion("type",[a.object({type:a.literal("input_json_delta"),partial_json:a.string()}),a.object({type:a.literal("text_delta"),text:a.string()}),a.object({type:a.literal("thinking_delta"),thinking:a.string()}),a.object({type:a.literal("signature_delta"),signature:a.string()}),a.object({type:a.literal("citations_delta"),citation:a.discriminatedUnion("type",[a.object({type:a.literal("web_search_result_location"),cited_text:a.string(),url:a.string(),title:a.string(),encrypted_index:a.string()}),a.object({type:a.literal("page_location"),cited_text:a.string(),document_index:a.number(),document_title:a.string().nullable(),start_page_number:a.number(),end_page_number:a.number()}),a.object({type:a.literal("char_location"),cited_text:a.string(),document_index:a.number(),document_title:a.string().nullable(),start_char_index:a.number(),end_char_index:a.number()})])})])}),a.object({type:a.literal("content_block_stop"),index:a.number()}),a.object({type:a.literal("error"),error:a.object({type:a.string(),message:a.string()})}),a.object({type:a.literal("message_delta"),delta:a.object({stop_reason:a.string().nullish(),stop_sequence:a.string().nullish(),container:a.object({expires_at:a.string(),id:a.string(),skills:a.array(a.object({type:a.union([a.literal("anthropic"),a.literal("custom")]),skill_id:a.string(),version:a.string()})).nullish()}).nullish()}),usage:a.looseObject({output_tokens:a.number(),cache_creation_input_tokens:a.number().nullish()})}),a.object({type:a.literal("message_stop")}),a.object({type:a.literal("ping")})]))),sU=j(()=>R(a.object({signature:a.string().optional(),redactedData:a.string().optional()}))),eT=a.object({citations:a.object({enabled:a.boolean()}).optional(),title:a.string().optional(),context:a.string().optional()}),lU=a.object({sendReasoning:a.boolean().optional(),structuredOutputMode:a.enum(["outputFormat","jsonTool","auto"]).optional(),thinking:a.object({type:a.union([a.literal("enabled"),a.literal("disabled")]),budgetTokens:a.number().optional()}).optional(),disableParallelToolUse:a.boolean().optional(),cacheControl:a.object({type:a.literal("ephemeral"),ttl:a.union([a.literal("5m"),a.literal("1h")]).optional()}).optional(),mcpServers:a.array(a.object({type:a.literal("url"),name:a.string(),url:a.string(),authorizationToken:a.string().nullish(),toolConfiguration:a.object({enabled:a.boolean().nullish(),allowedTools:a.array(a.string()).nullish()}).nullish()})).optional(),container:a.object({id:a.string().optional(),skills:a.array(a.object({type:a.union([a.literal("anthropic"),a.literal("custom")]),skillId:a.string(),version:a.string().optional()})).optional()}).optional(),toolStreaming:a.boolean().optional(),effort:a.enum(["low","medium","high"]).optional()}),tT=4;function uU(e){var t;let r=e==null?void 0:e.anthropic;return(t=r==null?void 0:r.cacheControl)!=null?t:r==null?void 0:r.cache_control}var Qf=class{constructor(){this.breakpointCount=0,this.warnings=[]}getCacheControl(e,t){let r=uU(e);if(r){if(!t.canCache){this.warnings.push({type:"unsupported",feature:"cache_control on non-cacheable context",details:`cache_control cannot be set on ${t.type}. It will be ignored.`});return}if(this.breakpointCount++,this.breakpointCount>tT){this.warnings.push({type:"unsupported",feature:"cacheControl breakpoint limit",details:`Maximum ${tT} cache breakpoints exceeded (found ${this.breakpointCount}). This breakpoint will be ignored.`});return}return r}}getWarnings(){return this.warnings}},cU=j(()=>R(a.object({maxCharacters:a.number().optional()}))),dU=j(()=>R(a.object({command:a.enum(["view","create","str_replace","insert"]),path:a.string(),file_text:a.string().optional(),insert_line:a.number().int().optional(),new_str:a.string().optional(),old_str:a.string().optional(),view_range:a.array(a.number().int()).optional()}))),pU=Je({id:"anthropic.text_editor_20250728",inputSchema:dU}),mU=(e={})=>pU(e),fU=j(()=>R(a.object({maxUses:a.number().optional(),allowedDomains:a.array(a.string()).optional(),blockedDomains:a.array(a.string()).optional(),userLocation:a.object({type:a.literal("approximate"),city:a.string().optional(),region:a.string().optional(),country:a.string().optional(),timezone:a.string().optional()}).optional()}))),oT=j(()=>R(a.array(a.object({url:a.string(),title:a.string(),pageAge:a.string().nullable(),encryptedContent:a.string(),type:a.literal("web_search_result")})))),gU=j(()=>R(a.object({query:a.string()}))),hU=Te({id:"anthropic.web_search_20250305",inputSchema:gU,outputSchema:oT}),vU=(e={})=>hU(e),yU=j(()=>R(a.object({maxUses:a.number().optional(),allowedDomains:a.array(a.string()).optional(),blockedDomains:a.array(a.string()).optional(),citations:a.object({enabled:a.boolean()}).optional(),maxContentTokens:a.number().optional()}))),aT=j(()=>R(a.object({type:a.literal("web_fetch_result"),url:a.string(),content:a.object({type:a.literal("document"),title:a.string(),citations:a.object({enabled:a.boolean()}).optional(),source:a.union([a.object({type:a.literal("base64"),mediaType:a.literal("application/pdf"),data:a.string()}),a.object({type:a.literal("text"),mediaType:a.literal("text/plain"),data:a.string()})])}),retrievedAt:a.string().nullable()}))),_U=j(()=>R(a.object({url:a.string()}))),bU=Te({id:"anthropic.web_fetch_20250910",inputSchema:_U,outputSchema:aT}),xU=(e={})=>bU(e);async function wU({tools:e,toolChoice:t,disableParallelToolUse:r,cacheControlValidator:o,supportsStructuredOutput:n}){var i;e=e!=null&&e.length?e:void 0;let s=[],u=new Set,c=o||new Qf;if(e==null)return{tools:void 0,toolChoice:void 0,toolWarnings:s,betas:u};let l=[];for(let m of e)switch(m.type){case"function":{let p=c.getCacheControl(m.providerOptions,{type:"tool definition",canCache:!0}),g=(i=m.providerOptions)==null?void 0:i.anthropic,h=g==null?void 0:g.deferLoading;l.push({name:m.name,description:m.description,input_schema:m.inputSchema,cache_control:p,...n===!0&&m.strict!=null?{strict:m.strict}:{},...h!=null?{defer_loading:h}:{},...m.inputExamples!=null?{input_examples:m.inputExamples.map(v=>v.input)}:{}}),m.inputExamples!=null&&u.add("advanced-tool-use-2025-11-20");break}case"provider":{switch(m.id){case"anthropic.code_execution_20250522":{u.add("code-execution-2025-05-22"),l.push({type:"code_execution_20250522",name:"code_execution",cache_control:void 0});break}case"anthropic.code_execution_20250825":{u.add("code-execution-2025-08-25"),l.push({type:"code_execution_20250825",name:"code_execution"});break}case"anthropic.computer_20250124":{u.add("computer-use-2025-01-24"),l.push({name:"computer",type:"computer_20250124",display_width_px:m.args.displayWidthPx,display_height_px:m.args.displayHeightPx,display_number:m.args.displayNumber,cache_control:void 0});break}case"anthropic.computer_20241022":{u.add("computer-use-2024-10-22"),l.push({name:"computer",type:"computer_20241022",display_width_px:m.args.displayWidthPx,display_height_px:m.args.displayHeightPx,display_number:m.args.displayNumber,cache_control:void 0});break}case"anthropic.text_editor_20250124":{u.add("computer-use-2025-01-24"),l.push({name:"str_replace_editor",type:"text_editor_20250124",cache_control:void 0});break}case"anthropic.text_editor_20241022":{u.add("computer-use-2024-10-22"),l.push({name:"str_replace_editor",type:"text_editor_20241022",cache_control:void 0});break}case"anthropic.text_editor_20250429":{u.add("computer-use-2025-01-24"),l.push({name:"str_replace_based_edit_tool",type:"text_editor_20250429",cache_control:void 0});break}case"anthropic.text_editor_20250728":{let p=await We({value:m.args,schema:cU});l.push({name:"str_replace_based_edit_tool",type:"text_editor_20250728",max_characters:p.maxCharacters,cache_control:void 0});break}case"anthropic.bash_20250124":{u.add("computer-use-2025-01-24"),l.push({name:"bash",type:"bash_20250124",cache_control:void 0});break}case"anthropic.bash_20241022":{u.add("computer-use-2024-10-22"),l.push({name:"bash",type:"bash_20241022",cache_control:void 0});break}case"anthropic.memory_20250818":{u.add("context-management-2025-06-27"),l.push({name:"memory",type:"memory_20250818"});break}case"anthropic.web_fetch_20250910":{u.add("web-fetch-2025-09-10");let p=await We({value:m.args,schema:yU});l.push({type:"web_fetch_20250910",name:"web_fetch",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,citations:p.citations,max_content_tokens:p.maxContentTokens,cache_control:void 0});break}case"anthropic.web_search_20250305":{let p=await We({value:m.args,schema:fU});l.push({type:"web_search_20250305",name:"web_search",max_uses:p.maxUses,allowed_domains:p.allowedDomains,blocked_domains:p.blockedDomains,user_location:p.userLocation,cache_control:void 0});break}case"anthropic.tool_search_regex_20251119":{u.add("advanced-tool-use-2025-11-20"),l.push({type:"tool_search_tool_regex_20251119",name:"tool_search_tool_regex"});break}case"anthropic.tool_search_bm25_20251119":{u.add("advanced-tool-use-2025-11-20"),l.push({type:"tool_search_tool_bm25_20251119",name:"tool_search_tool_bm25"});break}default:{s.push({type:"unsupported",feature:`provider-defined tool ${m.id}`});break}}break}default:{s.push({type:"unsupported",feature:`tool ${m}`});break}}if(t==null)return{tools:l,toolChoice:r?{type:"auto",disable_parallel_tool_use:r}:void 0,toolWarnings:s,betas:u};let d=t.type;switch(d){case"auto":return{tools:l,toolChoice:{type:"auto",disable_parallel_tool_use:r},toolWarnings:s,betas:u};case"required":return{tools:l,toolChoice:{type:"any",disable_parallel_tool_use:r},toolWarnings:s,betas:u};case"none":return{tools:void 0,toolChoice:void 0,toolWarnings:s,betas:u};case"tool":return{tools:l,toolChoice:{type:"tool",name:t.toolName,disable_parallel_tool_use:r},toolWarnings:s,betas:u};default:{let m=d;throw new xe({functionality:`tool choice type: ${m}`})}}}var iT=j(()=>R(a.object({type:a.literal("code_execution_result"),stdout:a.string(),stderr:a.string(),return_code:a.number()}))),SU=j(()=>R(a.object({code:a.string()}))),kU=Te({id:"anthropic.code_execution_20250522",inputSchema:SU,outputSchema:iT}),IU=(e={})=>kU(e),sT=j(()=>R(a.discriminatedUnion("type",[a.object({type:a.literal("bash_code_execution_result"),content:a.array(a.object({type:a.literal("bash_code_execution_output"),file_id:a.string()})),stdout:a.string(),stderr:a.string(),return_code:a.number()}),a.object({type:a.literal("bash_code_execution_tool_result_error"),error_code:a.string()}),a.object({type:a.literal("text_editor_code_execution_tool_result_error"),error_code:a.string()}),a.object({type:a.literal("text_editor_code_execution_view_result"),content:a.string(),file_type:a.string(),num_lines:a.number().nullable(),start_line:a.number().nullable(),total_lines:a.number().nullable()}),a.object({type:a.literal("text_editor_code_execution_create_result"),is_file_update:a.boolean()}),a.object({type:a.literal("text_editor_code_execution_str_replace_result"),lines:a.array(a.string()).nullable(),new_lines:a.number().nullable(),new_start:a.number().nullable(),old_lines:a.number().nullable(),old_start:a.number().nullable()})]))),TU=j(()=>R(a.discriminatedUnion("type",[a.object({type:a.literal("bash_code_execution"),command:a.string()}),a.discriminatedUnion("command",[a.object({type:a.literal("text_editor_code_execution"),command:a.literal("view"),path:a.string()}),a.object({type:a.literal("text_editor_code_execution"),command:a.literal("create"),path:a.string(),file_text:a.string().nullish()}),a.object({type:a.literal("text_editor_code_execution"),command:a.literal("str_replace"),path:a.string(),old_str:a.string(),new_str:a.string()})])]))),$U=Te({id:"anthropic.code_execution_20250825",inputSchema:TU,outputSchema:sT}),EU=(e={})=>$U(e),lT=j(()=>R(a.array(a.object({type:a.literal("tool_reference"),toolName:a.string()})))),AU=j(()=>R(a.object({pattern:a.string(),limit:a.number().optional()}))),CU=Te({id:"anthropic.tool_search_regex_20251119",inputSchema:AU,outputSchema:lT}),PU=(e={})=>CU(e);function OU(e){if(typeof e=="string")return Buffer.from(e,"base64").toString("utf-8");if(e instanceof Uint8Array)return new TextDecoder().decode(e);throw e instanceof URL?new xe({functionality:"URL-based text documents are not supported for citations"}):new xe({functionality:`unsupported data type for text documents: ${typeof e}`})}async function NU({prompt:e,sendReasoning:t,warnings:r,cacheControlValidator:o,toolNameMapping:n}){var i,s,u,c,l,d,m,p,g,h;let v=new Set,_=RU(e),w=o||new Qf,x,f=[];async function b(k){var $,O;let L=await we({provider:"anthropic",providerOptions:k,schema:eT});return(O=($=L==null?void 0:L.citations)==null?void 0:$.enabled)!=null?O:!1}async function y(k){let $=await we({provider:"anthropic",providerOptions:k,schema:eT});return{title:$==null?void 0:$.title,context:$==null?void 0:$.context}}for(let k=0;k<_.length;k++){let $=_[k],O=k===_.length-1,L=$.type;switch(L){case"system":{if(x!=null)throw new xe({functionality:"Multiple system messages that are separated by user/assistant messages"});x=$.messages.map(({content:F,providerOptions:U})=>({type:"text",text:F,cache_control:w.getCacheControl(U,{type:"system message",canCache:!0})}));break}case"user":{let F=[];for(let U of $.messages){let{role:Z,content:E}=U;switch(Z){case"user":{for(let z=0;z<E.length;z++){let J=E[z],B=z===E.length-1,D=(i=w.getCacheControl(J.providerOptions,{type:"user message part",canCache:!0}))!=null?i:B?w.getCacheControl(U.providerOptions,{type:"user message",canCache:!0}):void 0;switch(J.type){case"text":{F.push({type:"text",text:J.text,cache_control:D});break}case"file":{if(J.mediaType.startsWith("image/"))F.push({type:"image",source:J.data instanceof URL?{type:"url",url:J.data.toString()}:{type:"base64",media_type:J.mediaType==="image/*"?"image/jpeg":J.mediaType,data:ht(J.data)},cache_control:D});else if(J.mediaType==="application/pdf"){v.add("pdfs-2024-09-25");let H=await b(J.providerOptions),G=await y(J.providerOptions);F.push({type:"document",source:J.data instanceof URL?{type:"url",url:J.data.toString()}:{type:"base64",media_type:"application/pdf",data:ht(J.data)},title:(s=G.title)!=null?s:J.filename,...G.context&&{context:G.context},...H&&{citations:{enabled:!0}},cache_control:D})}else if(J.mediaType==="text/plain"){let H=await b(J.providerOptions),G=await y(J.providerOptions);F.push({type:"document",source:J.data instanceof URL?{type:"url",url:J.data.toString()}:{type:"text",media_type:"text/plain",data:OU(J.data)},title:(u=G.title)!=null?u:J.filename,...G.context&&{context:G.context},...H&&{citations:{enabled:!0}},cache_control:D})}else throw new xe({functionality:`media type: ${J.mediaType}`});break}}}break}case"tool":{for(let z=0;z<E.length;z++){let J=E[z],B=z===E.length-1,D=(c=w.getCacheControl(J.providerOptions,{type:"tool result part",canCache:!0}))!=null?c:B?w.getCacheControl(U.providerOptions,{type:"tool result message",canCache:!0}):void 0,H=J.output,G;switch(H.type){case"content":G=H.value.map(C=>{switch(C.type){case"text":return{type:"text",text:C.text};case"image-data":return{type:"image",source:{type:"base64",media_type:C.mediaType,data:C.data}};case"image-url":return{type:"image",source:{type:"url",url:C.url}};case"file-url":return{type:"document",source:{type:"url",url:C.url}};case"file-data":{if(C.mediaType==="application/pdf")return v.add("pdfs-2024-09-25"),{type:"document",source:{type:"base64",media_type:C.mediaType,data:C.data}};r.push({type:"other",message:`unsupported tool content part type: ${C.type} with media type: ${C.mediaType}`});return}default:{r.push({type:"other",message:`unsupported tool content part type: ${C.type}`});return}}}).filter(Sl);break;case"text":case"error-text":G=H.value;break;case"execution-denied":G=(l=H.reason)!=null?l:"Tool execution denied.";break;case"json":case"error-json":default:G=JSON.stringify(H.value);break}F.push({type:"tool_result",tool_use_id:J.toolCallId,content:G,is_error:H.type==="error-text"||H.type==="error-json"?!0:void 0,cache_control:D})}break}default:{let z=Z;throw new Error(`Unsupported role: ${z}`)}}}f.push({role:"user",content:F});break}case"assistant":{let F=[],U=new Set;for(let Z=0;Z<$.messages.length;Z++){let E=$.messages[Z],z=Z===$.messages.length-1,{content:J}=E;for(let B=0;B<J.length;B++){let D=J[B],H=B===J.length-1,G=(d=w.getCacheControl(D.providerOptions,{type:"assistant message part",canCache:!0}))!=null?d:H?w.getCacheControl(E.providerOptions,{type:"assistant message",canCache:!0}):void 0;switch(D.type){case"text":{F.push({type:"text",text:O&&z&&H?D.text.trim():D.text,cache_control:G});break}case"reasoning":{if(t){let C=await we({provider:"anthropic",providerOptions:D.providerOptions,schema:sU});C!=null?C.signature!=null?(w.getCacheControl(D.providerOptions,{type:"thinking block",canCache:!1}),F.push({type:"thinking",thinking:D.text,signature:C.signature})):C.redactedData!=null?(w.getCacheControl(D.providerOptions,{type:"redacted thinking block",canCache:!1}),F.push({type:"redacted_thinking",data:C.redactedData})):r.push({type:"other",message:"unsupported reasoning metadata"}):r.push({type:"other",message:"unsupported reasoning metadata"})}else r.push({type:"other",message:"sending reasoning content is disabled for this model"});break}case"tool-call":{if(D.providerExecuted){let C=n.toProviderToolName(D.toolName);if(((p=(m=D.providerOptions)==null?void 0:m.anthropic)==null?void 0:p.type)==="mcp-tool-use"){U.add(D.toolCallId);let A=(h=(g=D.providerOptions)==null?void 0:g.anthropic)==null?void 0:h.serverName;if(A==null||typeof A!="string"){r.push({type:"other",message:"mcp tool use server name is required and must be a string"});break}F.push({type:"mcp_tool_use",id:D.toolCallId,name:D.toolName,input:D.input,server_name:A,cache_control:G})}else C==="code_execution"&&D.input!=null&&typeof D.input=="object"&&"type"in D.input&&typeof D.input.type=="string"&&(D.input.type==="bash_code_execution"||D.input.type==="text_editor_code_execution")?F.push({type:"server_tool_use",id:D.toolCallId,name:D.input.type,input:D.input,cache_control:G}):C==="code_execution"||C==="web_fetch"||C==="web_search"?F.push({type:"server_tool_use",id:D.toolCallId,name:C,input:D.input,cache_control:G}):C==="tool_search_tool_regex"||C==="tool_search_tool_bm25"?F.push({type:"server_tool_use",id:D.toolCallId,name:C,input:D.input,cache_control:G}):r.push({type:"other",message:`provider executed tool call for tool ${D.toolName} is not supported`});break}F.push({type:"tool_use",id:D.toolCallId,name:D.toolName,input:D.input,cache_control:G});break}case"tool-result":{let C=n.toProviderToolName(D.toolName);if(U.has(D.toolCallId)){let Q=D.output;if(Q.type!=="json"&&Q.type!=="error-json"){r.push({type:"other",message:`provider executed tool result output type ${Q.type} for tool ${D.toolName} is not supported`});break}F.push({type:"mcp_tool_result",tool_use_id:D.toolCallId,is_error:Q.type==="error-json",content:Q.value,cache_control:G})}else if(C==="code_execution"){let Q=D.output;if(Q.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${Q.type} for tool ${D.toolName} is not supported`});break}if(Q.value==null||typeof Q.value!="object"||!("type"in Q.value)||typeof Q.value.type!="string"){r.push({type:"other",message:`provider executed tool result output value is not a valid code execution result for tool ${D.toolName}`});break}if(Q.value.type==="code_execution_result"){let A=await We({value:Q.value,schema:iT});F.push({type:"code_execution_tool_result",tool_use_id:D.toolCallId,content:{type:A.type,stdout:A.stdout,stderr:A.stderr,return_code:A.return_code},cache_control:G})}else{let A=await We({value:Q.value,schema:sT});F.push(A.type==="bash_code_execution_result"||A.type==="bash_code_execution_tool_result_error"?{type:"bash_code_execution_tool_result",tool_use_id:D.toolCallId,cache_control:G,content:A}:{type:"text_editor_code_execution_tool_result",tool_use_id:D.toolCallId,cache_control:G,content:A})}break}if(C==="web_fetch"){let Q=D.output;if(Q.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${Q.type} for tool ${D.toolName} is not supported`});break}let A=await We({value:Q.value,schema:aT});F.push({type:"web_fetch_tool_result",tool_use_id:D.toolCallId,content:{type:"web_fetch_result",url:A.url,retrieved_at:A.retrievedAt,content:{type:"document",title:A.content.title,citations:A.content.citations,source:{type:A.content.source.type,media_type:A.content.source.mediaType,data:A.content.source.data}}},cache_control:G});break}if(C==="web_search"){let Q=D.output;if(Q.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${Q.type} for tool ${D.toolName} is not supported`});break}let A=await We({value:Q.value,schema:oT});F.push({type:"web_search_tool_result",tool_use_id:D.toolCallId,content:A.map(M=>({url:M.url,title:M.title,page_age:M.pageAge,encrypted_content:M.encryptedContent,type:M.type})),cache_control:G});break}if(C==="tool_search_tool_regex"||C==="tool_search_tool_bm25"){let Q=D.output;if(Q.type!=="json"){r.push({type:"other",message:`provider executed tool result output type ${Q.type} for tool ${D.toolName} is not supported`});break}let M=(await We({value:Q.value,schema:lT})).map(P=>({type:"tool_reference",tool_name:P.toolName}));F.push({type:"tool_search_tool_result",tool_use_id:D.toolCallId,content:{type:"tool_search_tool_search_result",tool_references:M},cache_control:G});break}r.push({type:"other",message:`provider executed tool result for tool ${D.toolName} is not supported`});break}}}}f.push({role:"assistant",content:F});break}default:{let F=L;throw new Error(`content type: ${F}`)}}}return{prompt:{system:x,messages:f},betas:v}}function RU(e){let t=[],r;for(let o of e){let{role:n}=o;switch(n){case"system":{(r==null?void 0:r.type)!=="system"&&(r={type:"system",messages:[]},t.push(r)),r.messages.push(o);break}case"assistant":{(r==null?void 0:r.type)!=="assistant"&&(r={type:"assistant",messages:[]},t.push(r)),r.messages.push(o);break}case"user":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(o);break}case"tool":{(r==null?void 0:r.type)!=="user"&&(r={type:"user",messages:[]},t.push(r)),r.messages.push(o);break}default:{let i=n;throw new Error(`Unsupported role: ${i}`)}}}return t}function rT({finishReason:e,isJsonResponseFromTool:t}){switch(e){case"pause_turn":case"end_turn":case"stop_sequence":return"stop";case"refusal":return"content-filter";case"tool_use":return t?"stop":"tool-calls";case"max_tokens":return"length";default:return"unknown"}}function nT(e,t,r){var o;if(e.type!=="page_location"&&e.type!=="char_location")return;let n=t[e.document_index];if(n)return{type:"source",sourceType:"document",id:r(),mediaType:n.mediaType,title:(o=e.document_title)!=null?o:n.title,filename:n.filename,providerMetadata:{anthropic:e.type==="page_location"?{citedText:e.cited_text,startPageNumber:e.start_page_number,endPageNumber:e.end_page_number}:{citedText:e.cited_text,startCharIndex:e.start_char_index,endCharIndex:e.end_char_index}}}}var jU=class{constructor(e,t){this.specificationVersion="v3";var r;this.modelId=e,this.config=t,this.generateId=(r=t.generateId)!=null?r:ze}supportsUrl(e){return e.protocol==="https:"}get provider(){return this.config.provider}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({userSuppliedBetas:e,prompt:t,maxOutputTokens:r,temperature:o,topP:n,topK:i,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:l,seed:d,tools:m,toolChoice:p,providerOptions:g,stream:h}){var v,_,w,x,f,b;let y=[];s!=null&&y.push({type:"unsupported",feature:"frequencyPenalty"}),u!=null&&y.push({type:"unsupported",feature:"presencePenalty"}),d!=null&&y.push({type:"unsupported",feature:"seed"}),o!=null&&o>1?(y.push({type:"unsupported",feature:"temperature",details:`${o} exceeds anthropic maximum of 1.0. clamped to 1.0`}),o=1):o!=null&&o<0&&(y.push({type:"unsupported",feature:"temperature",details:`${o} is below anthropic minimum of 0. clamped to 0`}),o=0),(l==null?void 0:l.type)==="json"&&l.schema==null&&y.push({type:"unsupported",feature:"responseFormat",details:"JSON response format requires a schema. The response format is ignored."});let k=await we({provider:"anthropic",providerOptions:g,schema:lU}),{maxOutputTokens:$,supportsStructuredOutput:O,isKnownModel:L}=MU(this.modelId),F=(v=k==null?void 0:k.structuredOutputMode)!=null?v:"auto",U=F==="outputFormat"||F==="auto"&&O,Z=(l==null?void 0:l.type)==="json"&&l.schema!=null&&!U?{type:"function",name:"json",description:"Respond with a JSON object.",inputSchema:l.schema}:void 0,E=new Qf,z=wl({tools:m,providerToolNames:{"anthropic.code_execution_20250522":"code_execution","anthropic.code_execution_20250825":"code_execution","anthropic.computer_20241022":"computer","anthropic.computer_20250124":"computer","anthropic.text_editor_20241022":"str_replace_editor","anthropic.text_editor_20250124":"str_replace_editor","anthropic.text_editor_20250429":"str_replace_based_edit_tool","anthropic.text_editor_20250728":"str_replace_based_edit_tool","anthropic.bash_20241022":"bash","anthropic.bash_20250124":"bash","anthropic.memory_20250818":"memory","anthropic.web_search_20250305":"web_search","anthropic.web_fetch_20250910":"web_fetch","anthropic.tool_search_regex_20251119":"tool_search_tool_regex","anthropic.tool_search_bm25_20251119":"tool_search_tool_bm25"}}),{prompt:J,betas:B}=await NU({prompt:t,sendReasoning:(_=k==null?void 0:k.sendReasoning)!=null?_:!0,warnings:y,cacheControlValidator:E,toolNameMapping:z}),D=((w=k==null?void 0:k.thinking)==null?void 0:w.type)==="enabled",H=(x=k==null?void 0:k.thinking)==null?void 0:x.budgetTokens,G=r!=null?r:$,C={model:this.modelId,max_tokens:G,temperature:o,top_k:i,top_p:n,stop_sequences:c,...D&&{thinking:{type:"enabled",budget_tokens:H}},...(k==null?void 0:k.effort)&&{output_config:{effort:k.effort}},...U&&(l==null?void 0:l.type)==="json"&&l.schema!=null&&{output_format:{type:"json_schema",schema:l.schema}},...(k==null?void 0:k.mcpServers)&&k.mcpServers.length>0&&{mcp_servers:k.mcpServers.map(te=>({type:te.type,name:te.name,url:te.url,authorization_token:te.authorizationToken,tool_configuration:te.toolConfiguration?{allowed_tools:te.toolConfiguration.allowedTools,enabled:te.toolConfiguration.enabled}:void 0}))},...(k==null?void 0:k.container)&&{container:{id:k.container.id,skills:(f=k.container.skills)==null?void 0:f.map(te=>({type:te.type,skill_id:te.skillId,version:te.version}))}},system:J.system,messages:J.messages};if(D){if(H==null)throw new xe({functionality:"thinking requires a budget"});C.temperature!=null&&(C.temperature=void 0,y.push({type:"unsupported",feature:"temperature",details:"temperature is not supported when thinking is enabled"})),i!=null&&(C.top_k=void 0,y.push({type:"unsupported",feature:"topK",details:"topK is not supported when thinking is enabled"})),n!=null&&(C.top_p=void 0,y.push({type:"unsupported",feature:"topP",details:"topP is not supported when thinking is enabled"})),C.max_tokens=G+H}L&&C.max_tokens>$&&(r!=null&&y.push({type:"unsupported",feature:"maxOutputTokens",details:`${C.max_tokens} (maxOutputTokens + thinkingBudget) is greater than ${this.modelId} ${$} max output tokens. The max output tokens have been limited to ${$}.`}),C.max_tokens=$),k!=null&&k.mcpServers&&k.mcpServers.length>0&&B.add("mcp-client-2025-04-04"),k!=null&&k.container&&k.container.skills&&k.container.skills.length>0&&(B.add("code-execution-2025-08-25"),B.add("skills-2025-10-02"),B.add("files-api-2025-04-14"),m!=null&&m.some(te=>te.type==="provider"&&te.id==="anthropic.code_execution_20250825")||y.push({type:"other",message:"code execution tool is required when using skills"})),k!=null&&k.effort&&B.add("effort-2025-11-24"),h&&((b=k==null?void 0:k.toolStreaming)==null||b)&&B.add("fine-grained-tool-streaming-2025-05-14"),U&&B.add("structured-outputs-2025-11-13");let{tools:Q,toolChoice:A,toolWarnings:M,betas:P}=await wU(Z!=null?{tools:[...m!=null?m:[],Z],toolChoice:{type:"required"},disableParallelToolUse:!0,cacheControlValidator:E,supportsStructuredOutput:O}:{tools:m!=null?m:[],toolChoice:p,disableParallelToolUse:k==null?void 0:k.disableParallelToolUse,cacheControlValidator:E,supportsStructuredOutput:O}),ee=E.getWarnings();return{args:{...C,tools:Q,tool_choice:A,stream:h===!0?!0:void 0},warnings:[...y,...M,...ee],betas:new Set([...B,...P,...e]),usesJsonResponseTool:Z!=null,toolNameMapping:z}}async getHeaders({betas:e,headers:t}){return _e(await Or(this.config.headers),t,e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{})}async getBetasFromHeaders(e){var t,r;let n=(t=(await Or(this.config.headers))["anthropic-beta"])!=null?t:"",i=(r=e==null?void 0:e["anthropic-beta"])!=null?r:"";return new Set([...n.toLowerCase().split(","),...i.toLowerCase().split(",")].map(s=>s.trim()).filter(s=>s!==""))}buildRequestUrl(e){var t,r,o;return(o=(r=(t=this.config).buildRequestUrl)==null?void 0:r.call(t,this.config.baseURL,e))!=null?o:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,r,o;return(o=(r=(t=this.config).transformRequestBody)==null?void 0:r.call(t,e))!=null?o:e}extractCitationDocuments(e){let t=r=>{var o,n;if(r.type!=="file"||r.mediaType!=="application/pdf"&&r.mediaType!=="text/plain")return!1;let i=(o=r.providerOptions)==null?void 0:o.anthropic,s=i==null?void 0:i.citations;return(n=s==null?void 0:s.enabled)!=null?n:!1};return e.filter(r=>r.role==="user").flatMap(r=>r.content).filter(t).map(r=>{var o;let n=r;return{title:(o=n.filename)!=null?o:"Untitled Document",filename:n.filename,mediaType:n.mediaType}})}async doGenerate(e){var t,r,o,n,i,s,u,c;let{args:l,warnings:d,betas:m,usesJsonResponseTool:p,toolNameMapping:g}=await this.getArgs({...e,stream:!1,userSuppliedBetas:await this.getBetasFromHeaders(e.headers)}),h=this.extractCitationDocuments(e.prompt),{responseHeaders:v,value:_,rawValue:w}=await be({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:m,headers:e.headers}),body:this.transformRequestBody(l),failedResponseHandler:QI,successfulResponseHandler:Re(aU),abortSignal:e.abortSignal,fetch:this.config.fetch}),x=[],f={},b=!1;for(let y of _.content)switch(y.type){case"text":{if(!p&&(x.push({type:"text",text:y.text}),y.citations))for(let k of y.citations){let $=nT(k,h,this.generateId);$&&x.push($)}break}case"thinking":{x.push({type:"reasoning",text:y.thinking,providerMetadata:{anthropic:{signature:y.signature}}});break}case"redacted_thinking":{x.push({type:"reasoning",text:"",providerMetadata:{anthropic:{redactedData:y.data}}});break}case"tool_use":{p&&y.name==="json"?(b=!0,x.push({type:"text",text:JSON.stringify(y.input)})):x.push({type:"tool-call",toolCallId:y.id,toolName:y.name,input:JSON.stringify(y.input)});break}case"server_tool_use":{y.name==="text_editor_code_execution"||y.name==="bash_code_execution"?x.push({type:"tool-call",toolCallId:y.id,toolName:g.toCustomToolName("code_execution"),input:JSON.stringify({type:y.name,...y.input}),providerExecuted:!0}):y.name==="web_search"||y.name==="code_execution"||y.name==="web_fetch"?x.push({type:"tool-call",toolCallId:y.id,toolName:g.toCustomToolName(y.name),input:JSON.stringify(y.input),providerExecuted:!0}):(y.name==="tool_search_tool_regex"||y.name==="tool_search_tool_bm25")&&x.push({type:"tool-call",toolCallId:y.id,toolName:g.toCustomToolName(y.name),input:JSON.stringify(y.input),providerExecuted:!0});break}case"mcp_tool_use":{f[y.id]={type:"tool-call",toolCallId:y.id,toolName:y.name,input:JSON.stringify(y.input),providerExecuted:!0,dynamic:!0,providerMetadata:{anthropic:{type:"mcp-tool-use",serverName:y.server_name}}},x.push(f[y.id]);break}case"mcp_tool_result":{x.push({type:"tool-result",toolCallId:y.tool_use_id,toolName:f[y.tool_use_id].toolName,isError:y.is_error,result:y.content,dynamic:!0,providerMetadata:f[y.tool_use_id].providerMetadata});break}case"web_fetch_tool_result":{y.content.type==="web_fetch_result"?x.push({type:"tool-result",toolCallId:y.tool_use_id,toolName:g.toCustomToolName("web_fetch"),result:{type:"web_fetch_result",url:y.content.url,retrievedAt:y.content.retrieved_at,content:{type:y.content.content.type,title:y.content.content.title,citations:y.content.content.citations,source:{type:y.content.content.source.type,mediaType:y.content.content.source.media_type,data:y.content.content.source.data}}}}):y.content.type==="web_fetch_tool_result_error"&&x.push({type:"tool-result",toolCallId:y.tool_use_id,toolName:g.toCustomToolName("web_fetch"),isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:y.content.error_code}});break}case"web_search_tool_result":{if(Array.isArray(y.content)){x.push({type:"tool-result",toolCallId:y.tool_use_id,toolName:g.toCustomToolName("web_search"),result:y.content.map(k=>{var $;return{url:k.url,title:k.title,pageAge:($=k.page_age)!=null?$:null,encryptedContent:k.encrypted_content,type:k.type}})});for(let k of y.content)x.push({type:"source",sourceType:"url",id:this.generateId(),url:k.url,title:k.title,providerMetadata:{anthropic:{pageAge:(t=k.page_age)!=null?t:null}}})}else x.push({type:"tool-result",toolCallId:y.tool_use_id,toolName:g.toCustomToolName("web_search"),isError:!0,result:{type:"web_search_tool_result_error",errorCode:y.content.error_code}});break}case"code_execution_tool_result":{y.content.type==="code_execution_result"?x.push({type:"tool-result",toolCallId:y.tool_use_id,toolName:g.toCustomToolName("code_execution"),result:{type:y.content.type,stdout:y.content.stdout,stderr:y.content.stderr,return_code:y.content.return_code}}):y.content.type==="code_execution_tool_result_error"&&x.push({type:"tool-result",toolCallId:y.tool_use_id,toolName:g.toCustomToolName("code_execution"),isError:!0,result:{type:"code_execution_tool_result_error",errorCode:y.content.error_code}});break}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{x.push({type:"tool-result",toolCallId:y.tool_use_id,toolName:g.toCustomToolName("code_execution"),result:y.content});break}case"tool_search_tool_result":{y.content.type==="tool_search_tool_search_result"?x.push({type:"tool-result",toolCallId:y.tool_use_id,toolName:g.toCustomToolName("tool_search"),result:y.content.tool_references.map(k=>({type:k.type,toolName:k.tool_name}))}):x.push({type:"tool-result",toolCallId:y.tool_use_id,toolName:g.toCustomToolName("tool_search"),isError:!0,result:{type:"tool_search_tool_result_error",errorCode:y.content.error_code}});break}}return{content:x,finishReason:rT({finishReason:_.stop_reason,isJsonResponseFromTool:b}),usage:{inputTokens:_.usage.input_tokens,outputTokens:_.usage.output_tokens,totalTokens:_.usage.input_tokens+_.usage.output_tokens,cachedInputTokens:(r=_.usage.cache_read_input_tokens)!=null?r:void 0},request:{body:l},response:{id:(o=_.id)!=null?o:void 0,modelId:(n=_.model)!=null?n:void 0,headers:v,body:w},warnings:d,providerMetadata:{anthropic:{usage:_.usage,cacheCreationInputTokens:(i=_.usage.cache_creation_input_tokens)!=null?i:null,stopSequence:(s=_.stop_sequence)!=null?s:null,container:_.container?{expiresAt:_.container.expires_at,id:_.container.id,skills:(c=(u=_.container.skills)==null?void 0:u.map(y=>({type:y.type,skillId:y.skill_id,version:y.version})))!=null?c:null}:null}}}}async doStream(e){var t,r;let{args:o,warnings:n,betas:i,usesJsonResponseTool:s,toolNameMapping:u}=await this.getArgs({...e,stream:!0,userSuppliedBetas:await this.getBetasFromHeaders(e.headers)}),c=this.extractCitationDocuments(e.prompt),l=this.buildRequestUrl(!0),{responseHeaders:d,value:m}=await be({url:l,headers:await this.getHeaders({betas:i,headers:e.headers}),body:this.transformRequestBody(o),failedResponseHandler:QI,successfulResponseHandler:Ot(iU),abortSignal:e.abortSignal,fetch:this.config.fetch}),p="unknown",g={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},h={},v={},_,w=null,x=null,f=null,b=!1,y,k=this.generateId,$=m.pipeThrough(new TransformStream({start(U){U.enqueue({type:"stream-start",warnings:n})},transform(U,Z){var E,z,J,B,D,H,G,C,Q,A;if(e.includeRawChunks&&Z.enqueue({type:"raw",rawValue:U.rawValue}),!U.success){Z.enqueue({type:"error",error:U.error});return}let M=U.value;switch(M.type){case"ping":return;case"content_block_start":{let P=M.content_block,ee=P.type;switch(y=ee,ee){case"text":{if(s)return;h[M.index]={type:"text"},Z.enqueue({type:"text-start",id:String(M.index)});return}case"thinking":{h[M.index]={type:"reasoning"},Z.enqueue({type:"reasoning-start",id:String(M.index)});return}case"redacted_thinking":{h[M.index]={type:"reasoning"},Z.enqueue({type:"reasoning-start",id:String(M.index),providerMetadata:{anthropic:{redactedData:P.data}}});return}case"tool_use":{s&&P.name==="json"?(b=!0,h[M.index]={type:"text"},Z.enqueue({type:"text-start",id:String(M.index)})):(h[M.index]={type:"tool-call",toolCallId:P.id,toolName:P.name,input:"",firstDelta:!0},Z.enqueue({type:"tool-input-start",id:P.id,toolName:P.name}));return}case"server_tool_use":{if(["web_fetch","web_search","code_execution","text_editor_code_execution","bash_code_execution"].includes(P.name)){let te=P.name==="text_editor_code_execution"||P.name==="bash_code_execution"?"code_execution":P.name,Y=u.toCustomToolName(te);h[M.index]={type:"tool-call",toolCallId:P.id,toolName:Y,input:"",providerExecuted:!0,firstDelta:!0,providerToolName:P.name},Z.enqueue({type:"tool-input-start",id:P.id,toolName:Y,providerExecuted:!0})}else if(P.name==="tool_search_tool_regex"||P.name==="tool_search_tool_bm25"){let te=u.toCustomToolName(P.name);h[M.index]={type:"tool-call",toolCallId:P.id,toolName:te,input:"",providerExecuted:!0,firstDelta:!0,providerToolName:P.name},Z.enqueue({type:"tool-input-start",id:P.id,toolName:te,providerExecuted:!0})}return}case"web_fetch_tool_result":{P.content.type==="web_fetch_result"?Z.enqueue({type:"tool-result",toolCallId:P.tool_use_id,toolName:u.toCustomToolName("web_fetch"),result:{type:"web_fetch_result",url:P.content.url,retrievedAt:P.content.retrieved_at,content:{type:P.content.content.type,title:P.content.content.title,citations:P.content.content.citations,source:{type:P.content.content.source.type,mediaType:P.content.content.source.media_type,data:P.content.content.source.data}}}}):P.content.type==="web_fetch_tool_result_error"&&Z.enqueue({type:"tool-result",toolCallId:P.tool_use_id,toolName:u.toCustomToolName("web_fetch"),isError:!0,result:{type:"web_fetch_tool_result_error",errorCode:P.content.error_code}});return}case"web_search_tool_result":{if(Array.isArray(P.content)){Z.enqueue({type:"tool-result",toolCallId:P.tool_use_id,toolName:u.toCustomToolName("web_search"),result:P.content.map(te=>{var Y;return{url:te.url,title:te.title,pageAge:(Y=te.page_age)!=null?Y:null,encryptedContent:te.encrypted_content,type:te.type}})});for(let te of P.content)Z.enqueue({type:"source",sourceType:"url",id:k(),url:te.url,title:te.title,providerMetadata:{anthropic:{pageAge:(E=te.page_age)!=null?E:null}}})}else Z.enqueue({type:"tool-result",toolCallId:P.tool_use_id,toolName:u.toCustomToolName("web_search"),isError:!0,result:{type:"web_search_tool_result_error",errorCode:P.content.error_code}});return}case"code_execution_tool_result":{P.content.type==="code_execution_result"?Z.enqueue({type:"tool-result",toolCallId:P.tool_use_id,toolName:u.toCustomToolName("code_execution"),result:{type:P.content.type,stdout:P.content.stdout,stderr:P.content.stderr,return_code:P.content.return_code}}):P.content.type==="code_execution_tool_result_error"&&Z.enqueue({type:"tool-result",toolCallId:P.tool_use_id,toolName:u.toCustomToolName("code_execution"),isError:!0,result:{type:"code_execution_tool_result_error",errorCode:P.content.error_code}});return}case"bash_code_execution_tool_result":case"text_editor_code_execution_tool_result":{Z.enqueue({type:"tool-result",toolCallId:P.tool_use_id,toolName:u.toCustomToolName("code_execution"),result:P.content});return}case"tool_search_tool_result":{P.content.type==="tool_search_tool_search_result"?Z.enqueue({type:"tool-result",toolCallId:P.tool_use_id,toolName:u.toCustomToolName("tool_search"),result:P.content.tool_references.map(te=>({type:te.type,toolName:te.tool_name}))}):Z.enqueue({type:"tool-result",toolCallId:P.tool_use_id,toolName:u.toCustomToolName("tool_search"),isError:!0,result:{type:"tool_search_tool_result_error",errorCode:P.content.error_code}});return}case"mcp_tool_use":{v[P.id]={type:"tool-call",toolCallId:P.id,toolName:P.name,input:JSON.stringify(P.input),providerExecuted:!0,dynamic:!0,providerMetadata:{anthropic:{type:"mcp-tool-use",serverName:P.server_name}}},Z.enqueue(v[P.id]);return}case"mcp_tool_result":{Z.enqueue({type:"tool-result",toolCallId:P.tool_use_id,toolName:v[P.tool_use_id].toolName,isError:P.is_error,result:P.content,dynamic:!0,providerMetadata:v[P.tool_use_id].providerMetadata});return}default:{let te=ee;throw new Error(`Unsupported content block type: ${te}`)}}}case"content_block_stop":{if(h[M.index]!=null){let P=h[M.index];switch(P.type){case"text":{Z.enqueue({type:"text-end",id:String(M.index)});break}case"reasoning":{Z.enqueue({type:"reasoning-end",id:String(M.index)});break}case"tool-call":s&&P.toolName==="json"||(Z.enqueue({type:"tool-input-end",id:P.toolCallId}),Z.enqueue({type:"tool-call",toolCallId:P.toolCallId,toolName:P.toolName,input:P.input===""?"{}":P.input,providerExecuted:P.providerExecuted}));break}delete h[M.index]}y=void 0;return}case"content_block_delta":{let P=M.delta.type;switch(P){case"text_delta":{if(s)return;Z.enqueue({type:"text-delta",id:String(M.index),delta:M.delta.text});return}case"thinking_delta":{Z.enqueue({type:"reasoning-delta",id:String(M.index),delta:M.delta.thinking});return}case"signature_delta":{y==="thinking"&&Z.enqueue({type:"reasoning-delta",id:String(M.index),delta:"",providerMetadata:{anthropic:{signature:M.delta.signature}}});return}case"input_json_delta":{let ee=h[M.index],te=M.delta.partial_json;if(te.length===0)return;if(b){if((ee==null?void 0:ee.type)!=="text")return;Z.enqueue({type:"text-delta",id:String(M.index),delta:te})}else{if((ee==null?void 0:ee.type)!=="tool-call")return;ee.firstDelta&&(ee.providerToolName==="bash_code_execution"||ee.providerToolName==="text_editor_code_execution")&&(te=`{"type": "${ee.providerToolName}",${te.substring(1)}`),Z.enqueue({type:"tool-input-delta",id:ee.toolCallId,delta:te}),ee.input+=te,ee.firstDelta=!1}return}case"citations_delta":{let ee=M.delta.citation,te=nT(ee,c,k);te&&Z.enqueue(te);return}default:{let ee=P;throw new Error(`Unsupported delta type: ${ee}`)}}}case"message_start":{g.inputTokens=M.message.usage.input_tokens,g.cachedInputTokens=(z=M.message.usage.cache_read_input_tokens)!=null?z:void 0,_={...M.message.usage},w=(J=M.message.usage.cache_creation_input_tokens)!=null?J:null,Z.enqueue({type:"response-metadata",id:(B=M.message.id)!=null?B:void 0,modelId:(D=M.message.model)!=null?D:void 0});return}case"message_delta":{g.outputTokens=M.usage.output_tokens,g.totalTokens=((H=g.inputTokens)!=null?H:0)+((G=M.usage.output_tokens)!=null?G:0),p=rT({finishReason:M.delta.stop_reason,isJsonResponseFromTool:b}),x=(C=M.delta.stop_sequence)!=null?C:null,f=M.delta.container!=null?{expiresAt:M.delta.container.expires_at,id:M.delta.container.id,skills:(A=(Q=M.delta.container.skills)==null?void 0:Q.map(P=>({type:P.type,skillId:P.skill_id,version:P.version})))!=null?A:null}:null,_={..._,...M.usage};return}case"message_stop":{Z.enqueue({type:"finish",finishReason:p,usage:g,providerMetadata:{anthropic:{usage:_!=null?_:null,cacheCreationInputTokens:w,stopSequence:x,container:f}}});return}case"error":{Z.enqueue({type:"error",error:M.error});return}default:{let P=M;throw new Error(`Unsupported chunk type: ${P}`)}}}})),[O,L]=$.tee(),F=O.getReader();try{await F.read();let U=await F.read();if(((t=U.value)==null?void 0:t.type)==="raw"&&(U=await F.read()),((r=U.value)==null?void 0:r.type)==="error"){let Z=U.value.error;throw new dt({message:Z.message,url:l,requestBodyValues:o,statusCode:Z.type==="overloaded_error"?529:500,responseHeaders:d,responseBody:JSON.stringify(Z),isRetryable:Z.type==="overloaded_error"})}}finally{F.cancel().catch(()=>{}),F.releaseLock()}return{stream:L,request:{body:o},response:{headers:d}}}};function MU(e){return e.includes("claude-sonnet-4-5")||e.includes("claude-opus-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!0,isKnownModel:!0}:e.includes("claude-opus-4-1")?{maxOutputTokens:32e3,supportsStructuredOutput:!0,isKnownModel:!0}:e.includes("claude-sonnet-4-")||e.includes("claude-3-7-sonnet")||e.includes("claude-haiku-4-5")?{maxOutputTokens:64e3,supportsStructuredOutput:!1,isKnownModel:!0}:e.includes("claude-opus-4-")?{maxOutputTokens:32e3,supportsStructuredOutput:!1,isKnownModel:!0}:e.includes("claude-3-5-haiku")?{maxOutputTokens:8192,supportsStructuredOutput:!1,isKnownModel:!0}:e.includes("claude-3-haiku")?{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!0}:{maxOutputTokens:4096,supportsStructuredOutput:!1,isKnownModel:!1}}var DU=j(()=>R(a.object({command:a.string(),restart:a.boolean().optional()}))),zU=Je({id:"anthropic.bash_20241022",inputSchema:DU}),UU=j(()=>R(a.object({command:a.string(),restart:a.boolean().optional()}))),FU=Je({id:"anthropic.bash_20250124",inputSchema:UU}),LU=j(()=>R(a.object({action:a.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:a.array(a.number().int()).optional(),text:a.string().optional()}))),ZU=Je({id:"anthropic.computer_20241022",inputSchema:LU}),qU=j(()=>R(a.object({action:a.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:a.tuple([a.number().int(),a.number().int()]).optional(),duration:a.number().optional(),scroll_amount:a.number().optional(),scroll_direction:a.enum(["up","down","left","right"]).optional(),start_coordinate:a.tuple([a.number().int(),a.number().int()]).optional(),text:a.string().optional()}))),VU=Je({id:"anthropic.computer_20250124",inputSchema:qU}),GU=j(()=>R(a.discriminatedUnion("command",[a.object({command:a.literal("view"),path:a.string(),view_range:a.tuple([a.number(),a.number()]).optional()}),a.object({command:a.literal("create"),path:a.string(),file_text:a.string()}),a.object({command:a.literal("str_replace"),path:a.string(),old_str:a.string(),new_str:a.string()}),a.object({command:a.literal("insert"),path:a.string(),insert_line:a.number(),insert_text:a.string()}),a.object({command:a.literal("delete"),path:a.string()}),a.object({command:a.literal("rename"),old_path:a.string(),new_path:a.string()})]))),JU=Je({id:"anthropic.memory_20250818",inputSchema:GU}),BU=j(()=>R(a.object({command:a.enum(["view","create","str_replace","insert","undo_edit"]),path:a.string(),file_text:a.string().optional(),insert_line:a.number().int().optional(),new_str:a.string().optional(),old_str:a.string().optional(),view_range:a.array(a.number().int()).optional()}))),HU=Je({id:"anthropic.text_editor_20241022",inputSchema:BU}),WU=j(()=>R(a.object({command:a.enum(["view","create","str_replace","insert","undo_edit"]),path:a.string(),file_text:a.string().optional(),insert_line:a.number().int().optional(),new_str:a.string().optional(),old_str:a.string().optional(),view_range:a.array(a.number().int()).optional()}))),KU=Je({id:"anthropic.text_editor_20250124",inputSchema:WU}),YU=j(()=>R(a.object({command:a.enum(["view","create","str_replace","insert"]),path:a.string(),file_text:a.string().optional(),insert_line:a.number().int().optional(),new_str:a.string().optional(),old_str:a.string().optional(),view_range:a.array(a.number().int()).optional()}))),XU=Je({id:"anthropic.text_editor_20250429",inputSchema:YU}),QU=j(()=>R(a.array(a.object({type:a.literal("tool_reference"),toolName:a.string()})))),e2=j(()=>R(a.object({query:a.string(),limit:a.number().optional()}))),t2=Te({id:"anthropic.tool_search_bm25_20251119",inputSchema:e2,outputSchema:QU}),r2=(e={})=>t2(e),n2={bash_20241022:zU,bash_20250124:FU,codeExecution_20250522:IU,codeExecution_20250825:EU,computer_20241022:ZU,computer_20250124:VU,memory_20250818:JU,textEditor_20241022:HU,textEditor_20250124:KU,textEditor_20250429:XU,textEditor_20250728:mU,webFetch_20250910:xU,webSearch_20250305:vU,toolSearchRegex_20251119:PU,toolSearchBm25_20251119:r2};function eg(e={}){var t,r;let o=(t=wn(kl({settingValue:e.baseURL,environmentVariableName:"ANTHROPIC_BASE_URL"})))!=null?t:"https://api.anthropic.com/v1",n=(r=e.name)!=null?r:"anthropic.messages",i=()=>en({"anthropic-version":"2023-06-01","x-api-key":Do({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...e.headers},`ai-sdk/anthropic/${nU}`),s=c=>{var l;return new jU(c,{provider:n,baseURL:o,headers:i,fetch:e.fetch,generateId:(l=e.generateId)!=null?l:ze,supportedUrls:()=>({"image/*":[/^https?:\/\/.*$/]})})},u=function(c){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return s(c)};return u.specificationVersion="v3",u.languageModel=s,u.chat=s,u.messages=s,u.embeddingModel=c=>{throw new $f({modelId:c,modelType:"embeddingModel"})},u.imageModel=c=>{throw new $f({modelId:c,modelType:"imageModel"})},u.tools=n2,u}var gW=eg();var st={apiKey:"",aiService:Ze,max_tokens:400,model:"anthropic@claude-sonnet-4-20250514",stream:!0,system_commands:null,tags:[],temperature:.7,title:"Untitled",url:"https://api.anthropic.com"},Ul=class extends Ct{constructor(){super();this.serviceType=Ze}getDefaultConfig(){return st}getApiKeyFromSettings(r){return this.apiAuthService.getApiKey(r,Ze)}async fetchAvailableModels(r,o){try{if(!o||!rt(o))return[];let n=`${r.replace(/\/$/,"")}/v1/models`,s=(await(0,uT.requestUrl)({url:n,method:"GET",headers:{"x-api-key":o,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true","Content-Type":"application/json"}})).json;return s.data&&Array.isArray(s.data)?s.data.filter(u=>u.type==="model"&&u.id).map(u=>`anthropic@${u.id}`).sort():[]}catch(n){return[]}}getSystemMessageRole(){return hr}supportsSystemField(){return!0}ensureProvider(r,o){let n=this.apiService.createFetchAdapter();this.provider=eg({apiKey:r,baseURL:`${o.url}/v1`,headers:{"anthropic-dangerous-direct-browser-access":"true"},fetch:n})}async callStreamingAPI(r,o,n,i,s,u,c,l){this.ensureProvider(r,n);let d=this.extractModelName(n.model),m=l==null?void 0:l.getToolsForRequest(c);return this.callAiSdkStreamText(this.provider(d),d,o,n,i,s,u,m,l)}async callNonStreamingAPI(r,o,n,i,s,u){this.ensureProvider(r,n);let c=this.extractModelName(n.model),l=u==null?void 0:u.getToolsForRequest(i);return this.callAiSdkGenerateText(this.provider(c),c,o,l,u)}};var vT=require("obsidian");var o2="3.0.0-beta.66",a2=j(()=>R(a.object({error:a.object({code:a.number().nullable(),message:a.string(),status:a.string()})}))),wi=Pt({errorSchema:a2,errorToMessage:e=>e.error.message}),i2=j(()=>R(a.object({outputDimensionality:a.number().optional(),taskType:a.enum(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),s2=class{constructor(e,t){this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:o}){let n=await we({provider:"google",providerOptions:o,schema:i2});if(e.length>this.maxEmbeddingsPerCall)throw new Mo({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});let i=_e(await Or(this.config.headers),t);if(e.length===1){let{responseHeaders:l,value:d,rawValue:m}=await be({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:i,body:{model:`models/${this.modelId}`,content:{parts:[{text:e[0]}]},outputDimensionality:n==null?void 0:n.outputDimensionality,taskType:n==null?void 0:n.taskType},failedResponseHandler:wi,successfulResponseHandler:Re(u2),abortSignal:r,fetch:this.config.fetch});return{warnings:[],embeddings:[d.embedding.values],usage:void 0,response:{headers:l,body:m}}}let{responseHeaders:s,value:u,rawValue:c}=await be({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:i,body:{requests:e.map(l=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:l}]},outputDimensionality:n==null?void 0:n.outputDimensionality,taskType:n==null?void 0:n.taskType}))},failedResponseHandler:wi,successfulResponseHandler:Re(l2),abortSignal:r,fetch:this.config.fetch});return{warnings:[],embeddings:u.embeddings.map(l=>l.values),usage:void 0,response:{headers:s,body:c}}}},l2=j(()=>R(a.object({embeddings:a.array(a.object({values:a.array(a.number())}))}))),u2=j(()=>R(a.object({embedding:a.object({values:a.array(a.number())})})));function Rr(e){if(e==null||c2(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};let{type:t,description:r,required:o,properties:n,items:i,allOf:s,anyOf:u,oneOf:c,format:l,const:d,minLength:m,enum:p}=e,g={};if(r&&(g.description=r),o&&(g.required=o),l&&(g.format=l),d!==void 0&&(g.enum=[d]),t)if(Array.isArray(t)){let h=t.includes("null"),v=t.filter(_=>_!=="null");v.length===0?g.type="null":(g.anyOf=v.map(_=>({type:_})),h&&(g.nullable=!0))}else g.type=t;if(p!==void 0&&(g.enum=p),n!=null&&(g.properties=Object.entries(n).reduce((h,[v,_])=>(h[v]=Rr(_),h),{})),i&&(g.items=Array.isArray(i)?i.map(Rr):Rr(i)),s&&(g.allOf=s.map(Rr)),u)if(u.some(h=>typeof h=="object"&&(h==null?void 0:h.type)==="null")){let h=u.filter(v=>!(typeof v=="object"&&(v==null?void 0:v.type)==="null"));if(h.length===1){let v=Rr(h[0]);typeof v=="object"&&(g.nullable=!0,Object.assign(g,v))}else g.anyOf=h.map(Rr),g.nullable=!0}else g.anyOf=u.map(Rr);return c&&(g.oneOf=c.map(Rr)),m!==void 0&&(g.minLength=m),g}function c2(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)&&!e.additionalProperties}function d2(e,t){var r,o;let n=[],i=[],s=!0,u=(r=t==null?void 0:t.isGemmaModel)!=null?r:!1;for(let{role:c,content:l}of e)switch(c){case"system":{if(!s)throw new xe({functionality:"system messages are only supported at the beginning of the conversation"});n.push({text:l});break}case"user":{s=!1;let d=[];for(let m of l)switch(m.type){case"text":{d.push({text:m.text});break}case"file":{let p=m.mediaType==="image/*"?"image/jpeg":m.mediaType;d.push(m.data instanceof URL?{fileData:{mimeType:p,fileUri:m.data.toString()}}:{inlineData:{mimeType:p,data:ht(m.data)}});break}}i.push({role:"user",parts:d});break}case"assistant":{s=!1,i.push({role:"model",parts:l.map(d=>{var m,p,g;let h=((p=(m=d.providerOptions)==null?void 0:m.google)==null?void 0:p.thoughtSignature)!=null?String((g=d.providerOptions.google)==null?void 0:g.thoughtSignature):void 0;switch(d.type){case"text":return d.text.length===0?void 0:{text:d.text,thoughtSignature:h};case"reasoning":return d.text.length===0?void 0:{text:d.text,thought:!0,thoughtSignature:h};case"file":{if(d.data instanceof URL)throw new xe({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:d.mediaType,data:ht(d.data)},thoughtSignature:h}}case"tool-call":return{functionCall:{name:d.toolName,args:d.input},thoughtSignature:h}}}).filter(d=>d!==void 0)});break}case"tool":{s=!1;let d=[];for(let m of l){let p=m.output;if(p.type==="content")for(let g of p.value)switch(g.type){case"text":d.push({functionResponse:{name:m.toolName,response:{name:m.toolName,content:g.text}}});break;case"image-data":d.push({inlineData:{mimeType:g.mediaType,data:g.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:d.push({text:JSON.stringify(g)});break}else d.push({functionResponse:{name:m.toolName,response:{name:m.toolName,content:p.type==="execution-denied"?(o=p.reason)!=null?o:"Tool execution denied.":p.value}}})}i.push({role:"user",parts:d});break}}if(u&&n.length>0&&i.length>0&&i[0].role==="user"){let c=n.map(l=>l.text).join(`

`);i[0].parts.unshift({text:c+`

`})}return{systemInstruction:n.length>0&&!u?{parts:n}:void 0,contents:i}}function cT(e){return e.includes("/")?e:`models/${e}`}var p2=j(()=>R(a.object({responseModalities:a.array(a.enum(["TEXT","IMAGE"])).optional(),thinkingConfig:a.object({thinkingBudget:a.number().optional(),includeThoughts:a.boolean().optional(),thinkingLevel:a.enum(["low","medium","high"]).optional()}).optional(),cachedContent:a.string().optional(),structuredOutputs:a.boolean().optional(),safetySettings:a.array(a.object({category:a.enum(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:a.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:a.enum(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:a.boolean().optional(),labels:a.record(a.string(),a.string()).optional(),mediaResolution:a.enum(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:a.object({aspectRatio:a.enum(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:a.enum(["1K","2K","4K"]).optional()}).optional()})));function m2({tools:e,toolChoice:t,modelId:r}){var o;e=e!=null&&e.length?e:void 0;let n=[],i=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(g=>g===r),s=r.includes("gemini-2")||r.includes("gemini-3")||i,u=r.includes("gemini-1.5-flash")&&!r.includes("-8b"),c=r.includes("gemini-2.5");if(e==null)return{tools:void 0,toolConfig:void 0,toolWarnings:n};let l=e.some(g=>g.type==="function"),d=e.some(g=>g.type==="provider");if(l&&d&&n.push({type:"unsupported",feature:"combination of function and provider-defined tools"}),d){let g=[];return e.filter(v=>v.type==="provider").forEach(v=>{switch(v.id){case"google.google_search":s?g.push({googleSearch:{}}):u?g.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:v.args.mode,dynamicThreshold:v.args.dynamicThreshold}}}):g.push({googleSearchRetrieval:{}});break;case"google.url_context":s?g.push({urlContext:{}}):n.push({type:"unsupported",feature:`provider-defined tool ${v.id}`,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":s?g.push({codeExecution:{}}):n.push({type:"unsupported",feature:`provider-defined tool ${v.id}`,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":c?g.push({fileSearch:{...v.args}}):n.push({type:"unsupported",feature:`provider-defined tool ${v.id}`,details:"The file search tool is only supported with Gemini 2.5 models."});break;case"google.vertex_rag_store":s?g.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:v.args.ragCorpus},similarity_top_k:v.args.topK}}}):n.push({type:"unsupported",feature:`provider-defined tool ${v.id}`,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;default:n.push({type:"unsupported",feature:`provider-defined tool ${v.id}`});break}}),{tools:g.length>0?g:void 0,toolConfig:void 0,toolWarnings:n}}let m=[];for(let g of e)switch(g.type){case"function":m.push({name:g.name,description:(o=g.description)!=null?o:"",parameters:Rr(g.inputSchema)});break;default:n.push({type:"unsupported",feature:`function tool ${g.name}`});break}if(t==null)return{tools:[{functionDeclarations:m}],toolConfig:void 0,toolWarnings:n};let p=t.type;switch(p){case"auto":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:n};case"none":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:n};case"required":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:n};case"tool":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[t.toolName]}},toolWarnings:n};default:{let g=p;throw new xe({functionality:`tool choice type: ${g}`})}}}function dT({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var f2=class{constructor(e,t){this.specificationVersion="v3";var r;this.modelId=e,this.config=t,this.generateId=(r=t.generateId)!=null?r:ze}get provider(){return this.config.provider}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:o,topK:n,frequencyPenalty:i,presencePenalty:s,stopSequences:u,responseFormat:c,seed:l,tools:d,toolChoice:m,providerOptions:p}){var g;let h=[],v=await we({provider:"google",providerOptions:p,schema:p2});d!=null&&d.some(k=>k.type==="provider"&&k.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&h.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});let _=this.modelId.toLowerCase().startsWith("gemma-"),{contents:w,systemInstruction:x}=d2(e,{isGemmaModel:_}),{tools:f,toolConfig:b,toolWarnings:y}=m2({tools:d,toolChoice:m,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:t,temperature:r,topK:n,topP:o,frequencyPenalty:i,presencePenalty:s,stopSequences:u,seed:l,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&((g=v==null?void 0:v.structuredOutputs)==null||g)?Rr(c.schema):void 0,...(v==null?void 0:v.audioTimestamp)&&{audioTimestamp:v.audioTimestamp},responseModalities:v==null?void 0:v.responseModalities,thinkingConfig:v==null?void 0:v.thinkingConfig,...(v==null?void 0:v.mediaResolution)&&{mediaResolution:v.mediaResolution},...(v==null?void 0:v.imageConfig)&&{imageConfig:v.imageConfig}},contents:w,systemInstruction:_?void 0:x,safetySettings:v==null?void 0:v.safetySettings,tools:f,toolConfig:b,cachedContent:v==null?void 0:v.cachedContent,labels:v==null?void 0:v.labels},warnings:[...h,...y]}}async doGenerate(e){var t,r,o,n,i,s,u,c,l,d,m,p,g;let{args:h,warnings:v}=await this.getArgs(e),_=JSON.stringify(h),w=_e(await Or(this.config.headers),e.headers),{responseHeaders:x,value:f,rawValue:b}=await be({url:`${this.config.baseURL}/${cT(this.modelId)}:generateContent`,headers:w,body:h,failedResponseHandler:wi,successfulResponseHandler:Re(h2),abortSignal:e.abortSignal,fetch:this.config.fetch}),y=f.candidates[0],k=[],$=(r=(t=y.content)==null?void 0:t.parts)!=null?r:[],O=f.usageMetadata,L;for(let U of $)if("executableCode"in U&&((o=U.executableCode)!=null&&o.code)){let Z=this.config.generateId();L=Z,k.push({type:"tool-call",toolCallId:Z,toolName:"code_execution",input:JSON.stringify(U.executableCode),providerExecuted:!0})}else"codeExecutionResult"in U&&U.codeExecutionResult?(k.push({type:"tool-result",toolCallId:L,toolName:"code_execution",result:{outcome:U.codeExecutionResult.outcome,output:U.codeExecutionResult.output}}),L=void 0):"text"in U&&U.text!=null&&U.text.length>0?k.push({type:U.thought===!0?"reasoning":"text",text:U.text,providerMetadata:U.thoughtSignature?{google:{thoughtSignature:U.thoughtSignature}}:void 0}):"functionCall"in U?k.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:U.functionCall.name,input:JSON.stringify(U.functionCall.args),providerMetadata:U.thoughtSignature?{google:{thoughtSignature:U.thoughtSignature}}:void 0}):"inlineData"in U&&k.push({type:"file",data:U.inlineData.data,mediaType:U.inlineData.mimeType,providerMetadata:U.thoughtSignature?{google:{thoughtSignature:U.thoughtSignature}}:void 0});let F=(n=pT({groundingMetadata:y.groundingMetadata,generateId:this.config.generateId}))!=null?n:[];for(let U of F)k.push(U);return{content:k,finishReason:dT({finishReason:y.finishReason,hasToolCalls:k.some(U=>U.type==="tool-call")}),usage:{inputTokens:(i=O==null?void 0:O.promptTokenCount)!=null?i:void 0,outputTokens:(s=O==null?void 0:O.candidatesTokenCount)!=null?s:void 0,totalTokens:(u=O==null?void 0:O.totalTokenCount)!=null?u:void 0,reasoningTokens:(c=O==null?void 0:O.thoughtsTokenCount)!=null?c:void 0,cachedInputTokens:(l=O==null?void 0:O.cachedContentTokenCount)!=null?l:void 0},warnings:v,providerMetadata:{google:{promptFeedback:(d=f.promptFeedback)!=null?d:null,groundingMetadata:(m=y.groundingMetadata)!=null?m:null,urlContextMetadata:(p=y.urlContextMetadata)!=null?p:null,safetyRatings:(g=y.safetyRatings)!=null?g:null,usageMetadata:O!=null?O:null}},request:{body:_},response:{headers:x,body:b}}}async doStream(e){let{args:t,warnings:r}=await this.getArgs(e),o=JSON.stringify(t),n=_e(await Or(this.config.headers),e.headers),{responseHeaders:i,value:s}=await be({url:`${this.config.baseURL}/${cT(this.modelId)}:streamGenerateContent?alt=sse`,headers:n,body:t,failedResponseHandler:wi,successfulResponseHandler:Ot(v2),abortSignal:e.abortSignal,fetch:this.config.fetch}),u="unknown",c={inputTokens:void 0,outputTokens:void 0,totalTokens:void 0},l,d=this.config.generateId,m=!1,p=null,g=null,h=0,v=new Set,_;return{stream:s.pipeThrough(new TransformStream({start(w){w.enqueue({type:"stream-start",warnings:r})},transform(w,x){var f,b,y,k,$,O,L,F,U,Z,E,z;if(e.includeRawChunks&&x.enqueue({type:"raw",rawValue:w.rawValue}),!w.success){x.enqueue({type:"error",error:w.error});return}let J=w.value,B=J.usageMetadata;B!=null&&(c.inputTokens=(f=B.promptTokenCount)!=null?f:void 0,c.outputTokens=(b=B.candidatesTokenCount)!=null?b:void 0,c.totalTokens=(y=B.totalTokenCount)!=null?y:void 0,c.reasoningTokens=(k=B.thoughtsTokenCount)!=null?k:void 0,c.cachedInputTokens=($=B.cachedContentTokenCount)!=null?$:void 0);let D=(O=J.candidates)==null?void 0:O[0];if(D==null)return;let H=D.content,G=pT({groundingMetadata:D.groundingMetadata,generateId:d});if(G!=null)for(let C of G)C.sourceType==="url"&&!v.has(C.url)&&(v.add(C.url),x.enqueue(C));if(H!=null){let C=(L=H.parts)!=null?L:[];for(let A of C)if("executableCode"in A&&((F=A.executableCode)!=null&&F.code)){let M=d();_=M,x.enqueue({type:"tool-call",toolCallId:M,toolName:"code_execution",input:JSON.stringify(A.executableCode),providerExecuted:!0}),m=!0}else if("codeExecutionResult"in A&&A.codeExecutionResult){let M=_;M&&(x.enqueue({type:"tool-result",toolCallId:M,toolName:"code_execution",result:{outcome:A.codeExecutionResult.outcome,output:A.codeExecutionResult.output}}),_=void 0)}else"text"in A&&A.text!=null&&A.text.length>0?A.thought===!0?(p!==null&&(x.enqueue({type:"text-end",id:p}),p=null),g===null&&(g=String(h++),x.enqueue({type:"reasoning-start",id:g,providerMetadata:A.thoughtSignature?{google:{thoughtSignature:A.thoughtSignature}}:void 0})),x.enqueue({type:"reasoning-delta",id:g,delta:A.text,providerMetadata:A.thoughtSignature?{google:{thoughtSignature:A.thoughtSignature}}:void 0})):(g!==null&&(x.enqueue({type:"reasoning-end",id:g}),g=null),p===null&&(p=String(h++),x.enqueue({type:"text-start",id:p,providerMetadata:A.thoughtSignature?{google:{thoughtSignature:A.thoughtSignature}}:void 0})),x.enqueue({type:"text-delta",id:p,delta:A.text,providerMetadata:A.thoughtSignature?{google:{thoughtSignature:A.thoughtSignature}}:void 0})):"inlineData"in A&&x.enqueue({type:"file",mediaType:A.inlineData.mimeType,data:A.inlineData.data});let Q=g2({parts:H.parts,generateId:d});if(Q!=null)for(let A of Q)x.enqueue({type:"tool-input-start",id:A.toolCallId,toolName:A.toolName,providerMetadata:A.providerMetadata}),x.enqueue({type:"tool-input-delta",id:A.toolCallId,delta:A.args,providerMetadata:A.providerMetadata}),x.enqueue({type:"tool-input-end",id:A.toolCallId,providerMetadata:A.providerMetadata}),x.enqueue({type:"tool-call",toolCallId:A.toolCallId,toolName:A.toolName,input:A.args,providerMetadata:A.providerMetadata}),m=!0}D.finishReason!=null&&(u=dT({finishReason:D.finishReason,hasToolCalls:m}),l={google:{promptFeedback:(U=J.promptFeedback)!=null?U:null,groundingMetadata:(Z=D.groundingMetadata)!=null?Z:null,urlContextMetadata:(E=D.urlContextMetadata)!=null?E:null,safetyRatings:(z=D.safetyRatings)!=null?z:null}},B!=null&&(l.google.usageMetadata=B))},flush(w){p!==null&&w.enqueue({type:"text-end",id:p}),g!==null&&w.enqueue({type:"reasoning-end",id:g}),w.enqueue({type:"finish",finishReason:u,usage:c,providerMetadata:l})}})),response:{headers:i},request:{body:o}}}};function g2({parts:e,generateId:t}){let r=e==null?void 0:e.filter(o=>"functionCall"in o);return r==null||r.length===0?void 0:r.map(o=>({type:"tool-call",toolCallId:t(),toolName:o.functionCall.name,args:JSON.stringify(o.functionCall.args),providerMetadata:o.thoughtSignature?{google:{thoughtSignature:o.thoughtSignature}}:void 0}))}function pT({groundingMetadata:e,generateId:t}){var r,o,n,i;if(!(e!=null&&e.groundingChunks))return;let s=[];for(let u of e.groundingChunks)if(u.web!=null)s.push({type:"source",sourceType:"url",id:t(),url:u.web.uri,title:(r=u.web.title)!=null?r:void 0});else if(u.retrievedContext!=null){let c=u.retrievedContext.uri,l=u.retrievedContext.fileSearchStore;if(c&&(c.startsWith("http://")||c.startsWith("https://")))s.push({type:"source",sourceType:"url",id:t(),url:c,title:(o=u.retrievedContext.title)!=null?o:void 0});else if(c){let d=(n=u.retrievedContext.title)!=null?n:"Unknown Document",m="application/octet-stream",p;c.endsWith(".pdf")?(m="application/pdf",p=c.split("/").pop()):c.endsWith(".txt")?(m="text/plain",p=c.split("/").pop()):c.endsWith(".docx")?(m="application/vnd.openxmlformats-officedocument.wordprocessingml.document",p=c.split("/").pop()):c.endsWith(".doc")?(m="application/msword",p=c.split("/").pop()):(c.match(/\.(md|markdown)$/)&&(m="text/markdown"),p=c.split("/").pop()),s.push({type:"source",sourceType:"document",id:t(),mediaType:m,title:d,filename:p})}else if(l){let d=(i=u.retrievedContext.title)!=null?i:"Unknown Document";s.push({type:"source",sourceType:"document",id:t(),mediaType:"application/octet-stream",title:d,filename:l.split("/").pop()})}}return s.length>0?s:void 0}var mT=()=>a.object({webSearchQueries:a.array(a.string()).nullish(),retrievalQueries:a.array(a.string()).nullish(),searchEntryPoint:a.object({renderedContent:a.string()}).nullish(),groundingChunks:a.array(a.object({web:a.object({uri:a.string(),title:a.string().nullish()}).nullish(),retrievedContext:a.object({uri:a.string().nullish(),title:a.string().nullish(),text:a.string().nullish(),fileSearchStore:a.string().nullish()}).nullish()})).nullish(),groundingSupports:a.array(a.object({segment:a.object({startIndex:a.number().nullish(),endIndex:a.number().nullish(),text:a.string().nullish()}),segment_text:a.string().nullish(),groundingChunkIndices:a.array(a.number()).nullish(),supportChunkIndices:a.array(a.number()).nullish(),confidenceScores:a.array(a.number()).nullish(),confidenceScore:a.array(a.number()).nullish()})).nullish(),retrievalMetadata:a.union([a.object({webDynamicRetrievalScore:a.number()}),a.object({})]).nullish()}),fT=()=>a.object({parts:a.array(a.union([a.object({functionCall:a.object({name:a.string(),args:a.unknown()}),thoughtSignature:a.string().nullish()}),a.object({inlineData:a.object({mimeType:a.string(),data:a.string()}),thoughtSignature:a.string().nullish()}),a.object({executableCode:a.object({language:a.string(),code:a.string()}).nullish(),codeExecutionResult:a.object({outcome:a.string(),output:a.string()}).nullish(),text:a.string().nullish(),thought:a.boolean().nullish(),thoughtSignature:a.string().nullish()})])).nullish()}),Fl=()=>a.object({category:a.string().nullish(),probability:a.string().nullish(),probabilityScore:a.number().nullish(),severity:a.string().nullish(),severityScore:a.number().nullish(),blocked:a.boolean().nullish()}),gT=a.object({cachedContentTokenCount:a.number().nullish(),thoughtsTokenCount:a.number().nullish(),promptTokenCount:a.number().nullish(),candidatesTokenCount:a.number().nullish(),totalTokenCount:a.number().nullish(),trafficType:a.string().nullish()}),hT=()=>a.object({urlMetadata:a.array(a.object({retrievedUrl:a.string(),urlRetrievalStatus:a.string()}))}),h2=j(()=>R(a.object({candidates:a.array(a.object({content:fT().nullish().or(a.object({}).strict()),finishReason:a.string().nullish(),safetyRatings:a.array(Fl()).nullish(),groundingMetadata:mT().nullish(),urlContextMetadata:hT().nullish()})),usageMetadata:gT.nullish(),promptFeedback:a.object({blockReason:a.string().nullish(),safetyRatings:a.array(Fl()).nullish()}).nullish()}))),v2=j(()=>R(a.object({candidates:a.array(a.object({content:fT().nullish(),finishReason:a.string().nullish(),safetyRatings:a.array(Fl()).nullish(),groundingMetadata:mT().nullish(),urlContextMetadata:hT().nullish()})).nullish(),usageMetadata:gT.nullish(),promptFeedback:a.object({blockReason:a.string().nullish(),safetyRatings:a.array(Fl()).nullish()}).nullish()}))),y2=Te({id:"google.code_execution",inputSchema:a.object({language:a.string().describe("The programming language of the code."),code:a.string().describe("The code to be executed.")}),outputSchema:a.object({outcome:a.string().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:a.string().describe("The output from the code execution.")})}),_2=a.object({fileSearchStoreNames:a.array(a.string()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:a.number().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:a.string().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),b2=j(()=>R(_2)),x2=Je({id:"google.file_search",inputSchema:b2}),w2=Je({id:"google.google_search",inputSchema:j(()=>R(a.object({mode:a.enum(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:a.number().default(1)})))}),S2=Je({id:"google.url_context",inputSchema:j(()=>R(a.object({})))}),k2=Je({id:"google.vertex_rag_store",inputSchema:a.object({ragCorpus:a.string(),topK:a.number().optional()})}),I2={googleSearch:w2,urlContext:S2,fileSearch:x2,codeExecution:y2,vertexRagStore:k2},T2=class{constructor(e,t,r){this.modelId=e,this.settings=t,this.config=r,this.specificationVersion="v3"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:4}get provider(){return this.config.provider}async doGenerate(e){var t,r,o;let{prompt:n,n:i=1,size:s="1024x1024",aspectRatio:u="1:1",seed:c,providerOptions:l,headers:d,abortSignal:m}=e,p=[];s!=null&&p.push({type:"unsupported",feature:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),c!=null&&p.push({type:"unsupported",feature:"seed",details:"This model does not support the `seed` option through this provider."});let g=await we({provider:"google",providerOptions:l,schema:E2}),h=(o=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?o:new Date,v={sampleCount:i};u!=null&&(v.aspectRatio=u),g&&Object.assign(v,g);let _={instances:[{prompt:n}],parameters:v},{responseHeaders:w,value:x}=await be({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:_e(await Or(this.config.headers),d),body:_,failedResponseHandler:wi,successfulResponseHandler:Re($2),abortSignal:m,fetch:this.config.fetch});return{images:x.predictions.map(f=>f.bytesBase64Encoded),warnings:p!=null?p:[],providerMetadata:{google:{images:x.predictions.map(f=>({}))}},response:{timestamp:h,modelId:this.modelId,headers:w}}}},$2=j(()=>R(a.object({predictions:a.array(a.object({bytesBase64Encoded:a.string()})).default([])}))),E2=j(()=>R(a.object({personGeneration:a.enum(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:a.enum(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function Ll(e={}){var t,r;let o=(t=wn(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",n=(r=e.name)!=null?r:"google.generative-ai",i=()=>en({"x-goog-api-key":Do({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers},`ai-sdk/google/${o2}`),s=d=>{var m;return new f2(d,{provider:n,baseURL:o,headers:i,generateId:(m=e.generateId)!=null?m:ze,supportedUrls:()=>({"*":[new RegExp(`^${o}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:e.fetch})},u=d=>new s2(d,{provider:n,baseURL:o,headers:i,fetch:e.fetch}),c=(d,m={})=>new T2(d,m,{provider:n,baseURL:o,headers:i,fetch:e.fetch}),l=function(d){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return s(d)};return l.specificationVersion="v3",l.languageModel=s,l.chat=s,l.generativeAI=s,l.embedding=u,l.embeddingModel=u,l.image=c,l.imageModel=c,l.tools=I2,l}var eK=Ll();var et={apiKey:"",aiService:qe,max_tokens:400,model:"gemini@gemini-2.5-flash",stream:!0,system_commands:null,tags:[],temperature:.7,title:"Untitled",top_p:.95,url:"https://generativelanguage.googleapis.com"},Zl=class extends Ct{constructor(){super();this.serviceType=qe;this.provider=Ll({apiKey:""})}getDefaultConfig(){return et}getApiKeyFromSettings(r){return this.apiAuthService.getApiKey(r,qe)}async fetchAvailableModels(r,o){try{if(!o||!rt(o))return[];let n=`${r.replace(/\/$/,"")}/v1beta/models`,s=(await(0,vT.requestUrl)({url:n,method:"GET",headers:{"x-goog-api-key":o,"Content-Type":"application/json"}})).json;return s.models&&Array.isArray(s.models)?s.models.filter(u=>u.name&&u.supportedGenerationMethods&&u.supportedGenerationMethods.includes("generateContent")&&!u.name.includes("embedding")).map(u=>`gemini@${u.name.replace("models/","")}`).sort():[]}catch(n){return[]}}getSystemMessageRole(){return hr}supportsSystemField(){return!1}ensureProvider(r,o){let n=this.apiService.createFetchAdapter();this.provider=Ll({apiKey:r,baseURL:`${o.url}/v1`,fetch:n})}async callStreamingAPI(r,o,n,i,s,u,c,l){this.ensureProvider(r,n);let d=this.extractModelName(n.model),m=l==null?void 0:l.getToolsForRequest(c);return this.callAiSdkStreamText(this.provider(d),d,o,n,i,s,u,m,l)}async callNonStreamingAPI(r,o,n,i,s,u){this.ensureProvider(r,n);let c=this.extractModelName(n.model),l=u==null?void 0:u.getToolsForRequest(i);return this.callAiSdkGenerateText(this.provider(c),c,o,l,u)}};var ql=class{constructor(t,r){this.app=t;this.frontmatterManager=r}async getFrontmatter(t,r){let o={};if(t.file){let l=await this.frontmatterManager.readFrontmatter(t.file);l&&(o={...l})}let n=r.defaultChatFrontmatter?hu(r.defaultChatFrontmatter):{},i={...n,...r,...o},s=i.aiService||fS(i.url,i.model)||gS(i)||Ie;return{...{[Ie]:$e,[Me]:Zt,[Ee]:Be,[Le]:Qe,[Ze]:st,[qe]:et}[s]||$e,...n,...r,...o,aiService:s}}async updateFrontmatterField(t,r,o){let n=this.app.workspace.getActiveViewOfType(yT.MarkdownView);if(!n||!n.file)return;let i=n.file;try{await this.frontmatterManager.updateFrontmatterField(i,r,o)}catch(s){throw s}}objectToYamlFrontmatter(t){return`---
${Object.entries(t).map(([o,n])=>n==null?`${o}:`:typeof n=="string"?`${o}: "${n}"`:`${o}: ${n}`).join(`
`)}
---

`}generateFrontmatter(t,r={}){if(t.defaultChatFrontmatter){if(Object.keys(r).length>0){let s={...hu(t.defaultChatFrontmatter),...r};return this.objectToYamlFrontmatter(s)}return t.defaultChatFrontmatter+`

`}let o=r.aiService||Ie,n={stream:t.stream,...r};switch(o){case Ie:n={...n,model:t.openaiDefaultModel,temperature:t.openaiDefaultTemperature,top_p:t.openaiDefaultTopP,max_tokens:t.openaiDefaultMaxTokens,presence_penalty:t.openaiDefaultPresencePenalty,frequency_penalty:t.openaiDefaultFrequencyPenalty};break;case Me:n={...n,url:t.ollamaUrl,temperature:t.ollamaDefaultTemperature,top_p:t.ollamaDefaultTopP};break;case Ee:n={...n,model:t.openrouterDefaultModel,temperature:t.openrouterDefaultTemperature,top_p:t.openrouterDefaultTopP,max_tokens:t.openrouterDefaultMaxTokens,presence_penalty:t.openrouterDefaultPresencePenalty,frequency_penalty:t.openrouterDefaultFrequencyPenalty};break;case Le:n={...n,url:t.lmstudioUrl,temperature:t.lmstudioDefaultTemperature,top_p:t.lmstudioDefaultTopP,presence_penalty:t.lmstudioDefaultPresencePenalty,frequency_penalty:t.lmstudioDefaultFrequencyPenalty};break;case Ze:n={...n,model:t.anthropicDefaultModel,url:t.anthropicUrl,temperature:t.anthropicDefaultTemperature,max_tokens:t.anthropicDefaultMaxTokens};break;case qe:n={...n,model:t.geminiDefaultModel,url:t.geminiUrl,temperature:t.geminiDefaultTemperature,top_p:t.geminiDefaultTopP,max_tokens:t.geminiDefaultMaxTokens};break}return this.objectToYamlFrontmatter(n)}};var Vl=class{constructor(t,r,o,n,i,s){this.app=t;this.fileService=r||new Vn(t),this.editorContentService=o||new Jn(t);let u=new ft;if(this.messageService=n||new Bn(this.fileService,u),!s)throw new Error("FrontmatterService must be provided as it requires FrontmatterManager dependency");this.frontmatterService=s,this.templateService=i||new Hn(t,this.fileService,this.editorContentService)}async writeInferredTitle(t,r){return this.fileService.writeInferredTitle(t,r)}async ensureFolderExists(t,r){return this.fileService.ensureFolderExists(t,r)}getDate(t,r){return this.fileService.formatDate(t,r)}addHorizontalRule(t,r,o){this.editorContentService.addHorizontalRule(t,r,o)}async clearChat(t){await this.editorContentService.clearChat(t)}moveCursorToEnd(t){this.editorContentService.moveCursorToEnd(t)}async getMessagesFromEditor(t,r){return this.messageService.getMessagesFromEditor(t,r)}async createNewChatFromTemplate(t,r){return this.templateService.createNewChatFromTemplate(t,r)}async createNewChatWithHighlightedText(t,r){return this.templateService.createNewChatWithHighlightedText(t,r)}async getFrontmatter(t,r,o){return await this.frontmatterService.getFrontmatter(t,r)}processResponse(t,r,o){this.messageService.processResponse(t,r,o)}async setModel(t,r){await this.frontmatterService.updateFrontmatterField(t,"model",r)}};var A2=()=>`---
system_commands: ['You are a helpful assistant.']
frequency_penalty: ${$e.frequency_penalty}
max_tokens: ${$e.max_tokens}
model: ${$e.model}
presence_penalty: ${$e.presence_penalty}
stream: true
temperature: ${$e.temperature}
---`,tg={apiKey:"",openrouterApiKey:"",anthropicApiKey:"",geminiApiKey:"",openaiUrl:$e.url,openrouterUrl:Be.url,ollamaUrl:Zt.url,lmstudioUrl:Qe.url,anthropicUrl:st.url,geminiUrl:et.url,chatFolder:"ChatGPT_MD/chats",chatTemplateFolder:"ChatGPT_MD/templates",stream:!0,generateAtCursor:!1,autoInferTitle:!1,enableToolCalling:!1,debugMode:!1,pluginSystemMessage:Ni,enableWebSearch:!1,webSearchProvider:"brave",webSearchApiKey:"",webSearchApiUrl:"",maxWebSearchResults:5,dateFormat:Oi,headingLevel:Sg,inferTitleLanguage:kg,defaultChatFrontmatter:A2(),openaiDefaultModel:$e.model,openaiDefaultTemperature:$e.temperature,openaiDefaultTopP:$e.top_p,openaiDefaultMaxTokens:$e.max_tokens,openaiDefaultPresencePenalty:$e.presence_penalty,openaiDefaultFrequencyPenalty:$e.frequency_penalty,anthropicDefaultModel:st.model,anthropicDefaultTemperature:st.temperature,anthropicDefaultMaxTokens:st.max_tokens,geminiDefaultModel:et.model,geminiDefaultTemperature:et.temperature,geminiDefaultTopP:et.top_p,geminiDefaultMaxTokens:et.max_tokens,openrouterDefaultModel:Be.model,openrouterDefaultTemperature:Be.temperature,openrouterDefaultTopP:Be.top_p,openrouterDefaultMaxTokens:Be.max_tokens,openrouterDefaultPresencePenalty:Be.presence_penalty,openrouterDefaultFrequencyPenalty:Be.frequency_penalty,ollamaDefaultTemperature:.7,ollamaDefaultTopP:1,lmstudioDefaultTemperature:Qe.temperature,lmstudioDefaultTopP:Qe.top_p,lmstudioDefaultPresencePenalty:Qe.presence_penalty,lmstudioDefaultFrequencyPenalty:Qe.frequency_penalty};var Jl=require("obsidian");var Gl=class extends Jl.PluginSettingTab{constructor(t,r,o){super(t,r),this.settingsProvider=o}display(){let{containerEl:t}=this;t.empty();let r=[{id:"apiKey",name:"OpenAI API Key",description:"API Key for OpenAI",type:"text",placeholder:"your openAI API Key",group:"API Keys"},{id:"openrouterApiKey",name:"OpenRouter.ai API Key",description:"API Key for OpenRouter.ai",type:"text",placeholder:"your openRouter API Key",group:"API Keys"},{id:"anthropicApiKey",name:"Anthropic API Key",description:"API Key for Anthropic (Claude)",type:"text",placeholder:"your Anthropic API Key",group:"API Keys"},{id:"geminiApiKey",name:"Gemini API Key",description:"API Key for Google Gemini (Google AI Studio)",type:"text",placeholder:"your Gemini API Key",group:"API Keys"},{id:"defaultChatFrontmatter",name:"Default Chat Frontmatter",description:"Default frontmatter for new chat files. You can change/use all of the settings exposed by the OpenAI API here: https://platform.openai.com/docs/api-reference/chat/create",type:"textarea",placeholder:this.settingsProvider.settings.defaultChatFrontmatter,group:"Chat Behavior"},{id:"pluginSystemMessage",name:"Plugin System Message",description:"System message that provides context about the Obsidian/ChatGPT MD plugin environment. This helps the AI understand it's working within Obsidian and format responses appropriately.",type:"textarea",group:"Chat Behavior"},{id:"stream",name:"Stream",description:"Stream responses from OpenAI",type:"toggle",group:"Chat Behavior"},{id:"generateAtCursor",name:"Generate at Cursor",description:"Generate text at cursor instead of end of file",type:"toggle",group:"Chat Behavior"},{id:"autoInferTitle",name:"Automatically Infer Title",description:"Automatically infer title after 4 messages have been exchanged",type:"toggle",group:"Chat Behavior"},{id:"inferTitleLanguage",name:"Infer Title Language",description:"Language to use for title inference.",type:"dropdown",options:{English:"English",Japanese:"Japanese",Spanish:"Spanish",French:"French",German:"German",Chinese:"Chinese",Korean:"Korean",Italian:"Italian",Russian:"Russian"},group:"Chat Behavior"},{id:"openaiUrl",name:"OpenAI API URL",description:`URL for OpenAI API
Default URL: ${$e.url}`,type:"text",placeholder:$e.url,group:"OpenAI Defaults"},{id:"openaiDefaultModel",name:"Default OpenAI Model",description:"Default model for OpenAI chats",type:"text",placeholder:"openai@gpt-4",group:"OpenAI Defaults"},{id:"openaiDefaultTemperature",name:"Default OpenAI Temperature",description:"Default temperature for OpenAI chats (0.0 to 2.0)",type:"text",placeholder:"0.7",group:"OpenAI Defaults"},{id:"openaiDefaultMaxTokens",name:"Default OpenAI Max Tokens",description:"Default max tokens for OpenAI chats",type:"text",placeholder:"400",group:"OpenAI Defaults"},{id:"anthropicUrl",name:"Anthropic API URL",description:`URL for Anthropic API
Default URL: ${st.url}`,type:"text",placeholder:st.url,group:"Anthropic Defaults"},{id:"anthropicDefaultModel",name:"Default Anthropic Model",description:"Default model for Anthropic chats",type:"text",placeholder:"anthropic@claude-3-5-sonnet-20241022",group:"Anthropic Defaults"},{id:"anthropicDefaultTemperature",name:"Default Anthropic Temperature",description:"Default temperature for Anthropic chats (0.0 to 1.0)",type:"text",placeholder:"0.7",group:"Anthropic Defaults"},{id:"anthropicDefaultMaxTokens",name:"Default Anthropic Max Tokens",description:"Default max tokens for Anthropic chats",type:"text",placeholder:"400",group:"Anthropic Defaults"},{id:"geminiUrl",name:"Gemini API URL",description:`URL for Gemini API
Default URL: ${et.url}`,type:"text",placeholder:et.url,group:"Gemini Defaults"},{id:"geminiDefaultModel",name:"Default Gemini Model",description:"Default model for Gemini chats",type:"text",placeholder:"gemini@gemini-1.5-pro",group:"Gemini Defaults"},{id:"geminiDefaultTemperature",name:"Default Gemini Temperature",description:"Default temperature for Gemini chats (0.0 to 2.0)",type:"text",placeholder:"0.7",group:"Gemini Defaults"},{id:"geminiDefaultMaxTokens",name:"Default Gemini Max Tokens",description:"Default max tokens for Gemini chats",type:"text",placeholder:"400",group:"Gemini Defaults"},{id:"openrouterUrl",name:"OpenRouter.ai API URL",description:`URL for OpenRouter.ai API
Default URL: ${Be.url}`,type:"text",placeholder:Be.url,group:"OpenRouter Defaults"},{id:"openrouterDefaultModel",name:"Default OpenRouter Model",description:"Default model for OpenRouter chats",type:"text",placeholder:"openrouter@anthropic/claude-3.5-sonnet",group:"OpenRouter Defaults"},{id:"openrouterDefaultTemperature",name:"Default OpenRouter Temperature",description:"Default temperature for OpenRouter chats (0.0 to 2.0)",type:"text",placeholder:"0.7",group:"OpenRouter Defaults"},{id:"openrouterDefaultMaxTokens",name:"Default OpenRouter Max Tokens",description:"Default max tokens for OpenRouter chats",type:"text",placeholder:"400",group:"OpenRouter Defaults"},{id:"ollamaUrl",name:"Ollama API URL",description:`URL for Ollama API
Default URL: ${Zt.url}`,type:"text",placeholder:Zt.url,group:"Ollama Defaults"},{id:"ollamaDefaultTemperature",name:"Default Ollama Temperature",description:"Default temperature for Ollama chats (0.0 to 2.0)",type:"text",placeholder:"0.7",group:"Ollama Defaults"},{id:"lmstudioUrl",name:"LM Studio API URL",description:`URL for LM Studio API
Default URL: ${Qe.url}`,type:"text",placeholder:Qe.url,group:"LM Studio Defaults"},{id:"lmstudioDefaultTemperature",name:"Default LM Studio Temperature",description:"Default temperature for LM Studio chats (0.0 to 2.0)",type:"text",placeholder:"0.7",group:"LM Studio Defaults"},{id:"chatFolder",name:"Chat Folder",description:"Path to folder for chat files",type:"text",group:"Folders"},{id:"chatTemplateFolder",name:"Chat Template Folder",description:"Path to folder for chat file templates",type:"text",placeholder:"chat-templates",group:"Folders"},{id:"dateFormat",name:"Date Format",description:"Date format for chat files. Valid date blocks are: YYYY, MM, DD, hh, mm, ss",type:"text",placeholder:Oi,group:"Formatting"},{id:"headingLevel",name:"Heading Level",description:`Heading level for messages (example for heading level 2: '## ${fr}${ct}'). Valid heading levels are 0, 1, 2, 3, 4, 5, 6`,type:"text",group:"Formatting"},{id:"enableToolCalling",name:"Enable AI Tool Calling (Experimental, read only)",description:"Privacy Focus: All tool calls require your explicit approval before the LLM sees the data. Allow the AI to use tools: Search files, Read file contents, Web Search (Privacy focused Brave Search API). ",type:"toggle",group:"Tool Calling"},{id:"enableWebSearch",name:"Enable Web Search",description:"Allow the AI to search the web for information using Brave Search. Requires tool calling to be enabled. Requires a free Brave Search API key (1,000 queries/month). Get yours at: https://api.search.brave.com/",type:"toggle",group:"Tool Calling"},{id:"webSearchApiKey",name:"Brave Search API Key",description:"API key for Brave Search.",type:"text",placeholder:"your Brave Search API key",group:"Tool Calling"},{id:"webSearchProvider",name:"Alternative Search Provider",description:"Use a custom search API endpoint instead of Brave Search",type:"dropdown",options:{brave:"Brave Search (Default)",custom:"Custom API Endpoint"},group:"Tool Calling"},{id:"webSearchApiUrl",name:"Custom Search API URL",description:"URL for custom search API endpoint (only when using Custom provider)",type:"text",placeholder:"https://your-search-api.com/search",group:"Tool Calling"},{id:"maxWebSearchResults",name:"Max Web Search Results",description:"Maximum number of search results to return (1-10)",type:"text",placeholder:"5",group:"Tool Calling"},{id:"debugMode",name:"Debug Mode",description:"Enable detailed logging for debugging tool operations. Messages will appear in the console.",type:"toggle",group:"Tool Calling"}],o={};r.forEach(n=>{o[n.group]||(o[n.group]=[]),o[n.group].push(n)}),Object.entries(o).forEach(([n,i])=>{t.createEl("h3",{text:n}),i.forEach(s=>{this.createSettingElement(t,s)}),t.createEl("hr")})}createSettingElement(t,r){let o=new Jl.Setting(t).setName(r.name).setDesc(r.description);r.type==="text"?o.addText(n=>(n.setPlaceholder(r.placeholder||"").setValue(String(this.settingsProvider.settings[r.id])).onChange(async i=>{this.settingsProvider.settings[r.id]=i,await this.settingsProvider.saveSettings()}),n.inputEl.style.width="300px",n)):r.type==="textarea"?o.addTextArea(n=>(n.setPlaceholder(r.placeholder||"").setValue(String(this.settingsProvider.settings[r.id]||r.placeholder)).onChange(async i=>{this.settingsProvider.settings[r.id]=i,await this.settingsProvider.saveSettings()}),n.inputEl.style.width="300px",(r.id==="defaultChatFrontmatter"||r.id==="pluginSystemMessage")&&(n.inputEl.style.height="260px",n.inputEl.style.minHeight="260px"),n)):r.type==="toggle"?o.addToggle(n=>n.setValue(!!this.settingsProvider.settings[r.id]).onChange(async i=>{this.settingsProvider.settings[r.id]=i,await this.settingsProvider.saveSettings()})):r.type==="dropdown"&&r.options&&o.addDropdown(n=>(n.addOptions(r.options||{}),n.setValue(String(this.settingsProvider.settings[r.id])),n.onChange(async i=>{this.settingsProvider.settings[r.id]=i,await this.settingsProvider.saveSettings()}),n.selectEl.style.width="300px",n))}};var C2=`You are an AI assistant integrated into Obsidian through the ChatGPT MD plugin. You are helping a user who is working within their Obsidian vault - a personal knowledge management system where they store notes, thoughts, and information in Markdown format.

Key context:
- The user is writing in Markdown format within Obsidian
- They may reference other notes in their vault using [[wiki links]] or standard [markdown links](url)
- Your responses will be inserted directly into their Markdown document
- Be concise but helpful, and format your responses appropriately for Markdown
- If you provide code examples, use proper markdown code blocks with language specification
- When suggesting organizational strategies, consider that this is within a personal knowledge management context
- The user may be taking notes, brainstorming, writing, researching, or organizing information

Code block formatting requirements:
- Code blocks must start and end with exactly 3 backticks (\`\`\`) on a new line
- There should be no whitespace before the opening or closing backticks
- The language name should be specified immediately after the opening backticks
- The actual code should start on a new line after the language specification
- Example format:
\`\`\`javascript
console.log("Hello World");
\`\`\`

Inline code formatting requirements:
- Use single backticks (\`) for inline code references like filenames (e.g., \`example.md\`), variable names (e.g., \`myVariable\`), or short code snippets referenced within a paragraph.
- Always ensure that single backticks are properly closed to avoid breaking Markdown rendering. For example, use \`code\` not \`code.

Table formatting requirements:
- Use standard Markdown table syntax.
- Tables should NOT be wrapped in code blocks.

Respond naturally and helpfully while being mindful of this Obsidian/note-taking context.`,Bl=class{async migrateSettings(t,r){let o=!1;return o=await this.migrateUrlSettings(t,r)||o,o=await this.migrateFrontmatterSettings(t,r)||o,o=await this.migratePluginSystemMessage(t,r)||o,o}async migrateUrlSettings(t,r){let o=[{setting:"ollamaUrl",pattern:/\/api\/$/,replacement:"",description:"Removing trailing /api/ from Ollama URL",introducedIn:"2.1.3"},{setting:"openrouterUrl",pattern:/\/api\/$/,replacement:"",description:"Removing trailing /api/ from OpenRouter URL",introducedIn:"2.1.3"},{setting:"openaiUrl",pattern:/\/$/,replacement:"",description:"Removing trailing slash from OpenAI URL",introducedIn:"2.1.3"}],n=!1;for(let i of o){let s=i.setting,u=t[s];u&&i.pattern.test(u)&&(r({[s]:u.replace(i.pattern,i.replacement)}),n=!0)}return n}async migrateFrontmatterSettings(t,r){if(t.hasOwnProperty("openaiDefaultModel")||t.hasOwnProperty("anthropicDefaultModel"))return!1;let n={openaiDefaultModel:$e.model,openaiDefaultTemperature:$e.temperature,openaiDefaultTopP:$e.top_p,openaiDefaultMaxTokens:$e.max_tokens,openaiDefaultPresencePenalty:$e.presence_penalty,openaiDefaultFrequencyPenalty:$e.frequency_penalty,anthropicDefaultModel:st.model,anthropicDefaultTemperature:st.temperature,anthropicDefaultMaxTokens:st.max_tokens,geminiDefaultModel:et.model,geminiDefaultTemperature:et.temperature,geminiDefaultTopP:et.top_p,geminiDefaultMaxTokens:et.max_tokens,openrouterDefaultModel:Be.model,openrouterDefaultTemperature:Be.temperature,openrouterDefaultTopP:Be.top_p,openrouterDefaultMaxTokens:Be.max_tokens,openrouterDefaultPresencePenalty:Be.presence_penalty,openrouterDefaultFrequencyPenalty:Be.frequency_penalty,ollamaDefaultTemperature:.7,ollamaDefaultTopP:1,lmstudioDefaultTemperature:Qe.temperature,lmstudioDefaultTopP:Qe.top_p,lmstudioDefaultPresencePenalty:Qe.presence_penalty,lmstudioDefaultFrequencyPenalty:Qe.frequency_penalty};return r({...n}),!0}async migratePluginSystemMessage(t,r){var i;let o=(i=t.pluginSystemMessage)==null?void 0:i.trim(),n=C2.trim();return o!==n?!1:(r({pluginSystemMessage:Ni}),!0)}migrateFrontmatterString(t){let r={"model: gpt-4":"model: ${openaiDefaultModel}","model: gpt-4o":"model: ${openaiDefaultModel}","model: claude-3":"model: ${anthropicDefaultModel}","model: gemini-pro":"model: ${geminiDefaultModel}","temperature: 1":"temperature: ${providerDefaultTemperature}","max_tokens: 300":"max_tokens: ${providerDefaultMaxTokens}"},o=t;for(let[n,i]of Object.entries(r))o=o.replace(new RegExp(n,"g"),i);return o!==t&&(o=`# Migrated frontmatter - consider using provider-specific defaults in settings
${o}`),o}};var Ke=class{static setDebugEnabled(t){this.debugEnabled=t}static isDebugEnabled(){return this.debugEnabled}static debug(t,...r){this.debugEnabled}static info(t,...r){}static warn(t,...r){}static error(t,...r){}};Ke.debugEnabled=!1;var Hl=class{constructor(t,r=new ft,o=new _r(new ft)){this.plugin=t;this.notificationService=r;this.errorService=o;this.migrationService=new Bl,this.settings=structuredClone(tg),this.loadSettings().catch(n=>this.notificationService.showError("Failed to load settings"))}getSettings(){return this.settings}async migrateSettings(){await this.migrationService.migrateSettings(this.settings,this.updateSettings.bind(this))&&await this.saveSettings()}migrateFrontmatterString(t){return this.migrationService.migrateFrontmatterString(t)}async loadSettings(){let t=await this.plugin.loadData();return Object.assign(this.settings,tg,t),Ke.setDebugEnabled(this.settings.debugMode),this.settings}async saveSettings(){await this.plugin.saveData(this.settings),Ke.setDebugEnabled(this.settings.debugMode)}updateSettings(t){Object.assign(this.settings,t)}async addSettingTab(){await this.loadSettings(),this.plugin.addSettingTab(new Gl(this.plugin.app,this.plugin,{settings:this.settings,saveSettings:this.saveSettings.bind(this)}))}};var _T=require("obsidian"),Wl=class{constructor(t,r){this.app=t;this.fileService=r}async searchVault(t,r){var m;let{query:o,limit:n=10}=t,s=o.toLowerCase().split(/\s+/).filter(p=>p.length>0),u=[],c=this.app.vault.getMarkdownFiles(),l=this.app.workspace.getActiveFile(),d=l==null?void 0:l.path;for(let p of c){if((m=r.abortSignal)!=null&&m.aborted)break;if(d&&p.path===d)continue;let g=p.basename.toLowerCase(),h=!1;for(let v of s)if(g.includes(v)){h=!0;break}if(h)u.push({path:p.path,basename:p.basename,matches:1});else{let _=(await this.app.vault.read(p)).toLowerCase();for(let w of s)if(_.includes(w)){u.push({path:p.path,basename:p.basename,matches:1});break}}if(u.length>=Math.min(n,50))break}return u}async readFiles(t,r){var i;let{filePaths:o}=t,n=[];for(let s of o){if((i=r.abortSignal)!=null&&i.aborted)break;let u=this.app.vault.getAbstractFileByPath(s);if(u instanceof _T.TFile)try{let c=await this.app.vault.read(u);n.push({path:u.path,content:c,size:u.stat.size})}catch(c){n.push({path:s,content:`Error reading file: ${c}`,size:0})}else n.push({path:s,content:`File not found: ${s}`,size:0})}return n}};var rg=require("obsidian"),Kl=class{constructor(t){this.notificationService=t}async searchBrave(t,r,o=5){var n,i;try{let s=`https://api.search.brave.com/res/v1/web/search?q=${encodeURIComponent(t)}&count=${o}`;return((i=(n=(await(0,rg.requestUrl)({url:s,method:"GET",headers:{Accept:"application/json","X-Subscription-Token":r}})).json.web)==null?void 0:n.results)==null?void 0:i.map(l=>({title:l.title,url:l.url,snippet:l.description})))||[]}catch(s){return this.notificationService.showWarning("Web search failed. Check your API key."),[]}}async searchCustom(t,r,o,n=5){var i;try{let s=`${r}?q=${encodeURIComponent(t)}&limit=${n}`,u={Accept:"application/json","Content-Type":"application/json"};return o&&(u.Authorization=`Bearer ${o}`),((i=(await(0,rg.requestUrl)({url:s,method:"GET",headers:u})).json.results)==null?void 0:i.slice(0,n).map(d=>({title:d.title||"Untitled",url:d.url||d.link||"",snippet:d.snippet||d.description||""})))||[]}catch(s){return this.notificationService.showWarning("Custom web search failed. Check your endpoint configuration."),[]}}async searchWeb(t,r,o,n){let{query:i,limit:s=5}=t,u=Math.min(s,10);switch(r){case"brave":return o?this.searchBrave(i,o,u):(this.notificationService.showWarning("Brave Search requires an API key. Please configure in settings."),[]);case"custom":return n?this.searchCustom(i,n,o,u):(this.notificationService.showWarning("Custom search requires an API URL. Please configure in settings."),[]);default:return this.notificationService.showWarning("Unknown search provider. Please configure in settings."),[]}}};var Yl=class{constructor(t,r,o,n){this.app=t;this.vaultTools=r;this.webSearchService=o;this.settingsService=n;this.tools=new Map;this.registerDefaultTools()}registerDefaultTools(){let t={description:"Search the Obsidian vault for files by name or content. Returns file paths, names, and content previews. Use this to find relevant notes before reading them.",inputSchema:Er(a.object({query:a.string().describe("The search query to find files. Can be keywords, topics, or phrases to search for in file names and content."),limit:a.number().optional().default(10).describe("Maximum number of search results to return. Default is 10, maximum is 50.")})),execute:async n=>(await this.vaultTools.searchVault(n,{app:this.app,toolCallId:"",messages:[]})).map(s=>({...s,path:`[${s.basename}](${s.path})`}))};this.registerTool("vault_search",t);let r={description:"Read the full contents of specific files from the vault. User will be asked to approve which files to share. Use this after searching to get complete file contents.",inputSchema:Er(a.object({filePaths:a.array(a.string()).describe("Array of file paths to read. Use the paths returned from vault_search.")})),execute:async n=>await this.vaultTools.readFiles(n,{app:this.app,toolCallId:"",messages:[]})};this.registerTool("file_read",r);let o={description:"Search the web for information on a topic. Returns titles, URLs, and snippets from search results. User will be asked to approve which results to share.",inputSchema:Er(a.object({query:a.string().describe("The search query to look up on the web"),limit:a.number().optional().default(5).describe("Maximum number of search results to return. Default is 5, maximum is 10.")})),execute:async n=>{let i=this.settingsService.getSettings();return await this.webSearchService.searchWeb(n,i.webSearchProvider,i.webSearchApiKey,i.webSearchApiUrl)}};this.registerTool("web_search",o)}registerTool(t,r){this.tools.set(t,r)}getTool(t){return this.tools.get(t)}getAllTools(){let t={};return this.tools.forEach((r,o)=>{t[o]=r}),t}getEnabledTools(t){if(!t.enableToolCalling)return;let r={};return r.vault_search=this.tools.get("vault_search"),r.file_read=this.tools.get("file_read"),t.enableWebSearch&&(r.web_search=this.tools.get("web_search")),Object.keys(r).length>0?r:void 0}};var bT=require("obsidian"),Xl=class extends bT.Modal{constructor(r,o,n,i="AI"){super(r);this.toolName=o;this.args=n;this.modelName=i;this.result=null;this.fileSelections=new Map;this.modalPromise=new Promise(s=>{this.resolveModalPromise=s})}onOpen(){let{contentEl:r}=this;r.addClass("tool-approval-modal");let o=r.createEl("h2",{text:this.getToolDisplayName()});if(o.style.marginBottom="12px",o.style.fontWeight="600",this.renderRequestDescription(r),this.toolName==="file_read"&&this.args&&Array.isArray(this.args.filePaths)&&this.renderFileSelection(r,this.args.filePaths),this.toolName==="vault_search"||this.toolName==="web_search"){let u=r.createEl("p",{text:"After the search completes, you'll review and approve the results before they're shared with the AI."});u.style.marginTop="16px",u.style.marginBottom="20px",u.style.padding="12px",u.style.backgroundColor="var(--background-secondary)",u.style.borderRadius="4px",u.style.fontSize="0.9em",u.style.lineHeight="1.4",u.style.opacity="0.85"}let n=r.createDiv();n.style.display="flex",n.style.gap="8px",n.style.justifyContent="flex-end",n.style.marginTop="20px";let i=n.createEl("button",{text:"Cancel"});i.style.padding="8px 16px",i.style.borderRadius="4px",i.style.border="1px solid var(--background-modifier-border)",i.style.backgroundColor="transparent",i.style.cursor="pointer",i.onclick=()=>{this.result={approvalId:this.toolName,approved:!1},this.resolveModalPromise(this.result),this.close()};let s=n.createEl("button",{text:"Approve and Execute"});s.style.padding="8px 16px",s.style.borderRadius="4px",s.style.border="none",s.style.backgroundColor="var(--interactive-accent)",s.style.color="var(--text-on-accent)",s.style.cursor="pointer",s.style.fontWeight="500",s.onclick=()=>{this.result={approvalId:this.toolName,approved:!0,modifiedArgs:this.getModifiedArgs()},this.resolveModalPromise(this.result),this.close()}}renderFileSelection(r,o){let n=r.createEl("p",{text:"Select files to share:"});n.style.marginTop="16px",n.style.marginBottom="8px",n.style.fontWeight="500",n.style.opacity="0.7";let i=r.createDiv();i.style.marginBottom="12px";for(let l of o){this.fileSelections.has(l)||this.fileSelections.set(l,!0);let d=l.split("/").pop()||l,m=this.fileSelections.get(l)||!1,p=i.createDiv();p.style.display="flex",p.style.alignItems="center",p.style.padding="8px",p.style.marginBottom="4px",p.style.borderRadius="4px",p.style.backgroundColor="var(--background-secondary)";let g=p.createEl("input");g.type="checkbox",g.checked=m,g.style.marginRight="8px",g.onchange=()=>{this.fileSelections.set(l,g.checked)};let h=p.createEl("label");h.style.flex="1",h.style.cursor="pointer";let v=h.createEl("div",{text:d});v.style.fontWeight="500",v.style.fontSize="0.95em";let _=h.createEl("div",{text:l});_.style.fontSize="0.85em",_.style.opacity="0.6",_.style.marginTop="2px",h.onclick=()=>{g.checked=!g.checked,this.fileSelections.set(l,g.checked)}}let s=r.createDiv();s.style.display="flex",s.style.gap="8px",s.style.marginBottom="16px";let u=s.createEl("button",{text:"Select All"});u.style.flex="1",u.style.padding="6px 12px",u.style.borderRadius="4px",u.style.border="1px solid var(--background-modifier-border)",u.style.backgroundColor="transparent",u.style.cursor="pointer",u.style.fontSize="0.9em",u.onclick=()=>{o.forEach(d=>this.fileSelections.set(d,!0));let{contentEl:l}=this;l.empty(),this.onOpen()};let c=s.createEl("button",{text:"Deselect All"});c.style.flex="1",c.style.padding="6px 12px",c.style.borderRadius="4px",c.style.border="1px solid var(--background-modifier-border)",c.style.backgroundColor="transparent",c.style.cursor="pointer",c.style.fontSize="0.9em",c.onclick=()=>{o.forEach(d=>this.fileSelections.set(d,!1));let{contentEl:l}=this;l.empty(),this.onOpen()}}getModifiedArgs(){let r=this.args||{};if(this.toolName==="file_read"&&r.filePaths){let o=Array.from(this.fileSelections.entries()).filter(([n,i])=>i).map(([n,i])=>n);return{...r,filePaths:o}}return r}renderRequestDescription(r){var s,u;let o=((s=this.args)==null?void 0:s.query)||"",n=(u=this.args)==null?void 0:u.filePaths,i=r.createEl("p");switch(i.style.marginBottom="8px",i.style.lineHeight="1.5",i.style.fontSize="0.95em",i.appendChild(document.createTextNode(`'${this.modelName}'`)),this.toolName){case"vault_search":i.appendChild(document.createTextNode(" requests to search your vault for:"));break;case"file_read":i.appendChild(document.createTextNode(` requests to read ${(n==null?void 0:n.length)||0} file${(n==null?void 0:n.length)!==1?"s":""}:`));break;case"web_search":i.appendChild(document.createTextNode(" requests to search the web for:"));break;default:i.appendChild(document.createTextNode(" requests to use a tool."))}if((this.toolName==="vault_search"||this.toolName==="web_search")&&o){let c=r.createEl("ul");c.style.margin="0 0 16px 20px",c.style.lineHeight="1.5",c.createEl("li",{text:`"${o}"`})}else if(this.toolName==="file_read"){let c=r.createEl("p",{text:"You can select which files to share on the next screen."});c.style.marginBottom="16px",c.style.opacity="0.7",c.style.fontSize="0.9em"}else{let c=r.createEl("p",{text:""});c.style.marginBottom="16px"}}getToolDisplayName(){return{vault_search:"ChatGPT MD - Vault Search",file_read:"ChatGPT MD - File Read",web_search:"ChatGPT MD - Web Search"}[this.toolName]||this.toolName}getToolPurpose(){return{vault_search:"Search your vault for files matching the query. Returns file names and content previews. The current note is excluded.",file_read:"Read the full contents of the specified files. You can select which files you want to share with the AI.",web_search:"Search the web for information using Brave Search. Returns relevant web pages with titles, URLs, and snippets."}[this.toolName]||"Execute a tool operation."}waitForResult(){return this.modalPromise}onClose(){let{contentEl:r}=this;r.empty(),this.result||this.resolveModalPromise({approvalId:this.toolName,approved:!1})}};var Ql=class{constructor(t,r,o){this.app=t;this.toolRegistry=r;this.notificationService=o}async requestApproval(t){let r=new Xl(this.app,t.toolName,t.args,t.modelName);r.open();let o=await r.waitForResult();return o.approved||this.notificationService.showWarning(`Tool execution cancelled: ${t.toolName}`),o}async executeWithApproval(t,r){let o=await this.requestApproval(t);if(!o.approved)return{error:"User cancelled tool execution"};let n=this.toolRegistry.getTool(t.toolName);if(!n){let s=`Unknown tool: ${t.toolName}`;return this.notificationService.showError(s),{error:s}}let i=o.modifiedArgs||t.args;try{return await n.execute(i,{toolCallId:r.toolCallId,messages:r.messages,abortSignal:r.abortSignal})}catch(s){let u=`Tool execution error: ${s}`;return this.notificationService.showError(u),{error:String(s)}}}};var ST=require("obsidian");var xT=require("obsidian"),eu=class extends xT.Modal{constructor(r,o,n,i="AI"){super(r);this.query=o;this.results=n;this.modelName=i;this.result=null;this.resultSelections=new Map;this.modalPromise=new Promise(s=>{this.resolveModalPromise=s})}onOpen(){let{contentEl:r}=this;r.addClass("search-results-approval-modal");let o=r.createEl("h2",{text:"ChatGPT MD - Vault Search Results"});o.style.marginBottom="12px",o.style.fontWeight="600";let n=r.createEl("p",{text:`${this.results.length} result${this.results.length!==1?"s":""} have been found and can be shared with '${this.modelName}'.`});n.style.marginBottom="16px",n.style.lineHeight="1.5",n.style.fontSize="0.95em";let i=r.createEl("p",{text:"Select which files to share:"});i.style.marginTop="8px",i.style.marginBottom="8px",i.style.fontWeight="500",i.style.opacity="0.7";let s=r.createDiv();s.style.marginBottom="12px";for(let h of this.results){this.resultSelections.has(h.path)||this.resultSelections.set(h.path,!0);let v=this.resultSelections.get(h.path)||!1,_=h.path,w=h.path.match(/\]\((.*?)\)$/);w&&(_=w[1]);let x=s.createDiv();x.style.display="flex",x.style.alignItems="center",x.style.padding="8px",x.style.marginBottom="4px",x.style.borderRadius="4px",x.style.backgroundColor="var(--background-secondary)";let f=x.createEl("input");f.type="checkbox",f.checked=v,f.style.marginRight="8px",f.onchange=()=>{this.resultSelections.set(h.path,f.checked)};let b=x.createEl("label");b.style.flex="1",b.style.cursor="pointer";let y=b.createEl("div",{text:h.basename});y.style.fontWeight="500",y.style.fontSize="0.95em";let k=b.createEl("div",{text:_});k.style.fontSize="0.85em",k.style.opacity="0.6",k.style.marginTop="2px",b.onclick=()=>{f.checked=!f.checked,this.resultSelections.set(h.path,f.checked)}}let u=r.createDiv();u.style.display="flex",u.style.gap="8px",u.style.marginBottom="16px";let c=u.createEl("button",{text:"Select All"});c.style.flex="1",c.style.padding="6px 12px",c.style.borderRadius="4px",c.style.border="1px solid var(--background-modifier-border)",c.style.backgroundColor="transparent",c.style.cursor="pointer",c.style.fontSize="0.9em",c.onclick=()=>{this.results.forEach(v=>this.resultSelections.set(v.path,!0));let{contentEl:h}=this;h.empty(),this.onOpen()};let l=u.createEl("button",{text:"Deselect All"});l.style.flex="1",l.style.padding="6px 12px",l.style.borderRadius="4px",l.style.border="1px solid var(--background-modifier-border)",l.style.backgroundColor="transparent",l.style.cursor="pointer",l.style.fontSize="0.9em",l.onclick=()=>{this.results.forEach(v=>this.resultSelections.set(v.path,!1));let{contentEl:h}=this;h.empty(),this.onOpen()};let d=r.createEl("p",{text:"You control what data is shared. The AI will only know about files you select. Deselected files remain private."});d.style.marginTop="16px",d.style.marginBottom="20px",d.style.padding="12px",d.style.backgroundColor="var(--background-secondary)",d.style.borderRadius="6px",d.style.fontSize="0.9em",d.style.lineHeight="1.4",d.style.opacity="0.85";let m=r.createDiv();m.style.display="flex",m.style.gap="8px",m.style.justifyContent="flex-end",m.style.marginTop="20px";let p=m.createEl("button",{text:"Cancel"});p.style.padding="8px 16px",p.style.borderRadius="4px",p.style.border="1px solid var(--background-modifier-border)",p.style.backgroundColor="transparent",p.style.cursor="pointer",p.onclick=()=>{this.result={approved:!1,approvedResults:[]},this.resolveModalPromise(this.result),this.close()};let g=m.createEl("button",{text:"Approve and Continue"});g.style.padding="8px 16px",g.style.borderRadius="4px",g.style.border="none",g.style.backgroundColor="var(--interactive-accent)",g.style.color="var(--text-on-accent)",g.style.cursor="pointer",g.style.fontWeight="500",g.onclick=()=>{this.result={approved:!0,approvedResults:this.getApprovedResults()},this.resolveModalPromise(this.result),this.close()}}getApprovedResults(){return this.results.filter(o=>this.resultSelections.get(o.path)===!0)}waitForResult(){return this.modalPromise}onClose(){let{contentEl:r}=this;r.empty(),this.result||this.resolveModalPromise({approved:!1,approvedResults:[]})}};var wT=require("obsidian"),tu=class extends wT.Modal{constructor(r,o,n,i="AI"){super(r);this.query=o;this.results=n;this.modelName=i;this.resolvePromise=null;this.selectedResults=new Map(n.map(s=>[s.url,!0]))}onOpen(){var h;let{contentEl:r}=this;r.addClass("websearch-approval-modal");let o=r.createEl("h2",{text:"ChatGPT MD - Web Search Results"});o.style.marginBottom="12px",o.style.fontWeight="600";let n=r.createEl("p",{text:`${this.results.length} result${this.results.length!==1?"s":""} have been found and can be shared with '${this.modelName}'.`});n.style.marginBottom="16px",n.style.lineHeight="1.5",n.style.fontSize="0.95em";let i=r.createEl("p",{text:"Select which results to share:"});i.style.marginTop="8px",i.style.marginBottom="8px",i.style.fontWeight="500",i.style.opacity="0.7";let s=r.createDiv();s.style.marginBottom="12px";for(let v of this.results){let _=(h=this.selectedResults.get(v.url))!=null?h:!0,w=s.createDiv();w.style.display="flex",w.style.alignItems="flex-start",w.style.padding="8px",w.style.marginBottom="8px",w.style.borderRadius="4px",w.style.backgroundColor="var(--background-secondary)",w.style.gap="8px";let x=w.createEl("input");x.type="checkbox",x.checked=_,x.style.marginTop="2px",x.style.flexShrink="0",x.onchange=()=>{this.selectedResults.set(v.url,x.checked)};let f=w.createEl("label");f.style.flex="1",f.style.cursor="pointer",f.style.display="flex",f.style.flexDirection="column",f.style.gap="4px";let b=f.createEl("div",{text:v.title});b.style.fontWeight="500",b.style.fontSize="0.95em";let y=f.createEl("a",{text:v.url,href:v.url});if(y.style.fontSize="0.8em",y.style.opacity="0.6",y.setAttr("target","_blank"),v.snippet){let k=f.createEl("div",{text:v.snippet.substring(0,150)+(v.snippet.length>150?"...":"")});k.style.fontSize="0.85em",k.style.opacity="0.7",k.style.lineHeight="1.3"}f.onclick=()=>{x.checked=!x.checked,this.selectedResults.set(v.url,x.checked)}}let u=r.createDiv();u.style.display="flex",u.style.gap="8px",u.style.marginBottom="16px";let c=u.createEl("button",{text:"Select All"});c.style.flex="1",c.style.padding="6px 12px",c.style.borderRadius="4px",c.style.border="1px solid var(--background-modifier-border)",c.style.backgroundColor="transparent",c.style.cursor="pointer",c.style.fontSize="0.9em",c.onclick=()=>{this.results.forEach(_=>this.selectedResults.set(_.url,!0));let{contentEl:v}=this;v.empty(),this.onOpen()};let l=u.createEl("button",{text:"Deselect All"});l.style.flex="1",l.style.padding="6px 12px",l.style.borderRadius="4px",l.style.border="1px solid var(--background-modifier-border)",l.style.backgroundColor="transparent",l.style.cursor="pointer",l.style.fontSize="0.9em",l.onclick=()=>{this.results.forEach(_=>this.selectedResults.set(_.url,!1));let{contentEl:v}=this;v.empty(),this.onOpen()};let d=r.createEl("p",{text:"You control what data is shared. Only selected results will be visible to the AI. Deselected results remain private."});d.style.marginTop="16px",d.style.marginBottom="20px",d.style.padding="12px",d.style.backgroundColor="var(--background-secondary)",d.style.borderRadius="6px",d.style.fontSize="0.9em",d.style.lineHeight="1.4",d.style.opacity="0.85";let m=r.createDiv();m.style.display="flex",m.style.gap="8px",m.style.justifyContent="flex-end",m.style.marginTop="20px";let p=m.createEl("button",{text:"Cancel"});p.style.padding="8px 16px",p.style.borderRadius="4px",p.style.border="1px solid var(--background-modifier-border)",p.style.backgroundColor="transparent",p.style.cursor="pointer",p.onclick=()=>{var v;(v=this.resolvePromise)==null||v.call(this,{approved:!1,approvedResults:[]}),this.close()};let g=m.createEl("button",{text:"Share Selected Results"});g.style.padding="8px 16px",g.style.borderRadius="4px",g.style.border="none",g.style.backgroundColor="var(--interactive-accent)",g.style.color="var(--text-on-accent)",g.style.cursor="pointer",g.style.fontWeight="500",g.onclick=()=>{var _;let v=this.getApprovedResults();(_=this.resolvePromise)==null||_.call(this,{approved:!0,approvedResults:v}),this.close()}}getApprovedResults(){return this.results.filter(r=>this.selectedResults.get(r.url)===!0)}onClose(){let{contentEl:r}=this;r.empty(),this.resolvePromise&&this.resolvePromise({approved:!1,approvedResults:[]})}waitForResult(){return new Promise(r=>{this.resolvePromise=r})}};var ru=class{constructor(t,r,o){this.app=t;this.toolRegistry=r;this.toolExecutor=o;this.toolResultHandlers={vault_search:this.handleVaultSearchResult.bind(this),file_read:this.handleFileReadResult.bind(this),web_search:this.handleWebSearchResult.bind(this)}}setApprovalHandler(t){this.approvalHandler=t}getToolsForRequest(t){return this.toolRegistry.getEnabledTools(t)}async requestSearchResultsApproval(t,r,o){Ke.debug(`Requesting approval for search results: "${t}" (${r.length} results)`);let n=new eu(this.app,t,r,o);n.open();let i=await n.waitForResult();return i.approved?(Ke.debug(`User approved ${i.approvedResults.length} of ${r.length} search results`),i.approvedResults):(Ke.debug("Search results approval cancelled by user"),[])}async requestWebSearchResultsApproval(t,r,o){Ke.debug(`Requesting approval for web search results: "${t}" (${r.length} results)`);let n=new tu(this.app,t,r,o);n.open();let i=await n.waitForResult();return i.approved?(Ke.debug(`User approved ${i.approvedResults.length} of ${r.length} web search results`),i.approvedResults):(Ke.debug("Web search results approval cancelled by user"),[])}async readFilesFromSearchResults(t){var o;let r=[];Ke.debug(`readFilesFromSearchResults called with ${t.length} results`);for(let n of t)try{let i=n.path,s=i.match(/\]\((.*?)\)$/);s&&(i=s[1],Ke.debug(`Extracted actual path from markdown link: ${i}`)),Ke.debug(`Attempting to read file: ${i}`);let u=this.app.vault.getAbstractFileByPath(i);if(Ke.debug("getAbstractFileByPath returned:",u),u instanceof ST.TFile){Ke.debug("File is TFile, reading content...");let c=await this.app.vault.read(u);Ke.debug(`Successfully read ${c.length} characters from ${i}`),r.push({path:i,content:c})}else Ke.debug(`File is not TFile instance. Type: ${typeof u}, Constructor: ${(o=u==null?void 0:u.constructor)==null?void 0:o.name}`)}catch(i){Ke.error(`Error reading file ${n.path}:`,i)}return Ke.debug(`readFilesFromSearchResults completed: read ${r.length} files`),r}async handleVaultSearchResult(t,r,o,n,i){var c;let s=t.result;if(!Array.isArray(s)){o.push(t);return}let u=((c=r==null?void 0:r.input)==null?void 0:c.query)||"unknown";if(s.length>0){let l=await this.requestSearchResultsApproval(u,s,i);if(o.push({...t,result:l}),l.length>0){let d=await this.readFilesFromSearchResults(l);for(let m of d)n.push({role:"user",content:`[vault_search result]

File: ${m.path}

${m.content}`})}else n.push({role:"user",content:`[vault_search result - no files found]

The search for "${u}" returned no results. Try searching with different keywords or single words.`})}else o.push(t),n.push({role:"user",content:`[vault_search result - no files found]

The search for "${u}" returned no results. Try searching with different keywords or single words.`})}async handleFileReadResult(t,r,o,n,i){let s=t.result;if(!(!Array.isArray(s)||s.length===0)){o.push(t);for(let u of s)u.content&&typeof u.content=="string"&&n.push({role:"user",content:`[file_read result]

File: ${u.path}

${u.content}`})}}async handleWebSearchResult(t,r,o,n,i){var c;let s=t.result;if(!Array.isArray(s)){o.push(t);return}let u=((c=r==null?void 0:r.input)==null?void 0:c.query)||"unknown";if(s.length>0){let l=await this.requestWebSearchResultsApproval(u,s,i);if(o.push({...t,result:l}),l.length>0)for(let d of l)n.push({role:"user",content:`[web_search result]

Title: ${d.title}
URL: ${d.url}

${d.content||d.snippet}`});else n.push({role:"user",content:`[web_search result - no results selected]

The web search for "${u}" returned results, but none were approved for sharing.`})}else o.push(t),n.push({role:"user",content:`[web_search result - no results found]

The web search for "${u}" returned no results. Try different search terms.`})}async processToolResults(t,r,o){let n=[],i=[];for(let s of r){let u=t.find(d=>(d.toolCallId||d.id||"unknown")===s.toolCallId),c=u==null?void 0:u.toolName,l=this.toolResultHandlers[c];l?await l(s,u,i,n,o):i.push(s)}return{filteredResults:i,contextMessages:n}}async handleToolCalls(t,r){let o=[];for(let n of t){Ke.debug("Tool call structure:",JSON.stringify(n,null,2));let i=n.toolName||n.name||n.tool,s=n.args||n.input||n.arguments||{},u=n.toolCallId||n.id||"unknown",c=await this.toolExecutor.requestApproval({toolCallId:u,toolName:i,args:s,modelName:r});if(!c.approved){o.push({toolCallId:u,result:{error:"User declined tool execution"}});continue}try{let l=this.toolRegistry.getTool(i);if(!l||!l.execute){o.push({toolCallId:u,result:{error:"Tool not found or has no execute function"}});continue}let d=c.modifiedArgs||s;Ke.debug(`Tool "${i}" executing with args:`,JSON.stringify(d,null,2));let m=await l.execute(d,{app:this.app,toolCallId:u,messages:[]});o.push({toolCallId:u,result:m})}catch(l){o.push({toolCallId:u,result:{error:`Tool execution failed: ${l}`}})}}return o}};var P2=new Map([[Ie,Tl],[Ze,Ul],[qe,Zl],[Me,El],[Le,zl],[Ee,Dl]]),nu=class{constructor(t,r){this.app=t,this.plugin=r,this.initializeServices()}initializeServices(){this.notificationService=new ft,this.errorService=new _r(this.notificationService),this.apiService=new Wn(this.errorService,this.notificationService),this.apiAuthService=new yr(this.notificationService),this.apiResponseParser=new an(this.notificationService),this.fileService=new Vn(this.app),this.frontmatterManager=new Gn(this.app),this.editorContentService=new Jn(this.app),this.messageService=new Bn(this.fileService,this.notificationService),this.frontmatterService=new ql(this.app,this.frontmatterManager),this.templateService=new Hn(this.app,this.fileService,this.editorContentService),this.editorService=new Vl(this.app,this.fileService,this.editorContentService,this.messageService,this.templateService,this.frontmatterService),this.settingsService=new Hl(this.plugin,this.notificationService,this.errorService),this.webSearchService=new Kl(this.notificationService),this.vaultTools=new Wl(this.app,this.fileService),this.toolRegistry=new Yl(this.app,this.vaultTools,this.webSearchService,this.settingsService),this.toolExecutor=new Ql(this.app,this.toolRegistry,this.notificationService),this.toolService=new ru(this.app,this.toolRegistry,this.toolExecutor)}getAiApiService(t){let r=P2.get(t);if(!r)throw new Error(`Unknown AI service type: ${t}`);return new r}getFileService(){return this.fileService}getEditorContentService(){return this.editorContentService}getMessageService(){return this.messageService}getTemplateService(){return this.templateService}getFrontmatterManager(){return this.frontmatterManager}getFrontmatterService(){return this.frontmatterService}getEditorService(){return this.editorService}getNotificationService(){return this.notificationService}getErrorService(){return this.errorService}getApiService(){return this.apiService}getApiAuthService(){return this.apiAuthService}getApiResponseParser(){return this.apiResponseParser}getSettingsService(){return this.settingsService}getToolService(){return this.toolService}getToolRegistry(){return this.toolRegistry}getVaultTools(){return this.vaultTools}getToolExecutor(){return this.toolExecutor}getWebSearchService(){return this.webSearchService}};var jr=require("obsidian");var Si=require("obsidian"),ki=class extends Si.SuggestModal{constructor(t,r,o,n=[]){super(t),this.modelNames=n,this.editor=r,this.editorService=o,this.limit=this.modelNames.length,this.modelNames.length>0?this.setPlaceholder("Select Large Language Model"):this.setPlaceholder("Loading available models...")}getSuggestions(t){return this.modelNames.filter(r=>r.toLowerCase().includes(t.toLowerCase()))}renderSuggestion(t,r){r.createEl("div",{text:t})}async onChooseSuggestion(t,r){if(!(this.modelNames.indexOf(t)===-1||this.modelNames.length===0)){new Si.Notice(`Selected model: ${t}`);try{await this.editorService.setModel(this.editor,t)}catch(o){new Si.Notice(`Error setting model: ${o.message}`)}}}};var ou=class{constructor(t,r,o){this.aiService=null;this.availableModels=[];this.plugin=t,this.serviceLocator=r,this.settingsService=o,this.statusBarItemEl=t.addStatusBarItem(),this.apiAuthService=new yr}registerCommands(){this.registerChatCommand(),this.registerSelectModelCommand(),this.registerAddDividerCommand(),this.registerAddCommentBlockCommand(),this.registerStopStreamingCommand(),this.registerInferTitleCommand(),this.registerMoveToNewChatCommand(),this.registerChooseChatTemplateCommand(),this.registerClearChatCommand()}registerChatCommand(){this.plugin.addCommand({id:pg,name:"Chat",icon:"message-circle",editorCallback:async(t,r)=>{var s;let o=this.serviceLocator.getEditorService(),n=this.settingsService.getSettings(),i=await o.getFrontmatter(r,n,this.plugin.app);this.aiService=this.serviceLocator.getAiApiService(i.aiService);try{let{messagesWithRole:u,messages:c}=await o.getMessagesFromEditor(t,n);n.generateAtCursor||o.moveCursorToEnd(t),jr.Platform.isMobile?new jr.Notice(`[ChatGPT MD] Calling ${i.model}`):this.updateStatusBar(`Calling ${i.model}`);let l=this.apiAuthService.getApiKey(n,i.aiService),d=n.enableToolCalling?this.serviceLocator.getToolService():void 0,m=await this.aiService.callAIAPI(u,i,vr(n.headingLevel),this.getAiApiUrls(i)[i.aiService],t,n.generateAtCursor,l,n,d);if(o.processResponse(t,m,n),n.autoInferTitle&&Pg((s=r==null?void 0:r.file)==null?void 0:s.basename,n.dateFormat)&&u.length>Ig){let p={...i,openrouterApiKey:this.apiAuthService.getApiKey(n,Ee),url:this.getAiApiUrls(i)[i.aiService]};if(!p.model){if(i.aiService===Ie)p.model=$e.model;else if(i.aiService===Ee)p.model=Be.model;else if(i.aiService===Ze)p.model=st.model;else if(i.aiService===qe)p.model=et.model;else if(i.aiService===Me||i.aiService===Le){new jr.Notice(`Auto title inference skipped: No model configured for ${i.aiService}. Please set a model in settings.`,6e3);return}}await this.aiService.inferTitle(r,p,c,o)}}catch(u){jr.Platform.isMobile&&new jr.Notice(`[ChatGPT MD] Calling ${i.model}. `+u,9e3)}this.updateStatusBar("")}})}registerSelectModelCommand(){this.plugin.addCommand({id:"select-model-command",name:"Select Model",icon:"list",editorCallback:async(t,r)=>{let o=this.serviceLocator.getEditorService(),n=this.settingsService.getSettings(),i=new ki(this.plugin.app,t,o,this.availableModels);i.open(),(async()=>{try{let s=await o.getFrontmatter(r,n,this.plugin.app),u=this.apiAuthService.getApiKey(n,Ie),c=this.apiAuthService.getApiKey(n,Ee),l={[Ie]:s.openaiUrl||n.openaiUrl||$e.url,[Ee]:s.openrouterUrl||n.openrouterUrl||Be.url,[Me]:s.ollamaUrl||n.ollamaUrl||Zt.url,[Le]:s.lmstudioUrl||n.lmstudioUrl||Qe.url,[Ze]:s.anthropicUrl||n.anthropicUrl||st.url,[qe]:s.geminiUrl||n.geminiUrl||et.url},d=await this.fetchAvailableModels(l,u,c),m=new Set(this.availableModels),p=new Set(d);(this.availableModels.length!==d.length||![...m].every(h=>p.has(h))||![...p].every(h=>m.has(h)))&&d.length>0&&(this.availableModels=d,i.close(),new ki(this.plugin.app,t,o,this.availableModels).open())}catch(s){}})()}})}registerAddDividerCommand(){this.plugin.addCommand({id:dg,name:"Add divider",icon:"minus",editorCallback:async(t,r)=>{let o=this.serviceLocator.getEditorService(),n=this.settingsService.getSettings();o.addHorizontalRule(t,ct,n.headingLevel)}})}registerAddCommentBlockCommand(){this.plugin.addCommand({id:cg,name:"Add comment block",icon:"comment",editorCallback:(t,r)=>{let o=t.getCursor(),n=o.line,i=o.ch,s=`${xg}${at}${wg}`;t.replaceRange(s,o);let u={line:n+1,ch:i};t.setCursor(u)}})}registerStopStreamingCommand(){this.plugin.addCommand({id:mg,name:"Stop streaming",icon:"octagon",callback:()=>{this.aiService&&"stopStreaming"in this.aiService?this.aiService.stopStreaming():this.serviceLocator.getNotificationService().showWarning("No active streaming request to stop")}})}registerInferTitleCommand(){this.plugin.addCommand({id:gg,name:"Infer title",icon:"subtitles",editorCallback:async(t,r)=>{let o=this.serviceLocator.getEditorService(),n=this.settingsService.getSettings(),i=await o.getFrontmatter(r,n,this.plugin.app);if(this.aiService=this.serviceLocator.getAiApiService(i.aiService),!i.model)return;this.updateStatusBar(`Calling ${i.model}`);let{messages:s}=await o.getMessagesFromEditor(t,n),u={...n,...i,openrouterApiKey:this.apiAuthService.getApiKey(n,Ee),url:this.getAiApiUrls(i)[i.aiService]};await this.aiService.inferTitle(r,u,s,o),this.updateStatusBar("")}})}registerMoveToNewChatCommand(){this.plugin.addCommand({id:fg,name:"Create new chat with highlighted text",icon:"highlighter",editorCallback:async(t,r)=>{let o=this.serviceLocator.getEditorService(),n=this.settingsService.getSettings();try{await o.createNewChatWithHighlightedText(t,n)}catch(i){new jr.Notice("[ChatGPT MD] Error in Create new chat with highlighted text, check console")}}})}registerChooseChatTemplateCommand(){this.plugin.addCommand({id:hg,name:"Create new chat from template",icon:"layout-template",callback:async()=>{let t=this.serviceLocator.getEditorService(),r=this.settingsService.getSettings();if(r.dateFormat){await t.createNewChatFromTemplate(r,t.getDate(new Date,r.dateFormat));return}new jr.Notice("date format cannot be empty in your ChatGPT MD settings. You can choose something like YYYYMMDDhhmmss")}})}registerClearChatCommand(){this.plugin.addCommand({id:vg,name:"Clear chat (except frontmatter)",icon:"trash",editorCallback:async(t,r)=>{await this.serviceLocator.getEditorService().clearChat(t)}})}getAiApiUrls(t){return{openai:t.openaiUrl||$e.url,openrouter:t.openrouterUrl||Be.url,ollama:t.ollamaUrl||Zt.url,lmstudio:t.lmstudioUrl||Qe.url,anthropic:t.anthropicUrl||st.url,gemini:t.geminiUrl||et.url}}async initializeAvailableModels(){try{let t=this.settingsService.getSettings(),r=this.apiAuthService.getApiKey(t,Ie),o=this.apiAuthService.getApiKey(t,Ee),n={[Ie]:t.openaiUrl||$e.url,[Ee]:t.openrouterUrl||Be.url,[Me]:t.ollamaUrl||Zt.url,[Le]:t.lmstudioUrl||Qe.url,[Ze]:t.anthropicUrl||st.url,[qe]:t.geminiUrl||et.url};this.availableModels=await this.fetchAvailableModels(n,r,o)}catch(t){this.availableModels=[]}}async fetchAvailableModels(t,r,o){function n(i,s,u){return Promise.race([i,new Promise(c=>setTimeout(()=>c(u),s))])}try{let i=[],s=this.serviceLocator.getAiApiService(Me),u=this.serviceLocator.getAiApiService(Le),c=this.serviceLocator.getAiApiService(Ie),l=this.serviceLocator.getAiApiService(Ee),d=this.serviceLocator.getAiApiService(Ze),m=this.serviceLocator.getAiApiService(qe);i.push(n(s.fetchAvailableModels(t[Me]),Tn,[])),i.push(n(u.fetchAvailableModels(t[Le]),Tn,[])),rt(r)&&i.push(n(c.fetchAvailableModels(t[Ie],r),Tn,[])),rt(o)&&i.push(n(l.fetchAvailableModels(t[Ee],o),Tn,[]));let p=this.apiAuthService.getApiKey(this.settingsService.getSettings(),Ze);rt(p)&&i.push(n(d.fetchAvailableModels(t[Ze],p),Tn,[]));let g=this.apiAuthService.getApiKey(this.settingsService.getSettings(),qe);return rt(g)&&i.push(n(m.fetchAvailableModels(t[qe],g),Tn,[])),(await Promise.all(i)).flat()}catch(i){return new jr.Notice("Error fetching models: "+(i instanceof Error?i.message:String(i))),[]}}updateStatusBar(t){this.statusBarItemEl.setText(`[ChatGPT MD] ${t}`)}};var au=class extends kT.Plugin{async onload(){this.serviceLocator=new nu(this.app,this);let t=this.serviceLocator.getSettingsService();await t.loadSettings(),await t.migrateSettings(),await t.addSettingTab(),this.commandRegistry=new ou(this,this.serviceLocator,t),this.commandRegistry.registerCommands(),this.commandRegistry.initializeAvailableModels().catch(r=>{})}};

/* nosourcemap */